/*
 MediaPlayer.ONE
 Version 2.2.5
 Updated Time: May 06, 2019 18h
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(C,u,y){C!=Array.prototype&&C!=Object.prototype&&(C[u]=y.value)};$jscomp.getGlobal=function(C){return"undefined"!=typeof window&&window===C?C:"undefined"!=typeof global&&null!=global?global:C};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var C=0;return function(u){return $jscomp.SYMBOL_PREFIX+(u||"")+C++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var C=$jscomp.global.Symbol.iterator;C||(C=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[C]&&$jscomp.defineProperty(Array.prototype,C,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var C=$jscomp.global.Symbol.asyncIterator;C||(C=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(C){var u=0;return $jscomp.iteratorPrototype(function(){return u<C.length?{done:!1,value:C[u++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(C){$jscomp.initSymbolIterator();C={next:C};C[$jscomp.global.Symbol.iterator]=function(){return this};return C};$jscomp.iteratorFromArray=function(C,u){$jscomp.initSymbolIterator();C instanceof String&&(C+="");var y=0,w={next:function(){if(y<C.length){var h=y++;return{value:u(h,C[h]),done:!1}}w.next=function(){return{done:!0,value:void 0}};return w.next()}};w[Symbol.iterator]=function(){return w};return w};
$jscomp.polyfill=function(C,u,y,w){if(u){y=$jscomp.global;C=C.split(".");for(w=0;w<C.length-1;w++){var h=C[w];h in y||(y[h]={});y=y[h]}C=C[C.length-1];w=y[C];u=u(w);u!=w&&null!=u&&$jscomp.defineProperty(y,C,{configurable:!0,writable:!0,value:u})}};$jscomp.polyfill("Array.prototype.keys",function(C){return C?C:function(){return $jscomp.iteratorFromArray(this,function(u){return u})}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var C={},u=Object.create(new $jscomp.global.Proxy(C,{get:function(y,w,h){return y==C&&"q"==w&&h==u}}));return!0===u.q}catch(y){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.makeIterator=function(C){$jscomp.initSymbolIterator();var u=C[Symbol.iterator];return u?u.call(C):$jscomp.arrayIterator(C)};
$jscomp.owns=function(C,u){return Object.prototype.hasOwnProperty.call(C,u)};
$jscomp.polyfill("WeakMap",function(C){function u(){if(!C||!Object.seal)return!1;try{var d=Object.seal({}),m=Object.seal({}),q=new C([[d,2],[m,3]]);if(2!=q.get(d)||3!=q.get(m))return!1;q.delete(d);q.set(m,4);return!q.has(d)&&4==q.get(m)}catch(x){return!1}}function y(d){$jscomp.owns(d,h)||$jscomp.defineProperty(d,h,{value:{}})}function w(d){var m=Object[d];m&&(Object[d]=function(d){y(d);return m(d)})}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(C&&$jscomp.ES6_CONFORMANCE)return C}else if(u())return C;
var h="$jscomp_hidden_"+Math.random();w("freeze");w("preventExtensions");w("seal");var d=0,q=function(q){this.id_=(d+=Math.random()+1).toString();if(q){$jscomp.initSymbol();$jscomp.initSymbolIterator();q=$jscomp.makeIterator(q);for(var m;!(m=q.next()).done;)m=m.value,this.set(m[0],m[1])}};q.prototype.set=function(d,m){y(d);if(!$jscomp.owns(d,h))throw Error("WeakMap key fail: "+d);d[h][this.id_]=m;return this};q.prototype.get=function(d){return $jscomp.owns(d,h)?d[h][this.id_]:void 0};q.prototype.has=
function(d){return $jscomp.owns(d,h)&&$jscomp.owns(d[h],this.id_)};q.prototype.delete=function(d){return $jscomp.owns(d,h)&&$jscomp.owns(d[h],this.id_)?delete d[h][this.id_]:!1};return q},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(C){function u(){if($jscomp.ASSUME_NO_NATIVE_MAP||!C||"function"!=typeof C||!C.prototype.entries||"function"!=typeof Object.seal)return!1;try{var m=Object.seal({x:4}),d=new C($jscomp.makeIterator([[m,"s"]]));if("s"!=d.get(m)||1!=d.size||d.get({x:4})||d.set({x:4},"t")!=d||2!=d.size)return!1;var q=d.entries(),h=q.next();if(h.done||h.value[0]!=m||"s"!=h.value[1])return!1;h=q.next();return h.done||4!=h.value[0].x||"t"!=h.value[1]||!q.next().done?!1:!0}catch(H){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(C&&$jscomp.ES6_CONFORMANCE)return C}else if(u())return C;$jscomp.initSymbol();$jscomp.initSymbolIterator();var y=new WeakMap,w=function(d){this.data_={};this.head_=q();this.size=0;if(d){d=$jscomp.makeIterator(d);for(var m;!(m=d.next()).done;)m=m.value,this.set(m[0],m[1])}};w.prototype.set=function(d,q){d=0===d?0:d;var m=h(this,d);m.list||(m.list=this.data_[m.id]=[]);m.entry?m.entry.value=q:(m.entry={next:this.head_,previous:this.head_.previous,head:this.head_,
key:d,value:q},m.list.push(m.entry),this.head_.previous.next=m.entry,this.head_.previous=m.entry,this.size++);return this};w.prototype.delete=function(d){d=h(this,d);return d.entry&&d.list?(d.list.splice(d.index,1),d.list.length||delete this.data_[d.id],d.entry.previous.next=d.entry.next,d.entry.next.previous=d.entry.previous,d.entry.head=null,this.size--,!0):!1};w.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=q();this.size=0};w.prototype.has=function(d){return!!h(this,d).entry};
w.prototype.get=function(d){return(d=h(this,d).entry)&&d.value};w.prototype.entries=function(){return d(this,function(d){return[d.key,d.value]})};w.prototype.keys=function(){return d(this,function(d){return d.key})};w.prototype.values=function(){return d(this,function(d){return d.value})};w.prototype.forEach=function(d,q){for(var m=this.entries(),h;!(h=m.next()).done;)h=h.value,d.call(q,h[1],h[0],this)};w.prototype[Symbol.iterator]=w.prototype.entries;var h=function(d,q){var h=q&&typeof q;"object"==
h||"function"==h?y.has(q)?h=y.get(q):(h=""+ ++B,y.set(q,h)):h="p_"+q;var m=d.data_[h];if(m&&$jscomp.owns(d.data_,h))for(d=0;d<m.length;d++){var v=m[d];if(q!==q&&v.key!==v.key||q===v.key)return{id:h,list:m,index:d,entry:v}}return{id:h,list:m,index:-1,entry:void 0}},d=function(d,q){var h=d.head_;return $jscomp.iteratorPrototype(function(){if(h){for(;h.head!=d.head_;)h=h.previous;for(;h.next!=h.head;)return h=h.next,{done:!1,value:q(h)};h=null}return{done:!0,value:void 0}})},q=function(){var d={};return d.previous=
d.next=d.head=d},B=0;return w},"es6","es3");$jscomp.polyfill("Array.prototype.fill",function(C){return C?C:function(u,y,w){var h=this.length||0;0>y&&(y=Math.max(0,h+y));if(null==w||w>h)w=h;w=Number(w);0>w&&(w=Math.max(0,h+w));for(y=Number(y||0);y<w;y++)this[y]=u;return this}},"es6","es3");$jscomp.polyfill("Array.prototype.values",function(C){return C?C:function(){return $jscomp.iteratorFromArray(this,function(u,y){return y})}},"es8","es3");
$jscomp.assign="function"==typeof Object.assign?Object.assign:function(C,u){for(var y=1;y<arguments.length;y++){var w=arguments[y];if(w)for(var h in w)$jscomp.owns(w,h)&&(C[h]=w[h])}return C};$jscomp.polyfill("Object.assign",function(C){return C||$jscomp.assign},"es6","es3");$jscomp.polyfill("Array.prototype.entries",function(C){return C?C:function(){return $jscomp.iteratorFromArray(this,function(u,y){return[u,y]})}},"es6","es3");
$jscomp.findInternal=function(C,u,y){C instanceof String&&(C=String(C));for(var w=C.length,h=0;h<w;h++){var d=C[h];if(u.call(y,d,h,C))return{i:h,v:d}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(C){return C?C:function(u,y){return $jscomp.findInternal(this,u,y).v}},"es6","es3");$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(C){function u(){this.batch_=null}function y(d){return d instanceof h?d:new h(function(h,q){h(d)})}if(C&&!$jscomp.FORCE_POLYFILL_PROMISE)return C;u.prototype.asyncExecute=function(d){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(d);return this};u.prototype.asyncExecuteBatch_=function(){var d=this;this.asyncExecuteFunction(function(){d.executeBatch_()})};var w=$jscomp.global.setTimeout;u.prototype.asyncExecuteFunction=function(d){w(d,
0)};u.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var d=this.batch_;this.batch_=[];for(var h=0;h<d.length;++h){var m=d[h];d[h]=null;try{m()}catch(v){this.asyncThrow_(v)}}}this.batch_=null};u.prototype.asyncThrow_=function(d){this.asyncExecuteFunction(function(){throw d;})};var h=function(d){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var h=this.createResolveAndReject_();try{d(h.resolve,h.reject)}catch(m){h.reject(m)}};h.prototype.createResolveAndReject_=
function(){function d(d){return function(q){m||(m=!0,d.call(h,q))}}var h=this,m=!1;return{resolve:d(this.resolveTo_),reject:d(this.reject_)}};h.prototype.resolveTo_=function(d){if(d===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(d instanceof h)this.settleSameAsPromise_(d);else{a:switch(typeof d){case "object":var q=null!=d;break a;case "function":q=!0;break a;default:q=!1}q?this.resolveToNonPromiseObj_(d):this.fulfill_(d)}};h.prototype.resolveToNonPromiseObj_=function(d){var h=
void 0;try{h=d.then}catch(m){this.reject_(m);return}"function"==typeof h?this.settleSameAsThenable_(h,d):this.fulfill_(d)};h.prototype.reject_=function(d){this.settle_(2,d)};h.prototype.fulfill_=function(d){this.settle_(1,d)};h.prototype.settle_=function(d,h){if(0!=this.state_)throw Error("Cannot settle("+d+", "+h+"): Promise already settled in state"+this.state_);this.state_=d;this.result_=h;this.executeOnSettledCallbacks_()};h.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var h=
0;h<this.onSettledCallbacks_.length;++h)d.asyncExecute(this.onSettledCallbacks_[h]);this.onSettledCallbacks_=null}};var d=new u;h.prototype.settleSameAsPromise_=function(d){var h=this.createResolveAndReject_();d.callWhenSettled_(h.resolve,h.reject)};h.prototype.settleSameAsThenable_=function(d,h){var m=this.createResolveAndReject_();try{d.call(h,m.resolve,m.reject)}catch(v){m.reject(v)}};h.prototype.then=function(d,B){function m(d,h){return"function"==typeof d?function(h){try{q(d(h))}catch(O){x(O)}}:
h}var q,x,t=new h(function(d,h){q=d;x=h});this.callWhenSettled_(m(d,q),m(B,x));return t};h.prototype.catch=function(d){return this.then(void 0,d)};h.prototype.callWhenSettled_=function(h,B){function m(){switch(q.state_){case 1:h(q.result_);break;case 2:B(q.result_);break;default:throw Error("Unexpected state: "+q.state_);}}var q=this;null==this.onSettledCallbacks_?d.asyncExecute(m):this.onSettledCallbacks_.push(m)};h.resolve=y;h.reject=function(d){return new h(function(h,m){m(d)})};h.race=function(d){return new h(function(h,
m){for(var q=$jscomp.makeIterator(d),x=q.next();!x.done;x=q.next())y(x.value).callWhenSettled_(h,m)})};h.all=function(d){var q=$jscomp.makeIterator(d),m=q.next();return m.done?y([]):new h(function(d,h){function t(h){return function(m){v[h]=m;x--;0==x&&d(v)}}var v=[],x=0;do v.push(void 0),x++,y(m.value).callWhenSettled_(t(v.length-1),h),m=q.next();while(!m.done)})};return h},"es6","es3");
$jscomp.polyfill("Array.from",function(C){return C?C:function(u,y,w){$jscomp.initSymbolIterator();y=null!=y?y:function(d){return d};var h=[],d=u[Symbol.iterator];if("function"==typeof d){u=d.call(u);for(var q=0;!(d=u.next()).done;)h.push(y.call(w,d.value,q++))}else for(d=u.length,q=0;q<d;q++)h.push(y.call(w,u[q],q));return h}},"es6","es3");window.mediaPlayerTracking=function(){};/*

 Video.js 7.2.4 <http://videojs.com/>
 Copyright Brightcove, Inc. <https://www.brightcove.com/>
 Available under Apache License Version 2.0
 <https://github.com/videojs/video.js/blob/master/LICENSE>

 Includes vtt.js <https://github.com/mozilla/vtt.js>
 Available under Apache License Version 2.0
 <https://github.com/mozilla/vtt.js/blob/master/LICENSE>
 2018 Brightcove, Inc
 @license Apache-2.0
*/
(function(C,u){"object"===typeof exports&&"undefined"!==typeof module?module.exports=u():"function"===typeof define&&define.amd?define(u):C.videojs=u()})(this,function(){function C(p,k){return k={exports:{}},p(k,k.exports),k.exports}function u(p,k){qf(p).forEach(function(c){return k(p[c],c)})}function y(p,k){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;return qf(p).reduce(function(e,c){return k(e,p[c],c)},c)}function w(p){for(var k=arguments.length,c=Array(1<k?k-1:0),e=1;e<k;e++)c[e-
1]=arguments[e];if(Object.assign)return Object.assign.apply(Object,[p].concat(c));c.forEach(function(e){e&&u(e,function(e,c){p[c]=e})});return p}function h(p){return!!p&&"object"===("undefined"===typeof p?"undefined":ka(p))}function d(p){return h(p)&&"[object Object]"===Ti.call(p)&&p.constructor===Object}function q(p,k){return p&&k?"function"===typeof F.getComputedStyle?(p=F.getComputedStyle(p))?p[k]:"":"":""}function B(p){if(/\s/.test(p))throw Error("class has illegal whitespace characters");}function m(){return L===
F.document}function v(p){return h(p)&&1===p.nodeType}function x(){try{return F.parent!==F.self}catch(p){return!0}}function t(p){return function(k,c){if("string"!==typeof k||!/\S/.test(k))return L[p](null);"string"===typeof c&&/\S/.test(c)&&(c=L.querySelector(c));c=v(c)?c:L;return c[p]&&c[p](k)}}function H(){var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},k=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},c=arguments[3],e=L.createElement(0<arguments.length&&void 0!==arguments[0]?
arguments[0]:"div");Object.getOwnPropertyNames(p).forEach(function(c){var f=p[c];-1!==c.indexOf("aria-")||"role"===c||"type"===c?(V.warn(Bd(Ui,c,f)),e.setAttribute(c,f)):"textContent"===c?R(e,f):e[c]=f});Object.getOwnPropertyNames(k).forEach(function(c){e.setAttribute(c,k[c])});c&&oa(e,c);return e}function R(p,k){"undefined"===typeof p.textContent?p.innerText=k:p.textContent=k;return p}function P(p,k){k.firstChild?k.insertBefore(p,k.firstChild):k.appendChild(p)}function O(p,k){B(k);return p.classList?
p.classList.contains(k):(new RegExp("(^|\\s)"+k+"($|\\s)")).test(p.className)}function G(p,k){p.classList?p.classList.add(k):O(p,k)||(p.className=(p.className+" "+k).trim());return p}function E(p,k){p.classList?p.classList.remove(k):(B(k),p.className=p.className.split(/\s+/).filter(function(c){return c!==k}).join(" "));return p}function ba(p,k,c){var e=O(p,k);"function"===typeof c&&(c=c(p,k));"boolean"!==typeof c&&(c=!e);if(c!==e)return c?G(p,k):E(p,k),p}function T(p,k){Object.getOwnPropertyNames(k).forEach(function(c){var e=
k[c];null===e||"undefined"===typeof e||!1===e?p.removeAttribute(c):p.setAttribute(c,!0===e?"":e)})}function A(p){var k={};if(p&&p.attributes&&0<p.attributes.length)for(var c=p.attributes,e=c.length-1;0<=e;e--){var n=c[e].name,f=c[e].value;if("boolean"===typeof p[n]||-1!==",autoplay,controls,playsinline,loop,muted,default,defaultMuted,".indexOf(","+n+","))f=null!==f?!0:!1;k[n]=f}return k}function ca(){L.body.focus();L.onselectstart=function(){return!1}}function sa(){L.onselectstart=function(){return!0}}
function Z(p){if(p&&p.getBoundingClientRect&&p.parentNode){var k=p.getBoundingClientRect(),c={};"bottom height left right top width".split(" ").forEach(function(e){void 0!==k[e]&&(c[e]=k[e])});c.height||(c.height=parseFloat(q(p,"height")));c.width||(c.width=parseFloat(q(p,"width")));return c}}function Y(p){var k=void 0;p.getBoundingClientRect&&p.parentNode&&(k=p.getBoundingClientRect());if(!k)return{left:0,top:0};p=L.documentElement;var c=L.body;return{left:Math.round(k.left+(F.pageXOffset||c.scrollLeft)-
(p.clientLeft||c.clientLeft||0)),top:Math.round(k.top+(F.pageYOffset||c.scrollTop)-(p.clientTop||c.clientTop||0))}}function ia(p,k){var c={},e=Y(p),n=p.offsetWidth;p=p.offsetHeight;var f=e.top;e=e.left;var b=k.pageY,g=k.pageX;k.changedTouches&&(g=k.changedTouches[0].pageX,b=k.changedTouches[0].pageY);c.y=Math.max(0,Math.min(1,(f-b+p)/p));c.x=Math.max(0,Math.min(1,(g-e)/n));return c}function Aa(p){return h(p)&&3===p.nodeType}function Ha(p){for(;p.firstChild;)p.removeChild(p.firstChild);return p}function Ba(p){"function"===
typeof p&&(p=p());return(Array.isArray(p)?p:[p]).map(function(k){"function"===typeof k&&(k=k());if(v(k)||Aa(k))return k;if("string"===typeof k&&/\S/.test(k))return L.createTextNode(k)}).filter(function(k){return k})}function oa(p,k){Ba(k).forEach(function(c){return p.appendChild(c)});return p}function Qa(p,k){return oa(Ha(p),k)}function Ia(p){return void 0===p.button&&void 0===p.buttons||0===p.button&&void 0===p.buttons?!0:0!==p.button||1!==p.buttons?!1:!0}function db(p){var k=p[yb];k||(k=p[yb]=zb++);
dc[k]||(dc[k]={});return dc[k]}function Kb(p){return(p=p[yb])?!!Object.getOwnPropertyNames(dc[p]).length:!1}function Nc(p){var k=p[yb];if(k){delete dc[k];try{delete p[yb]}catch(c){p.removeAttribute?p.removeAttribute(yb):p[yb]=null}}}function Ca(p,k){var c=db(p);0===c.handlers[k].length&&(delete c.handlers[k],p.removeEventListener?p.removeEventListener(k,c.dispatcher,!1):p.detachEvent&&p.detachEvent("on"+k,c.dispatcher));0>=Object.getOwnPropertyNames(c.handlers).length&&(delete c.handlers,delete c.dispatcher,
delete c.disabled);0===Object.getOwnPropertyNames(c).length&&Nc(p)}function Lb(p,k,c,e){c.forEach(function(c){p(k,c,e)})}function Ab(p){function k(){return!0}function c(){return!1}if(!p||!p.isPropagationStopped){var e=p||F.event;p={};for(var n in e)"layerX"!==n&&"layerY"!==n&&"keyLocation"!==n&&"webkitMovementX"!==n&&"webkitMovementY"!==n&&("returnValue"===n&&e.preventDefault||(p[n]=e[n]));p.target||(p.target=p.srcElement||L);p.relatedTarget||(p.relatedTarget=p.fromElement===p.target?p.toElement:
p.fromElement);p.preventDefault=function(){e.preventDefault&&e.preventDefault();p.returnValue=!1;e.returnValue=!1;p.defaultPrevented=!0};p.defaultPrevented=!1;p.stopPropagation=function(){e.stopPropagation&&e.stopPropagation();p.cancelBubble=!0;e.cancelBubble=!0;p.isPropagationStopped=k};p.isPropagationStopped=c;p.stopImmediatePropagation=function(){e.stopImmediatePropagation&&e.stopImmediatePropagation();p.isImmediatePropagationStopped=k;p.stopPropagation()};p.isImmediatePropagationStopped=c;if(null!==
p.clientX&&void 0!==p.clientX){n=L.documentElement;var f=L.body;p.pageX=p.clientX+(n&&n.scrollLeft||f&&f.scrollLeft||0)-(n&&n.clientLeft||f&&f.clientLeft||0);p.pageY=p.clientY+(n&&n.scrollTop||f&&f.scrollTop||0)-(n&&n.clientTop||f&&f.clientTop||0)}p.which=p.charCode||p.keyCode;null!==p.button&&void 0!==p.button&&(p.button=p.button&1?0:p.button&4?1:p.button&2?2:0)}return p}function ya(p,k,c){if(Array.isArray(k))return Lb(ya,p,k,c);var e=db(p);e.handlers||(e.handlers={});e.handlers[k]||(e.handlers[k]=
[]);c.guid||(c.guid=zb++);e.handlers[k].push(c);e.dispatcher||(e.disabled=!1,e.dispatcher=function(c,f){if(!e.disabled){c=Ab(c);var b=e.handlers[c.type];if(b){b=b.slice(0);for(var n=0,a=b.length;n<a&&!c.isImmediatePropagationStopped();n++)try{b[n].call(p,c,f)}catch(l){V.error(l)}}}});1===e.handlers[k].length&&(p.addEventListener?(c=!1,rf&&-1<Vi.indexOf(k)&&(c={passive:!0}),p.addEventListener(k,e.dispatcher,c)):p.attachEvent&&p.attachEvent("on"+k,e.dispatcher))}function ta(p,k,c){if(Kb(p)){var e=db(p);
if(e.handlers){if(Array.isArray(k))return Lb(ta,p,k,c);if(void 0===k)for(var n in e.handlers)Object.prototype.hasOwnProperty.call(e.handlers||{},n)&&(k=p,c=n,e.handlers[c]=[],Ca(k,c));else if(n=e.handlers[k]){if(!c)e.handlers[k]=[];else if(c.guid)for(e=0;e<n.length;e++)n[e].guid===c.guid&&n.splice(e--,1);Ca(p,k)}}}}function eb(p,k,c){var e=Kb(p)?db(p):{},n=p.parentNode||p.ownerDocument;"string"===typeof k?k={type:k,target:p}:k.target||(k.target=p);k=Ab(k);e.dispatcher&&e.dispatcher.call(p,k,c);if(n&&
!k.isPropagationStopped()&&!0===k.bubbles)eb.call(null,n,k,c);else if(!n&&!k.defaultPrevented&&(p=db(k.target),k.target[k.type])){p.disabled=!0;if("function"===typeof k.target[k.type])k.target[k.type]();p.disabled=!1}return!k.defaultPrevented}function Da(p,k,c){if(Array.isArray(k))return Lb(Da,p,k,c);var e=function f(){ta(p,k,f);c.apply(this,arguments)};e.guid=c.guid=c.guid||zb++;ya(p,k,e)}function Ra(p,k){k&&(Cd=k);F.setTimeout(Wi,p)}function Xa(p){var k=(1<arguments.length&&void 0!==arguments[1]?
arguments[1]:{}).eventBusKey;if(k){if(!p[k].nodeName)throw Error('The eventBusKey "'+k+'" does not refer to an element.');p.eventBusEl_=p[k]}else p.eventBusEl_=H("span",{className:"vjs-event-bus"});w(p,Xi);p.on("dispose",function(){p.off();F.setTimeout(function(){p.eventBusEl_=null},0)});return p}function X(p,k){w(p,Yi);p.state=w({},p.state,k);if("function"===typeof p.handleStateChanged&&Oc(p))p.on("statechanged",p.handleStateChanged);return p}function fa(p){return"string"!==typeof p?p:p.charAt(0).toUpperCase()+
p.slice(1)}function Dd(p,k){return fa(p)===fa(k)}function ea(){for(var p={},k=arguments.length,c=Array(k),e=0;e<k;e++)c[e]=arguments[e];c.forEach(function(e){e&&u(e,function(e,c){d(e)?(d(p[c])||(p[c]={}),p[c]=ea(p[c],e)):p[c]=e})});return p}function Pc(p,k,c,e){var n=c.length-1;if("number"!==typeof e||0>e||e>n)throw Error("Failed to execute '"+p+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").");return c[e][k]}function Bb(p){return void 0===p||0===p.length?
{length:0,start:function(){throw Error("This TimeRanges object is empty");},end:function(){throw Error("This TimeRanges object is empty");}}:{length:p.length,start:Pc.bind(null,"start",0,p),end:Pc.bind(null,"end",1,p)}}function Ya(p,k){return Array.isArray(p)?Bb(p):void 0===p||void 0===k?Bb():Bb([[p,k]])}function sf(p,k){var c=0;if(!k)return 0;p&&p.length||(p=Ya(0,0));for(var e=0;e<p.length;e++){var n=p.start(e);var f=p.end(e);f>k&&(f=k);c+=f-n}return c/k}function ua(p){if(p instanceof ua)return p;
"number"===typeof p?this.code=p:"string"===typeof p?this.message=p:h(p)&&("number"===typeof p.code&&(this.code=p.code),w(this,p));this.message||(this.message=ua.defaultMessages[this.code]||"")}function tf(p){return void 0!==p&&null!==p&&"function"===typeof p.then}function ec(p){tf(p)&&p.then(null,function(k){})}function Zi(p){for(var k in p)if(p.hasOwnProperty(k))return!1;return!0}function uf(p,k,c){var e=p;vf(k)?(c=k,"string"===typeof p&&(e={uri:p})):e=$i(k,{uri:p});e.callback=c;return e}function fb(p,
k,c){k=uf(p,k,c);return wf(k)}function wf(p){function k(c){clearTimeout(d);c instanceof Error||(c=Error(""+(c||"Unknown XMLHttpRequest Error")));c.statusCode=0;var a=h;e||(e=!0,p.callback(c,a,void 0))}function c(){if(!b){clearTimeout(d);var c=p.useXDR&&void 0===n.status?200:1223===n.status?204:n.status;var f=h,l=null;if(0!==c){n.response?f=n.response:(f=n.responseText)||("document"===n.responseType?f=n.responseXML:(f=n.responseXML&&"parsererror"===n.responseXML.documentElement.nodeName,f=""!==n.responseType||
f?null:n.responseXML));if(Q)try{f=JSON.parse(f)}catch(Km){}f={body:f,statusCode:c,method:a,headers:{},url:g,rawRequest:n};n.getAllResponseHeaders&&(f.headers=aj(n.getAllResponseHeaders()))}else l=Error("Internal XMLHttpRequest Error");c=f.body;e||(e=!0,p.callback(l,f,c))}}if("undefined"===typeof p.callback)throw Error("callback argument missing");var e=!1,n=p.xhr||null;n||(n=p.cors||p.useXDR?new fb.XDomainRequest:new fb.XMLHttpRequest);var f,b,g=n.url=p.uri||p.url,a=n.method=p.method||"GET",l=p.body||
p.data,r=n.headers=p.headers||{},z=!!p.sync,Q=!1,d,h={body:void 0,headers:{},statusCode:0,method:a,url:g,rawRequest:n};"json"in p&&!1!==p.json&&(Q=!0,r.accept||r.Accept||(r.Accept="application/json"),"GET"!==a&&"HEAD"!==a&&(r["content-type"]||r["Content-Type"]||(r["Content-Type"]="application/json"),l=JSON.stringify(!0===p.json?l:p.json)));n.onreadystatechange=function(){4===n.readyState&&setTimeout(c,0)};n.onload=c;n.onerror=k;n.onprogress=function(){};n.onabort=function(){b=!0};n.ontimeout=k;n.open(a,
g,!z,p.username,p.password);z||(n.withCredentials=!!p.withCredentials);!z&&0<p.timeout&&(d=setTimeout(function(){if(!b){b=!0;n.abort("timeout");var e=Error("XMLHttpRequest timeout");e.code="ETIMEDOUT";k(e)}},p.timeout));if(n.setRequestHeader)for(f in r)r.hasOwnProperty(f)&&n.setRequestHeader(f,r[f]);else if(p.headers&&!Zi(p.headers))throw Error("Headers cannot be set on an XDomainRequest object");"responseType"in p&&(n.responseType=p.responseType);"beforeSend"in p&&"function"===typeof p.beforeSend&&
p.beforeSend(n);n.send(l||null);return n}function bj(){}function Fa(p,k){this.name="ParsingError";this.code=p.code;this.message=k||p.message}function Fd(p){p=p.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);if(!p)return null;if(p[3]){var k=p[3].replace(":","");return 3600*(p[1]|0)+60*(p[2]|0)+(k|0)+(p[4]|0)/1E3}return 59<p[1]?3600*(p[1]|0)+60*(p[2]|0)+(p[4]|0)/1E3:60*(p[1]|0)+(p[2]|0)+(p[4]|0)/1E3}function fc(){this.values=Gd(null)}function gc(p,k,c,e){p=e?p.split(e):[p];for(var n in p)"string"===typeof p[n]&&
(e=p[n].split(c),2===e.length&&k(e[0],e[1]))}function cj(p,k,c){function e(){var e=Fd(p);if(null===e)throw new Fa(Fa.Errors.BadTimeStamp,"Malformed timestamp: "+f);p=p.replace(/^[^\sa-zA-Z-]+/,"");return e}function n(){p=p.replace(/^\s+/,"")}var f=p;n();k.startTime=e();n();if("--\x3e"!==p.substr(0,3))throw new Fa(Fa.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+f);p=p.substr(3);n();k.endTime=e();n();(function(e,f){var a=new fc;gc(e,function(e,f){switch(e){case "region":for(var b=
c.length-1;0<=b;b--)if(c[b].id===f){a.set(e,c[b].region);break}break;case "vertical":a.alt(e,f,["rl","lr"]);break;case "line":f=f.split(",");b=f[0];a.integer(e,b);a.percent(e,b)?a.set("snapToLines",!1):null;a.alt(e,b,["auto"]);2===f.length&&a.alt("lineAlign",f[1],["start","middle","end"]);break;case "position":f=f.split(",");a.percent(e,f[0]);2===f.length&&a.alt("positionAlign",f[1],["start","middle","end"]);break;case "size":a.percent(e,f);break;case "align":a.alt(e,f,["start","middle","end","left",
"right"])}},/:/,/\s/);f.region=a.get("region",null);f.vertical=a.get("vertical","");f.line=a.get("line","auto");f.lineAlign=a.get("lineAlign","start");f.snapToLines=a.get("snapToLines",!0);f.size=a.get("size",100);f.align=a.get("align","middle");f.position=a.get("position",{start:0,left:0,middle:50,end:100,right:100},f.align);f.positionAlign=a.get("positionAlign",{start:"start",left:"start",middle:"middle",end:"end",right:"end"},f.align)})(p,k)}function xf(p,k){function c(){if(!k)return null;var e=
k.match(/^([^<]*)(<[^>]*>?)?/);e=e[1]?e[1]:e[2];k=k.substr(e.length);return e}function e(e){return dj[e]}function n(c){for(;z=c.match(/&(amp|lt|gt|lrm|rlm|nbsp);/);)c=c.replace(z[0],e);return c}function f(e,c){var a=ej[e];if(!a)return null;var f=p.document.createElement(a);f.localName=a;(e=fj[e])&&c&&(f[e]=c.trim());return f}for(var b=p.document.createElement("div"),g=b,a,l=[];null!==(a=c());)if("<"===a[0])if("/"===a[1])l.length&&l[l.length-1]===a.substr(2).replace(">","")&&(l.pop(),g=g.parentNode);
else{var r=Fd(a.substr(1,a.length-2));if(r)a=p.document.createProcessingInstruction("timestamp",r),g.appendChild(a);else{var z=a.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);z&&(!(a=f(z[1],z[3]))||yf[a.localName]&&yf[a.localName]!==g.localName||(z[2]&&(a.className=z[2].substr(1).replace("."," ")),l.push(z[1]),g.appendChild(a),g=a))}}else g.appendChild(p.document.createTextNode(n(a)));return b}function gj(p){for(var k=0;k<zf.length;k++){var c=zf[k];if(p>=c[0]&&p<=c[1])return!0}return!1}
function hj(p){function k(e,c){for(var a=c.childNodes.length-1;0<=a;a--)e.push(c.childNodes[a])}function c(e){if(!e||!e.length)return null;var f=e.pop(),a=f.textContent||f.innerText;if(a)return(f=a.match(/^.*(\n|\r)/))?(e.length=0,f[0]):a;if("ruby"===f.tagName)return c(e);if(f.childNodes)return k(e,f),c(e)}var e=[],n="";if(!p||!p.childNodes)return"ltr";for(k(e,p);n=c(e);)for(var f=0;f<n.length;f++)if(p=n.charCodeAt(f),gj(p))return"rtl";return"ltr"}function Hd(){}function Qc(p,k,c){this.cue=k;this.cueDiv=
xf(p,k.text);var e={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===k.vertical?"horizontal-tb":"lr"===k.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(e,this.cueDiv);this.div=p.document.createElement("div");e={direction:hj(this.cueDiv),writingMode:""===k.vertical?"horizontal-tb":"lr"===k.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===
k.align?"center":k.align,font:c.font,whiteSpace:"pre-line",position:"absolute"};this.applyStyles(e);this.div.appendChild(this.cueDiv);p=0;switch(k.positionAlign){case "start":p=k.position;break;case "middle":p=k.position-k.size/2;break;case "end":p=k.position-k.size}""===k.vertical?this.applyStyles({left:this.formatStyle(p,"%"),width:this.formatStyle(k.size,"%")}):this.applyStyles({top:this.formatStyle(p,"%"),height:this.formatStyle(k.size,"%")});this.move=function(e){this.applyStyles({top:this.formatStyle(e.top,
"px"),bottom:this.formatStyle(e.bottom,"px"),left:this.formatStyle(e.left,"px"),right:this.formatStyle(e.right,"px"),height:this.formatStyle(e.height,"px"),width:this.formatStyle(e.width,"px")})}}function va(p){if(p.div){var k=p.div.offsetHeight;var c=p.div.offsetWidth;var e=p.div.offsetTop;var n=(n=p.div.childNodes)&&(n=n[0])&&n.getClientRects&&n.getClientRects();p=p.div.getBoundingClientRect();var f=n?Math.max(n[0]&&n[0].height||0,p.height/n.length):0}this.left=p.left;this.right=p.right;this.top=
p.top||e;this.height=p.height||k;this.bottom=p.bottom||e+(p.height||k);this.width=p.width||c;this.lineHeight=void 0!==f?f:p.lineHeight}function ob(){}function Id(p){return"string"!==typeof p?!1:ij[p.toLowerCase()]?p.toLowerCase():!1}function Rc(p,k,c){this.hasBeenReset=!1;var e="",n=!1,f=p,b=k,g=c,a=null,l="",r=!0,z="auto",Q="start",d=50,h="middle",m=50,q="middle";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return e},set:function(c){e=""+c}},pauseOnExit:{enumerable:!0,get:function(){return n},
set:function(e){n=!!e}},startTime:{enumerable:!0,get:function(){return f},set:function(e){if("number"!==typeof e)throw new TypeError("Start time must be set to a number.");f=e;this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return b},set:function(e){if("number"!==typeof e)throw new TypeError("End time must be set to a number.");b=e;this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return g},set:function(e){g=""+e;this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return a},
set:function(e){a=e;this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return l},set:function(e){e="string"!==typeof e?!1:jj[e.toLowerCase()]?e.toLowerCase():!1;if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");l=e;this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return r},set:function(e){r=!!e;this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return z},set:function(e){if("number"!==typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");
z=e;this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return Q},set:function(e){e=Id(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");Q=e;this.hasBeenReset=!0}},position:{enumerable:!0,get:function(){return d},set:function(e){if(0>e||100<e)throw Error("Position must be between 0 and 100.");d=e;this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return h},set:function(e){e=Id(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");
h=e;this.hasBeenReset=!0}},size:{enumerable:!0,get:function(){return m},set:function(e){if(0>e||100<e)throw Error("Size must be between 0 and 100.");m=e;this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return q},set:function(e){e=Id(e);if(!e)throw new SyntaxError("An invalid or illegal string was specified.");q=e;this.hasBeenReset=!0}}});this.displayState=void 0}function hc(p){return"number"===typeof p&&0<=p&&100>=p}function kj(p,k,c,e){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:
{},f=p.textTracks();n.kind=k;c&&(n.label=c);e&&(n.language=e);n.tech=p;n=new Ga.text.TrackClass(n);f.addTrack(n);return n}function lj(p,k,c){p.setTimeout(function(){return Cb(k,Db[k.type],c,p)},1)}function mj(p,k){p.forEach(function(c){return c.setTech&&c.setTech(k)})}function Af(p,k,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null,n="call"+fa(c);n=p.reduce(Jd(n),e);n=(e=n===Sc)?null:k[c](n);for(var f=p.length-1;0<=f;f--){var b=p[f];if(b[c])b[c](e,n)}return n}function Jd(p){return function(k,
c){return k===Sc?Sc:c[p]?c[p](k):k}}function nj(p,k){var c=Kd[p.id()],e=null;if(void 0===c||null===c)return e=k(p),Kd[p.id()]=[[k,e]],e;for(var n=0;n<c.length;n++){var f=c[n];f[0]===k&&(e=f[1])}null===e&&(e=k(p),c.push([k,e]));return e}function Cb(){var p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},k=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],c=arguments[2],e=arguments[3],n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:[],f=5<arguments.length&&void 0!==arguments[5]?
arguments[5]:!1,b=k[0],g=k.slice(1);if("string"===typeof b)Cb(p,Db[b],c,e,n,f);else if(b){var a=nj(e,b);if(!a.setSource)return n.push(a),Cb(p,g,c,e,n,f);a.setSource(w({},p),function(b,k){if(b)return Cb(p,g,c,e,n,f);n.push(a);Cb(k,p.type===k.type?g:Db[k.type],c,e,n,f)})}else g.length?Cb(p,g,c,e,n,f):f?c(p,n):Cb(p,Db["*"],c,e,n,!0)}function Bf(p){var k=Cf(p.src);!p.type&&k&&(p.type=k);return p}function Ld(p,k){if(4===p.length)p=p[1]+p[1]+p[2]+p[2]+p[3]+p[3];else if(7===p.length)p=p.slice(1);else throw Error("Invalid color code provided, "+
p+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(p.slice(0,2),16)+","+parseInt(p.slice(2,4),16)+","+parseInt(p.slice(4,6),16)+","+k+")"}function Mb(p){return Md(p,1<arguments.length&&void 0!==arguments[1]?arguments[1]:p)}function Df(p,k){k&&(p=k(p));if(p&&"none"!==p)return p}function D(p,k,c){var e=D.getPlayer(p);if(e)return k&&V.warn('Player "'+p+'" is already initialised. Options will not be applied.'),c&&e.ready(c),e;var n="string"===typeof p?pb("#"+Ef(p)):p;if(!v(n))throw new TypeError("The element or ID supplied is not valid. (videojs)");
L.body.contains(n)||V.warn("The element supplied is not included in the DOM");k=k||{};D.hooks("beforesetup").forEach(function(e){e=e(n,ea(k));!h(e)||Array.isArray(e)?V.error("please return an object in beforesetup hooks"):k=ea(k,e)});e=new (J.getComponent("Player"))(n,k,c);D.hooks("setup").forEach(function(c){return c(e)});return e}function Ff(p,k){return function(c){var e=this;if(k){if(Nb&&!c)return c=k.toString().replace(/^function.+?{/,"").slice(0,-1),c=Gf(c),this[Nd]=new Nb(c),oj(this[Nd],c),
this[Nd];var n={postMessage:function(c){e.onmessage&&setTimeout(function(){e.onmessage({data:c,target:n})})}};k.call(n);this.postMessage=function(c){setTimeout(function(){n.onmessage({data:c,target:e})})};this.isThisThread=!0}else return new Nb(p)}}function Gf(p){try{return Ob.createObjectURL(new Blob([p],{type:"application/javascript"}))}catch(c){var k=new pj;k.append(p);return Ob.createObjectURL(k.getBlob(type))}}function oj(p,k){if(p&&k){var c=p.terminate;p.objURL=k;p.terminate=function(){p.objURL&&
Ob.revokeObjectURL(p.objURL);c.call(p)}}}function ic(){}var jc="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},F="undefined"!==typeof window?window:"undefined"!==typeof jc?jc:"undefined"!==typeof self?self:{},Hf={},If=Object.freeze({default:Hf}),qj=If&&Hf||If,Jf="undefined"!==typeof jc?jc:"undefined"!==typeof window?window:{};if("undefined"!==typeof document)var Od=document;else(Od=Jf["__GLOBAL_DOCUMENT_CACHE@4"])||(Od=Jf["__GLOBAL_DOCUMENT_CACHE@4"]=
qj);var L=Od,Ea=void 0,Tc="info",Sa=[],Uc=function(p,k){var c=Ea.levels[Tc],e=new RegExp("^("+c+")$");"log"!==p&&k.unshift(p.toUpperCase()+":");Sa&&Sa.push([].concat(k));k.unshift("VIDEOJS:");if(F.console){var n=F.console[p];n||"debug"!==p||(n=F.console.info||F.console.log);if(n&&c&&e.test(p))n[Array.isArray(k)?"apply":"call"](F.console,k)}};Ea=function(){for(var p=arguments.length,k=Array(p),c=0;c<p;c++)k[c]=arguments[c];Uc("log",k)};Ea.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",
info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:Tc};Ea.level=function(p){if("string"===typeof p){if(!Ea.levels.hasOwnProperty(p))throw Error('"'+p+'" in not a valid log level');Tc=p}return Tc};Ea.history=function(){return Sa?[].concat(Sa):[]};Ea.history.clear=function(){Sa&&(Sa.length=0)};Ea.history.disable=function(){null!==Sa&&(Sa.length=0,Sa=null)};Ea.history.enable=function(){null===Sa&&(Sa=[])};Ea.error=function(){for(var p=arguments.length,k=Array(p),c=0;c<p;c++)k[c]=arguments[c];
return Uc("error",k)};Ea.warn=function(){for(var p=arguments.length,k=Array(p),c=0;c<p;c++)k[c]=arguments[c];return Uc("warn",k)};Ea.debug=function(){for(var p=arguments.length,k=Array(p),c=0;c<p;c++)k[c]=arguments[c];return Uc("debug",k)};var V=Ea,Bd=function(p){for(var k="",c=0;c<arguments.length;c++)k+=p[c].replace(/\n\r?\s*/g,"")+(arguments[c+1]||"");return k},ka="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(p){return typeof p}:function(p){return p&&"function"===typeof Symbol&&
p.constructor===Symbol&&p!==Symbol.prototype?"symbol":typeof p},N=function(p,k){if(!(p instanceof k))throw new TypeError("Cannot call a class as a function");},K=function(p,k){if("function"!==typeof k&&null!==k)throw new TypeError("Super expression must either be null or a function, not "+typeof k);p.prototype=Object.create(k&&k.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}});k&&(Object.setPrototypeOf?Object.setPrototypeOf(p,k):p.__proto__=k)},M=function(p,k){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!k||"object"!==typeof k&&"function"!==typeof k?p:k},Pd=function(p,k){p.raw=k;return p},Ti=Object.prototype.toString,qf=function(p){return h(p)?Object.keys(p):[]},Ui=Pd(["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set "," to ","."],["Setting attributes in the second argument of createEl()\n                has been deprecated. Use the third argument instead.\n                createEl(type, properties, attributes). Attempting to set ",
" to ","."]),pb=t("querySelector"),Kf=t("querySelectorAll"),Lf=Object.freeze({isReal:m,isEl:v,isInFrame:x,createEl:H,textContent:R,prependTo:P,hasClass:O,addClass:G,removeClass:E,toggleClass:ba,setAttributes:T,getAttributes:A,getAttribute:function(p,k){return p.getAttribute(k)},setAttribute:function(p,k,c){p.setAttribute(k,c)},removeAttribute:function(p,k){p.removeAttribute(k)},blockTextSelection:ca,unblockTextSelection:sa,getBoundingClientRect:Z,findPosition:Y,getPointerPosition:ia,isTextNode:Aa,
emptyEl:Ha,normalizeContent:Ba,appendContent:oa,insertContent:Qa,isSingleLeftClick:Ia,$:pb,$$:Kf}),zb=1,dc={},yb="vdata"+(new Date).getTime(),rf=!1;(function(){try{var p=Object.defineProperty({},"passive",{get:function(){rf=!0}});F.addEventListener("test",null,p);F.removeEventListener("test",null,p)}catch(k){}})();var Vi=["touchstart","touchmove"],rj=Object.freeze({fixEvent:Ab,on:ya,off:ta,trigger:eb,one:Da}),Qd=!1,Cd=void 0,Wi=function(){if(m()&&!1!==Cd.options.autoSetup){var p=Array.prototype.slice.call(L.getElementsByTagName("video")),
k=Array.prototype.slice.call(L.getElementsByTagName("audio")),c=Array.prototype.slice.call(L.getElementsByTagName("video-js"));if((p=p.concat(k,c))&&0<p.length)for(k=0,c=p.length;k<c;k++){var e=p[k];if(e&&e.getAttribute)void 0===e.player&&null!==e.getAttribute("data-setup")&&Cd(e);else{Ra(1);break}}else Qd||Ra(1)}};m()&&"complete"===L.readyState?Qd=!0:Da(F,"load",function(){Qd=!0});var Mf=function(p){var k=L.createElement("style");k.className=p;return k},Nf=function(p,k){p.styleSheet?p.styleSheet.cssText=
k:p.textContent=k},S=function(p,k,c){k.guid||(k.guid=zb++);var e=function(){return k.apply(p,arguments)};e.guid=c?c+"_"+k.guid:k.guid;return e},Pb=function(p,k){var c=Date.now();return function(){var e=Date.now();e-c>=k&&(p.apply(void 0,arguments),c=e)}},sj=function(p,k,c){var e=3<arguments.length&&void 0!==arguments[3]?arguments[3]:F,n=void 0,f=function(){var f=this,g=arguments,a=function(){a=n=null;c||p.apply(f,g)};!n&&c&&p.apply(f,g);e.clearTimeout(n);n=e.setTimeout(a,k)};f.cancel=function(){e.clearTimeout(n);
n=null};return f},pa=function(){};pa.prototype.allowedEvents_={};pa.prototype.on=function(p,k){var c=this.addEventListener;this.addEventListener=function(){};ya(this,p,k);this.addEventListener=c};pa.prototype.addEventListener=pa.prototype.on;pa.prototype.off=function(p,k){ta(this,p,k)};pa.prototype.removeEventListener=pa.prototype.off;pa.prototype.one=function(p,k){var c=this.addEventListener;this.addEventListener=function(){};Da(this,p,k);this.addEventListener=c};pa.prototype.trigger=function(p){var k=
p.type||p;"string"===typeof p&&(p={type:k});p=Ab(p);if(this.allowedEvents_[k]&&this["on"+k])this["on"+k](p);eb(this,p)};pa.prototype.dispatchEvent=pa.prototype.trigger;var kc=void 0;pa.prototype.queueTrigger=function(p){var k=this;kc||(kc=new Map);var c=p.type||p,e=kc.get(this);e||(e=new Map,kc.set(this,e));var n=e.get(c);e.delete(c);F.clearTimeout(n);n=F.setTimeout(function(){0===e.size&&(e=null,kc.delete(k));k.trigger(p)},0);e.set(c,n)};var Oc=function(p){return p instanceof pa||!!p.eventBusEl_&&
["on","one","off","trigger"].every(function(k){return"function"===typeof p[k]})},Of=function(p){return"string"===typeof p&&/\S/.test(p)||Array.isArray(p)&&!!p.length},Rd=function(p){if(!p.nodeName&&!Oc(p))throw Error("Invalid target; must be a DOM node or evented object.");},Pf=function(p){if(!Of(p))throw Error("Invalid event type; must be a non-empty string or array.");},Qf=function(p){if("function"!==typeof p)throw Error("Invalid listener; must be a function.");},Rf=function(p,k){var c=3>k.length||
k[0]===p||k[0]===p.eventBusEl_;if(c){var e=p.eventBusEl_;3<=k.length&&k.shift();var n=k[0];k=k[1]}else e=k[0],n=k[1],k=k[2];Rd(e);Pf(n);Qf(k);k=S(p,k);return{isTargetingSelf:c,target:e,type:n,listener:k}},lc=function(p,k,c,e){Rd(p);if(p.nodeName)rj[k](p,c,e);else p[k](c,e)},Xi={on:function(){for(var p=this,k=arguments.length,c=Array(k),e=0;e<k;e++)c[e]=arguments[e];k=Rf(this,c);c=k.isTargetingSelf;var n=k.target,f=k.type,b=k.listener;lc(n,"on",f,b);if(!c){var g=function(){return p.off(n,f,b)};g.guid=
b.guid;k=function(){return p.off("dispose",g)};k.guid=b.guid;lc(this,"on","dispose",g);lc(n,"on","dispose",k)}},one:function(){for(var p=this,k=arguments.length,c=Array(k),e=0;e<k;e++)c[e]=arguments[e];k=Rf(this,c);var n=k.target,f=k.type,b=k.listener;k.isTargetingSelf?lc(n,"one",f,b):(k=function a(){for(var e=arguments.length,c=Array(e),k=0;k<e;k++)c[k]=arguments[k];p.off(n,f,a);b.apply(null,c)},k.guid=b.guid,lc(n,"one",f,k))},off:function(p,k,c){!p||Of(p)?ta(this.eventBusEl_,p,k):(Rd(p),Pf(k),Qf(c),
c=S(this,c),this.off("dispose",c),p.nodeName?(ta(p,k,c),ta(p,"dispose",c)):Oc(p)&&(p.off(k,c),p.off("dispose",c)))},trigger:function(p,k){return eb(this.eventBusEl_,p,k)}},Yi={state:{},setState:function(p){var k=this;"function"===typeof p&&(p=p());var c=void 0;u(p,function(e,n){k.state[n]!==e&&(c=c||{},c[n]={from:k.state[n],to:e});k.state[n]=e});c&&Oc(this)&&this.trigger({changes:c,type:"statechanged"});return c}},J=function(){function p(k,c,e){N(this,p);this.player_=!k&&this.play?k=this:k;this.options_=
ea({},this.options_);c=this.options_=ea(this.options_,c);this.id_=c.id||c.el&&c.el.id;this.id_||(this.id_=(k&&k.id&&k.id()||"no_player")+"_component_"+zb++);this.name_=c.name||null;c.el?this.el_=c.el:!1!==c.createEl&&(this.el_=this.createEl());!1!==c.evented&&Xa(this,{eventBusKey:this.el_?"el_":null});X(this,this.constructor.defaultState);this.children_=[];this.childIndex_={};this.childNameIndex_={};!1!==c.initChildren&&this.initChildren();this.ready(e);!1!==c.reportTouchActivity&&this.enableTouchActivity()}
p.prototype.dispose=function(){this.trigger({type:"dispose",bubbles:!1});if(this.children_)for(var k=this.children_.length-1;0<=k;k--)this.children_[k].dispose&&this.children_[k].dispose();this.childNameIndex_=this.childIndex_=this.children_=null;this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),Nc(this.el_),this.el_=null);this.player_=null};p.prototype.player=function(){return this.player_};p.prototype.options=function(k){V.warn("this.options() has been deprecated and will be moved to the constructor in 6.0");
return k?this.options_=ea(this.options_,k):this.options_};p.prototype.el=function(){return this.el_};p.prototype.createEl=function(k,c,e){return H(k,c,e)};p.prototype.localize=function(k,c){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:k,n=this.player_.language&&this.player_.language(),f=this.player_.languages&&this.player_.languages(),b=f&&f[n];n=n&&n.split("-")[0];f=f&&f[n];b&&b[k]?e=b[k]:f&&f[k]&&(e=f[k]);c&&(e=e.replace(/\{(\d+)\}/g,function(e,a){var f=a=c[a-1];"undefined"===typeof a&&
(f=e);return f}));return e};p.prototype.contentEl=function(){return this.contentEl_||this.el_};p.prototype.id=function(){return this.id_};p.prototype.name=function(){return this.name_};p.prototype.children=function(){return this.children_};p.prototype.getChildById=function(k){return this.childIndex_[k]};p.prototype.getChild=function(k){if(k)return k=fa(k),this.childNameIndex_[k]};p.prototype.addChild=function(k){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:this.children_.length,n=void 0;if("string"===typeof k){n=fa(k);var f=c.componentClass||n;c.name=n;var b=p.getComponent(f);if(!b)throw Error("Component "+f+" does not exist");if("function"!==typeof b)return null;c=new b(this.player_||this,c)}else c=k;this.children_.splice(e,0,c);"function"===typeof c.id&&(this.childIndex_[c.id()]=c);(n=n||c.name&&fa(c.name()))&&(this.childNameIndex_[n]=c);"function"===typeof c.el&&c.el()&&(e=this.contentEl().children[e]||null,this.contentEl().insertBefore(c.el(),
e));return c};p.prototype.removeChild=function(k){"string"===typeof k&&(k=this.getChild(k));if(k&&this.children_){for(var c=!1,e=this.children_.length-1;0<=e;e--)if(this.children_[e]===k){c=!0;this.children_.splice(e,1);break}c&&(this.childIndex_[k.id()]=null,this.childNameIndex_[k.name()]=null,(c=k.el())&&c.parentNode===this.contentEl()&&this.contentEl().removeChild(k.el()))}};p.prototype.initChildren=function(){var k=this,c=this.options_.children;if(c){var e=this.options_,n=void 0,f=p.getComponent("Tech");
n=Array.isArray(c)?c:Object.keys(c);n.concat(Object.keys(this.options_).filter(function(e){return!n.some(function(c){return"string"===typeof c?e===c:e===c.name})})).map(function(e){if("string"===typeof e){var f=e;e=c[f]||k.options_[f]||{}}else f=e.name;return{name:f,opts:e}}).filter(function(e){return(e=p.getComponent(e.opts.componentClass||fa(e.name)))&&!f.isTech(e)}).forEach(function(c){var f=c.name;c=c.opts;void 0!==e[f]&&(c=e[f]);!1!==c&&(!0===c&&(c={}),c.playerOptions=k.options_.playerOptions,
(c=k.addChild(f,c))&&(k[f]=c))})}};p.prototype.buildCSSClass=function(){return""};p.prototype.ready=function(k){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;k&&(this.isReady_?c?k.call(this):this.setTimeout(k,1):(this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(k)))};p.prototype.triggerReady=function(){this.isReady_=!0;this.setTimeout(function(){var k=this.readyQueue_;this.readyQueue_=[];k&&0<k.length&&k.forEach(function(c){c.call(this)},this);this.trigger("ready")},1)};
p.prototype.$=function(k,c){return pb(k,c||this.contentEl())};p.prototype.$$=function(k,c){return Kf(k,c||this.contentEl())};p.prototype.hasClass=function(k){return O(this.el_,k)};p.prototype.addClass=function(k){G(this.el_,k)};p.prototype.removeClass=function(k){E(this.el_,k)};p.prototype.toggleClass=function(k,c){ba(this.el_,k,c)};p.prototype.show=function(){this.removeClass("vjs-hidden")};p.prototype.hide=function(){this.addClass("vjs-hidden")};p.prototype.lockShowing=function(){this.addClass("vjs-lock-showing")};
p.prototype.unlockShowing=function(){this.removeClass("vjs-lock-showing")};p.prototype.getAttribute=function(k){return this.el_.getAttribute(k)};p.prototype.setAttribute=function(k,c){this.el_.setAttribute(k,c)};p.prototype.removeAttribute=function(k){this.el_.removeAttribute(k)};p.prototype.width=function(k,c){return this.dimension("width",k,c)};p.prototype.height=function(k,c){return this.dimension("height",k,c)};p.prototype.dimensions=function(k,c){this.width(k,!0);this.height(c)};p.prototype.dimension=
function(k,c,e){if(void 0!==c){if(null===c||c!==c)c=0;-1!==(""+c).indexOf("%")||-1!==(""+c).indexOf("px")?this.el_.style[k]=c:this.el_.style[k]="auto"===c?"":c+"px";e||this.trigger("componentresize")}else{if(!this.el_)return 0;c=this.el_.style[k];e=c.indexOf("px");return-1!==e?parseInt(c.slice(0,e),10):parseInt(this.el_["offset"+fa(k)],10)}};p.prototype.currentDimension=function(k){var c=0;if("width"!==k&&"height"!==k)throw Error("currentDimension only accepts width or height value");"function"===
typeof F.getComputedStyle&&(c=F.getComputedStyle(this.el_),c=c.getPropertyValue(k)||c[k]);c=parseFloat(c);0===c&&(k="offset"+fa(k),c=this.el_[k]);return c};p.prototype.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}};p.prototype.currentWidth=function(){return this.currentDimension("width")};p.prototype.currentHeight=function(){return this.currentDimension("height")};p.prototype.focus=function(){this.el_.focus()};p.prototype.blur=function(){this.el_.blur()};
p.prototype.emitTapEvents=function(){var k=0,c=null,e=void 0;this.on("touchstart",function(f){1===f.touches.length&&(c={pageX:f.touches[0].pageX,pageY:f.touches[0].pageY},k=(new Date).getTime(),e=!0)});this.on("touchmove",function(f){if(1<f.touches.length)e=!1;else if(c){var b=f.touches[0].pageX-c.pageX;f=f.touches[0].pageY-c.pageY;10<Math.sqrt(b*b+f*f)&&(e=!1)}});var n=function(){e=!1};this.on("touchleave",n);this.on("touchcancel",n);this.on("touchend",function(f){c=null;!0===e&&200>(new Date).getTime()-
k&&(f.preventDefault(),this.trigger("tap"))})};p.prototype.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var k=S(this.player(),this.player().reportUserActivity),c=void 0;this.on("touchstart",function(){k();this.clearInterval(c);c=this.setInterval(k,250)});var e=function(e){k();this.clearInterval(c)};this.on("touchmove",k);this.on("touchend",e);this.on("touchcancel",e)}};p.prototype.setTimeout=function(k,c){var e=this;k=S(this,k);var n=F.setTimeout(function(){e.off("dispose",
f);k()},c);var f=function(){return e.clearTimeout(n)};f.guid="vjs-timeout-"+n;this.on("dispose",f);return n};p.prototype.clearTimeout=function(k){F.clearTimeout(k);var c=function(){};c.guid="vjs-timeout-"+k;this.off("dispose",c);return k};p.prototype.setInterval=function(k,c){var e=this;k=S(this,k);var n=F.setInterval(k,c);k=function(){return e.clearInterval(n)};k.guid="vjs-interval-"+n;this.on("dispose",k);return n};p.prototype.clearInterval=function(k){F.clearInterval(k);var c=function(){};c.guid=
"vjs-interval-"+k;this.off("dispose",c);return k};p.prototype.requestAnimationFrame=function(k){var c=this;if(this.supportsRaf_){k=S(this,k);var e=F.requestAnimationFrame(function(){c.off("dispose",n);k()});var n=function(){return c.cancelAnimationFrame(e)};n.guid="vjs-raf-"+e;this.on("dispose",n);return e}return this.setTimeout(k,1E3/60)};p.prototype.cancelAnimationFrame=function(k){if(this.supportsRaf_){F.cancelAnimationFrame(k);var c=function(){};c.guid="vjs-raf-"+k;this.off("dispose",c);return k}return this.clearTimeout(k)};
p.registerComponent=function(k,c){if("string"!==typeof k||!k)throw Error('Illegal component name, "'+k+'"; must be a non-empty string.');var e=p.getComponent("Tech");e=e&&e.isTech(c);var n=p===c||p.prototype.isPrototypeOf(c.prototype);if(e||!n)throw Error('Illegal component, "'+k+'"; '+(e?"techs must be registered using Tech.registerTech()":"must be a Component subclass")+".");k=fa(k);p.components_||(p.components_={});e=p.getComponent("Player");if("Player"===k&&e&&e.players){var f=e.players;e=Object.keys(f);
if(f&&0<e.length&&e.map(function(e){return f[e]}).every(Boolean))throw Error("Can not register Player component after player has been created.");}return p.components_[k]=c};p.getComponent=function(k){if(k&&(k=fa(k),p.components_&&p.components_[k]))return p.components_[k]};return p}();J.prototype.supportsRaf_="function"===typeof F.requestAnimationFrame&&"function"===typeof F.cancelAnimationFrame;J.registerComponent("Component",J);var wa=F.navigator&&F.navigator.userAgent||"",Sf=/AppleWebKit\/([\d.]+)/i.exec(wa),
tj=Sf?parseFloat(Sf.pop()):null,Sd=/iPad/i.test(wa),Td=/iPhone/i.test(wa)&&!Sd,Tf=/iPod/i.test(wa),gb=Td||Sd||Tf,uj=function(){var p=wa.match(/OS (\d+)_/i);return p&&p[1]?p[1]:null}(),Eb=/Android/i.test(wa),Ud=function(){var p=wa.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!p)return null;var k=p[1]&&parseFloat(p[1]),c=p[2]&&parseFloat(p[2]);return k&&c?parseFloat(p[1]+"."+p[2]):k?k:null}(),Uf=Eb&&5>Ud&&537>tj,Vf=/Firefox/i.test(wa),Vd=/Edge/i.test(wa),qb=!Vd&&(/Chrome/i.test(wa)||/CriOS/i.test(wa)),
Wf=function(){var p=wa.match(/(Chrome|CriOS)\/(\d+)/);return p&&p[2]?parseFloat(p[2]):null}(),Xf=function(){var p=/MSIE\s(\d+)\.\d/.exec(wa);p=p&&parseFloat(p[1]);!p&&/Trident\/7.0/i.test(wa)&&/rv:11.0/.test(wa)&&(p=11);return p}(),Yf=/Safari/i.test(wa)&&!qb&&!Eb&&!Vd,Zf=(Yf||gb)&&!qb,Vc=m()&&("ontouchstart"in F||F.navigator.maxTouchPoints||F.DocumentTouch&&F.document instanceof F.DocumentTouch),vj=Object.freeze({IS_IPAD:Sd,IS_IPHONE:Td,IS_IPOD:Tf,IS_IOS:gb,IOS_VERSION:uj,IS_ANDROID:Eb,ANDROID_VERSION:Ud,
IS_NATIVE_ANDROID:Uf,IS_FIREFOX:Vf,IS_EDGE:Vd,IS_CHROME:qb,CHROME_VERSION:Wf,IE_VERSION:Xf,IS_SAFARI:Yf,IS_ANY_SAFARI:Zf,TOUCH_ENABLED:Vc}),hb={},Wc=["requestFullscreen exitFullscreen fullscreenElement fullscreenEnabled fullscreenchange fullscreenerror".split(" "),"webkitRequestFullscreen webkitExitFullscreen webkitFullscreenElement webkitFullscreenEnabled webkitfullscreenchange webkitfullscreenerror".split(" "),"webkitRequestFullScreen webkitCancelFullScreen webkitCurrentFullScreenElement webkitCancelFullScreen webkitfullscreenchange webkitfullscreenerror".split(" "),
"mozRequestFullScreen mozCancelFullScreen mozFullScreenElement mozFullScreenEnabled mozfullscreenchange mozfullscreenerror".split(" "),"msRequestFullscreen msExitFullscreen msFullscreenElement msFullscreenEnabled MSFullscreenChange MSFullscreenError".split(" ")],wj=Wc[0],Xc=void 0,Yc=0;for(;Yc<Wc.length;Yc++)if(Wc[Yc][1]in L){Xc=Wc[Yc];break}if(Xc)for(var Zc=0;Zc<Xc.length;Zc++)hb[wj[Zc]]=Xc[Zc];ua.prototype.code=0;ua.prototype.message="";ua.prototype.status=null;ua.errorTypes="MEDIA_ERR_CUSTOM MEDIA_ERR_ABORTED MEDIA_ERR_NETWORK MEDIA_ERR_DECODE MEDIA_ERR_SRC_NOT_SUPPORTED MEDIA_ERR_ENCRYPTED".split(" ");
ua.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Qb=0;Qb<ua.errorTypes.length;Qb++)ua[ua.errorTypes[Qb]]=
Qb,ua.prototype[ua.errorTypes[Qb]]=Qb;var Wd=function(p){return"kind label language id inBandMetadataTrackDispatchType mode src".split(" ").reduce(function(k,c,e){p[c]&&(k[c]=p[c]);return k},{cues:p.cues&&Array.prototype.map.call(p.cues,function(k){return{startTime:k.startTime,endTime:k.endTime,text:k.text,id:k.id}})})},$f={textTracksToJson:function(p){var k=p.$$("track"),c=Array.prototype.map.call(k,function(e){return e.track});return Array.prototype.map.call(k,function(e){var c=Wd(e.track);e.src&&
(c.src=e.src);return c}).concat(Array.prototype.filter.call(p.textTracks(),function(e){return-1===c.indexOf(e)}).map(Wd))},jsonToTextTracks:function(p,k){p.forEach(function(c){var e=k.addRemoteTextTrack(c).track;!c.src&&c.cues&&c.cues.forEach(function(c){return e.addCue(c)})});return k.textTracks()},trackToJson_:Wd},Rb=function(p){function k(c,e){N(this,k);c=M(this,p.call(this,c,e));c.opened_=c.hasBeenOpened_=c.hasBeenFilled_=!1;c.closeable(!c.options_.uncloseable);c.content(c.options_.content);c.contentEl_=
H("div",{className:"vjs-modal-dialog-content"},{role:"document"});c.descEl_=H("p",{className:"vjs-modal-dialog-description vjs-control-text",id:c.el().getAttribute("aria-describedby")});R(c.descEl_,c.description());c.el_.appendChild(c.descEl_);c.el_.appendChild(c.contentEl_);return c}K(k,p);k.prototype.createEl=function(){return p.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),
role:"dialog"})};k.prototype.dispose=function(){this.previouslyActiveEl_=this.descEl_=this.contentEl_=null;p.prototype.dispose.call(this)};k.prototype.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+p.prototype.buildCSSClass.call(this)};k.prototype.handleKeyPress=function(c){27===c.which&&this.closeable()&&this.close()};k.prototype.label=function(){return this.localize(this.options_.label||"Modal Window")};k.prototype.description=function(){var c=this.options_.description||this.localize("This is a modal window.");
this.closeable()&&(c+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button."));return c};k.prototype.open=function(){if(!this.opened_){var c=this.player();this.trigger("beforemodalopen");this.opened_=!0;(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill();this.wasPlaying_=!c.paused();this.options_.pauseOnOpen&&this.wasPlaying_&&c.pause();if(this.closeable())this.on(this.el_.ownerDocument,"keydown",S(this,this.handleKeyPress));
this.hadControls_=c.controls();c.controls(!1);this.show();this.conditionalFocus_();this.el().setAttribute("aria-hidden","false");this.trigger("modalopen");this.hasBeenOpened_=!0}};k.prototype.opened=function(c){if("boolean"===typeof c)this[c?"open":"close"]();return this.opened_};k.prototype.close=function(){if(this.opened_){var c=this.player();this.trigger("beforemodalclose");this.opened_=!1;this.wasPlaying_&&this.options_.pauseOnOpen&&c.play();this.closeable()&&this.off(this.el_.ownerDocument,"keydown",
S(this,this.handleKeyPress));this.hadControls_&&c.controls(!0);this.hide();this.el().setAttribute("aria-hidden","true");this.trigger("modalclose");this.conditionalBlur_();this.options_.temporary&&this.dispose()}};k.prototype.closeable=function(c){if("boolean"===typeof c){c=this.closeable_=!!c;var e=this.getChild("closeButton");if(c&&!e){var n=this.contentEl_;this.contentEl_=this.el_;e=this.addChild("closeButton",{controlText:"Close Modal Dialog"});this.contentEl_=n;this.on(e,"close",this.close)}!c&&
e&&(this.off(e,"close",this.close),this.removeChild(e),e.dispose())}return this.closeable_};k.prototype.fill=function(){this.fillWith(this.content())};k.prototype.fillWith=function(c){var e=this.contentEl(),n=e.parentNode,f=e.nextSibling;this.trigger("beforemodalfill");this.hasBeenFilled_=!0;n.removeChild(e);this.empty();Qa(e,c);this.trigger("modalfill");f?n.insertBefore(e,f):n.appendChild(e);(c=this.getChild("closeButton"))&&n.appendChild(c.el_)};k.prototype.empty=function(){this.trigger("beforemodalempty");
Ha(this.contentEl());this.trigger("modalempty")};k.prototype.content=function(c){"undefined"!==typeof c&&(this.content_=c);return this.content_};k.prototype.conditionalFocus_=function(){var c=L.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null;if(e.contains(c)||e===c)this.previouslyActiveEl_=c,this.focus(),this.on(L,"keydown",this.handleKeyDown)};k.prototype.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null);this.off(L,
"keydown",this.handleKeyDown)};k.prototype.handleKeyDown=function(c){if(9===c.which){for(var e=this.focusableEls_(),n=this.el_.querySelector(":focus"),f=void 0,b=0;b<e.length;b++)if(n===e[b]){f=b;break}L.activeElement===this.el_&&(f=0);c.shiftKey&&0===f?(e[e.length-1].focus(),c.preventDefault()):c.shiftKey||f!==e.length-1||(e[0].focus(),c.preventDefault())}};k.prototype.focusableEls_=function(){var c=this.el_.querySelectorAll("*");return Array.prototype.filter.call(c,function(e){return(e instanceof
F.HTMLAnchorElement||e instanceof F.HTMLAreaElement)&&e.hasAttribute("href")||(e instanceof F.HTMLInputElement||e instanceof F.HTMLSelectElement||e instanceof F.HTMLTextAreaElement||e instanceof F.HTMLButtonElement)&&!e.hasAttribute("disabled")||e instanceof F.HTMLIFrameElement||e instanceof F.HTMLObjectElement||e instanceof F.HTMLEmbedElement||e.hasAttribute("tabindex")&&-1!==e.getAttribute("tabindex")||e.hasAttribute("contenteditable")})};return k}(J);Rb.prototype.options_={pauseOnOpen:!0,temporary:!0};
J.registerComponent("ModalDialog",Rb);var Sb=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,k);var e=M(this,p.call(this));e.tracks_=[];Object.defineProperty(e,"length",{get:function(){return this.tracks_.length}});for(var n=0;n<c.length;n++)e.addTrack(c[n]);return e}K(k,p);k.prototype.addTrack=function(c){var e=this.tracks_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.tracks_[e]}});-1===this.tracks_.indexOf(c)&&(this.tracks_.push(c),
this.trigger({track:c,type:"addtrack"}))};k.prototype.removeTrack=function(c){for(var e=void 0,n=0,f=this.length;n<f;n++)if(this[n]===c){e=this[n];e.off&&e.off();this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack"})};k.prototype.getTrackById=function(c){for(var e=null,n=0,f=this.length;n<f;n++){var b=this[n];if(b.id===c){e=b;break}}return e};return k}(pa);Sb.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack"};for(var xj in Sb.prototype.allowedEvents_)Sb.prototype["on"+
xj]=null;var Xd=function(p,k){for(var c=0;c<p.length;c++)Object.keys(p[c]).length&&k.id!==p[c].id&&(p[c].enabled=!1)},yj=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,k);for(var e=c.length-1;0<=e;e--)if(c[e].enabled){Xd(c,c[e]);break}c=M(this,p.call(this,c));c.changing_=!1;return c}K(k,p);k.prototype.addTrack=function(c){var e=this;c.enabled&&Xd(this,c);p.prototype.addTrack.call(this,c);c.addEventListener&&c.addEventListener("enabledchange",function(){e.changing_||
(e.changing_=!0,Xd(e,c),e.changing_=!1,e.trigger("change"))})};return k}(Sb),Yd=function(p,k){for(var c=0;c<p.length;c++)Object.keys(p[c]).length&&k.id!==p[c].id&&(p[c].selected=!1)},zj=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,k);for(var e=c.length-1;0<=e;e--)if(c[e].selected){Yd(c,c[e]);break}c=M(this,p.call(this,c));c.changing_=!1;Object.defineProperty(c,"selectedIndex",{get:function(){for(var e=0;e<this.length;e++)if(this[e].selected)return e;
return-1},set:function(){}});return c}K(k,p);k.prototype.addTrack=function(c){var e=this;c.selected&&Yd(this,c);p.prototype.addTrack.call(this,c);c.addEventListener&&c.addEventListener("selectedchange",function(){e.changing_||(e.changing_=!0,Yd(e,c),e.changing_=!1,e.trigger("change"))})};return k}(Sb),ag=function(p){function k(){N(this,k);return M(this,p.apply(this,arguments))}K(k,p);k.prototype.addTrack=function(c){p.prototype.addTrack.call(this,c);c.addEventListener("modechange",S(this,function(){this.queueTrigger("change")}));
-1===["metadata","chapters"].indexOf(c.kind)&&c.addEventListener("modechange",S(this,function(){this.trigger("selectedlanguagechange")}))};return k}(Sb),Aj=function(){function p(){var k=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];N(this,p);this.trackElements_=[];Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var c=0,e=k.length;c<e;c++)this.addTrackElement_(k[c])}p.prototype.addTrackElement_=function(k){var c=this.trackElements_.length;""+
c in this||Object.defineProperty(this,c,{get:function(){return this.trackElements_[c]}});-1===this.trackElements_.indexOf(k)&&this.trackElements_.push(k)};p.prototype.getTrackElementByTrack_=function(k){for(var c=void 0,e=0,n=this.trackElements_.length;e<n;e++)if(k===this.trackElements_[e].track){c=this.trackElements_[e];break}return c};p.prototype.removeTrackElement_=function(k){for(var c=0,e=this.trackElements_.length;c<e;c++)if(k===this.trackElements_[c]){this.trackElements_.splice(c,1);break}};
return p}(),bg=function(){function p(k){N(this,p);p.prototype.setCues_.call(this,k);Object.defineProperty(this,"length",{get:function(){return this.length_}})}p.prototype.setCues_=function(k){var c=this.length||0,e=0,n=k.length;this.cues_=k;this.length_=k.length;k=function(e){""+e in this||Object.defineProperty(this,""+e,{get:function(){return this.cues_[e]}})};if(c<n)for(e=c;e<n;e++)k.call(this,e)};p.prototype.getCueById=function(k){for(var c=null,e=0,n=this.length;e<n;e++){var f=this[e];if(f.id===
k){c=f;break}}return c};return p}(),Bj={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},Cj={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},Dj={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},cg={disabled:"disabled",hidden:"hidden",showing:"showing"},Zd=function(p){function k(){var c=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);var e=M(this,p.call(this)),n={id:c.id||"vjs_track_"+zb++,kind:c.kind||"",label:c.label||"",language:c.language||""};c=function(c){Object.defineProperty(e,c,{get:function(){return n[c]},set:function(){}})};for(var f in n)c(f);return e}K(k,p);return k}(pa),$d=function(p){var k="protocol hostname port pathname search hash host".split(" "),c=L.createElement("a");c.href=p;var e=""===c.host&&"file:"!==c.protocol,n=void 0;e&&(n=L.createElement("div"),
n.innerHTML='<a href="'+p+'"></a>',c=n.firstChild,n.setAttribute("style","display:none; position:absolute;"),L.body.appendChild(n));p={};for(var f=0;f<k.length;f++)p[k[f]]=c[k[f]];"http:"===p.protocol&&(p.host=p.host.replace(/:80$/,""));"https:"===p.protocol&&(p.host=p.host.replace(/:443$/,""));p.protocol||(p.protocol=F.location.protocol);e&&L.body.removeChild(n);return p},dg=function(p){if(!p.match(/^https?:\/\//)){var k=L.createElement("div");k.innerHTML='<a href="'+p+'">x</a>';p=k.firstChild.href}return p},
ae=function(p){return"string"===typeof p&&(p=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/i.exec(p))?p.pop().toLowerCase():""},$c=function(p){var k=F.location;p=$d(p);return(":"===p.protocol?k.protocol:p.protocol)+p.host!==k.protocol+k.host},Ej=Object.freeze({parseUrl:$d,getAbsoluteURL:dg,getFileExtension:ae,isCrossOrigin:$c}),be=function(p){var k=Fj.call(p);return"[object Function]"===k||"function"===typeof p&&"[object RegExp]"!==k||"undefined"!==typeof window&&(p===window.setTimeout||
p===window.alert||p===window.confirm||p===window.prompt)},Fj=Object.prototype.toString,eg=Object.freeze({default:be,__moduleExports:be}),mc=C(function(p,k){k=p.exports=function(c){return c.replace(/^\s*|\s*$/g,"")};k.left=function(c){return c.replace(/^\s*/,"")};k.right=function(c){return c.replace(/\s*$/,"")}}),fg=Object.freeze({default:mc,__moduleExports:mc,left:mc.left,right:mc.right}),vf=eg&&be||eg,ce=function(p,k,c){if(!vf(k))throw new TypeError("iterator must be a function");3>arguments.length&&
(c=this);if("[object Array]"===Gj.call(p))for(var e=c,n=0,f=p.length;n<f;n++)gg.call(p,n)&&k.call(e,p[n],n,p);else if("string"===typeof p)for(e=c,n=0,f=p.length;n<f;n++)k.call(e,p.charAt(n),n,p);else for(n in e=c,p)gg.call(p,n)&&k.call(e,p[n],n,p)},Gj=Object.prototype.toString,gg=Object.prototype.hasOwnProperty,hg=Object.freeze({default:ce,__moduleExports:ce}),de=fg&&mc||fg,Hj=hg&&ce||hg,ee=function(p){if(!p)return{};var k={};Hj(de(p).split("\n"),function(c){var e=c.indexOf(":"),n=de(c.slice(0,e)).toLowerCase();
c=de(c.slice(e+1));"undefined"===typeof k[n]?k[n]=c:"[object Array]"===Object.prototype.toString.call(k[n])?k[n].push(c):k[n]=[k[n],c]});return k},ig=Object.freeze({default:ee,__moduleExports:ee}),fe=function(){for(var p={},k=0;k<arguments.length;k++){var c=arguments[k],e;for(e in c)Ij.call(c,e)&&(p[e]=c[e])}return p},Ij=Object.prototype.hasOwnProperty,jg=Object.freeze({default:fe,__moduleExports:fe}),aj=ig&&ee||ig,$i=jg&&fe||jg;fb.XMLHttpRequest=F.XMLHttpRequest||bj;fb.XDomainRequest="withCredentials"in
new fb.XMLHttpRequest?fb.XMLHttpRequest:F.XDomainRequest;(function(p,k){for(var c=0;c<p.length;c++)k(p[c])})("get put post patch head delete".split(" "),function(p){fb["delete"===p?"del":p]=function(k,c,e){c=uf(k,c,e);c.method=p.toUpperCase();return wf(c)}});var kg=function(p,k){var c=new F.WebVTT.Parser(F,F.vttjs,F.WebVTT.StringDecoder()),e=[];c.oncue=function(e){k.addCue(e)};c.onparsingerror=function(c){e.push(c)};c.onflush=function(){k.trigger({type:"loadeddata",target:k})};c.parse(p);0<e.length&&
(F.console&&F.console.groupCollapsed&&F.console.groupCollapsed("Text Track parsing errors for "+k.src),e.forEach(function(e){return V.error(e)}),F.console&&F.console.groupEnd&&F.console.groupEnd());c.flush()},Jj=function(p,k){var c={uri:p};if(p=$c(p))c.cors=p;fb(c,S(this,function(e,c,f){if(e)return V.error(e,c);k.loaded_=!0;if("function"!==typeof F.WebVTT){if(k.tech_){var b=function(){return kg(f,k)};k.tech_.on("vttjsloaded",b);k.tech_.on("vttjserror",function(){V.error("vttjs failed to load, stopping trying to process "+
k.src);k.tech_.off("vttjsloaded",b)})}}else kg(f,k)}))},nc=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);if(!c.tech)throw Error("A tech was not provided.");c=ea(c,{kind:Dj[c.kind]||"subtitles",language:c.language||c.srclang||""});var e=cg[c.mode]||"disabled",n=c.default;if("metadata"===c.kind||"chapters"===c.kind)e="hidden";var f=M(this,p.call(this,c));f.tech_=c.tech;f.cues_=[];f.activeCues_=[];var b=new bg(f.cues_),g=new bg(f.activeCues_),a=!1,
l=S(f,function(){this.activeCues=this.activeCues;a&&(this.trigger("cuechange"),a=!1)});"disabled"!==e&&f.tech_.ready(function(){f.tech_.on("timeupdate",l)},!0);Object.defineProperties(f,{default:{get:function(){return n},set:function(){}},mode:{get:function(){return e},set:function(c){var a=this;cg[c]&&(e=c,"disabled"!==e?this.tech_.ready(function(){a.tech_.on("timeupdate",l)},!0):this.tech_.off("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?b:null},set:function(){}},
activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return g;for(var e=this.tech_.currentTime(),c=[],f=0,b=this.cues.length;f<b;f++){var n=this.cues[f];n.startTime<=e&&n.endTime>=e?c.push(n):n.startTime===n.endTime&&n.startTime<=e&&n.startTime+.5>=e&&c.push(n)}a=!1;if(c.length!==this.activeCues_.length)a=!0;else for(e=0;e<c.length;e++)-1===this.activeCues_.indexOf(c[e])&&(a=!0);this.activeCues_=c;g.setCues_(this.activeCues_);return g},set:function(){}}});c.src?(f.src=c.src,
Jj(c.src,f)):f.loaded_=!0;return f}K(k,p);k.prototype.addCue=function(c){var e=c;if(F.vttjs&&!(c instanceof F.vttjs.VTTCue)){e=new F.vttjs.VTTCue(c.startTime,c.endTime,c.text);for(var n in c)n in e||(e[n]=c[n]);e.id=c.id;e.originalCue_=c}c=this.tech_.textTracks();for(n=0;n<c.length;n++)c[n]!==this&&c[n].removeCue(e);this.cues_.push(e);this.cues.setCues_(this.cues_)};k.prototype.removeCue=function(c){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===c||n.originalCue_&&n.originalCue_===c){this.cues_.splice(e,
1);this.cues.setCues_(this.cues_);break}}};return k}(Zd);nc.prototype.allowedEvents_={cuechange:"cuechange"};var lg=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);c=ea(c,{kind:Cj[c.kind]||""});var e=M(this,p.call(this,c)),n=!1;Object.defineProperty(e,"enabled",{get:function(){return n},set:function(e){"boolean"===typeof e&&e!==n&&(n=e,this.trigger("enabledchange"))}});c.enabled&&(e.enabled=c.enabled);e.loaded_=!0;return e}K(k,p);return k}(Zd),mg=
function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);c=ea(c,{kind:Bj[c.kind]||""});var e=M(this,p.call(this,c)),n=!1;Object.defineProperty(e,"selected",{get:function(){return n},set:function(e){"boolean"===typeof e&&e!==n&&(n=e,this.trigger("selectedchange"))}});c.selected&&(e.selected=c.selected);return e}K(k,p);return k}(Zd),Tb=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};N(this,k);var e=M(this,p.call(this)),
n=void 0,f=new nc(c);e.kind=f.kind;e.src=f.src;e.srclang=f.language;e.label=f.label;e.default=f.default;Object.defineProperties(e,{readyState:{get:function(){return n}},track:{get:function(){return f}}});n=0;f.addEventListener("loadeddata",function(){n=2;e.trigger({type:"load",target:e})});return e}K(k,p);return k}(pa);Tb.prototype.allowedEvents_={load:"load"};Tb.NONE=0;Tb.LOADING=1;Tb.LOADED=2;Tb.ERROR=3;var La={audio:{ListClass:yj,TrackClass:lg,capitalName:"Audio"},video:{ListClass:zj,TrackClass:mg,
capitalName:"Video"},text:{ListClass:ag,TrackClass:nc,capitalName:"Text"}};Object.keys(La).forEach(function(p){La[p].getterName=p+"Tracks";La[p].privateName=p+"Tracks_"});var oc={remoteText:{ListClass:ag,TrackClass:nc,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:Aj,TrackClass:Tb,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ga=ea(La,oc);oc.names=Object.keys(oc);La.names=Object.keys(La);
Ga.names=[].concat(oc.names).concat(La.names);var Gd=Object.create||function(){function p(){}return function(k){if(1!==arguments.length)throw Error("Object.create shim only accepts one parameter.");p.prototype=k;return new p}}();Fa.prototype=Gd(Error.prototype);Fa.prototype.constructor=Fa;Fa.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};fc.prototype={set:function(p,k){this.get(p)||""===k||(this.values[p]=k)},get:function(p,
k,c){return c?this.has(p)?this.values[p]:k[c]:this.has(p)?this.values[p]:k},has:function(p){return p in this.values},alt:function(p,k,c){for(var e=0;e<c.length;++e)if(k===c[e]){this.set(p,k);break}},integer:function(p,k){/^-?\d+$/.test(k)&&this.set(p,parseInt(k,10))},percent:function(p,k){return k.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(k=parseFloat(k),0<=k&&100>=k)?(this.set(p,k),!0):!1}};var dj={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"\u200e","&rlm;":"\u200f","&nbsp;":"\u00a0"},ej={c:"span",i:"i",
b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},fj={v:"title",lang:"lang"},yf={rt:"ruby"},zf=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,
64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,
68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],
[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];Hd.prototype.applyStyles=function(p,k){k=k||this.div;for(var c in p)p.hasOwnProperty(c)&&(k.style[c]=p[c])};Hd.prototype.formatStyle=function(p,k){return 0===p?0:p+k};Qc.prototype=Gd(Hd.prototype);Qc.prototype.constructor=Qc;va.prototype.move=function(p,k){k=void 0!==k?k:this.lineHeight;switch(p){case "+x":this.left+=k;this.right+=k;break;case "-x":this.left-=k;this.right-=k;break;case "+y":this.top+=k;this.bottom+=k;break;case "-y":this.top-=
k,this.bottom-=k}};va.prototype.overlaps=function(p){return this.left<p.right&&this.right>p.left&&this.top<p.bottom&&this.bottom>p.top};va.prototype.overlapsAny=function(p){for(var k=0;k<p.length;k++)if(this.overlaps(p[k]))return!0;return!1};va.prototype.within=function(p){return this.top>=p.top&&this.bottom<=p.bottom&&this.left>=p.left&&this.right<=p.right};va.prototype.overlapsOppositeAxis=function(p,k){switch(k){case "+x":return this.left<p.left;case "-x":return this.right>p.right;case "+y":return this.top<
p.top;case "-y":return this.bottom>p.bottom}};va.prototype.intersectPercentage=function(p){return Math.max(0,Math.min(this.right,p.right)-Math.max(this.left,p.left))*Math.max(0,Math.min(this.bottom,p.bottom)-Math.max(this.top,p.top))/(this.height*this.width)};va.prototype.toCSSCompatValues=function(p){return{top:this.top-p.top,bottom:p.bottom-this.bottom,left:this.left-p.left,right:p.right-this.right,height:this.height,width:this.width}};va.getSimpleBoxPosition=function(p){var k=p.div?p.div.offsetHeight:
p.tagName?p.offsetHeight:0,c=p.div?p.div.offsetWidth:p.tagName?p.offsetWidth:0,e=p.div?p.div.offsetTop:p.tagName?p.offsetTop:0;p=p.div?p.div.getBoundingClientRect():p.tagName?p.getBoundingClientRect():p;return{left:p.left,right:p.right,top:p.top||e,height:p.height||k,bottom:p.bottom||e+(p.height||k),width:p.width||c}};ob.StringDecoder=function(){return{decode:function(p){if(!p)return"";if("string"!==typeof p)throw Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(p))}}};
ob.convertCueToDOMTree=function(p,k){return p&&k?xf(p,k):null};ob.processCues=function(p,k,c){if(!p||!k||!c)return null;for(;c.firstChild;)c.removeChild(c.firstChild);var e=p.document.createElement("div");e.style.position="absolute";e.style.left="0";e.style.right="0";e.style.top="0";e.style.bottom="0";e.style.margin="1.5%";c.appendChild(e);if(function(e){for(var c=0;c<e.length;c++)if(e[c].hasBeenReset||!e[c].displayState)return!0;return!1}(k)){var n=[],f=va.getSimpleBoxPosition(e),b={font:Math.round(5*
f.height)/100+"px sans-serif"};(function(){for(var c,a,l=0;l<k.length;l++){a=k[l];c=new Qc(p,a,b);e.appendChild(c.div);var r=void 0,z=void 0,Q=c,d=f,h=n,m=new va(Q),q=Q.cue;if("number"===typeof q.line&&(q.snapToLines||0<=q.line&&100>=q.line))var t=q.line;else if(q.track&&q.track.textTrackList&&q.track.textTrackList.mediaElement){t=q.track;for(var A=t.textTrackList,v=0,x=0;x<A.length&&A[x]!==t;x++)"showing"===A[x].mode&&v++;t=-1*++v}else t=-1;A=[];if(q.snapToLines){switch(q.vertical){case "":A=["+y",
"-y"];z="height";break;case "rl":A=["+x","-x"];z="width";break;case "lr":A=["-x","+x"],z="width"}v=m.lineHeight;x=v*Math.round(t);z=d[z]+v;var B=A[0];Math.abs(x)>z&&(x=(0>x?-1:1)*Math.ceil(z/v)*v);0>t&&(x+=""===q.vertical?d.height:d.width,A=A.reverse());m.move(B,x)}else{m=m.lineHeight/d.height*100;switch(q.lineAlign){case "middle":t-=m/2;break;case "end":t-=m}switch(q.vertical){case "":Q.applyStyles({top:Q.formatStyle(t,"%")});break;case "rl":Q.applyStyles({left:Q.formatStyle(t,"%")});break;case "lr":Q.applyStyles({right:Q.formatStyle(t,
"%")})}A=["+y","-x","+x","-y"];m=new va(Q)}a:{q=m;m=A;z=new va(q);t=1;for(A=0;A<m.length;A++){for(;q.overlapsOppositeAxis(d,m[A])||q.within(d)&&q.overlapsAny(h);)q.move(m[A]);if(q.within(d)){r=q;break a}v=q.intersectPercentage(d);t>v&&(r=new va(q),t=v);q=new va(z)}r=r||z}Q.move(r.toCSSCompatValues(d));a.displayState=c.div;n.push(va.getSimpleBoxPosition(c))}})()}else for(c=0;c<k.length;c++)e.appendChild(k[c].displayState)};ob.Parser=function(p,k,c){c||(c=k,k={});k||(k={});this.window=p;this.vttjs=
k;this.state="INITIAL";this.buffer="";this.decoder=c||new TextDecoder("utf8");this.regionList=[]};ob.Parser.prototype={reportOrThrowError:function(p){if(p instanceof Fa)this.onparsingerror&&this.onparsingerror(p);else throw p;},parse:function(p){function k(){for(var e=f.buffer,c=0;c<e.length&&"\r"!==e[c]&&"\n"!==e[c];)++c;var a=e.substr(0,c);"\r"===e[c]&&++c;"\n"===e[c]&&++c;f.buffer=e.substr(c);return a}function c(e){var c=new fc;gc(e,function(e,a){switch(e){case "id":c.set(e,a);break;case "width":c.percent(e,
a);break;case "lines":c.integer(e,a);break;case "regionanchor":case "viewportanchor":a=a.split(",");if(2!==a.length)break;var f=new fc;f.percent("x",a[0]);f.percent("y",a[1]);if(!f.has("x")||!f.has("y"))break;c.set(e+"X",f.get("x"));c.set(e+"Y",f.get("y"));break;case "scroll":c.alt(e,a,["up"])}},/=/,/\s/);c.has("id")&&(e=new (f.vttjs.VTTRegion||f.window.VTTRegion),e.width=c.get("width",100),e.lines=c.get("lines",3),e.regionAnchorX=c.get("regionanchorX",0),e.regionAnchorY=c.get("regionanchorY",100),
e.viewportAnchorX=c.get("viewportanchorX",0),e.viewportAnchorY=c.get("viewportanchorY",100),e.scroll=c.get("scroll",""),f.onregion&&f.onregion(e),f.regionList.push({id:c.get("id"),region:e}))}function e(e){var c=new fc;gc(e,function(e,a){switch(e){case "MPEGT":c.integer(e+"S",a);break;case "LOCA":c.set(e+"L",Fd(a))}},/[^\d]:/,/,/);f.ontimestampmap&&f.ontimestampmap({MPEGTS:c.get("MPEGTS"),LOCAL:c.get("LOCAL")})}function n(a){a.match(/X-TIMESTAMP-MAP/)?gc(a,function(c,a){switch(c){case "X-TIMESTAMP-MAP":e(a)}},
/=/):gc(a,function(e,a){switch(e){case "Region":c(a)}},/:/)}var f=this;p&&(f.buffer+=f.decoder.decode(p,{stream:!0}));try{if("INITIAL"===f.state){if(!/\r\n|\n/.test(f.buffer))return this;var b=k();var g=b.match(/^WEBVTT([ \t].*)?$/);if(!g||!g[0])throw new Fa(Fa.Errors.BadSignature);f.state="HEADER"}for(p=!1;f.buffer;){if(!/\r\n|\n/.test(f.buffer))return this;p?p=!1:b=k();switch(f.state){case "HEADER":/:/.test(b)?n(b):b||(f.state="ID");continue;case "NOTE":b||(f.state="ID");continue;case "ID":if(/^NOTE($|[ \t])/.test(b)){f.state=
"NOTE";break}if(!b)continue;f.cue=new (f.vttjs.VTTCue||f.window.VTTCue)(0,0,"");f.state="CUE";if(-1===b.indexOf("--\x3e")){f.cue.id=b;continue}case "CUE":try{cj(b,f.cue,f.regionList)}catch(l){f.reportOrThrowError(l);f.cue=null;f.state="BADCUE";continue}f.state="CUETEXT";continue;case "CUETEXT":var a=-1!==b.indexOf("--\x3e");if(!b||a&&(p=!0)){f.oncue&&f.oncue(f.cue);f.cue=null;f.state="ID";continue}f.cue.text&&(f.cue.text+="\n");f.cue.text+=b;continue;case "BADCUE":b||(f.state="ID")}}}catch(l){f.reportOrThrowError(l);
if("CUETEXT"===f.state&&f.cue&&f.oncue)f.oncue(f.cue);f.cue=null;f.state="INITIAL"===f.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{this.buffer+=this.decoder.decode();if(this.cue||"HEADER"===this.state)this.buffer+="\n\n",this.parse();if("INITIAL"===this.state)throw new Fa(Fa.Errors.BadSignature);}catch(p){this.reportOrThrowError(p)}this.onflush&&this.onflush();return this}};var ng=Object.freeze({default:ob,__moduleExports:ob}),jj={"":1,lr:1,rl:1},ij={start:1,middle:1,end:1,left:1,
right:1};Rc.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var og=Object.freeze({default:Rc,__moduleExports:Rc}),Lj={"":!0,up:!0},ge=function(){var p=100,k=3,c=0,e=100,n=0,f=100,b="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return p},set:function(e){if(!hc(e))throw Error("Width must be between 0 and 100.");p=e}},lines:{enumerable:!0,get:function(){return k},set:function(e){if("number"!==typeof e)throw new TypeError("Lines must be set to a number.");
k=e}},regionAnchorY:{enumerable:!0,get:function(){return e},set:function(c){if(!hc(c))throw Error("RegionAnchorX must be between 0 and 100.");e=c}},regionAnchorX:{enumerable:!0,get:function(){return c},set:function(e){if(!hc(e))throw Error("RegionAnchorY must be between 0 and 100.");c=e}},viewportAnchorY:{enumerable:!0,get:function(){return f},set:function(e){if(!hc(e))throw Error("ViewportAnchorY must be between 0 and 100.");f=e}},viewportAnchorX:{enumerable:!0,get:function(){return n},set:function(e){if(!hc(e))throw Error("ViewportAnchorX must be between 0 and 100.");
n=e}},scroll:{enumerable:!0,get:function(){return b},set:function(e){e="string"!==typeof e?!1:Lj[e.toLowerCase()]?e.toLowerCase():!1;if(!1===e)throw new SyntaxError("An invalid or illegal string was specified.");b=e}}})},pg=Object.freeze({default:ge,__moduleExports:ge}),Mj=ng&&ob||ng,Nj=og&&Rc||og,Oj=pg&&ge||pg,qg=C(function(p){p=p.exports={WebVTT:Mj,VTTCue:Nj,VTTRegion:Oj};F.vttjs=p;F.WebVTT=p.WebVTT;var k=p.VTTCue,c=p.VTTRegion,e=F.VTTCue,n=F.VTTRegion;p.shim=function(){F.VTTCue=k;F.VTTRegion=c};
p.restore=function(){F.VTTCue=e;F.VTTRegion=n};F.VTTCue||p.shim()}),da=function(p){function k(){var c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:function(){};N(this,k);c.reportTouchActivity=!1;var n=M(this,p.call(this,null,c,e));n.hasStarted_=!1;n.on("playing",function(){this.hasStarted_=!0});n.on("loadstart",function(){this.hasStarted_=!1});Ga.names.forEach(function(e){e=Ga[e];c&&c[e.getterName]&&(n[e.privateName]=c[e.getterName])});
n.featuresProgressEvents||n.manualProgressOn();n.featuresTimeupdateEvents||n.manualTimeUpdatesOn();["Text","Audio","Video"].forEach(function(e){!1===c["native"+e+"Tracks"]&&(n["featuresNative"+e+"Tracks"]=!1)});if(!1===c.nativeCaptions||!1===c.nativeTextTracks)n.featuresNativeTextTracks=!1;else if(!0===c.nativeCaptions||!0===c.nativeTextTracks)n.featuresNativeTextTracks=!0;n.featuresNativeTextTracks||n.emulateTextTracks();n.autoRemoteTextTracks_=new Ga.text.ListClass;n.initTrackListeners();c.nativeControlsForTouch||
n.emitTapEvents();n.constructor&&(n.name_=n.constructor.name||"Unknown Tech");return n}K(k,p);k.prototype.triggerSourceset=function(c){var e=this;if(!this.isReady_)this.one("ready",function(){return e.setTimeout(function(){return e.triggerSourceset(c)},1)});this.trigger({src:c,type:"sourceset"})};k.prototype.manualProgressOn=function(){this.on("durationchange",this.onDurationChange);this.manualProgress=!0;this.one("ready",this.trackProgress)};k.prototype.manualProgressOff=function(){this.manualProgress=
!1;this.stopTrackingProgress();this.off("durationchange",this.onDurationChange)};k.prototype.trackProgress=function(c){this.stopTrackingProgress();this.progressInterval=this.setInterval(S(this,function(){var e=this.bufferedPercent();this.bufferedPercent_!==e&&this.trigger("progress");this.bufferedPercent_=e;1===e&&this.stopTrackingProgress()}),500)};k.prototype.onDurationChange=function(c){this.duration_=this.duration()};k.prototype.buffered=function(){return Ya(0,0)};k.prototype.bufferedPercent=
function(){return sf(this.buffered(),this.duration_)};k.prototype.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)};k.prototype.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0;this.on("play",this.trackCurrentTime);this.on("pause",this.stopTrackingCurrentTime)};k.prototype.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1;this.stopTrackingCurrentTime();this.off("play",this.trackCurrentTime);this.off("pause",this.stopTrackingCurrentTime)};k.prototype.trackCurrentTime=
function(){this.currentTimeInterval&&this.stopTrackingCurrentTime();this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)};k.prototype.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval);this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};k.prototype.dispose=function(){this.clearTracks(La.names);this.manualProgress&&this.manualProgressOff();this.manualTimeUpdates&&this.manualTimeUpdatesOff();
p.prototype.dispose.call(this)};k.prototype.clearTracks=function(c){var e=this;c=[].concat(c);c.forEach(function(c){for(var f=e[c+"Tracks"]()||[],b=f.length;b--;){var n=f[b];"text"===c&&e.removeRemoteTextTrack(n);f.removeTrack(n)}})};k.prototype.cleanupAutoTextTracks=function(){for(var c=this.autoRemoteTextTracks_||[],e=c.length;e--;)this.removeRemoteTextTrack(c[e])};k.prototype.reset=function(){};k.prototype.error=function(c){void 0!==c&&(this.error_=new ua(c),this.trigger("error"));return this.error_};
k.prototype.played=function(){return this.hasStarted_?Ya(0,0):Ya()};k.prototype.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})};k.prototype.initTrackListeners=function(){var c=this;La.names.forEach(function(e){var n=function(){c.trigger(e+"trackchange")},f=c[La[e].getterName]();f.addEventListener("removetrack",n);f.addEventListener("addtrack",n);c.on("dispose",function(){f.removeEventListener("removetrack",n);f.removeEventListener("addtrack",
n)})})};k.prototype.addWebVttScript_=function(){var c=this;if(!F.WebVTT)if(L.body.contains(this.el()))if(!this.options_["vtt.js"]&&d(qg)&&0<Object.keys(qg).length)this.trigger("vttjsloaded");else{var e=L.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js";e.onload=function(){c.trigger("vttjsloaded")};e.onerror=function(){c.trigger("vttjserror")};this.on("dispose",function(){e.onload=null;e.onerror=null});F.WebVTT=!0;this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)};
k.prototype.emulateTextTracks=function(){var c=this,e=this.textTracks(),n=this.remoteTextTracks(),f=function(c){return e.addTrack(c.track)},b=function(c){return e.removeTrack(c.track)};n.on("addtrack",f);n.on("removetrack",b);this.addWebVttScript_();var k=function(){return c.trigger("texttrackchange")},a=function(){k();for(var c=0;c<e.length;c++){var a=e[c];a.removeEventListener("cuechange",k);"showing"===a.mode&&a.addEventListener("cuechange",k)}};a();e.addEventListener("change",a);e.addEventListener("addtrack",
a);e.addEventListener("removetrack",a);this.on("dispose",function(){n.off("addtrack",f);n.off("removetrack",b);e.removeEventListener("change",a);e.removeEventListener("addtrack",a);e.removeEventListener("removetrack",a);for(var c=0;c<e.length;c++)e[c].removeEventListener("cuechange",k)})};k.prototype.addTextTrack=function(c,e,n){if(!c)throw Error("TextTrack kind is required but was not provided");return kj(this,c,e,n)};k.prototype.createRemoteTextTrack=function(c){c=ea(c,{tech:this});return new oc.remoteTextEl.TrackClass(c)};
k.prototype.addRemoteTextTrack=function(){var c=this,e=arguments[1],n=this.createRemoteTextTrack(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{});!0!==e&&!1!==e&&(V.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0);this.remoteTextTrackEls().addTrackElement_(n);this.remoteTextTracks().addTrack(n.track);!0!==e&&this.ready(function(){return c.autoRemoteTextTracks_.addTrack(n.track)});
return n};k.prototype.removeRemoteTextTrack=function(c){var e=this.remoteTextTrackEls().getTrackElementByTrack_(c);this.remoteTextTrackEls().removeTrackElement_(e);this.remoteTextTracks().removeTrack(c);this.autoRemoteTextTracks_.removeTrack(c)};k.prototype.getVideoPlaybackQuality=function(){return{}};k.prototype.setPoster=function(){};k.prototype.playsinline=function(){};k.prototype.setPlaysinline=function(){};k.prototype.overrideNativeAudioTracks=function(){};k.prototype.overrideNativeVideoTracks=
function(){};k.prototype.canPlayType=function(){return""};k.canPlayType=function(){return""};k.canPlaySource=function(c,e){return k.canPlayType(c.type)};k.isTech=function(c){return c.prototype instanceof k||c instanceof k||c===k};k.registerTech=function(c,e){k.techs_||(k.techs_={});if(!k.isTech(e))throw Error("Tech "+c+" must be a Tech");if(!k.canPlayType)throw Error("Techs must have a static canPlayType method on them");if(!k.canPlaySource)throw Error("Techs must have a static canPlaySource method on them");
c=fa(c);k.techs_[c]=e;"Tech"!==c&&k.defaultTechOrder_.push(c);return e};k.getTech=function(c){if(c){c=fa(c);if(k.techs_&&k.techs_[c])return k.techs_[c];if(F&&F.videojs&&F.videojs[c])return V.warn("The "+c+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),F.videojs[c]}};return k}(J);Ga.names.forEach(function(p){var k=Ga[p];da.prototype[k.getterName]=function(){this[k.privateName]=this[k.privateName]||new k.ListClass;return this[k.privateName]}});
da.prototype.featuresVolumeControl=!0;da.prototype.featuresMuteControl=!0;da.prototype.featuresFullscreenResize=!1;da.prototype.featuresPlaybackRate=!1;da.prototype.featuresProgressEvents=!1;da.prototype.featuresSourceset=!1;da.prototype.featuresTimeupdateEvents=!1;da.prototype.featuresNativeTextTracks=!1;da.withSourceHandlers=function(p){p.registerSourceHandler=function(k,c){var e=p.sourceHandlers;e||(e=p.sourceHandlers=[]);void 0===c&&(c=e.length);e.splice(c,0,k)};p.canPlayType=function(k){for(var c=
p.sourceHandlers||[],e,n=0;n<c.length;n++)if(e=c[n].canPlayType(k))return e;return""};p.selectSourceHandler=function(k,c){for(var e=p.sourceHandlers||[],n,f=0;f<e.length;f++)if(n=e[f].canHandleSource(k,c))return e[f];return null};p.canPlaySource=function(k,c){var e=p.selectSourceHandler(k,c);return e?e.canHandleSource(k,c):""};["seekable","seeking","duration"].forEach(function(k){var c=this[k];"function"===typeof c&&(this[k]=function(){return this.sourceHandler_&&this.sourceHandler_[k]?this.sourceHandler_[k].apply(this.sourceHandler_,
arguments):c.apply(this,arguments)})},p.prototype);p.prototype.setSource=function(k){var c=p.selectSourceHandler(k,this.options_);c||(p.nativeSourceHandler?c=p.nativeSourceHandler:V.error("No source handler found for the current source."));this.disposeSourceHandler();this.off("dispose",this.disposeSourceHandler);c!==p.nativeSourceHandler&&(this.currentSource_=k);this.sourceHandler_=c.handleSource(k,this,this.options_);this.on("dispose",this.disposeSourceHandler)};p.prototype.disposeSourceHandler=
function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null);this.cleanupAutoTextTracks();this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};J.registerComponent("Tech",da);da.registerTech("Tech",da);da.defaultTechOrder_=[];var Db={},Kd={},Sc={},Pj={buffered:1,currentTime:1,duration:1,seekable:1,played:1,paused:1},Qj={setCurrentTime:1},rg={play:1,pause:1},Rj={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",
mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",mp3:"audio/mpeg",aac:"audio/aac",oga:"audio/ogg",m3u8:"application/x-mpegURL"},Cf=function(){var p=ae(0<arguments.length&&void 0!==arguments[0]?arguments[0]:"");return Rj[p.toLowerCase()]||""},Sj=function(p,k){if(!k)return"";if(p.cache_.source.src===k&&p.cache_.source.type)return p.cache_.source.type;var c=p.cache_.sources.filter(function(e){return e.src===k});if(c.length)return c[0].type;p=p.$$("source");for(c=0;c<p.length;c++){var e=p[c];if(e.type&&
e.src&&e.src===k)return e.type}return Cf(k)},Tj=function c(k){if(Array.isArray(k)){var e=[];k.forEach(function(n){n=c(n);Array.isArray(n)?e=e.concat(n):h(n)&&e.push(n)});k=e}else k="string"===typeof k&&k.trim()?[Bf({src:k})]:h(k)&&"string"===typeof k.src&&k.src&&k.src.trim()?[Bf(k)]:[];return k},Uj=function(k){function c(e,n,f){N(this,c);var b=ea({createEl:!1},n);f=M(this,k.call(this,e,b,f));if(n.playerOptions.sources&&0!==n.playerOptions.sources.length)e.src(n.playerOptions.sources);else for(b=0,
n=n.playerOptions.techOrder;b<n.length;b++){var g=fa(n[b]),a=da.getTech(g);g||(a=J.getComponent(g));if(a&&a.isSupported()){e.loadTech_(g);break}}return f}K(c,k);return c}(J);J.registerComponent("MediaLoader",Uj);var ad=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.emitTapEvents();e.enable();return e}K(c,k);c.prototype.createEl=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"div",c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{};c=w({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass(),tabIndex:0},c);"button"===e&&V.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead.");f=w({role:"button"},f);this.tabIndex_=c.tabIndex;e=k.prototype.createEl.call(this,e,c,f);this.createControlTextEl(e);return e};c.prototype.dispose=function(){this.controlTextEl_=null;k.prototype.dispose.call(this)};
c.prototype.createControlTextEl=function(e){this.controlTextEl_=H("span",{className:"vjs-control-text"},{"aria-live":"polite"});e&&e.appendChild(this.controlTextEl_);this.controlText(this.controlText_,e);return this.controlTextEl_};c.prototype.controlText=function(e){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.el();if(void 0===e)return this.controlText_||"Need Text";var f=this.localize(e);this.controlText_=e;R(this.controlTextEl_,f);this.nonIconControl||c.setAttribute("title",
f)};c.prototype.buildCSSClass=function(){return"vjs-control vjs-button "+k.prototype.buildCSSClass.call(this)};c.prototype.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick),this.on("focus",this.handleFocus),this.on("blur",this.handleBlur))};c.prototype.disable=function(){this.enabled_=!1;this.addClass("vjs-disabled");
this.el_.setAttribute("aria-disabled","true");"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex");this.off(["tap","click"],this.handleClick);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur)};c.prototype.handleClick=function(e){};c.prototype.handleFocus=function(e){ya(L,"keydown",S(this,this.handleKeyPress))};c.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.trigger("click")):k.prototype.handleKeyPress&&k.prototype.handleKeyPress.call(this,
e)};c.prototype.handleBlur=function(e){ta(L,"keydown",S(this,this.handleKeyPress))};return c}(J);J.registerComponent("ClickableComponent",ad);var Vj=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.update();e.on("posterchange",S(n,n.update));return n}K(c,k);c.prototype.dispose=function(){this.player().off("posterchange",this.update);k.prototype.dispose.call(this)};c.prototype.createEl=function(){return H("div",{className:"vjs-poster",tabIndex:-1})};c.prototype.update=function(e){e=
this.player().poster();this.setSrc(e);e?this.show():this.hide()};c.prototype.setSrc=function(e){var c="";e&&(c='url("'+e+'")');this.el_.style.backgroundImage=c};c.prototype.handleClick=function(e){this.player_.controls()&&(this.player_.paused()?ec(this.player_.play()):this.player_.pause())};return c}(ad);J.registerComponent("PosterImage",Vj);var Wj={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',
proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'},Xj=function(k){function c(e,n,f){N(this,c);n=M(this,k.call(this,e,n,f));var b=S(n,n.updateDisplay);e.on("loadstart",S(n,n.toggleDisplay));e.on("texttrackchange",b);e.on("loadstart",S(n,n.preselectTrack));e.ready(S(n,function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",
b);e.on("playerresize",b);F.addEventListener("orientationchange",b);e.on("dispose",function(){return F.removeEventListener("orientationchange",b)});for(var c=this.options_.playerOptions.tracks||[],a=0;a<c.length;a++)this.player_.addRemoteTextTrack(c[a],!0);this.preselectTrack()}}));return n}K(c,k);c.prototype.preselectTrack=function(){for(var e={captions:1,subtitles:1},c=this.player_.textTracks(),f=this.player_.cache_.selectedLanguage,b=void 0,k=void 0,a=void 0,l=0;l<c.length;l++){var r=c[l];f&&f.enabled&&
f.language===r.language?r.kind===f.kind?a=r:a||(a=r):f&&!f.enabled?k=b=a=null:r.default&&("descriptions"!==r.kind||b?r.kind in e&&!k&&(k=r):b=r)}a?a.mode="showing":k?k.mode="showing":b&&(b.mode="showing")};c.prototype.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})};c.prototype.clearDisplay=
function(){"function"===typeof F.WebVTT&&F.WebVTT.processCues(F,[],this.el_)};c.prototype.updateDisplay=function(){var e=this.player_.textTracks();this.clearDisplay();for(var c=null,f=null,b=e.length;b--;){var k=e[b];"showing"===k.mode&&("descriptions"===k.kind?c=k:f=k)}f?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(f)):c&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(c))};c.prototype.updateForTrack=
function(e){if("function"===typeof F.WebVTT&&e.activeCues){for(var c=[],f=0;f<e.activeCues.length;f++)c.push(e.activeCues[f]);F.WebVTT.processCues(F,c,this.el_);if(this.player_.textTrackSettings)for(e=this.player_.textTrackSettings.getValues(),f=c.length;f--;){var b=c[f];if(b){b=b.displayState;e.color&&(b.firstChild.style.color=e.color);if(e.textOpacity){var k=Ld(e.color||"#fff",e.textOpacity);try{b.firstChild.style.color=k}catch(a){}}e.backgroundColor&&(b.firstChild.style.backgroundColor=e.backgroundColor);
if(e.backgroundOpacity){k=Ld(e.backgroundColor||"#000",e.backgroundOpacity);try{b.firstChild.style.backgroundColor=k}catch(a){}}if(e.windowColor)if(e.windowOpacity){k=Ld(e.windowColor,e.windowOpacity);try{b.style.backgroundColor=k}catch(a){}}else b.style.backgroundColor=e.windowColor;e.edgeStyle&&("dropshadow"===e.edgeStyle?b.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?b.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":
"depressed"===e.edgeStyle?b.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(b.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222"));e.fontPercent&&1!==e.fontPercent&&(k=F.parseFloat(b.style.fontSize),b.style.fontSize=k*e.fontPercent+"px",b.style.height="auto",b.style.top="auto",b.style.bottom="2px");e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?b.firstChild.style.fontVariant="small-caps":
b.firstChild.style.fontFamily=Wj[e.fontFamily])}}}};return c}(J);J.registerComponent("TextTrackDisplay",Xj);var Yj=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.createEl=function(){var e=this.player_.isAudio();e=this.localize(e?"Audio Player":"Video Player");e=H("span",{className:"vjs-control-text",innerHTML:this.localize("{1} is loading.",[e])});var c=k.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});c.appendChild(e);
return c};return c}(J);J.registerComponent("LoadingSpinner",Yj);var ib=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.createEl=function(e){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};e="button";c=w({innerHTML:'<span aria-hidden="true" class="vjs-icon-placeholder"></span>',className:this.buildCSSClass()},c);f=w({type:"button"},f);c=J.prototype.createEl.call(this,e,c,f);this.createControlTextEl(c);
return c};c.prototype.addChild=function(e){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};V.warn("Adding an actionable (user controllable) child to a Button ("+this.constructor.name+") is not supported; use a ClickableComponent instead.");return J.prototype.addChild.call(this,e,c)};c.prototype.enable=function(){k.prototype.enable.call(this);this.el_.removeAttribute("disabled")};c.prototype.disable=function(){k.prototype.disable.call(this);this.el_.setAttribute("disabled","disabled")};
c.prototype.handleKeyPress=function(e){32!==e.which&&13!==e.which&&k.prototype.handleKeyPress.call(this,e)};return c}(ad);J.registerComponent("Button",ib);var sg=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.mouseused_=!1;e.on("mousedown",e.handleMouseDown);return e}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-big-play-button"};c.prototype.handleClick=function(e){var c=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY)ec(c);else{var f=(e=this.player_.getChild("controlBar"))&&
e.getChild("playToggle");f?(e=function(){return f.focus()},tf(c)?c.then(e,function(){}):this.setTimeout(e,1)):this.player_.focus()}};c.prototype.handleKeyPress=function(e){this.mouseused_=!1;k.prototype.handleKeyPress.call(this,e)};c.prototype.handleMouseDown=function(e){this.mouseused_=!0};return c}(ib);sg.prototype.controlText_="Play Video";J.registerComponent("BigPlayButton",sg);var Zj=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.controlText(n&&n.controlText||e.localize("Close"));
return e}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-close-button "+k.prototype.buildCSSClass.call(this)};c.prototype.handleClick=function(e){this.trigger({type:"close",bubbles:!1})};return c}(ib);J.registerComponent("CloseButton",Zj);var tg=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.on(e,"play",n.handlePlay);n.on(e,"pause",n.handlePause);n.on(e,"ended",n.handleEnded);return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-play-control "+k.prototype.buildCSSClass.call(this)};
c.prototype.handleClick=function(e){this.player_.paused()?this.player_.play():this.player_.pause()};c.prototype.handleSeeked=function(e){this.removeClass("vjs-ended");this.player_.paused()?this.handlePause(e):this.handlePlay(e)};c.prototype.handlePlay=function(e){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.controlText("Pause")};c.prototype.handlePause=function(e){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.controlText("Play")};
c.prototype.handleEnded=function(e){this.removeClass("vjs-playing");this.addClass("vjs-ended");this.controlText("Replay");this.one(this.player_,"seeked",this.handleSeeked)};return c}(ib);tg.prototype.controlText_="Play";J.registerComponent("PlayToggle",tg);var ug=function(k,c){k=0>k?0:k;var e=Math.floor(k%60),n=Math.floor(k/60%60),f=Math.floor(k/3600),b=Math.floor(c/60%60);c=Math.floor(c/3600);if(isNaN(k)||Infinity===k)f=n=e="-";f=0<f||0<c?f+":":"";return f+(((f||10<=b)&&10>n?"0"+n:n)+":")+(10>e?
"0"+e:e)},Md=ug,Ub=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.throttledUpdateContent=Pb(S(n,n.updateContent),25);n.on(e,"timeupdate",n.throttledUpdateContent);return n}K(c,k);c.prototype.createEl=function(e){e=this.buildCSSClass();var c=k.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control",innerHTML:'<span class="vjs-control-text">'+this.localize(this.labelText_)+"\u00a0</span>"});this.contentEl_=H("span",{className:e+"-display"},{"aria-live":"off"});
this.updateTextNode_();c.appendChild(this.contentEl_);return c};c.prototype.dispose=function(){this.textNode_=this.contentEl_=null;k.prototype.dispose.call(this)};c.prototype.updateTextNode_=function(){if(this.contentEl_){for(;this.contentEl_.firstChild;)this.contentEl_.removeChild(this.contentEl_.firstChild);this.textNode_=L.createTextNode(this.formattedTime_||this.formatTime_(0));this.contentEl_.appendChild(this.textNode_)}};c.prototype.formatTime_=function(e){return Mb(e)};c.prototype.updateFormattedTime_=
function(e){e=this.formatTime_(e);e!==this.formattedTime_&&(this.formattedTime_=e,this.requestAnimationFrame(this.updateTextNode_))};c.prototype.updateContent=function(e){};return c}(J);Ub.prototype.labelText_="Time";Ub.prototype.controlText_="Time";J.registerComponent("TimeDisplay",Ub);var he=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.on(e,"ended",n.handleEnded);return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-current-time"};c.prototype.updateContent=function(e){e=
this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();this.updateFormattedTime_(e)};c.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(this.player_.duration())};return c}(Ub);he.prototype.labelText_="Current Time";he.prototype.controlText_="Current Time";J.registerComponent("CurrentTimeDisplay",he);var ie=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.on(e,"durationchange",n.updateContent);n.on(e,"loadedmetadata",
n.throttledUpdateContent);return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-duration"};c.prototype.updateContent=function(e){(e=this.player_.duration())&&this.duration_!==e&&(this.duration_=e,this.updateFormattedTime_(e))};return c}(Ub);ie.prototype.labelText_="Duration";ie.prototype.controlText_="Duration";J.registerComponent("DurationDisplay",ie);var ak=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-time-control vjs-time-divider",innerHTML:"<div><span>/</span></div>"})};return c}(J);J.registerComponent("TimeDivider",ak);var je=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.on(e,"durationchange",n.throttledUpdateContent);n.on(e,"ended",n.handleEnded);return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-remaining-time"};c.prototype.formatTime_=function(e){return"-"+k.prototype.formatTime_.call(this,e)};c.prototype.updateContent=function(e){this.player_.duration()&&
(this.player_.remainingTimeDisplay?this.updateFormattedTime_(this.player_.remainingTimeDisplay()):this.updateFormattedTime_(this.player_.remainingTime()))};c.prototype.handleEnded=function(e){this.player_.duration()&&this.updateFormattedTime_(0)};return c}(Ub);je.prototype.labelText_="Remaining Time";je.prototype.controlText_="Remaining Time";J.registerComponent("RemainingTimeDisplay",je);var bk=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.updateShowing();e.on(e.player(),"durationchange",
e.updateShowing);return e}K(c,k);c.prototype.createEl=function(){var e=k.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});this.contentEl_=H("div",{className:"vjs-live-display",innerHTML:'<span class="vjs-control-text">'+this.localize("Stream Type")+"\u00a0</span>"+this.localize("LIVE")},{"aria-live":"off"});e.appendChild(this.contentEl_);return e};c.prototype.dispose=function(){this.contentEl_=null;k.prototype.dispose.call(this)};c.prototype.updateShowing=function(e){Infinity===
this.player().duration()?this.show():this.hide()};return c}(J);J.registerComponent("LiveDisplay",bk);var ke=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.bar=e.getChild(e.options_.barName);e.vertical(!!e.options_.vertical);e.enable();return e}K(c,k);c.prototype.enabled=function(){return this.enabled_};c.prototype.enable=function(){if(!this.enabled()){this.on("mousedown",this.handleMouseDown);this.on("touchstart",this.handleMouseDown);this.on("focus",this.handleFocus);this.on("blur",
this.handleBlur);this.on("click",this.handleClick);this.on(this.player_,"controlsvisible",this.update);if(this.playerEvent)this.on(this.player_,this.playerEvent,this.update);this.removeClass("disabled");this.setAttribute("tabindex",0);this.enabled_=!0}};c.prototype.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown);this.off("touchstart",this.handleMouseDown);this.off("focus",this.handleFocus);this.off("blur",this.handleBlur);this.off("click",
this.handleClick);this.off(this.player_,"controlsvisible",this.update);this.off(e,"mousemove",this.handleMouseMove);this.off(e,"mouseup",this.handleMouseUp);this.off(e,"touchmove",this.handleMouseMove);this.off(e,"touchend",this.handleMouseUp);this.removeAttribute("tabindex");this.addClass("disabled");this.playerEvent&&this.off(this.player_,this.playerEvent,this.update);this.enabled_=!1}};c.prototype.createEl=function(e){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},f=2<arguments.length&&
void 0!==arguments[2]?arguments[2]:{};c.className+=" vjs-slider";c=w({tabIndex:0},c);f=w({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},f);return k.prototype.createEl.call(this,e,c,f)};c.prototype.handleMouseDown=function(e){var c=this.bar.el_.ownerDocument;"mousedown"===e.type&&e.preventDefault();"touchstart"!==e.type||qb||e.preventDefault();ca();this.addClass("vjs-sliding");this.trigger("slideractive");this.on(c,"mousemove",this.handleMouseMove);this.on(c,"mouseup",
this.handleMouseUp);this.on(c,"touchmove",this.handleMouseMove);this.on(c,"touchend",this.handleMouseUp);this.handleMouseMove(e)};c.prototype.handleMouseMove=function(e){};c.prototype.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;sa();this.removeClass("vjs-sliding");this.trigger("sliderinactive");this.off(e,"mousemove",this.handleMouseMove);this.off(e,"mouseup",this.handleMouseUp);this.off(e,"touchmove",this.handleMouseMove);this.off(e,"touchend",this.handleMouseUp);this.update()};c.prototype.update=
function(){if(this.el_){var e=this.getPercent(),c=this.bar;if(c){if("number"!==typeof e||e!==e||0>e||Infinity===e)e=0;var f=(100*e).toFixed(2)+"%";c=c.el().style;this.vertical()?c.height=f:c.width=f;return e}}};c.prototype.calculateDistance=function(e){e=ia(this.el_,e);return this.vertical()?e.y:e.x};c.prototype.handleFocus=function(){this.on(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};c.prototype.handleKeyPress=function(e){if(37===e.which||40===e.which)e.preventDefault(),this.stepBack();
else if(38===e.which||39===e.which)e.preventDefault(),this.stepForward()};c.prototype.handleBlur=function(){this.off(this.bar.el_.ownerDocument,"keydown",this.handleKeyPress)};c.prototype.handleClick=function(e){e.stopImmediatePropagation();e.preventDefault()};c.prototype.vertical=function(e){if(void 0===e)return this.vertical_||!1;(this.vertical_=!!e)?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")};return c}(J);J.registerComponent("Slider",ke);var ck=function(k){function c(e,
n){N(this,c);n=M(this,k.call(this,e,n));n.partEls_=[];n.on(e,"progress",n.update);return n}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-load-progress",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Loaded")+"</span>: 0%</span>"})};c.prototype.dispose=function(){this.partEls_=null;k.prototype.dispose.call(this)};c.prototype.update=function(e){e=this.player_.buffered();var c=this.player_.duration(),f=this.player_.bufferedEnd(),
b=this.partEls_,k=function(e,c){e=e/c||0;return 100*(1<=e?1:e)+"%"};this.el_.style.width=k(f,c);for(c=0;c<e.length;c++){var a=e.start(c),l=e.end(c),r=b[c];r||(r=this.el_.appendChild(H()),b[c]=r);r.style.left=k(a,f);r.style.width=k(l-a,f)}for(f=b.length;f>e.length;f--)this.el_.removeChild(b[f-1]);b.length=e.length};return c}(J);J.registerComponent("LoadProgressBar",ck);var dk=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-time-tooltip"})};c.prototype.update=function(e,c,f){var b=Z(this.el_),n=Z(this.player_.el()),a=e.width*c;n&&b&&(c=e.left-n.left+a,e=e.width-a+(n.right-e.right),n=b.width/2,c<n?n+=n-c:e<n&&(n=e),0>n?n=0:n>b.width&&(n=b.width),this.el_.style.right="-"+n+"px",R(this.el_,f))};return c}(J);J.registerComponent("TimeTooltip",dk);var le=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-play-progress vjs-slider-bar",innerHTML:'<span class="vjs-control-text"><span>'+this.localize("Progress")+"</span>: 0%</span>"})};c.prototype.update=function(e,c){var f=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var b=f.player_.scrubbing()?f.player_.getCache().currentTime:f.player_.currentTime();b=Mb(b,f.player_.duration());var n=f.getChild("timeTooltip");n&&n.update(e,c,b)})};return c}(J);le.prototype.options_=
{children:[]};gb||Eb||le.prototype.options_.children.push("timeTooltip");J.registerComponent("PlayProgressBar",le);var vg=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.update=Pb(S(e,e.update),25);return e}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})};c.prototype.update=function(e,c){var f=this;this.rafId_&&this.cancelAnimationFrame(this.rafId_);this.rafId_=this.requestAnimationFrame(function(){var b=f.player_.duration();
b=Mb(c*b,b);f.el_.style.left=e.width*c+"px";f.getChild("timeTooltip").update(e,c,b)})};return c}(J);vg.prototype.options_={children:["timeTooltip"]};J.registerComponent("MouseTimeDisplay",vg);var bd=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.setEventHandlers_();return e}K(c,k);c.prototype.setEventHandlers_=function(){var e=this;this.update=Pb(S(this,this.update),30);this.on(this.player_,"timeupdate",this.update);this.on(this.player_,"ended",this.handleEnded);this.updateInterval=
null;this.on(this.player_,["playing"],function(){e.clearInterval(e.updateInterval);e.updateInterval=e.setInterval(function(){e.requestAnimationFrame(function(){e.update()})},30)});this.on(this.player_,["ended","pause","waiting"],function(){e.clearInterval(e.updateInterval)});this.on(this.player_,["timeupdate","ended"],this.update)};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})};c.prototype.update_=
function(e,c){var f=this.player_.duration();this.el_.setAttribute("aria-valuenow",(100*c).toFixed(2));this.el_.setAttribute("aria-valuetext",this.localize("progress bar timing: currentTime={1} duration={2}",[Mb(e,f),Mb(f,f)],"{1} of {2}"));this.bar.update(Z(this.el_),c)};c.prototype.update=function(e){e=k.prototype.update.call(this);this.update_(this.getCurrentTime_(),e);return e};c.prototype.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()};
c.prototype.handleEnded=function(e){this.update_(this.player_.duration(),1)};c.prototype.getPercent=function(){var e=this.getCurrentTime_()/this.player_.duration();return 1<=e?1:e||0};c.prototype.handleMouseDown=function(e){Ia(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),k.prototype.handleMouseDown.call(this,e))};c.prototype.handleMouseMove=function(e){Ia(e)&&(e=this.calculateDistance(e)*this.player_.duration(),e===this.player_.duration()&&
(e-=.1),this.player_.currentTime(e))};c.prototype.enable=function(){k.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()};c.prototype.disable=function(){k.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()};c.prototype.handleMouseUp=function(e){k.prototype.handleMouseUp.call(this,e);e&&e.stopPropagation();this.player_.scrubbing(!1);this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0});this.videoWasPlaying&&ec(this.player_.play())};
c.prototype.stepForward=function(){this.player_.currentTime(this.player_.currentTime()+5)};c.prototype.stepBack=function(){this.player_.currentTime(this.player_.currentTime()-5)};c.prototype.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()};c.prototype.handleKeyPress=function(e){32===e.which||13===e.which?(e.preventDefault(),this.handleAction(e)):k.prototype.handleKeyPress&&k.prototype.handleKeyPress.call(this,e)};return c}(ke);bd.prototype.options_={children:["loadProgressBar",
"playProgressBar"],barName:"playProgressBar"};gb||Eb||bd.prototype.options_.children.splice(1,0,"mouseTimeDisplay");bd.prototype.playerEvent="timeupdate";J.registerComponent("SeekBar",bd);var wg=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.handleMouseMove=Pb(S(e,e.handleMouseMove),25);e.throttledHandleMouseSeek=Pb(S(e,e.handleMouseSeek),25);e.enable();return e}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})};
c.prototype.handleMouseMove=function(e){var c=this.getChild("seekBar");if(c){var f=c.getChild("mouseTimeDisplay"),b=c.el();c=Z(b);e=ia(b,e).x;1<e?e=1:0>e&&(e=0);f&&f.update(c,e)}};c.prototype.handleMouseSeek=function(e){var c=this.getChild("seekBar");c&&c.handleMouseMove(e)};c.prototype.enabled=function(){return this.enabled_};c.prototype.disable=function(){this.children().forEach(function(e){return e.disable&&e.disable()});this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDown),
this.off(this.el_,"mousemove",this.handleMouseMove),this.handleMouseUp(),this.addClass("disabled"),this.enabled_=!1)};c.prototype.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()});this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDown),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)};c.prototype.handleMouseDown=function(e){var c=this.el_.ownerDocument,f=this.getChild("seekBar");f&&f.handleMouseDown(e);
this.on(c,"mousemove",this.throttledHandleMouseSeek);this.on(c,"touchmove",this.throttledHandleMouseSeek);this.on(c,"mouseup",this.handleMouseUp);this.on(c,"touchend",this.handleMouseUp)};c.prototype.handleMouseUp=function(e){var c=this.el_.ownerDocument,f=this.getChild("seekBar");f&&f.handleMouseUp(e);this.off(c,"mousemove",this.throttledHandleMouseSeek);this.off(c,"touchmove",this.throttledHandleMouseSeek);this.off(c,"mouseup",this.handleMouseUp);this.off(c,"touchend",this.handleMouseUp)};return c}(J);
wg.prototype.options_={children:["seekBar"]};J.registerComponent("ProgressControl",wg);var xg=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));n.on(e,"fullscreenchange",n.handleFullscreenChange);!1===L[hb.fullscreenEnabled]&&n.disable();return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-fullscreen-control "+k.prototype.buildCSSClass.call(this)};c.prototype.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")};
c.prototype.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()};return c}(ib);xg.prototype.controlText_="Fullscreen";J.registerComponent("FullscreenToggle",xg);var ek=function(k,c){c.tech_&&!c.tech_.featuresVolumeControl&&k.addClass("vjs-hidden");k.on(c,"loadstart",function(){c.tech_.featuresVolumeControl?k.removeClass("vjs-hidden"):k.addClass("vjs-hidden")})},fk=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}
K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-volume-level",innerHTML:'<span class="vjs-control-text"></span>'})};return c}(J);J.registerComponent("VolumeLevel",fk);var me=function(k){function c(e,n){N(this,c);var f=M(this,k.call(this,e,n));f.on("slideractive",f.updateLastVolume_);f.on(e,"volumechange",f.updateARIAAttributes);e.ready(function(){return f.updateARIAAttributes()});return f}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})};c.prototype.handleMouseDown=function(e){Ia(e)&&k.prototype.handleMouseDown.call(this,e)};c.prototype.handleMouseMove=function(e){Ia(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))};c.prototype.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)};c.prototype.getPercent=function(){return this.player_.muted()?0:this.player_.volume()};c.prototype.stepForward=
function(){this.checkMuted();this.player_.volume(this.player_.volume()+.1)};c.prototype.stepBack=function(){this.checkMuted();this.player_.volume(this.player_.volume()-.1)};c.prototype.updateARIAAttributes=function(e){e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e);this.el_.setAttribute("aria-valuetext",e+"%")};c.prototype.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())};c.prototype.updateLastVolume_=function(){var e=this,c=
this.player_.volume();this.one("sliderinactive",function(){0===e.player_.volume()&&e.player_.lastVolume_(c)})};return c}(ke);me.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};me.prototype.playerEvent="volumechange";J.registerComponent("VolumeBar",me);var yg=function(k){function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.vertical=n.vertical||!1;if("undefined"===typeof n.volumeBar||d(n.volumeBar))n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=
n.vertical;var f=M(this,k.call(this,e,n));ek(f,e);f.throttledHandleMouseMove=Pb(S(f,f.handleMouseMove),25);f.on("mousedown",f.handleMouseDown);f.on("touchstart",f.handleMouseDown);f.on(f.volumeBar,["focus","slideractive"],function(){f.volumeBar.addClass("vjs-slider-active");f.addClass("vjs-slider-active");f.trigger("slideractive")});f.on(f.volumeBar,["blur","sliderinactive"],function(){f.volumeBar.removeClass("vjs-slider-active");f.removeClass("vjs-slider-active");f.trigger("sliderinactive")});return f}
K(c,k);c.prototype.createEl=function(){var e="vjs-volume-horizontal";this.options_.vertical&&(e="vjs-volume-vertical");return k.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})};c.prototype.handleMouseDown=function(e){e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove);this.on(e,"touchmove",this.throttledHandleMouseMove);this.on(e,"mouseup",this.handleMouseUp);this.on(e,"touchend",this.handleMouseUp)};c.prototype.handleMouseUp=function(e){e=
this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove);this.off(e,"touchmove",this.throttledHandleMouseMove);this.off(e,"mouseup",this.handleMouseUp);this.off(e,"touchend",this.handleMouseUp)};c.prototype.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)};return c}(J);yg.prototype.options_={children:["volumeBar"]};J.registerComponent("VolumeControl",yg);var gk=function(k,c){c.tech_&&!c.tech_.featuresMuteControl&&k.addClass("vjs-hidden");k.on(c,"loadstart",function(){c.tech_.featuresMuteControl?
k.removeClass("vjs-hidden"):k.addClass("vjs-hidden")})},zg=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));gk(n,e);n.on(e,["loadstart","volumechange"],n.update);return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-mute-control "+k.prototype.buildCSSClass.call(this)};c.prototype.handleClick=function(e){e=this.player_.volume();var c=this.player_.lastVolume_();0===e?(this.player_.volume(.1>c?.1:c),this.player_.muted(!1)):this.player_.muted(this.player_.muted()?!1:!0)};c.prototype.update=
function(e){this.updateIcon_();this.updateControlText_()};c.prototype.updateIcon_=function(){var e=this.player_.volume(),c=3;gb&&this.player_.muted(this.player_.tech_.el_.muted);0===e||this.player_.muted()?c=0:.33>e?c=1:.67>e&&(c=2);for(e=0;4>e;e++)E(this.el_,"vjs-vol-"+e);G(this.el_,"vjs-vol-"+c)};c.prototype.updateControlText_=function(){var e=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==e&&this.controlText(e)};return c}(ib);zg.prototype.controlText_="Mute";
J.registerComponent("MuteToggle",zg);var Ag=function(k){function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.inline="undefined"!==typeof n.inline?n.inline:!0;if("undefined"===typeof n.volumeControl||d(n.volumeControl))n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline;n=M(this,k.call(this,e,n));n.on(e,["loadstart"],n.volumePanelState_);n.on(n.volumeControl,["slideractive"],n.sliderActive_);n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_);
return n}K(c,k);c.prototype.sliderActive_=function(){this.addClass("vjs-slider-active")};c.prototype.sliderInactive_=function(){this.removeClass("vjs-slider-active")};c.prototype.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden");this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")};c.prototype.createEl=function(){var e="vjs-volume-panel-horizontal";
this.options_.inline||(e="vjs-volume-panel-vertical");return k.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})};return c}(J);Ag.prototype.options_={children:["muteToggle","volumeControl"]};J.registerComponent("VolumePanel",Ag);var ne=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));n&&(e.menuButton_=n.menuButton);e.focusedChild_=-1;e.on("keydown",e.handleKeyPress);return e}K(c,k);c.prototype.addItem=function(e){this.addChild(e);e.on("click",S(this,
function(c){this.menuButton_&&(this.menuButton_.unpressButton(),"CaptionSettingsMenuItem"!==e.name()&&this.menuButton_.focus())}))};c.prototype.createEl=function(){this.contentEl_=H(this.options_.contentElType||"ul",{className:"vjs-menu-content"});this.contentEl_.setAttribute("role","menu");var e=k.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});e.appendChild(this.contentEl_);ya(e,"click",function(e){e.preventDefault();e.stopImmediatePropagation()});return e};c.prototype.dispose=
function(){this.contentEl_=null;k.prototype.dispose.call(this)};c.prototype.handleKeyPress=function(e){if(37===e.which||40===e.which)e.preventDefault(),this.stepForward();else if(38===e.which||39===e.which)e.preventDefault(),this.stepBack()};c.prototype.stepForward=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_+1);this.focus(e)};c.prototype.stepBack=function(){var e=0;void 0!==this.focusedChild_&&(e=this.focusedChild_-1);this.focus(e)};c.prototype.focus=function(){var e=0<arguments.length&&
void 0!==arguments[0]?arguments[0]:0,c=this.children().slice();c.length&&c[0].className&&/vjs-menu-title/.test(c[0].className)&&c.shift();0<c.length&&(0>e?e=0:e>=c.length&&(e=c.length-1),this.focusedChild_=e,c[e].el_.focus())};return c}(J);J.registerComponent("Menu",ne);var oe=function(k){function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);var f=M(this,k.call(this,e,n));f.menuButton_=new ib(e,n);f.menuButton_.controlText(f.controlText_);f.menuButton_.el_.setAttribute("aria-haspopup",
"true");n=ib.prototype.buildCSSClass();f.menuButton_.el_.className=f.buildCSSClass()+" "+n;f.menuButton_.removeClass("vjs-control");f.addChild(f.menuButton_);f.update();f.enabled_=!0;f.on(f.menuButton_,"tap",f.handleClick);f.on(f.menuButton_,"click",f.handleClick);f.on(f.menuButton_,"focus",f.handleFocus);f.on(f.menuButton_,"blur",f.handleBlur);f.on("keydown",f.handleSubmenuKeyPress);return f}K(c,k);c.prototype.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu));
this.menu=e;this.addChild(e);this.buttonPressed_=!1;this.menuButton_.el_.setAttribute("aria-expanded","false");this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()};c.prototype.createMenu=function(){var e=new ne(this.player_,{menuButton:this});this.hideThreshold_=0;if(this.options_.title){var c=H("li",{className:"vjs-menu-title",innerHTML:fa(this.options_.title),tabIndex:-1});this.hideThreshold_+=1;e.children_.unshift(c);P(c,e.contentEl())}if(this.items=this.createItems())for(c=
0;c<this.items.length;c++)e.addItem(this.items[c]);return e};c.prototype.createItems=function(){};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})};c.prototype.buildWrapperCSSClass=function(){var e="vjs-menu-button";e=!0===this.options_.inline?e+"-inline":e+"-popup";var c=ib.prototype.buildCSSClass();return"vjs-menu-button "+e+" "+c+" "+k.prototype.buildCSSClass.call(this)};c.prototype.buildCSSClass=function(){var e="vjs-menu-button";
e=!0===this.options_.inline?e+"-inline":e+"-popup";return"vjs-menu-button "+e+" "+k.prototype.buildCSSClass.call(this)};c.prototype.controlText=function(e){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:this.menuButton_.el();return this.menuButton_.controlText(e,c)};c.prototype.handleClick=function(e){this.one(this.menu.contentEl(),"mouseleave",S(this,function(e){this.unpressButton();this.el_.blur()}));this.buttonPressed_?this.unpressButton():this.pressButton()};c.prototype.focus=function(){this.menuButton_.focus()};
c.prototype.blur=function(){this.menuButton_.blur()};c.prototype.handleFocus=function(){ya(L,"keydown",S(this,this.handleKeyPress))};c.prototype.handleBlur=function(){ta(L,"keydown",S(this,this.handleKeyPress))};c.prototype.handleKeyPress=function(e){27===e.which||9===e.which?(this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())):38!==e.which&&40!==e.which||this.buttonPressed_||(this.pressButton(),e.preventDefault())};c.prototype.handleSubmenuKeyPress=
function(e){if(27===e.which||9===e.which)this.buttonPressed_&&this.unpressButton(),9!==e.which&&(e.preventDefault(),this.menuButton_.el_.focus())};c.prototype.pressButton=function(){this.enabled_&&(this.buttonPressed_=!0,this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),gb&&x()||this.menu.focus())};c.prototype.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","false"))};c.prototype.disable=
function(){this.unpressButton();this.enabled_=!1;this.addClass("vjs-disabled");this.menuButton_.disable()};c.prototype.enable=function(){this.enabled_=!0;this.removeClass("vjs-disabled");this.menuButton_.enable()};return c}(J);J.registerComponent("MenuButton",oe);var pe=function(k){function c(e,n){N(this,c);var f=n.tracks;e=M(this,k.call(this,e,n));1>=e.items.length&&e.hide();if(!f)return M(e);var b=S(e,e.update);f.addEventListener("removetrack",b);f.addEventListener("addtrack",b);e.player_.on("ready",
b);e.player_.on("dispose",function(){f.removeEventListener("removetrack",b);f.removeEventListener("addtrack",b)});return e}K(c,k);return c}(oe);J.registerComponent("TrackButton",pe);var pc=function(k){function c(e,n){N(this,c);e=M(this,k.call(this,e,n));e.selectable=n.selectable;e.isSelected_=n.selected||!1;e.multiSelectable=n.multiSelectable;e.selected(e.isSelected_);e.selectable?e.multiSelectable?e.el_.setAttribute("role","menuitemcheckbox"):e.el_.setAttribute("role","menuitemradio"):e.el_.setAttribute("role",
"menuitem");return e}K(c,k);c.prototype.createEl=function(e,c,f){this.nonIconControl=!0;return k.prototype.createEl.call(this,"li",w({className:"vjs-menu-item",innerHTML:'<span class="vjs-menu-item-text">'+this.localize(this.options_.label)+"</span>",tabIndex:-1},c),f)};c.prototype.handleClick=function(e){this.selected(!0)};c.prototype.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=
!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))};return c}(ad);J.registerComponent("MenuItem",pc);var qc=function(k){function c(e,n){N(this,c);var f=n.track,b=e.textTracks();n.label=f.label||f.language||"Unknown";n.selected="showing"===f.mode;var g=M(this,k.call(this,e,n));g.track=f;var a=function(){for(var e=arguments.length,c=Array(e),a=0;a<e;a++)c[a]=arguments[a];g.handleTracksChange.apply(g,c)},l=function(){for(var e=
arguments.length,c=Array(e),a=0;a<e;a++)c[a]=arguments[a];g.handleSelectedLanguageChange.apply(g,c)};e.on(["loadstart","texttrackchange"],a);b.addEventListener("change",a);b.addEventListener("selectedlanguagechange",l);g.on("dispose",function(){e.off(["loadstart","texttrackchange"],a);b.removeEventListener("change",a);b.removeEventListener("selectedlanguagechange",l)});if(void 0===b.onchange){var r=void 0;g.on(["tap","click"],function(){if("object"!==ka(F.Event))try{r=new F.Event("change")}catch(z){}r||
(r=L.createEvent("Event"),r.initEvent("change",!0,!0));b.dispatchEvent(r)})}g.handleTracksChange();return g}K(c,k);c.prototype.handleClick=function(e){var c=this.track.kind,f=this.track.kinds,b=this.player_.textTracks();f||(f=[c]);k.prototype.handleClick.call(this,e);if(b)for(e=0;e<b.length;e++)c=b[e],c===this.track&&-1<f.indexOf(c.kind)?"showing"!==c.mode&&(c.mode="showing"):"disabled"!==c.mode&&(c.mode="disabled")};c.prototype.handleTracksChange=function(e){e="showing"===this.track.mode;e!==this.isSelected_&&
this.selected(e)};c.prototype.handleSelectedLanguageChange=function(e){"showing"===this.track.mode&&(e=this.player_.cache_.selectedLanguage,e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind||(this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}))};c.prototype.dispose=function(){this.track=null;k.prototype.dispose.call(this)};return c}(pc);J.registerComponent("TextTrackMenuItem",qc);var Bg=function(k){function c(e,n){N(this,c);n.track=
{player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"};n.kinds||(n.kinds=[n.kind]);n.track.label=n.label?n.label:n.kinds.join(" and ")+" off";n.selectable=!0;n.multiSelectable=!1;return M(this,k.call(this,e,n))}K(c,k);c.prototype.handleTracksChange=function(e){e=this.player().textTracks();for(var c=!0,f=0,b=e.length;f<b;f++){var k=e[f];if(-1<this.options_.kinds.indexOf(k.kind)&&"showing"===k.mode){c=!1;break}}c!==this.isSelected_&&this.selected(c)};c.prototype.handleSelectedLanguageChange=
function(e){e=this.player().textTracks();for(var c=!0,f=0,b=e.length;f<b;f++){var k=e[f];if(-1<["captions","descriptions","subtitles"].indexOf(k.kind)&&"showing"===k.mode){c=!1;break}}c&&(this.player_.cache_.selectedLanguage={enabled:!1})};return c}(qc);J.registerComponent("OffTextTrackMenuItem",Bg);var Vb=function(k){function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.tracks=e.textTracks();return M(this,k.call(this,e,n))}K(c,k);c.prototype.createItems=function(){var e=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:qc,f=void 0;this.label_&&(f=this.label_+" off");e.push(new Bg(this.player_,{kinds:this.kinds_,kind:this.kind_,label:f}));this.hideThreshold_+=1;f=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var b=0;b<f.length;b++){var k=f[b];if(-1<this.kinds_.indexOf(k.kind)){var a=new c(this.player_,{track:k,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+
k.kind+"-menu-item");e.push(a)}}return e};return c}(pe);J.registerComponent("TextTrackButton",Vb);var Cg=function(k){function c(e,n){N(this,c);var f=n.track,b=n.cue,g=e.currentTime();n.selectable=!0;n.multiSelectable=!1;n.label=b.text;n.selected=b.startTime<=g&&g<b.endTime;e=M(this,k.call(this,e,n));e.track=f;e.cue=b;f.addEventListener("cuechange",S(e,e.update));return e}K(c,k);c.prototype.handleClick=function(e){k.prototype.handleClick.call(this);this.player_.currentTime(this.cue.startTime);this.update(this.cue.startTime)};
c.prototype.update=function(e){e=this.cue;var c=this.player_.currentTime();this.selected(e.startTime<=c&&c<e.endTime)};return c}(pc);J.registerComponent("ChaptersTrackMenuItem",Cg);var qe=function(k){function c(e,n,f){N(this,c);return M(this,k.call(this,e,n,f))}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-chapters-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-chapters-button "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.update=
function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack());k.prototype.update.call(this)};c.prototype.setTrack=function(e){if(this.track_!==e){this.updateHandler_||(this.updateHandler_=this.update.bind(this));if(this.track_){var c=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);c&&c.removeEventListener("load",this.updateHandler_);this.track_=null}if(this.track_=e)this.track_.mode="hidden",(e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_))&&
e.addEventListener("load",this.updateHandler_)}};c.prototype.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],c=e.length-1;0<=c;c--){var f=e[c];if(f.kind===this.kind_)return f}};c.prototype.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(fa(this.kind_))};c.prototype.createMenu=function(){this.options_.title=this.getMenuCaption();return k.prototype.createMenu.call(this)};c.prototype.createItems=function(){var e=[];if(!this.track_)return e;
var c=this.track_.cues;if(!c)return e;for(var f=0,b=c.length;f<b;f++){var k=new Cg(this.player_,{track:this.track_,cue:c[f]});e.push(k)}return e};return c}(Vb);qe.prototype.kind_="chapters";qe.prototype.controlText_="Chapters";J.registerComponent("ChaptersButton",qe);var re=function(k){function c(e,n,f){N(this,c);n=M(this,k.call(this,e,n,f));var b=e.textTracks(),g=S(n,n.handleTracksChange);b.addEventListener("change",g);n.on("dispose",function(){b.removeEventListener("change",g)});return n}K(c,k);
c.prototype.handleTracksChange=function(e){e=this.player().textTracks();for(var c=!1,f=0,b=e.length;f<b;f++){var k=e[f];if(k.kind!==this.kind_&&"showing"===k.mode){c=!0;break}}c?this.disable():this.enable()};c.prototype.buildCSSClass=function(){return"vjs-descriptions-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+k.prototype.buildWrapperCSSClass.call(this)};return c}(Vb);re.prototype.kind_="descriptions";re.prototype.controlText_=
"Descriptions";J.registerComponent("DescriptionsButton",re);var se=function(k){function c(e,n,f){N(this,c);return M(this,k.call(this,e,n,f))}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-subtitles-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+k.prototype.buildWrapperCSSClass.call(this)};return c}(Vb);se.prototype.kind_="subtitles";se.prototype.controlText_="Subtitles";J.registerComponent("SubtitlesButton",se);var te=
function(k){function c(e,n){N(this,c);n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"};n.selectable=!1;n.name="CaptionSettingsMenuItem";e=M(this,k.call(this,e,n));e.addClass("vjs-texttrack-settings");e.controlText(", opens "+n.kind+" settings dialog");return e}K(c,k);c.prototype.handleClick=function(e){this.player().getChild("textTrackSettings").open()};return c}(qc);J.registerComponent("CaptionSettingsMenuItem",te);var ue=function(k){function c(e,n,
f){N(this,c);return M(this,k.call(this,e,n,f))}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-captions-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-captions-button "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createItems=function(){var e=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new te(this.player_,{kind:this.kind_})),this.hideThreshold_+=
1);return k.prototype.createItems.call(this,e)};return c}(Vb);ue.prototype.kind_="captions";ue.prototype.controlText_="Captions";J.registerComponent("CaptionsButton",ue);var Dg=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.createEl=function(e,c,f){var b='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"captions"===this.options_.track.kind&&(b+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+
this.localize("Captions")+"</span>\n      ");return k.prototype.createEl.call(this,e,w({innerHTML:b+"</span>"},c),f)};return c}(qc);J.registerComponent("SubsCapsMenuItem",Dg);var ve=function(k){function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n=M(this,k.call(this,e,n));n.label_="subtitles";-1<["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)&&(n.label_="captions");n.menuButton_.controlText(fa(n.label_));return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-subs-caps-button "+
k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createItems=function(){var e=[];this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new te(this.player_,{kind:this.label_})),this.hideThreshold_+=1);return e=k.prototype.createItems.call(this,e,Dg)};return c}(Vb);ve.prototype.kinds_=["captions","subtitles"];ve.prototype.controlText_=
"Subtitles";J.registerComponent("SubsCapsButton",ve);var Eg=function(k){function c(e,n){N(this,c);var f=n.track,b=e.audioTracks();n.label=f.label||f.language||"Unknown";n.selected=f.enabled;var g=M(this,k.call(this,e,n));g.track=f;g.addClass("vjs-"+f.kind+"-menu-item");var a=function(){for(var e=arguments.length,c=Array(e),a=0;a<e;a++)c[a]=arguments[a];g.handleTracksChange.apply(g,c)};b.addEventListener("change",a);g.on("dispose",function(){b.removeEventListener("change",a)});return g}K(c,k);c.prototype.createEl=
function(e,c,f){var b='<span class="vjs-menu-item-text">'+this.localize(this.options_.label);"main-desc"===this.options_.track.kind&&(b+='\n        <span aria-hidden="true" class="vjs-icon-placeholder"></span>\n        <span class="vjs-control-text"> '+this.localize("Descriptions")+"</span>\n      ");return k.prototype.createEl.call(this,e,w({innerHTML:b+"</span>"},c),f)};c.prototype.handleClick=function(e){var c=this.player_.audioTracks();k.prototype.handleClick.call(this,e);for(e=0;e<c.length;e++){var f=
c[e];f.enabled=f===this.track}};c.prototype.handleTracksChange=function(e){this.selected(this.track.enabled)};return c}(pc);J.registerComponent("AudioTrackMenuItem",Eg);var Fg=function(k){function c(e){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};N(this,c);n.tracks=e.audioTracks();return M(this,k.call(this,e,n))}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-audio-button "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=function(){return"vjs-audio-button "+
k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createItems=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];this.hideThreshold_=1;for(var c=this.player_.audioTracks(),f=0;f<c.length;f++)e.push(new Eg(this.player_,{track:c[f],selectable:!0,multiSelectable:!1}));return e};return c}(pe);Fg.prototype.controlText_="Audio Track";J.registerComponent("AudioTrackButton",Fg);var we=function(k){function c(e,n){N(this,c);var f=n.rate,b=parseFloat(f,10);n.label=f;n.selected=
1===b;n.selectable=!0;n.multiSelectable=!1;n=M(this,k.call(this,e,n));n.label=f;n.rate=b;n.on(e,"ratechange",n.update);return n}K(c,k);c.prototype.handleClick=function(e){k.prototype.handleClick.call(this);this.player().playbackRate(this.rate)};c.prototype.update=function(e){this.selected(this.player().playbackRate()===this.rate)};return c}(pc);we.prototype.contentElType="button";J.registerComponent("PlaybackRateMenuItem",we);var Gg=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));
n.updateVisibility();n.updateLabel();n.on(e,"loadstart",n.updateVisibility);n.on(e,"ratechange",n.updateLabel);return n}K(c,k);c.prototype.createEl=function(){var e=k.prototype.createEl.call(this);this.labelEl_=H("div",{className:"vjs-playback-rate-value",innerHTML:"1x"});e.appendChild(this.labelEl_);return e};c.prototype.dispose=function(){this.labelEl_=null;k.prototype.dispose.call(this)};c.prototype.buildCSSClass=function(){return"vjs-playback-rate "+k.prototype.buildCSSClass.call(this)};c.prototype.buildWrapperCSSClass=
function(){return"vjs-playback-rate "+k.prototype.buildWrapperCSSClass.call(this)};c.prototype.createMenu=function(){var e=new ne(this.player()),c=this.playbackRates();if(c)for(var f=c.length-1;0<=f;f--)e.addChild(new we(this.player(),{rate:c[f]+"x"}));return e};c.prototype.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())};c.prototype.handleClick=function(e){e=this.player().playbackRate();for(var c=this.playbackRates(),f=c[0],b=0;b<c.length;b++)if(c[b]>
e){f=c[b];break}this.player().playbackRate(f)};c.prototype.playbackRates=function(){return this.options_.playbackRates||this.options_.playerOptions&&this.options_.playerOptions.playbackRates};c.prototype.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&0<this.playbackRates().length};c.prototype.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")};c.prototype.updateLabel=
function(e){this.playbackRateSupported()&&(this.labelEl_.innerHTML=this.player().playbackRate()+"x")};return c}(oe);Gg.prototype.controlText_="Playback Rate";J.registerComponent("PlaybackRateMenuButton",Gg);var Hg=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-spacer "+k.prototype.buildCSSClass.call(this)};c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:this.buildCSSClass()})};
return c}(J);J.registerComponent("Spacer",Hg);var hk=function(k){function c(){N(this,c);return M(this,k.apply(this,arguments))}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-custom-control-spacer "+k.prototype.buildCSSClass.call(this)};c.prototype.createEl=function(){var e=k.prototype.createEl.call(this,{className:this.buildCSSClass()});e.innerHTML="\u00a0";return e};return c}(Hg);J.registerComponent("CustomControlSpacer",hk);var Ig=function(k){function c(){N(this,c);return M(this,k.apply(this,
arguments))}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})};return c}(J);Ig.prototype.options_={children:"playToggle volumePanel currentTimeDisplay timeDivider durationDisplay progressControl liveDisplay remainingTimeDisplay customControlSpacer playbackRateMenuButton chaptersButton descriptionsButton subsCapsButton audioTrackButton fullscreenToggle".split(" ")};J.registerComponent("ControlBar",Ig);var Jg=function(k){function c(e,
n){N(this,c);n=M(this,k.call(this,e,n));n.on(e,"error",n.open);return n}K(c,k);c.prototype.buildCSSClass=function(){return"vjs-error-display "+k.prototype.buildCSSClass.call(this)};c.prototype.content=function(){var e=this.player().error();return e?this.localize(e.message):""};return c}(Rb);Jg.prototype.options_=ea(Rb.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});J.registerComponent("ErrorDisplay",Jg);var Kg=["#000","Black"],Lg=["#00F","Blue"],Mg=["#0FF","Cyan"],Ng=
["#0F0","Green"],Og=["#F0F","Magenta"],Pg=["#F00","Red"],Qg=["#FFF","White"],Rg=["#FF0","Yellow"],xe=["1","Opaque"],ye=["0.5","Semi-Transparent"],Sg=["0","Transparent"],Fb={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[Kg,Qg,Pg,Ng,Lg,Rg,Og,Mg]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[xe,ye,Sg]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",
label:"Color",options:[Qg,Kg,Pg,Ng,Lg,Rg,Og,Mg]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif",
"Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(k){return"1.00"===k?null:Number(k)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",
options:[xe,ye]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[Sg,ye,xe]}};Fb.windowColor.options=Fb.backgroundColor.options;var ik=function(k){function c(e,n){N(this,c);n.temporary=!1;var f=M(this,k.call(this,e,n));f.updateDisplay=S(f,f.updateDisplay);f.fill();f.hasBeenOpened_=f.hasBeenFilled_=!0;f.endDialog=H("p",{className:"vjs-control-text",
textContent:f.localize("End of dialog window.")});f.el().appendChild(f.endDialog);f.setDefaults();void 0===n.persistTextTrackSettings&&(f.options_.persistTextTrackSettings=f.options_.playerOptions.persistTextTrackSettings);f.on(f.$(".vjs-done-button"),"click",function(){f.saveSettings();f.close()});f.on(f.$(".vjs-default-button"),"click",function(){f.setDefaults();f.updateDisplay()});u(Fb,function(e){f.on(f.$(e.selector),"change",f.updateDisplay)});f.options_.persistTextTrackSettings&&f.restoreSettings();
return f}K(c,k);c.prototype.dispose=function(){this.endDialog=null;k.prototype.dispose.call(this)};c.prototype.createElSelect_=function(e){var c=this,f=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"",b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"label",k=Fb[e],a=k.id.replace("%s",this.id_),l=[f,a].join(" ").trim();return["<"+b+' id="'+a+'" class="'+("label"===b?"vjs-label":"")+'">',this.localize(k.label),"</"+b+">",'<select aria-labelledby="'+l+'">'].concat(k.options.map(function(e){var f=
a+"-"+e[1].replace(/\W+/g,"");return['<option id="'+f+'" value="'+e[0]+'" ','aria-labelledby="'+l+" "+f+'">',c.localize(e[1]),"</option>"].join("")})).concat("</select>").join("")};c.prototype.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span></fieldset>"].join("")};
c.prototype.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span></fieldset>"].join("")};c.prototype.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+
e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span></fieldset>"].join("")};c.prototype.createElColors_=function(){return H("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})};c.prototype.createElFont_=function(){return H("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',
this.createElSelect_("fontPercent","","legend"),'</fieldset><fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),'</fieldset><fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})};c.prototype.createElControls_=function(){var e=this.localize("restore all settings to the default values");return H("div",{className:"vjs-track-settings-controls",innerHTML:['<button class="vjs-default-button" title="'+
e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})};c.prototype.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]};c.prototype.label=function(){return this.localize("Caption Settings Dialog")};c.prototype.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")};c.prototype.buildCSSClass=
function(){return k.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"};c.prototype.getValues=function(){var e=this;return y(Fb,function(c,f,b){var k=e.$(f.selector);f=Df(k.options[k.options.selectedIndex].value,f.parser);void 0!==f&&(c[b]=f);return c},{})};c.prototype.setValues=function(e){var c=this;u(Fb,function(f,b){var k=c.$(f.selector);b=e[b];f=f.parser;if(b)for(var a=0;a<k.options.length;a++)if(Df(k.options[a].value,f)===b){k.selectedIndex=a;break}})};c.prototype.setDefaults=function(){var e=
this;u(Fb,function(c){var f=c.hasOwnProperty("default")?c.default:0;e.$(c.selector).selectedIndex=f})};c.prototype.restoreSettings=function(){var e=void 0;try{e=JSON.parse(F.localStorage.getItem("vjs-text-track-settings"))}catch(n){V.warn(n)}e&&this.setValues(e)};c.prototype.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?F.localStorage.setItem("vjs-text-track-settings",JSON.stringify(e)):F.localStorage.removeItem("vjs-text-track-settings")}catch(n){V.warn(n)}}};
c.prototype.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()};c.prototype.conditionalBlur_=function(){this.previouslyActiveEl_=null;this.off(L,"keydown",this.handleKeyDown);var e=this.player_.controlBar,c=e&&e.subsCapsButton;e=e&&e.captionsButton;c?c.focus():e&&e.focus()};return c}(Rb);J.registerComponent("TextTrackSettings",ik);var jk=function(k){function c(e,n){N(this,c);var f=n.ResizeObserver||F.ResizeObserver;null===n.ResizeObserver&&(f=!1);var b=ea({createEl:!f,
reportTouchActivity:!1},n),g=M(this,k.call(this,e,b));g.ResizeObserver=n.ResizeObserver||F.ResizeObserver;g.loadListener_=null;g.resizeObserver_=null;g.debouncedHandler_=sj(function(){g.resizeHandler()},100,!1,g);f?(g.resizeObserver_=new g.ResizeObserver(g.debouncedHandler_),g.resizeObserver_.observe(e.el())):(g.loadListener_=function(){g.el_&&g.el_.contentWindow&&ya(g.el_.contentWindow,"resize",g.debouncedHandler_)},g.one("load",g.loadListener_));return g}K(c,k);c.prototype.createEl=function(){return k.prototype.createEl.call(this,
"iframe",{className:"vjs-resize-manager"})};c.prototype.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")};c.prototype.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel();this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect());this.el_&&this.el_.contentWindow&&ta(this.el_.contentWindow,"resize",this.debouncedHandler_);this.loadListener_&&this.off("load",this.loadListener_);
this.loadListener_=this.debouncedHandler_=this.resizeObserver=this.ResizeObserver=null};return c}(J);J.registerComponent("ResizeManager",jk);var ze=function(k){var c=k.el();if(c.hasAttribute("src"))return k.triggerSourceset(c.src),!0;c=k.$$("source");var e=[],n="";if(!c.length)return!1;for(var f=0;f<c.length;f++){var b=c[f].src;b&&-1===e.indexOf(b)&&e.push(b)}if(!e.length)return!1;1===e.length&&(n=e[0]);k.triggerSourceset(n);return!0},kk=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},
set:function(k){var c=L.createElement(this.nodeName.toLowerCase());c.innerHTML=k;for(k=L.createDocumentFragment();c.childNodes.length;)k.appendChild(c.childNodes[0]);this.innerText="";F.Element.prototype.appendChild.call(this,k);return this.innerHTML}}),Tg=function(k,c){for(var e={},n=0;n<k.length&&!((e=Object.getOwnPropertyDescriptor(k[n],c))&&e.set&&e.get);n++);e.enumerable=!0;e.configurable=!0;return e},Ug=function(k){var c=k.el();if(!c.resetSourceWatch_){var e={},n=Tg([k.el(),F.HTMLMediaElement.prototype,
F.Element.prototype,kk],"innerHTML"),f=function(e){return function(){for(var f=arguments.length,a=Array(f),b=0;b<f;b++)a[b]=arguments[b];f=e.apply(c,a);ze(k);return f}};["append","appendChild","insertAdjacentHTML"].forEach(function(b){c[b]&&(e[b]=c[b],c[b]=f(e[b]))});Object.defineProperty(c,"innerHTML",ea(n,{set:f(n.set)}));c.resetSourceWatch_=function(){c.resetSourceWatch_=null;Object.keys(e).forEach(function(f){c[f]=e[f]});Object.defineProperty(c,"innerHTML",n)};k.one("sourceset",c.resetSourceWatch_)}},
lk=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?dg(F.Element.prototype.getAttribute.call(this,"src")):""},set:function(k){F.Element.prototype.setAttribute.call(this,"src",k);return k}}),mk=function(k){if(k.featuresSourceset){var c=k.el();if(!c.resetSourceset_){var e=Tg([k.el(),F.HTMLMediaElement.prototype,lk],"src"),n=c.setAttribute,f=c.load;Object.defineProperty(c,"src",ea(e,{set:function(f){f=e.set.call(c,f);k.triggerSourceset(c.src);return f}}));c.setAttribute=
function(e,f){f=n.call(c,e,f);/src/i.test(e)&&k.triggerSourceset(c.src);return f};c.load=function(){var e=f.call(c);ze(k)||(k.triggerSourceset(""),Ug(k));return e};c.currentSrc?k.triggerSourceset(c.currentSrc):ze(k)||Ug(k);c.resetSourceset_=function(){c.resetSourceset_=null;c.load=f;c.setAttribute=n;Object.defineProperty(c,"src",e);c.resetSourceWatch_&&c.resetSourceWatch_()}}}},nk=Pd(["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."],
["Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\n            This may prevent text tracks from loading."]),I=function(k){function c(e,n){N(this,c);n=M(this,k.call(this,e,n));var f=e.source,b=!1;f&&(n.el_.currentSrc!==f.src||e.tag&&3===e.tag.initNetworkState_)?n.setSource(f):n.handleLateInit_(n.el_);e.enableSourceset&&n.setupSourcesetHandling_();if(n.el_.hasChildNodes()){var g=n.el_.childNodes,a=g.length;for(f=[];a--;){var l=g[a];"track"===l.nodeName.toLowerCase()&&
(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(l),n.remoteTextTracks().addTrack(l.track),n.textTracks().addTrack(l.track),b||n.el_.hasAttribute("crossorigin")||!$c(l.src)||(b=!0)):f.push(l))}for(g=0;g<f.length;g++)n.el_.removeChild(f[g])}n.proxyNativeTracks_();n.featuresNativeTextTracks&&b&&V.warn(Bd(nk));n.restoreMetadataTracksInIOSNativePlayer_();(Vc||Td||Uf)&&!0===e.nativeControlsForTouch&&n.setControls(!0);n.proxyWebkitFullscreen_();n.triggerReady();return n}K(c,k);c.prototype.dispose=
function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_();c.disposeMediaElement(this.el_);this.options_=null;k.prototype.dispose.call(this)};c.prototype.setupSourcesetHandling_=function(){mk(this)};c.prototype.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),c=void 0,f=function(){c=[];for(var f=0;f<e.length;f++){var a=e[f];"metadata"===a.kind&&c.push({track:a,storedMode:a.mode})}};f();e.addEventListener("change",f);this.on("dispose",function(){return e.removeEventListener("change",
f)});var b=function a(){for(var f=0;f<c.length;f++){var b=c[f];"disabled"===b.track.mode&&b.track.mode!==b.storedMode&&(b.track.mode=b.storedMode)}e.removeEventListener("change",a)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",f);e.removeEventListener("change",b);e.addEventListener("change",b)});this.on("webkitendfullscreen",function(){e.removeEventListener("change",f);e.addEventListener("change",f);e.removeEventListener("change",b)})};c.prototype.overrideNative_=function(e,
c){var f=this;if(c===this["featuresNative"+e+"Tracks"]){var b=e.toLowerCase();this[b+"TracksListeners_"]&&Object.keys(this[b+"TracksListeners_"]).forEach(function(e){f.el()[b+"Tracks"].removeEventListener(e,f[b+"TracksListeners_"][e])});this["featuresNative"+e+"Tracks"]=!c;this[b+"TracksListeners_"]=null;this.proxyNativeTracksForType_(b)}};c.prototype.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)};c.prototype.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",
e)};c.prototype.proxyNativeTracksForType_=function(e){var c=this;e=La[e];var f=this.el()[e.getterName],b=this[e.getterName]();if(this["featuresNative"+e.capitalName+"Tracks"]&&f&&f.addEventListener){var k={change:function(e){b.trigger({type:"change",target:b,currentTarget:b,srcElement:b})},addtrack:function(e){b.addTrack(e.track)},removetrack:function(e){b.removeTrack(e.track)}},a=function(){for(var e=[],c=0;c<b.length;c++){for(var a=!1,k=0;k<f.length;k++)if(f[k]===b[c]){a=!0;break}a||e.push(b[c])}for(;e.length;)b.removeTrack(e.shift())};
this[e.getterName+"Listeners_"]=k;Object.keys(k).forEach(function(e){var a=k[e];f.addEventListener(e,a);c.on("dispose",function(c){return f.removeEventListener(e,a)})});this.on("loadstart",a);this.on("dispose",function(e){return c.off("loadstart",a)})}};c.prototype.proxyNativeTracks_=function(){var e=this;La.names.forEach(function(c){e.proxyNativeTracksForType_(c)})};c.prototype.createEl=function(){var e=this.options_.tag;if(!e||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(e){var k=
e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(k,e);c.disposeMediaElement(e);e=k}else e=L.createElement("video"),k=this.options_.tag&&A(this.options_.tag),k=ea({},k),Vc&&!0===this.options_.nativeControlsForTouch||delete k.controls,T(e,w(k,{id:this.options_.techId,class:"vjs-tech"}));e.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&e.setAttribute("preload",this.options_.preload);k=["loop","muted","playsinline","autoplay"];for(var f=0;f<k.length;f++){var b=k[f],
g=this.options_[b];"undefined"!==typeof g&&(g?e.setAttribute(b,b):e.removeAttribute(b),e[b]=g)}return e};c.prototype.handleLateInit_=function(e){if(0!==e.networkState&&3!==e.networkState)if(0===e.readyState){var c=!1,f=function(){c=!0};this.on("loadstart",f);var b=function(){c||this.trigger("loadstart")};this.on("loadedmetadata",b);this.ready(function(){this.off("loadstart",f);this.off("loadedmetadata",b);c||this.trigger("loadstart")})}else{var k=["loadstart"];k.push("loadedmetadata");2<=e.readyState&&
k.push("loadeddata");3<=e.readyState&&k.push("canplay");4<=e.readyState&&k.push("canplaythrough");this.ready(function(){k.forEach(function(e){this.trigger(e)},this)})}};c.prototype.setCurrentTime=function(e){try{this.el_.currentTime=e}catch(n){V(n,"Video is not ready. (Video.js)")}};c.prototype.duration=function(){var e=this;return Infinity===this.el_.duration&&Eb&&qb&&0===this.el_.currentTime?(this.on("timeupdate",function f(){0<e.el_.currentTime&&(Infinity===e.el_.duration&&e.trigger("durationchange"),
e.off("timeupdate",f))}),NaN):this.el_.duration||NaN};c.prototype.width=function(){return this.el_.offsetWidth};c.prototype.height=function(){return this.el_.offsetHeight};c.prototype.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var c=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},f=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",c),this.trigger("fullscreenchange",
{isFullscreen:!0}))};this.on("webkitbeginfullscreen",f);this.on("dispose",function(){e.off("webkitbeginfullscreen",f);e.off("webkitendfullscreen",c)})}};c.prototype.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var e=F.navigator&&F.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1};c.prototype.enterFullScreen=function(){var e=this.el_;e.paused&&e.networkState<=e.HAVE_METADATA?(this.el_.play(),this.setTimeout(function(){e.pause();
e.webkitEnterFullScreen()},0)):e.webkitEnterFullScreen()};c.prototype.exitFullScreen=function(){this.el_.webkitExitFullScreen()};c.prototype.src=function(e){if(void 0===e)return this.el_.src;this.setSrc(e)};c.prototype.reset=function(){c.resetMediaElement(this.el_)};c.prototype.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc};c.prototype.setControls=function(e){this.el_.controls=!!e};c.prototype.addTextTrack=function(e,c,f){return this.featuresNativeTextTracks?
this.el_.addTextTrack(e,c,f):k.prototype.addTextTrack.call(this,e,c,f)};c.prototype.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return k.prototype.createRemoteTextTrack.call(this,e);var c=L.createElement("track");e.kind&&(c.kind=e.kind);e.label&&(c.label=e.label);if(e.language||e.srclang)c.srclang=e.language||e.srclang;e.default&&(c.default=e.default);e.id&&(c.id=e.id);e.src&&(c.src=e.src);return c};c.prototype.addRemoteTextTrack=function(e,c){e=k.prototype.addRemoteTextTrack.call(this,
e,c);this.featuresNativeTextTracks&&this.el().appendChild(e);return e};c.prototype.removeRemoteTextTrack=function(e){k.prototype.removeRemoteTextTrack.call(this,e);if(this.featuresNativeTextTracks)for(var c=this.$$("track"),f=c.length;f--;)e!==c[f]&&e!==c[f].track||this.el().removeChild(c[f])};c.prototype.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var e={};"undefined"!==typeof this.el().webkitDroppedFrameCount&&
"undefined"!==typeof this.el().webkitDecodedFrameCount&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount);F.performance&&"function"===typeof F.performance.now?e.creationTime=F.performance.now():F.performance&&F.performance.timing&&"number"===typeof F.performance.timing.navigationStart&&(e.creationTime=F.Date.now()-F.performance.timing.navigationStart);return e};return c}(da);if(m()){I.TEST_VID=L.createElement("video");var cd=L.createElement("track");
cd.kind="captions";cd.srclang="en";cd.label="English";I.TEST_VID.appendChild(cd)}I.isSupported=function(){try{I.TEST_VID.volume=.5}catch(k){return!1}return!(!I.TEST_VID||!I.TEST_VID.canPlayType)};I.canPlayType=function(k){return I.TEST_VID.canPlayType(k)};I.canPlaySource=function(k,c){return I.canPlayType(k.type)};I.canControlVolume=function(){try{var k=I.TEST_VID.volume;I.TEST_VID.volume=k/2+.1;return k!==I.TEST_VID.volume}catch(c){return!1}};I.canMuteVolume=function(){try{var k=I.TEST_VID.muted;
I.TEST_VID.muted=!k;I.TEST_VID.muted?I.TEST_VID.setAttribute("muted","muted"):I.TEST_VID.removeAttribute("muted");return k!==I.TEST_VID.muted}catch(c){return!1}};I.canControlPlaybackRate=function(){if(Eb&&qb&&58>Wf)return!1;try{var k=I.TEST_VID.playbackRate;I.TEST_VID.playbackRate=k/2+.1;return k!==I.TEST_VID.playbackRate}catch(c){return!1}};I.canOverrideAttributes=function(){try{var k=function(){};Object.defineProperty(L.createElement("video"),"src",{get:k,set:k});Object.defineProperty(L.createElement("audio"),
"src",{get:k,set:k});Object.defineProperty(L.createElement("video"),"innerHTML",{get:k,set:k});Object.defineProperty(L.createElement("audio"),"innerHTML",{get:k,set:k})}catch(c){return!1}return!0};I.supportsNativeTextTracks=function(){return Zf||gb&&qb};I.supportsNativeVideoTracks=function(){return!(!I.TEST_VID||!I.TEST_VID.videoTracks)};I.supportsNativeAudioTracks=function(){return!(!I.TEST_VID||!I.TEST_VID.audioTracks)};I.Events="loadstart suspend abort error emptied stalled loadedmetadata loadeddata canplay canplaythrough playing waiting seeking seeked ended durationchange timeupdate progress play pause ratechange resize volumechange".split(" ");
I.prototype.featuresVolumeControl=I.canControlVolume();I.prototype.featuresMuteControl=I.canMuteVolume();I.prototype.featuresPlaybackRate=I.canControlPlaybackRate();I.prototype.featuresSourceset=I.canOverrideAttributes();I.prototype.movingMediaElementInDOM=!gb;I.prototype.featuresFullscreenResize=!0;I.prototype.featuresProgressEvents=!0;I.prototype.featuresTimeupdateEvents=!0;I.prototype.featuresNativeTextTracks=I.supportsNativeTextTracks();I.prototype.featuresNativeVideoTracks=I.supportsNativeVideoTracks();
I.prototype.featuresNativeAudioTracks=I.supportsNativeAudioTracks();var Vg=I.TEST_VID&&I.TEST_VID.constructor.prototype.canPlayType,ok=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;I.patchCanPlayType=function(){4<=Ud&&!Vf&&!qb&&(I.TEST_VID.constructor.prototype.canPlayType=function(k){return k&&ok.test(k)?"maybe":Vg.call(this,k)})};I.unpatchCanPlayType=function(){var k=I.TEST_VID.constructor.prototype.canPlayType;I.TEST_VID.constructor.prototype.canPlayType=Vg;return k};I.patchCanPlayType();I.disposeMediaElement=
function(k){if(k){for(k.parentNode&&k.parentNode.removeChild(k);k.hasChildNodes();)k.removeChild(k.firstChild);k.removeAttribute("src");if("function"===typeof k.load)try{k.load()}catch(c){}}};I.resetMediaElement=function(k){if(k){for(var c=k.querySelectorAll("source"),e=c.length;e--;)k.removeChild(c[e]);k.removeAttribute("src");if("function"===typeof k.load)try{k.load()}catch(n){}}};"muted defaultMuted autoplay controls loop playsinline".split(" ").forEach(function(k){I.prototype[k]=function(){return this.el_[k]||
this.el_.hasAttribute(k)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(k){I.prototype["set"+fa(k)]=function(c){(this.el_[k]=c)?this.el_.setAttribute(k,k):this.el_.removeAttribute(k)}});"paused currentTime buffered volume poster preload error seeking seekable ended playbackRate defaultPlaybackRate played networkState readyState videoWidth videoHeight".split(" ").forEach(function(k){I.prototype[k]=function(){return this.el_[k]}});"volume src poster preload playbackRate defaultPlaybackRate".split(" ").forEach(function(k){I.prototype["set"+
fa(k)]=function(c){this.el_[k]=c}});["pause","load","play"].forEach(function(k){I.prototype[k]=function(){return this.el_[k]()}});da.withSourceHandlers(I);I.nativeSourceHandler={};I.nativeSourceHandler.canPlayType=function(k){try{return I.TEST_VID.canPlayType(k)}catch(c){return""}};I.nativeSourceHandler.canHandleSource=function(k,c){return k.type?I.nativeSourceHandler.canPlayType(k.type):k.src?(k=ae(k.src),I.nativeSourceHandler.canPlayType("video/"+k)):""};I.nativeSourceHandler.handleSource=function(k,
c,e){c.setSrc(k.src)};I.nativeSourceHandler.dispose=function(){};I.registerSourceHandler(I.nativeSourceHandler);da.registerTech("Html5",I);var pk=Pd(["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "],["\n        Using the tech directly can be dangerous. I hope you know what you're doing.\n        See https://github.com/videojs/video.js/issues/2617 for more info.\n      "]),Wg=
"progress abort suspend emptied stalled loadedmetadata loadeddata timeupdate resize volumechange texttrackchange".split(" "),Ae={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},la=function(k){function c(e,n,f){N(this,c);e.id=e.id||n.id||"vjs_video_"+zb++;n=w(c.getTagSettings(e),n);n.initChildren=!1;n.createEl=!1;n.evented=!1;n.reportTouchActivity=!1;if(!n.language)if("function"===typeof e.closest){var b=e.closest("[lang]");b&&b.getAttribute&&(n.language=b.getAttribute("lang"))}else for(b=
e;b&&1===b.nodeType;){if(A(b).hasOwnProperty("lang")){n.language=b.getAttribute("lang");break}b=b.parentNode}f=M(this,k.call(this,null,n,f));f.isPosterFromTech_=!1;f.queuedCallbacks_=[];f.isReady_=!1;f.hasStarted_=!1;f.userActive_=!1;if(!f.options_||!f.options_.techOrder||!f.options_.techOrder.length)throw Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");f.tag=e;f.tagAttributes=e&&A(e);f.language(f.options_.language);
if(n.languages){var g={};Object.getOwnPropertyNames(n.languages).forEach(function(e){g[e.toLowerCase()]=n.languages[e]});f.languages_=g}else f.languages_=c.prototype.options_.languages;f.cache_={};f.poster_=n.poster||"";f.controls_=!!n.controls;f.cache_.lastVolume=1;e.controls=!1;e.removeAttribute("controls");e.hasAttribute("autoplay")?f.options_.autoplay=!0:f.autoplay(f.options_.autoplay);f.scrubbing_=!1;f.el_=f.createEl();f.cache_.lastPlaybackRate=f.defaultPlaybackRate();Xa(f,{eventBusKey:"el_"});
b=ea(f.options_);if(n.plugins){var a=n.plugins;Object.keys(a).forEach(function(e){if("function"===typeof this[e])this[e](a[e]);else throw Error('plugin "'+e+'" does not exist');},f)}f.options_.playerOptions=b;f.middleware_=[];f.initChildren();f.isAudio("audio"===e.nodeName.toLowerCase());f.controls()?f.addClass("vjs-controls-enabled"):f.addClass("vjs-controls-disabled");f.el_.setAttribute("role","region");f.isAudio()?f.el_.setAttribute("aria-label",f.localize("Audio Player")):f.el_.setAttribute("aria-label",
f.localize("Video Player"));f.isAudio()&&f.addClass("vjs-audio");f.flexNotSupported_()&&f.addClass("vjs-no-flex");gb||f.addClass("vjs-workinghover");c.players[f.id_]=f;f.addClass("vjs-v7");f.userActive(!0);f.reportUserActivity();f.one("play",f.listenForUserActivity_);f.on("fullscreenchange",f.handleFullscreenChange_);f.on("stageclick",f.handleStageClick_);f.changingSrc_=!1;f.playWaitingForReady_=!1;f.playOnLoadstart_=null;return f}K(c,k);c.prototype.dispose=function(){this.trigger("dispose");this.off("dispose");
this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null);c.players[this.id_]=null;this.tag&&this.tag.player&&(this.tag.player=null);this.el_&&this.el_.player&&(this.el_.player=null);this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_="");this.playerElIngest_&&(this.playerElIngest_=null);this.tag&&(this.tag=null);Kd[this.id()]=null;k.prototype.dispose.call(this)};c.prototype.createEl=function(){var e=this.tag,c=void 0,f=
this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),b="video-js"===this.tag.tagName.toLowerCase();f?c=this.el_=e.parentNode:b||(c=this.el_=k.prototype.createEl.call(this,"div"));var g=A(e);if(b){c=this.el_=e;for(e=this.tag=L.createElement("video");c.children.length;)e.appendChild(c.firstChild);O(c,"video-js")||G(c,"video-js");c.appendChild(e);f=this.playerElIngest_=c;Object.keys(c).forEach(function(a){e[a]=c[a]})}e.setAttribute("tabindex","-1");
g.tabindex="-1";Xf&&(e.setAttribute("role","application"),g.role="application");e.removeAttribute("width");e.removeAttribute("height");"width"in g&&delete g.width;"height"in g&&delete g.height;Object.getOwnPropertyNames(g).forEach(function(a){b&&"class"===a||c.setAttribute(a,g[a]);b&&e.setAttribute(a,g[a])});e.playerId=e.id;e.id+="_html5_api";e.className="vjs-tech";e.player=c.player=this;this.addClass("vjs-paused");if(!0!==F.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=Mf("vjs-styles-dimensions");var a=
pb(".vjs-styles-defaults"),l=pb("head");l.insertBefore(this.styleEl_,a?a.nextSibling:l.firstChild)}this.width(this.options_.width);this.height(this.options_.height);this.fluid(this.options_.fluid);this.aspectRatio(this.options_.aspectRatio);a=e.getElementsByTagName("a");for(l=0;l<a.length;l++){var r=a.item(l);G(r,"vjs-hidden");r.setAttribute("hidden","hidden")}e.initNetworkState_=e.networkState;e.parentNode&&!f&&e.parentNode.insertBefore(c,e);P(e,c);this.children_.unshift(e);this.el_.setAttribute("lang",
this.language_);return this.el_=c};c.prototype.width=function(e){return this.dimension("width",e)};c.prototype.height=function(e){return this.dimension("height",e)};c.prototype.dimension=function(e,c){var f=e+"_";if(void 0===c)return this[f]||0;if(""===c)this[f]=void 0,this.updateStyleEl_();else{var b=parseFloat(c);isNaN(b)?V.error('Improper value "'+c+'" supplied for for '+e):(this[f]=b,this.updateStyleEl_())}};c.prototype.fluid=function(e){if(void 0===e)return!!this.fluid_;this.fluid_=!!e;e?this.addClass("vjs-fluid"):
this.removeClass("vjs-fluid");this.updateStyleEl_()};c.prototype.aspectRatio=function(e){if(void 0===e)return this.aspectRatio_;if(!/^\d+:\d+$/.test(e))throw Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e;this.fluid(!0);this.updateStyleEl_()};c.prototype.updateStyleEl_=function(){if(!0===F.VIDEOJS_NO_DYNAMIC_STYLE){var e="number"===typeof this.width_?this.width_:this.options_.width,c="number"===typeof this.height_?this.height_:
this.options_.height,f=this.tech_&&this.tech_.el();f&&(0<=e&&(f.width=e),0<=c&&(f.height=c))}else{e=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:0<this.videoWidth()?this.videoWidth()+":"+this.videoHeight():"16:9").split(":");var b=e[1]/e[0];e=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/b:this.videoWidth()||300;c=void 0!==this.height_?this.height_:e*b;f=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions";this.addClass(f);
Nf(this.styleEl_,"\n      ."+f+" {\n        width: "+e+"px;\n        height: "+c+"px;\n      }\n\n      ."+f+".vjs-fluid {\n        padding-top: "+100*b+"%;\n      }\n    ")}};c.prototype.loadTech_=function(e,c){var f=this;this.tech_&&this.unloadTech_();var b=fa(e),k=e.charAt(0).toLowerCase()+e.slice(1);"Html5"!==b&&this.tag&&(da.getTech("Html5").disposeMediaElement(this.tag),this.tag=this.tag.player=null);this.techName_=b;this.isReady_=!1;var a="string"===typeof this.autoplay()?!1:this.autoplay(),
l={source:c,autoplay:a,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+k+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset};Ga.names.forEach(function(e){e=
Ga[e];l[e.getterName]=f[e.privateName]});w(l,this.options_[b]);w(l,this.options_[k]);w(l,this.options_[e.toLowerCase()]);this.tag&&(l.tag=this.tag);c&&c.src===this.cache_.src&&0<this.cache_.currentTime&&(l.startTime=this.cache_.currentTime);e=da.getTech(e);if(!e)throw Error("No Tech named '"+b+"' exists! '"+b+"' should be registered using videojs.registerTech()'");this.tech_=new e(l);this.tech_.ready(S(this,this.handleTechReady_),!0);$f.jsonToTextTracks(this.textTracksJson_||[],this.tech_);Wg.forEach(function(e){f.on(f.tech_,
e,f["handleTech"+fa(e)+"_"])});Object.keys(Ae).forEach(function(e){f.on(f.tech_,e,function(c){if(0===f.tech_.playbackRate()&&f.tech_.seeking())f.queuedCallbacks_.push({callback:f["handleTech"+Ae[e]+"_"].bind(f),event:c});else f["handleTech"+Ae[e]+"_"](c)})});this.on(this.tech_,"loadstart",this.handleTechLoadStart_);this.on(this.tech_,"sourceset",this.handleTechSourceset_);this.on(this.tech_,"waiting",this.handleTechWaiting_);this.on(this.tech_,"ended",this.handleTechEnded_);this.on(this.tech_,"seeking",
this.handleTechSeeking_);this.on(this.tech_,"play",this.handleTechPlay_);this.on(this.tech_,"firstplay",this.handleTechFirstPlay_);this.on(this.tech_,"pause",this.handleTechPause_);this.on(this.tech_,"durationchange",this.handleTechDurationChange_);this.on(this.tech_,"fullscreenchange",this.handleTechFullscreenChange_);this.on(this.tech_,"error",this.handleTechError_);this.on(this.tech_,"loadedmetadata",this.updateStyleEl_);this.on(this.tech_,"posterchange",this.handleTechPosterChange_);this.on(this.tech_,
"textdata",this.handleTechTextData_);this.on(this.tech_,"ratechange",this.handleTechRateChange_);this.usingNativeControls(this.techGet_("controls"));this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_();this.tech_.el().parentNode===this.el()||"Html5"===b&&this.tag||P(this.tech_.el(),this.el());this.tag&&(this.tag=this.tag.player=null)};c.prototype.unloadTech_=function(){var e=this;Ga.names.forEach(function(c){c=Ga[c];e[c.privateName]=e[c.getterName]()});this.textTracksJson_=
$f.textTracksToJson(this.tech_);this.isReady_=!1;this.tech_.dispose();this.tech_=!1;this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange"));this.isPosterFromTech_=!1};c.prototype.tech=function(e){void 0===e&&V.warn(Bd(pk));return this.tech_};c.prototype.addTechControlsListeners_=function(){this.removeTechControlsListeners_();this.on(this.tech_,"mousedown",this.handleTechClick_);this.on(this.tech_,"dblclick",this.handleTechDoubleClick_);this.on(this.tech_,"touchstart",this.handleTechTouchStart_);
this.on(this.tech_,"touchmove",this.handleTechTouchMove_);this.on(this.tech_,"touchend",this.handleTechTouchEnd_);this.on(this.tech_,"tap",this.handleTechTap_)};c.prototype.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.handleTechTap_);this.off(this.tech_,"touchstart",this.handleTechTouchStart_);this.off(this.tech_,"touchmove",this.handleTechTouchMove_);this.off(this.tech_,"touchend",this.handleTechTouchEnd_);this.off(this.tech_,"mousedown",this.handleTechClick_);this.off(this.tech_,
"dblclick",this.handleTechDoubleClick_)};c.prototype.handleTechReady_=function(){this.triggerReady();this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume);this.handleTechPosterChange_();this.handleTechDurationChange_()};c.prototype.handleTechLoadStart_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-seeking");this.error(null);this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay"));this.manualAutoplay_(this.autoplay())};
c.prototype.manualAutoplay_=function(e){var c=this;if(this.tech_&&"string"===typeof e){var f=function(){var e=c.muted();c.muted(!0);var a=c.play();if(a&&a.then&&a.catch)return a.catch(function(a){c.muted(e)})},b=void 0;"any"===e?(b=this.play())&&b.then&&b.catch&&b.catch(function(){return f()}):b="muted"===e?f():this.play();if(b&&b.then&&b.catch)return b.then(function(){c.trigger({type:"autoplay-success",autoplay:e})}).catch(function(f){c.trigger({type:"autoplay-failure",autoplay:e})})}};c.prototype.updateSourceCaches_=
function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",c=e,f="";"string"!==typeof c&&(c=e.src,f=e.type);if(!/^blob:/.test(c)){this.cache_.source=this.cache_.source||{};this.cache_.sources=this.cache_.sources||[];c&&!f&&(f=Sj(this,c));this.cache_.source=ea({},e,{src:c,type:f});e=this.cache_.sources.filter(function(e){return e.src&&e.src===c});f=[];for(var b=this.$$("source"),k=[],a=0;a<b.length;a++){var l=A(b[a]);f.push(l);l.src&&l.src===c&&k.push(l.src)}k.length&&!e.length?this.cache_.sources=
f:e.length||(this.cache_.sources=[this.cache_.source]);this.cache_.src=c}};c.prototype.handleTechSourceset_=function(e){var c=this;if(!this.changingSrc_&&(this.updateSourceCaches_(e.src),!e.src))this.tech_.one(["sourceset","loadstart"],function g(e){"sourceset"!==e.type&&c.updateSourceCaches_(c.techGet_("currentSrc"));c.tech_.off(["sourceset","loadstart"],g)});this.trigger({src:e.src,type:"sourceset"})};c.prototype.hasStarted=function(e){if(void 0===e)return this.hasStarted_;e!==this.hasStarted_&&
((this.hasStarted_=e)?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))};c.prototype.handleTechPlay_=function(){this.removeClass("vjs-ended");this.removeClass("vjs-paused");this.addClass("vjs-playing");this.hasStarted(!0);this.trigger("play")};c.prototype.handleTechRateChange_=function(){0<this.tech_.playbackRate()&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]);this.cache_.lastPlaybackRate=
this.tech_.playbackRate();this.trigger("ratechange")};c.prototype.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting");this.trigger("waiting");this.one("timeupdate",function(){return e.removeClass("vjs-waiting")})};c.prototype.handleTechCanPlay_=function(){this.removeClass("vjs-waiting");this.trigger("canplay")};c.prototype.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting");this.trigger("canplaythrough")};c.prototype.handleTechPlaying_=function(){this.removeClass("vjs-waiting");
this.trigger("playing")};c.prototype.handleTechSeeking_=function(){this.addClass("vjs-seeking");this.trigger("seeking")};c.prototype.handleTechSeeked_=function(){this.removeClass("vjs-seeking");this.trigger("seeked")};c.prototype.handleTechFirstPlay_=function(){this.options_.starttime&&(V.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime));this.addClass("vjs-has-started");this.trigger("firstplay")};c.prototype.handleTechPause_=
function(){this.removeClass("vjs-playing");this.addClass("vjs-paused");this.trigger("pause")};c.prototype.handleTechEnded_=function(){this.addClass("vjs-ended");this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause();this.trigger("ended")};c.prototype.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))};c.prototype.handleTechClick_=function(e){Ia(e)&&this.controls_&&(this.paused()?ec(this.play()):this.pause())};c.prototype.handleTechDoubleClick_=
function(e){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(c){return c.contains(e.target)})||(this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))};c.prototype.handleTechTap_=function(){this.userActive(!this.userActive())};c.prototype.handleTechTouchStart_=function(){this.userWasActive=this.userActive()};c.prototype.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()};c.prototype.handleTechTouchEnd_=function(e){e.preventDefault()};
c.prototype.handleFullscreenChange_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")};c.prototype.handleStageClick_=function(){this.reportUserActivity()};c.prototype.handleTechFullscreenChange_=function(e,c){c&&this.isFullscreen(c.isFullscreen);this.trigger("fullscreenchange")};c.prototype.handleTechError_=function(){var e=this.tech_.error();this.error(e)};c.prototype.handleTechTextData_=function(){var e=null;1<arguments.length&&(e=arguments[1]);this.trigger("textdata",
e)};c.prototype.getCache=function(){return this.cache_};c.prototype.techCall_=function(e,c){this.ready(function(){if(e in Qj)return this.tech_[e](this.middleware_.reduce(Jd(e),c));if(e in rg)return Af(this.middleware_,this.tech_,e,c);try{if(this.tech_)this.tech_[e](c)}catch(f){throw V(f),f;}},!0)};c.prototype.techGet_=function(e){if(this.tech_&&this.tech_.isReady_){if(e in Pj){var c=this.tech_;return this.middleware_.reduceRight(Jd(e),c[e]())}if(e in rg)return Af(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(f){if(void 0===
this.tech_[e])throw V("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",f),f;if("TypeError"===f.name)throw V("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",f),this.tech_.isReady_=!1,f;V(f);throw f;}}};c.prototype.play=function(){var e=this,c=this.options_.Promise||F.Promise;return c?new c(function(c){e.play_(c)}):this.play_()};c.prototype.play_=function(){var e=this,c=0<arguments.length&&void 0!==arguments[0]?arguments[0]:ec;this.playOnLoadstart_&&
this.off("loadstart",this.playOnLoadstart_);this.isReady_?this.changingSrc_||!this.src()&&!this.currentSrc()?(this.playOnLoadstart_=function(){e.playOnLoadstart_=null;c(e.play())},this.one("loadstart",this.playOnLoadstart_)):c(this.techGet_("play")):this.playWaitingForReady_||(this.playWaitingForReady_=!0,this.ready(function(){e.playWaitingForReady_=!1;c(e.play())}))};c.prototype.pause=function(){this.techCall_("pause")};c.prototype.paused=function(){return!1===this.techGet_("paused")?!1:!0};c.prototype.played=
function(){return this.techGet_("played")||Ya(0,0)};c.prototype.scrubbing=function(e){if("undefined"===typeof e)return this.scrubbing_;this.scrubbing_=!!e;e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")};c.prototype.currentTime=function(e){if("undefined"!==typeof e)0>e&&(e=0),this.techCall_("setCurrentTime",e);else return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime};c.prototype.duration=function(e){if(void 0===e)return void 0!==this.cache_.duration?
this.cache_.duration:NaN;e=parseFloat(e);0>e&&(e=Infinity);e!==this.cache_.duration&&(this.cache_.duration=e,Infinity===e?this.addClass("vjs-live"):this.removeClass("vjs-live"),this.trigger("durationchange"))};c.prototype.remainingTime=function(){return this.duration()-this.currentTime()};c.prototype.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())};c.prototype.buffered=function(){var e=this.techGet_("buffered");e&&e.length||(e=Ya(0,0));return e};c.prototype.bufferedPercent=
function(){return sf(this.buffered(),this.duration())};c.prototype.bufferedEnd=function(){var e=this.buffered(),c=this.duration();e=e.end(e.length-1);e>c&&(e=c);return e};c.prototype.volume=function(e){if(void 0!==e)e=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=e,this.techCall_("setVolume",e),0<e&&this.lastVolume_(e);else return e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e};c.prototype.muted=function(e){if(void 0!==e)this.techCall_("setMuted",e);else return this.techGet_("muted")||
!1};c.prototype.defaultMuted=function(e){return void 0!==e?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1};c.prototype.lastVolume_=function(e){if(void 0!==e&&0!==e)this.cache_.lastVolume=e;else return this.cache_.lastVolume};c.prototype.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1};c.prototype.isFullscreen=function(e){if(void 0!==e)this.isFullscreen_=!!e;else return!!this.isFullscreen_};c.prototype.requestFullscreen=function(){this.isFullscreen(!0);
hb.requestFullscreen?(ya(L,hb.fullscreenchange,S(this,function f(c){this.isFullscreen(L[hb.fullscreenElement]);!1===this.isFullscreen()&&ta(L,hb.fullscreenchange,f);this.trigger("fullscreenchange")})),this.el_[hb.requestFullscreen]()):this.tech_.supportsFullScreen()?this.techCall_("enterFullScreen"):(this.enterFullWindow(),this.trigger("fullscreenchange"))};c.prototype.exitFullscreen=function(){this.isFullscreen(!1);if(hb.requestFullscreen)L[hb.exitFullscreen]();else this.tech_.supportsFullScreen()?
this.techCall_("exitFullScreen"):(this.exitFullWindow(),this.trigger("fullscreenchange"))};c.prototype.enterFullWindow=function(){this.isFullWindow=!0;this.docOrigOverflow=L.documentElement.style.overflow;ya(L,"keydown",S(this,this.fullWindowOnEscKey));L.documentElement.style.overflow="hidden";G(L.body,"vjs-full-window");this.trigger("enterFullWindow")};c.prototype.fullWindowOnEscKey=function(e){27===e.keyCode&&(!0===this.isFullscreen()?this.exitFullscreen():this.exitFullWindow())};c.prototype.exitFullWindow=
function(){this.isFullWindow=!1;ta(L,"keydown",this.fullWindowOnEscKey);L.documentElement.style.overflow=this.docOrigOverflow;E(L.body,"vjs-full-window");this.trigger("exitFullWindow")};c.prototype.canPlayType=function(e){for(var c,f=0,b=this.options_.techOrder;f<b.length;f++){c=b[f];var k=da.getTech(c);k||(k=J.getComponent(c));if(!k)V.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');else if(k.isSupported()&&(c=k.canPlayType(e)))return c}return""};c.prototype.selectSource=
function(e){var c=this,f=this.options_.techOrder.map(function(e){return[e,da.getTech(e)]}).filter(function(e){var c=e[0];if(e=e[1])return e.isSupported();V.error('The "'+c+'" tech is undefined. Skipped browser support check for that tech.');return!1}),b=function(e,c,a){var f=void 0;e.some(function(e){return c.some(function(c){if(f=a(e,c))return!0})});return f},k=void 0;k=function(e){return function(c,a){return e(a,c)}};var a=function(e,a){var f=e[0];if(e[1].canPlaySource(a,c.options_[f.toLowerCase()]))return{source:a,
tech:f}};return(k=this.options_.sourceOrder?b(e,f,k(a)):b(f,e,a))||!1};c.prototype.src=function(e){var c=this;if("undefined"===typeof e)return this.cache_.src||"";var f=Tj(e);f.length?(this.changingSrc_=!0,this.cache_.sources=f,this.updateSourceCaches_(f[0]),lj(this,f[0],function(e,k){c.middleware_=k;c.cache_.sources=f;c.updateSourceCaches_(e);if(c.src_(e)){if(1<f.length)return c.src(f.slice(1));c.changingSrc_=!1;c.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},
0);c.triggerReady()}else mj(k,c.tech_)})):this.setTimeout(function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})},0)};c.prototype.src_=function(e){var c=this,f=this.selectSource([e]);if(!f)return!0;if(!Dd(f.tech,this.techName_))return this.changingSrc_=!0,this.loadTech_(f.tech,f.source),this.tech_.ready(function(){c.changingSrc_=!1}),!1;this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",
e.src);this.changingSrc_=!1},!0);return!1};c.prototype.load=function(){this.techCall_("load")};c.prototype.reset=function(){this.tech_&&this.tech_.clearTracks("text");this.loadTech_(this.options_.techOrder[0],null);this.techCall_("reset")};c.prototype.currentSources=function(){var e=this.currentSource(),c=[];0!==Object.keys(e).length&&c.push(e);return this.cache_.sources||c};c.prototype.currentSource=function(){return this.cache_.source||{}};c.prototype.currentSrc=function(){return this.currentSource()&&
this.currentSource().src||""};c.prototype.currentType=function(){return this.currentSource()&&this.currentSource().type||""};c.prototype.preload=function(e){if(void 0!==e)this.techCall_("setPreload",e),this.options_.preload=e;else return this.techGet_("preload")};c.prototype.autoplay=function(e){if(void 0===e)return this.options_.autoplay||!1;var c=void 0;"string"===typeof e&&/(any|play|muted)/.test(e)?(this.options_.autoplay=e,this.manualAutoplay_(e),c=!1):this.options_.autoplay=e?!0:!1;c=c||this.options_.autoplay;
this.tech_&&this.techCall_("setAutoplay",c)};c.prototype.playsinline=function(e){return void 0!==e?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")};c.prototype.loop=function(e){if(void 0!==e)this.techCall_("setLoop",e),this.options_.loop=e;else return this.techGet_("loop")};c.prototype.poster=function(e){if(void 0===e)return this.poster_;e||(e="");e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))};
c.prototype.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}};c.prototype.controls=function(e){if(void 0===e)return!!this.controls_;e=!!e;this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),
this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))};c.prototype.usingNativeControls=function(e){if(void 0===e)return!!this.usingNativeControls_;e=!!e;this.usingNativeControls_!==e&&((this.usingNativeControls_=e)?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):
(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))};c.prototype.error=function(e){if(void 0===e)return this.error_||null;null===e?(this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close()):(this.error_=new ua(e),this.addClass("vjs-error"),V.error("(CODE:"+this.error_.code+" "+ua.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"))};c.prototype.reportUserActivity=function(e){this.userActivity_=!0};
c.prototype.userActive=function(e){if(void 0===e)return this.userActive_;e=!!e;if(e!==this.userActive_)if(this.userActive_=e)this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");else{if(this.tech_)this.tech_.one("mousemove",function(e){e.stopPropagation();e.preventDefault()});this.userActivity_=!1;this.removeClass("vjs-user-active");this.addClass("vjs-user-inactive");this.trigger("userinactive")}};c.prototype.listenForUserActivity_=
function(){var e=void 0,c=void 0,f=void 0,b=S(this,this.reportUserActivity);this.on("mousedown",function(){b();this.clearInterval(e);e=this.setInterval(b,250)});this.on("mousemove",function(e){if(e.screenX!==c||e.screenY!==f)c=e.screenX,f=e.screenY,b()});this.on("mouseup",function(c){b();this.clearInterval(e)});this.on("keydown",b);this.on("keyup",b);var k=void 0;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1;this.userActive(!0);this.clearTimeout(k);var e=this.options_.inactivityTimeout;
0>=e||(k=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},e))}},250)};c.prototype.playbackRate=function(e){if(void 0!==e)this.techCall_("setPlaybackRate",e);else return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1};c.prototype.defaultPlaybackRate=function(e){return void 0!==e?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1};c.prototype.isAudio=
function(e){if(void 0!==e)this.isAudio_=!!e;else return!!this.isAudio_};c.prototype.addTextTrack=function(e,c,f){if(this.tech_)return this.tech_.addTextTrack(e,c,f)};c.prototype.addRemoteTextTrack=function(e,c){if(this.tech_)return this.tech_.addRemoteTextTrack(e,c)};c.prototype.removeRemoteTextTrack=function(){var e=(0<arguments.length&&void 0!==arguments[0]?arguments[0]:{}).track;e=void 0===e?arguments[0]:e;if(this.tech_)return this.tech_.removeRemoteTextTrack(e)};c.prototype.getVideoPlaybackQuality=
function(){return this.techGet_("getVideoPlaybackQuality")};c.prototype.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0};c.prototype.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0};c.prototype.language=function(e){if(void 0===e)return this.language_;this.language_=String(e).toLowerCase()};c.prototype.languages=function(){return ea(c.prototype.options_.languages,this.languages_)};c.prototype.toJSON=function(){var e=
ea(this.options_),c=e.tracks;e.tracks=[];for(var f=0;f<c.length;f++){var b=c[f];b=ea(b);b.player=void 0;e.tracks[f]=b}return e};c.prototype.createModal=function(e,c){var f=this;c=c||{};c.content=e||"";var b=new Rb(this,c);this.addChild(b);b.on("dispose",function(){f.removeChild(b)});b.open();return b};c.getTagSettings=function(e){var c={sources:[],tracks:[]},f=A(e),b=f["data-setup"];O(e,"vjs-fluid")&&(f.fluid=!0);if(null!==b){var k=null;try{var a=JSON.parse(b||"{}",void 0)}catch(l){k=l}a=[k,a];b=
a[0];a=a[1];b&&V.error(b);w(f,a)}w(c,f);if(e.hasChildNodes())for(e=e.childNodes,f=0,b=e.length;f<b;f++)a=e[f],k=a.nodeName.toLowerCase(),"source"===k?c.sources.push(A(a)):"track"===k&&c.tracks.push(A(a));return c};c.prototype.flexNotSupported_=function(){var e=L.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)};return c}(J);Ga.names.forEach(function(k){var c=Ga[k];la.prototype[c.getterName]=function(){if(this.tech_)return this.tech_[c.getterName]();
this[c.privateName]=this[c.privateName]||new c.ListClass;return this[c.privateName]}});la.players={};var rc=F.navigator;la.prototype.options_={techOrder:da.defaultTechOrder_,html5:{},flash:{},inactivityTimeout:2E3,playbackRates:[],children:"mediaLoader posterImage textTrackDisplay loadingSpinner bigPlayButton controlBar errorDisplay textTrackSettings resizeManager".split(" "),language:rc&&(rc.languages&&rc.languages[0]||rc.userLanguage||rc.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media."};
["ended","seeking","seekable","networkState","readyState"].forEach(function(k){la.prototype[k]=function(){return this.techGet_(k)}});Wg.forEach(function(k){la.prototype["handleTech"+fa(k)+"_"]=function(){return this.trigger(k)}});J.registerComponent("Player",la);var jb={},dd=function(k){return jb.hasOwnProperty(k)?jb[k]:void 0},ed=function(k,c,e){e=(e?"before":"")+"pluginsetup";k.trigger(e,c);k.trigger(e+":"+c.name,c)},qk=function(k,c){var e=function(){ed(this,{name:k,plugin:c,instance:null},!0);
var e=c.apply(this,arguments);this.activePlugins_=this.activePlugins_||{};this.activePlugins_[k]=!0;ed(this,{name:k,plugin:c,instance:e});return e};Object.keys(c).forEach(function(k){e[k]=c[k]});return e},Xg=function(k,c){c.prototype.name=k;return function(){ed(this,{name:k,plugin:c,instance:null},!0);for(var e=arguments.length,n=Array(e),f=0;f<e;f++)n[f]=arguments[f];var b=new (Function.prototype.bind.apply(c,[null].concat([this].concat(n))));this[k]=function(){return b};ed(this,b.getEventHash());
return b}},Za=function(){function k(c){N(this,k);if(this.constructor===k)throw Error("Plugin must be sub-classed; not directly instantiated.");this.player=c;Xa(this);delete this.trigger;X(this,this.constructor.defaultState);var e=this.name;c.activePlugins_=c.activePlugins_||{};c.activePlugins_[e]=!0;this.dispose=S(this,this.dispose);c.on("dispose",this.dispose)}k.prototype.version=function(){return this.constructor.VERSION};k.prototype.getEventHash=function(){var c=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:{};c.name=this.name;c.plugin=this.constructor;c.instance=this;return c};k.prototype.trigger=function(c){return eb(this.eventBusEl_,c,this.getEventHash(1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))};k.prototype.handleStateChanged=function(c){};k.prototype.dispose=function(){var c=this.name,e=this.player;this.trigger("dispose");this.off();e.off("dispose",this.dispose);e.activePlugins_[c]=!1;this.player=this.state=null;e[c]=Xg(c,jb[c])};k.isBasic=function(c){c="string"===typeof c?
dd(c):c;return"function"===typeof c&&!k.prototype.isPrototypeOf(c.prototype)};k.registerPlugin=function(c,e){if("string"!==typeof c)throw Error('Illegal plugin name, "'+c+'", must be a string, was '+("undefined"===typeof c?"undefined":ka(c))+".");if(jb.hasOwnProperty(c))V.warn('A plugin named "'+c+'" already exists. You may want to avoid re-registering plugins!');else if(la.prototype.hasOwnProperty(c))throw Error('Illegal plugin name, "'+c+'", cannot share a name with an existing player method!');
if("function"!==typeof e)throw Error('Illegal plugin for "'+c+'", must be a function, was '+("undefined"===typeof e?"undefined":ka(e))+".");jb[c]=e;"plugin"!==c&&(k.isBasic(e)?la.prototype[c]=qk(c,e):la.prototype[c]=Xg(c,e));return e};k.deregisterPlugin=function(c){if("plugin"===c)throw Error("Cannot de-register base plugin.");jb.hasOwnProperty(c)&&(delete jb[c],delete la.prototype[c])};k.getPlugins=function(){var c=void 0;(0<arguments.length&&void 0!==arguments[0]?arguments[0]:Object.keys(jb)).forEach(function(e){var k=
dd(e);k&&(c=c||{},c[e]=k)});return c};k.getPluginVersion=function(c){return(c=dd(c))&&c.VERSION||""};return k}();Za.getPlugin=dd;Za.BASE_PLUGIN_NAME="plugin";Za.registerPlugin("plugin",Za);la.prototype.usingPlugin=function(k){return!!this.activePlugins_&&!0===this.activePlugins_[k]};la.prototype.hasPlugin=function(k){return!!jb.hasOwnProperty(k)};var rk=function(k,c){if("function"!==typeof c&&null!==c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?
"undefined":ka(c)));k.prototype=Object.create(c&&c.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}});c&&(k.super_=c)},Ef=function(k){return 0===k.indexOf("#")?k.slice(1):k};D.hooks_={};D.hooks=function(k,c){D.hooks_[k]=D.hooks_[k]||[];c&&(D.hooks_[k]=D.hooks_[k].concat(c));return D.hooks_[k]};D.hook=function(k,c){D.hooks(k,c)};D.hookOnce=function(k,c){D.hooks(k,[].concat(c).map(function(e){return function f(){D.removeHook(k,f);return e.apply(void 0,arguments)}}))};D.removeHook=
function(k,c){c=D.hooks(k).indexOf(c);if(-1>=c)return!1;D.hooks_[k]=D.hooks_[k].slice();D.hooks_[k].splice(c,1);return!0};if(!0!==F.VIDEOJS_NO_DYNAMIC_STYLE&&m()){var fd=pb(".vjs-styles-defaults");if(!fd){fd=Mf("vjs-styles-defaults");var Be=pb("head");Be&&Be.insertBefore(fd,Be.firstChild);Nf(fd,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}Ra(1,D);D.VERSION="7.2.4";D.options=la.prototype.options_;D.getPlayers=
function(){return la.players};D.getPlayer=function(k){var c=la.players;if("string"===typeof k){k=Ef(k);var e=c[k];if(e)return e;k=pb("#"+k)}if(v(k)&&(e=k,k=e.player,e=e.playerId,k||c[e]))return k||c[e]};D.getAllPlayers=function(){return Object.keys(la.players).map(function(k){return la.players[k]}).filter(Boolean)};D.players=la.players;D.getComponent=J.getComponent;D.registerComponent=function(k,c){da.isTech(c)&&V.warn("The "+k+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)");
J.registerComponent.call(J,k,c)};D.getTech=da.getTech;D.registerTech=da.registerTech;D.use=function(k,c){Db[k]=Db[k]||[];Db[k].push(c)};Object.defineProperty(D,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(D.middleware,"TERMINATOR",{value:Sc,writeable:!1,enumerable:!0});D.browser=vj;D.TOUCH_ENABLED=Vc;D.extend=function(k){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},e=function(){k.apply(this,arguments)},n={};"object"===("undefined"===typeof c?"undefined":
ka(c))?(c.constructor!==Object.prototype.constructor&&(e=c.constructor),n=c):"function"===typeof c&&(e=c);rk(e,k);for(var f in n)n.hasOwnProperty(f)&&(e.prototype[f]=n[f]);return e};D.mergeOptions=ea;D.bind=S;D.registerPlugin=Za.registerPlugin;D.deregisterPlugin=Za.deregisterPlugin;D.plugin=function(k,c){V.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead");return Za.registerPlugin(k,c)};D.getPlugins=Za.getPlugins;D.getPlugin=Za.getPlugin;D.getPluginVersion=Za.getPluginVersion;
D.addLanguage=function(k,c){var e;k=(""+k).toLowerCase();D.options.languages=ea(D.options.languages,(e={},e[k]=c,e));return D.options.languages[k]};D.log=V;D.createTimeRange=D.createTimeRanges=Ya;D.formatTime=Mb;D.setFormatTime=function(k){Md=k};D.resetFormatTime=function(){Md=ug};D.parseUrl=$d;D.isCrossOrigin=$c;D.EventTarget=pa;D.on=ya;D.one=Da;D.off=ta;D.trigger=eb;D.xhr=fb;D.TextTrack=nc;D.AudioTrack=lg;D.VideoTrack=mg;"isEl isTextNode createEl hasClass addClass removeClass toggleClass setAttributes getAttributes emptyEl appendContent insertContent".split(" ").forEach(function(k){D[k]=
function(){V.warn("videojs."+k+"() is deprecated; use videojs.dom."+k+"() instead");return Lf[k].apply(null,arguments)}});D.computedStyle=q;D.dom=Lf;D.url=Ej;var gd=C(function(k,c){(function(e){var c=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,f=/^([^\/?#]*)(.*)$/,b=/(?:\/|^)\.(?=\/)/g,g=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,c,b){b=b||{};e=e.trim();c=c.trim();if(!c){if(!b.alwaysNormalize)return e;b=a.parseURL(e);if(!b)throw Error("Error trying to parse base URL.");
b.path=a.normalizePath(b.path);return a.buildURLFromParts(b)}var k=a.parseURL(c);if(!k)throw Error("Error trying to parse relative URL.");if(k.scheme){if(!b.alwaysNormalize)return c;k.path=a.normalizePath(k.path);return a.buildURLFromParts(k)}c=a.parseURL(e);if(!c)throw Error("Error trying to parse base URL.");!c.netLoc&&c.path&&"/"!==c.path[0]&&(e=f.exec(c.path),c.netLoc=e[1],c.path=e[2]);c.netLoc&&!c.path&&(c.path="/");e={scheme:c.scheme,netLoc:k.netLoc,path:null,params:k.params,query:k.query,fragment:k.fragment};
k.netLoc||(e.netLoc=c.netLoc,"/"!==k.path[0]&&(k.path?(c=c.path,c=c.substring(0,c.lastIndexOf("/")+1)+k.path,e.path=a.normalizePath(c)):(e.path=c.path,k.params||(e.params=c.params,k.query||(e.query=c.query)))));null===e.path&&(e.path=b.alwaysNormalize?a.normalizePath(k.path):k.path);return a.buildURLFromParts(e)},parseURL:function(e){return(e=c.exec(e))?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(b,
"");e.length!==(e=e.replace(g,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};k.exports=a})(jc)}),hd=function(k,c){if(!(k instanceof c))throw new TypeError("Cannot call a class as a function");},sk=Object.assign||function(k){for(var c=1;c<arguments.length;c++){var e=arguments[c],n;for(n in e)Object.prototype.hasOwnProperty.call(e,n)&&(k[n]=e[n])}return k},Ce=function(k,c){if("function"!==typeof c&&null!==
c)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof c?"undefined":ka(c)));k.prototype=Object.create(c&&c.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}});c&&(Object.setPrototypeOf?Object.setPrototypeOf(k,c):k.__proto__=c)},De=function(k,c){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!c||"object"!==("undefined"===typeof c?"undefined":ka(c))&&"function"!==typeof c?k:c},
Ee=function(){function k(){hd(this,k);this.listeners={}}k.prototype.on=function(c,e){this.listeners[c]||(this.listeners[c]=[]);this.listeners[c].push(e)};k.prototype.off=function(c,e){if(!this.listeners[c])return!1;e=this.listeners[c].indexOf(e);this.listeners[c].splice(e,1);return-1<e};k.prototype.trigger=function(c){var e=this.listeners[c],k;if(e)if(2===arguments.length){var f=e.length;for(k=0;k<f;++k)e[k].call(this,arguments[1])}else{var b=Array.prototype.slice.call(arguments,1);f=e.length;for(k=
0;k<f;++k)e[k].apply(this,b)}};k.prototype.dispose=function(){this.listeners={}};k.prototype.pipe=function(c){this.on("data",function(e){c.push(e)})};return k}(),tk=function(k){function c(){hd(this,c);var e=De(this,k.call(this));e.buffer="";return e}Ce(c,k);c.prototype.push=function(e){this.buffer+=e;for(e=this.buffer.indexOf("\n");-1<e;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)};return c}(Ee),sc=function(k){k=k.split(/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/);
for(var c={},e=k.length,n;e--;)""!==k[e]&&(n=/([^=]*)=(.*)/.exec(k[e]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),c[n[0]]=n[1]);return c},uk=function(k){function c(){hd(this,c);var e=De(this,k.call(this));e.customParsers=[];return e}Ce(c,k);c.prototype.push=function(e){var c;e=e.replace(/^[\u0000\s]+|[\u0000\s]+$/g,"");if(0!==e.length)if("#"!==e[0])this.trigger("data",{type:"uri",uri:e});else{for(c=0;c<this.customParsers.length;c++)if(this.customParsers[c].call(this,
e))return;if(0!==e.indexOf("#EXT"))this.trigger("data",{type:"comment",text:e.slice(1)});else if(e=e.replace("\r",""),c=/^#EXTM3U/.exec(e))this.trigger("data",{type:"tag",tagType:"m3u"});else if(c=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e))e={type:"tag",tagType:"inf"},c[1]&&(e.duration=parseFloat(c[1])),c[2]&&(e.title=c[2]),this.trigger("data",e);else if(c=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e))e={type:"tag",tagType:"targetduration"},c[1]&&(e.duration=parseInt(c[1],10)),this.trigger("data",e);
else if(c=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e))e={type:"tag",tagType:"totalduration"},c[1]&&(e.duration=parseInt(c[1],10)),this.trigger("data",e);else if(c=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e))e={type:"tag",tagType:"version"},c[1]&&(e.version=parseInt(c[1],10)),this.trigger("data",e);else if(c=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))e={type:"tag",tagType:"media-sequence"},c[1]&&(e.number=parseInt(c[1],10)),this.trigger("data",e);else if(c=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e))e=
{type:"tag",tagType:"discontinuity-sequence"},c[1]&&(e.number=parseInt(c[1],10)),this.trigger("data",e);else if(c=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e))e={type:"tag",tagType:"playlist-type"},c[1]&&(e.playlistType=c[1]),this.trigger("data",e);else if(c=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e))e={type:"tag",tagType:"byterange"},c[1]&&(e.length=parseInt(c[1],10)),c[2]&&(e.offset=parseInt(c[2],10)),this.trigger("data",e);else if(c=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e))e={type:"tag",tagType:"allow-cache"},
c[1]&&(e.allowed=!/NO/.test(c[1])),this.trigger("data",e);else if(c=/^#EXT-X-MAP:?(.*)$/.exec(e)){e={type:"tag",tagType:"map"};if(c[1]&&(c=sc(c[1]),c.URI&&(e.uri=c.URI),c.BYTERANGE)){var f=c.BYTERANGE.split("@");c=f[0];f=f[1];e.byterange={};c&&(e.byterange.length=parseInt(c,10));f&&(e.byterange.offset=parseInt(f,10))}this.trigger("data",e)}else(c=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e))?(e={type:"tag",tagType:"stream-inf"},c[1]&&(e.attributes=sc(c[1]),e.attributes.RESOLUTION&&(c=e.attributes.RESOLUTION.split("x"),
f={},c[0]&&(f.width=parseInt(c[0],10)),c[1]&&(f.height=parseInt(c[1],10)),e.attributes.RESOLUTION=f),e.attributes.BANDWIDTH&&(e.attributes.BANDWIDTH=parseInt(e.attributes.BANDWIDTH,10)),e.attributes["PROGRAM-ID"]&&(e.attributes["PROGRAM-ID"]=parseInt(e.attributes["PROGRAM-ID"],10))),this.trigger("data",e)):(c=/^#EXT-X-MEDIA:?(.*)$/.exec(e))?(e={type:"tag",tagType:"media"},c[1]&&(e.attributes=sc(c[1])),this.trigger("data",e)):(c=/^#EXT-X-ENDLIST/.exec(e))?this.trigger("data",{type:"tag",tagType:"endlist"}):
(c=/^#EXT-X-DISCONTINUITY/.exec(e))?this.trigger("data",{type:"tag",tagType:"discontinuity"}):(c=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(e))?(e={type:"tag",tagType:"program-date-time"},c[1]&&(e.dateTimeString=c[1],e.dateTimeObject=new Date(c[1])),this.trigger("data",e)):(c=/^#EXT-X-KEY:?(.*)$/.exec(e))?(e={type:"tag",tagType:"key"},c[1]&&(e.attributes=sc(c[1]),e.attributes.IV&&("0x"===e.attributes.IV.substring(0,2).toLowerCase()&&(e.attributes.IV=e.attributes.IV.substring(2)),e.attributes.IV=e.attributes.IV.match(/.{8}/g),
e.attributes.IV[0]=parseInt(e.attributes.IV[0],16),e.attributes.IV[1]=parseInt(e.attributes.IV[1],16),e.attributes.IV[2]=parseInt(e.attributes.IV[2],16),e.attributes.IV[3]=parseInt(e.attributes.IV[3],16),e.attributes.IV=new Uint32Array(e.attributes.IV))),this.trigger("data",e)):(c=/^#EXT-X-START:?(.*)$/.exec(e))?(e={type:"tag",tagType:"start"},c[1]&&(e.attributes=sc(c[1]),e.attributes["TIME-OFFSET"]=parseFloat(e.attributes["TIME-OFFSET"]),e.attributes.PRECISE=/YES/.test(e.attributes.PRECISE)),this.trigger("data",
e)):(c=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(e))?(e={type:"tag",tagType:"cue-out-cont"},e.data=c[1]?c[1]:"",this.trigger("data",e)):(c=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(e))?(e={type:"tag",tagType:"cue-out"},e.data=c[1]?c[1]:"",this.trigger("data",e)):(c=/^#EXT-X-CUE-IN:?(.*)?$/.exec(e))?(e={type:"tag",tagType:"cue-in"},e.data=c[1]?c[1]:"",this.trigger("data",e)):this.trigger("data",{type:"tag",data:e.slice(4)})}};c.prototype.addParser=function(c){var e=this,f=c.expression,b=c.customType,k=c.dataParser,
a=c.segment;"function"!==typeof k&&(k=function(c){return c});this.customParsers.push(function(c){if(f.exec(c))return e.trigger("data",{type:"custom",data:k(c),customType:b,segment:a}),!0})};return c}(Ee),Yg=function(k){function c(){hd(this,c);var e=De(this,k.call(this));e.lineStream=new tk;e.parseStream=new uk;e.lineStream.pipe(e.parseStream);var n=[],f={},b=void 0,g=void 0,a=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},r=0;e.manifest={allowCache:!0,discontinuityStarts:[],
segments:[]};e.parseStream.on("data",function(c){var k=void 0,z=void 0;({tag:function(){({"allow-cache":function(){this.manifest.allowCache=c.allowed;"allowed"in c||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in c&&(f.byterange=e,e.length=c.length,"offset"in c||(this.trigger("info",{message:"defaulting offset to zero"}),c.offset=0));"offset"in c&&(f.byterange=e,e.offset=c.offset)},endlist:function(){this.manifest.endList=
!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"}));"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"}));0<c.duration&&(f.duration=c.duration);0===c.duration&&(f.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"}));this.manifest.segments=n},key:function(){c.attributes?
"NONE"===c.attributes.METHOD?g=null:c.attributes.URI?(c.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),g={method:c.attributes.METHOD||"AES-128",uri:c.attributes.URI},"undefined"!==typeof c.attributes.IV&&(g.iv=c.attributes.IV)):this.trigger("warn",{message:"ignoring key declaration without URI"}):this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(c.number)?this.manifest.mediaSequence=c.number:
this.trigger("warn",{message:"ignoring invalid media sequence: "+c.number})},"discontinuity-sequence":function(){isFinite(c.number)?r=this.manifest.discontinuitySequence=c.number:this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+c.number})},"playlist-type":function(){/VOD|EVENT/.test(c.playlistType)?this.manifest.playlistType=c.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+c.playlist})},map:function(){b={};c.uri&&(b.uri=c.uri);c.byterange&&(b.byterange=
c.byterange)},"stream-inf":function(){this.manifest.playlists=n;this.manifest.mediaGroups=this.manifest.mediaGroups||l;c.attributes?(f.attributes||(f.attributes={}),sk(f.attributes,c.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){this.manifest.mediaGroups=this.manifest.mediaGroups||l;if(c.attributes&&c.attributes.TYPE&&c.attributes["GROUP-ID"]&&c.attributes.NAME){var e=this.manifest.mediaGroups[c.attributes.TYPE];e[c.attributes["GROUP-ID"]]=e[c.attributes["GROUP-ID"]]||
{};k=e[c.attributes["GROUP-ID"]];z={"default":/yes/i.test(c.attributes.DEFAULT)};z.autoselect=z["default"]?!0:/yes/i.test(c.attributes.AUTOSELECT);c.attributes.LANGUAGE&&(z.language=c.attributes.LANGUAGE);c.attributes.URI&&(z.uri=c.attributes.URI);c.attributes["INSTREAM-ID"]&&(z.instreamId=c.attributes["INSTREAM-ID"]);c.attributes.CHARACTERISTICS&&(z.characteristics=c.attributes.CHARACTERISTICS);c.attributes.FORCED&&(z.forced=/yes/i.test(c.attributes.FORCED));k[c.attributes.NAME]=z}else this.trigger("warn",
{message:"ignoring incomplete or missing media group"})},discontinuity:function(){r+=1;f.discontinuity=!0;this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=c.dateTimeString,this.manifest.dateTimeObject=c.dateTimeObject);f.dateTimeString=c.dateTimeString;f.dateTimeObject=c.dateTimeObject},targetduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",{message:"ignoring invalid target duration: "+
c.duration}):this.manifest.targetDuration=c.duration},totalduration:function(){!isFinite(c.duration)||0>c.duration?this.trigger("warn",{message:"ignoring invalid total duration: "+c.duration}):this.manifest.totalDuration=c.duration},start:function(){!c.attributes||isNaN(c.attributes["TIME-OFFSET"])?this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"}):this.manifest.start={timeOffset:c.attributes["TIME-OFFSET"],precise:c.attributes.PRECISE}},"cue-out":function(){f.cueOut=
c.data},"cue-out-cont":function(){f.cueOutCont=c.data},"cue-in":function(){f.cueIn=c.data}}[c.tagType]||a).call(e)},uri:function(){f.uri=c.uri;n.push(f);!this.manifest.targetDuration||"duration"in f||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),f.duration=this.manifest.targetDuration);g&&(f.key=g);f.timeline=r;b&&(f.map=b);f={}},comment:function(){},custom:function(){c.segment?(f.custom=f.custom||{},f.custom[c.customType]=c.data):(this.manifest.custom=this.manifest.custom||
{},this.manifest.custom[c.customType]=c.data)}})[c.type].call(e)});return e}Ce(c,k);c.prototype.push=function(c){this.lineStream.push(c)};c.prototype.end=function(){this.lineStream.push("\n")};c.prototype.addParser=function(c){this.parseStream.addParser(c)};return c}(Ee),vk=function(k){return k.reduce(function(c,e){var k=e.attributes.role&&e.attributes.role.value||"main",f=e.attributes.lang||"",b="main";f&&(b=e.attributes.lang+" ("+k+")");if(c[b]&&c[b].playlists[0].attributes.BANDWIDTH>e.attributes.bandwidth)return c;
var g,a=e.attributes;e=e.segments;e={attributes:(g={NAME:a.id,BANDWIDTH:a.bandwidth,CODECS:a.codecs},g["PROGRAM-ID"]=1,g),uri:"",endList:"static"===(a.type||"static"),timeline:a.periodIndex,resolvedUri:"",targetDuration:a.duration,segments:e,mediaSequence:e.length?e[0].number:1};a.contentProtection&&(e.contentProtection=a.contentProtection);c[b]={language:f,autoselect:!0,"default":"main"===k,playlists:[e],uri:""};return c},{})},wk=function(k){return k.reduce(function(c,e){var k=e.attributes.lang||
"text";if(c[k])return c;var f;var b=e.attributes;e=e.segments;"undefined"===typeof e&&(e=[{uri:b.baseUrl,timeline:b.periodIndex,resolvedUri:b.baseUrl||"",duration:b.sourceDuration,number:0}],b.duration=b.sourceDuration);b={attributes:(f={NAME:b.id,BANDWIDTH:b.bandwidth},f["PROGRAM-ID"]=1,f),uri:"",endList:"static"===(b.type||"static"),timeline:b.periodIndex,resolvedUri:b.baseUrl||"",targetDuration:b.duration,segments:e,mediaSequence:e.length?e[0].number:1};c[k]={language:k,"default":!1,autoselect:!1,
playlists:[b],uri:""};return c},{})},xk=function(k){var c,e=k.attributes;k=k.segments;k={attributes:(c={NAME:e.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:e.width,height:e.height},CODECS:e.codecs,BANDWIDTH:e.bandwidth},c["PROGRAM-ID"]=1,c),uri:"",endList:"static"===(e.type||"static"),timeline:e.periodIndex,resolvedUri:"",targetDuration:e.duration,segments:k,mediaSequence:k.length?k[0].number:1};e.contentProtection&&(k.contentProtection=e.contentProtection);return k},yk=function(k){var c;if(!k.length)return{};
var e=k[0].attributes,n=e.sourceDuration;e=e.minimumUpdatePeriod;var f=void 0===e?0:e,b=k.filter(function(c){c=c.attributes;return"video/mp4"===c.mimeType||"video"===c.contentType}).map(xk);e=k.filter(function(c){c=c.attributes;return"audio/mp4"===c.mimeType||"audio"===c.contentType});k=k.filter(function(c){c=c.attributes;return"text/vtt"===c.mimeType||"text"===c.contentType});n={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(c={AUDIO:{},VIDEO:{}},c["CLOSED-CAPTIONS"]={},
c.SUBTITLES={},c),uri:"",duration:n,playlists:b,minimumUpdatePeriod:1E3*f};e.length&&(n.mediaGroups.AUDIO.audio=vk(e));k.length&&(n.mediaGroups.SUBTITLES.subs=wk(k));return n},zk="function"===typeof Symbol&&"symbol"===ka(Symbol.iterator)?function(k){return"undefined"===typeof k?"undefined":ka(k)}:function(k){return k&&"function"===typeof Symbol&&k.constructor===Symbol&&k!==Symbol.prototype?"symbol":"undefined"===typeof k?"undefined":ka(k)},Zg=function(k){return!!k&&"object"===("undefined"===typeof k?
"undefined":zk(k))},Ja=function c(){for(var e=arguments.length,n=Array(e),f=0;f<e;f++)n[f]=arguments[f];return n.reduce(function(e,f){Object.keys(f).forEach(function(a){Array.isArray(e[a])&&Array.isArray(f[a])?e[a]=e[a].concat(f[a]):Zg(e[a])&&Zg(f[a])?e[a]=c(e[a],f[a]):e[a]=f[a]});return e},{})},Fe=function(c,e){if(/^[a-z]+:/i.test(e))return e;/\/\//i.test(c)||(c=gd.buildAbsoluteURL(F.location.href,c));return gd.buildAbsoluteURL(c,e)},tc=function(c){var e=c.baseUrl,n=c.source;n=void 0===n?"":n;c=
c.range;c=void 0===c?"":c;e={uri:n,resolvedUri:Fe((void 0===e?"":e)||"",n)};c&&(c=c.split("-"),n=parseInt(c[0],10),c=parseInt(c[1],10),e.byterange={length:c-n,offset:n});return e},$g=function(c,e){var n=c.type;n=void 0===n?"static":n;var f=c.minimumUpdatePeriod;f=void 0===f?0:f;var b=c.media;b=void 0===b?"":b;var g=c.sourceDuration,a=c.timescale;a=void 0===a?1:a;var l=c.startNumber;l=void 0===l?1:l;for(var r=c.periodIndex,z=[],Q=-1,d=0;d<e.length;d++){var h=e[d],q=h.d,m=h.r||0;h=h.t||0;0>Q&&(Q=h);
h&&h>Q&&(Q=h);if(0>m)if(m=d+1,m===e.length)if("dynamic"===n&&0<f&&0<b.indexOf("$Number$")){m=c.timescale;h=c.start;var t=c.minimumUpdatePeriod;m=Math.ceil((((c.NOW+c.clientOffset)/1E3+(void 0===t?0:t)-(c.availabilityStartTime+(void 0===h?0:h)))*(void 0===m?1:m)-Q)/q)}else m=(g*a-Q)/q;else m=(e[m].t-Q)/q;else m+=1;m=l+z.length+m;for(h=l+z.length;h<m;)z.push({number:h,duration:q/a,time:Q,timeline:r}),Q+=q,h++}return z},id=function(c){return c.reduce(function(c,n){return c.concat(n)},[])},ah=function(c){if(!c.length)return[];
for(var e=[],n=0;n<c.length;n++)e.push(c[n]);return e},Ak={"static":function(c){var e=c.timescale;return{start:0,end:Math.ceil(c.sourceDuration/(c.duration/(void 0===e?1:e)))}},dynamic:function(c){var e=c.timescale;e=void 0===e?1:e;var n=c.duration,f=c.start,b=c.minimumUpdatePeriod,g=c.timeShiftBufferDepth,a=(c.NOW+c.clientOffset)/1E3;c=c.availabilityStartTime+(void 0===f?0:f);return{start:Math.max(0,Math.floor((a-c-(void 0===g?Infinity:g))*e/n)),end:Math.min(Math.ceil((a+(void 0===b?0:b)-c)*e/n),
Math.floor((a-c)*e/n))}}},Bk=function(c){return function(e,n){var f=c.duration,b=c.timescale,g=c.startNumber;return{number:(void 0===g?1:g)+e,duration:f/(void 0===b?1:b),timeline:c.periodIndex,time:n*f}}},Ge=function(c){var e=c.type,n=void 0===e?"static":e;e=c.duration;var f=c.timescale;f=void 0===f?1:f;var b=c.sourceDuration,g=Ak[n](c),a=g.end,l=[];for(g=g.start;g<a;g++)l.push(g);c=l.map(Bk(c));"static"===n&&(n=c.length-1,c[n].duration=b-e/f*n);return c},bh=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,ch=function(c){return function(e,
n,f,b){if("$$"===e)return"$";if("undefined"===typeof c[n])return e;e=""+c[n];if("RepresentationID"===n)return e;b=f?parseInt(b,10):1;return e.length>=b?e:""+Array(b-e.length+1).join("0")+e}},Ck=function(c,e){return c.duration||e?c.duration?Ge(c):$g(c,e):[{number:c.startNumber||1,duration:c.sourceDuration,time:0,timeline:c.periodIndex}]},Dk=function(c,e){var n={RepresentationID:c.id,Bandwidth:c.bandwidth||0},f=c.initialization;f=void 0===f?{sourceURL:"",range:""}:f;var b=tc({baseUrl:c.baseUrl,source:f.sourceURL.replace(bh,
ch(n)),range:f.range});return Ck(c,e).map(function(e){n.Number=e.number;n.Time=e.time;var a=(c.media||"").replace(bh,ch(n));return{uri:a,timeline:e.timeline,duration:e.duration,resolvedUri:Fe(c.baseUrl||"",a),map:b,number:e.number}})},Ek=function(c,e){var n=c.duration,f=c.segmentUrls;f=void 0===f?[]:f;if(!n&&!e||n&&e)throw Error("SEGMENT_TIME_UNSPECIFIED");var b=f.map(function(e){var a=c.baseUrl,f=c.initialization;f=void 0===f?{}:f;f=tc({baseUrl:a,source:f.sourceURL,range:f.range});e=tc({baseUrl:a,
source:e.media,range:e.mediaRange});e.map=f;return e});f=void 0;n&&(f=Ge(c));e&&(f=$g(c,e));return f.map(function(c,e){if(b[e])return e=b[e],e.timeline=c.timeline,e.duration=c.duration,e.number=c.number,e}).filter(function(c){return c})},Fk=function(c){var e=c.baseUrl,n=c.initialization,f=void 0===n?{}:n;n=c.sourceDuration;var b=c.timescale;b=void 0===b?1:b;var g=c.indexRange,a=void 0===g?"":g;g=c.duration;if(!e)throw Error("NO_BASE_URL");f=tc({baseUrl:e,source:f.sourceURL,range:f.range});e=tc({baseUrl:e,
source:e,range:a});e.map=f;g?(c=Ge(c),c.length&&(e.duration=c[0].duration,e.timeline=c[0].timeline)):n&&(e.duration=n/b,e.timeline=0);e.number=0;return[e]},Gk=function(c){var e=c.attributes,n=c.segmentInfo,f=c=void 0;n.template?(f=Dk,c=Ja(e,n.template)):n.base?(f=Fk,c=Ja(e,n.base)):n.list&&(f=Ek,c=Ja(e,n.list));if(!f)return{attributes:e};e=f(c,n.timeline);c.duration?(n=c,f=n.timescale,c.duration=n.duration/(void 0===f?1:f)):c.duration=e.length?e.reduce(function(c,e){return Math.max(c,Math.ceil(e.duration))},
0):0;return{attributes:c,segments:e}},ma=function(c,e){return ah(c.childNodes).filter(function(c){return c.tagName===e})},uc=function(c){c=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(c);if(!c)return 0;c=c.slice(1);var e=c[1],n=c[2],f=c[3],b=c[4],g=c[5];return 31536E3*parseFloat(c[0]||0)+2592E3*parseFloat(e||0)+86400*parseFloat(n||0)+3600*parseFloat(f||0)+60*parseFloat(b||0)+parseFloat(g||0)},dh={mediaPresentationDuration:function(c){return uc(c)},availabilityStartTime:function(c){/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(c)&&
(c+="Z");return Date.parse(c)/1E3},minimumUpdatePeriod:function(c){return uc(c)},timeShiftBufferDepth:function(c){return uc(c)},start:function(c){return uc(c)},width:function(c){return parseInt(c,10)},height:function(c){return parseInt(c,10)},bandwidth:function(c){return parseInt(c,10)},startNumber:function(c){return parseInt(c,10)},timescale:function(c){return parseInt(c,10)},duration:function(c){var e=parseInt(c,10);return isNaN(e)?uc(c):e},d:function(c){return parseInt(c,10)},t:function(c){return parseInt(c,
10)},r:function(c){return parseInt(c,10)},DEFAULT:function(c){return c}},za=function(c){return c&&c.attributes?ah(c.attributes).reduce(function(c,n){c[n.name]=(dh[n.name]||dh.DEFAULT)(n.value);return c},{}):{}},Hk={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},jd=function(c,
e){return e.length?id(c.map(function(c){return e.map(function(e){return Fe(c,e.textContent.trim())})})):c},He=function(c){var e=ma(c,"SegmentTemplate")[0],n=ma(c,"SegmentList")[0],f=n&&ma(n,"SegmentURL").map(function(c){return Ja({tag:"SegmentURL"},za(c))});c=ma(c,"SegmentBase")[0];var b=n||e;b=b&&ma(b,"SegmentTimeline")[0];var g=n||c||e;g=g&&ma(g,"Initialization")[0];(e=e&&za(e))&&g?e.initialization=g&&za(g):e&&e.initialization&&(e.initialization={sourceURL:e.initialization});var a={template:e,timeline:b&&
ma(b,"S").map(function(c){return za(c)}),list:n&&Ja(za(n),{segmentUrls:f,initialization:za(g)}),base:c&&Ja(za(c),{initialization:za(g)})};Object.keys(a).forEach(function(c){a[c]||delete a[c]});return a},Ik=function(c,e,n){return function(f){var b=ma(f,"BaseURL");b=jd(e,b);var g=Ja(c,za(f)),a=He(f);return b.map(function(c){return{segmentInfo:Ja(n,a),attributes:Ja(g,{baseUrl:c})}})}},Jk=function(c){return c.reduce(function(c,n){var e=za(n),b=Hk[e.schemeIdUri];if(b&&(c[b]={attributes:e},n=ma(n,"cenc:pssh")[0])){if(e=
n=n.textContent.trim()){n=F.atob(n);e=new Uint8Array(n.length);for(var g=0;g<n.length;g++)e[g]=n.charCodeAt(g)}c[b].pssh=e}return c},{})},Kk=function(c,e,n){return function(f){var b=za(f),g=jd(e,ma(f,"BaseURL")),a=ma(f,"Role")[0];a={role:za(a)};b=Ja(c,b,a);a=Jk(ma(f,"ContentProtection"));Object.keys(a).length&&(b=Ja(b,{contentProtection:a}));a=He(f);f=ma(f,"Representation");a=Ja(n,a);return id(f.map(Ik(b,g,a)))}},Lk=function(c,e){return function(n,f){var b=jd(e,ma(n,"BaseURL")),g=za(n);f=Ja(c,g,{periodIndex:f});
g=ma(n,"AdaptationSet");n=He(n);return id(g.map(Kk(f,b,n)))}},Mk=function(c){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e.manifestUri;n=void 0===n?"":n;var f=e.NOW;f=void 0===f?Date.now():f;e=e.clientOffset;e=void 0===e?0:e;var b=ma(c,"Period");if(1!==b.length)throw Error("INVALID_NUMBER_OF_PERIOD");var g=za(c);n=jd([n],ma(c,"BaseURL"));g.sourceDuration=g.mediaPresentationDuration||0;g.NOW=f;g.clientOffset=e;return id(b.map(Lk(g,n)))},eh=function(c){if(""===c)throw Error("DASH_EMPTY_MANIFEST");
c=(c=(new F.DOMParser).parseFromString(c,"application/xml"))&&"MPD"===c.documentElement.tagName?c.documentElement:null;if(!c||c&&0<c.getElementsByTagName("parsererror").length)throw Error("DASH_INVALID_XML");return c},Nk=function(c){c=ma(c,"UTCTiming")[0];if(!c)return null;c=za(c);switch(c.schemeIdUri){case "urn:mpeg:dash:utc:http-head:2014":case "urn:mpeg:dash:utc:http-head:2012":c.method="HEAD";break;case "urn:mpeg:dash:utc:http-xsdate:2014":case "urn:mpeg:dash:utc:http-iso:2014":case "urn:mpeg:dash:utc:http-xsdate:2012":case "urn:mpeg:dash:utc:http-iso:2012":c.method=
"GET";break;case "urn:mpeg:dash:utc:direct:2014":case "urn:mpeg:dash:utc:direct:2012":c.method="DIRECT";c.value=Date.parse(c.value);break;default:throw Error("UNSUPPORTED_UTC_TIMING_SCHEME");}return c},Ok=function(c,e){return yk(Mk(eh(c),e).map(Gk))},kd={toUnsigned:function(c){return c>>>0}},fh=Object.freeze({default:kd,__moduleExports:kd,toUnsigned:kd.toUnsigned}),Wb=(fh&&kd||fh).toUnsigned;var Ta=function(c,e){var n=[],f;if(!e.length)return null;for(f=0;f<c.byteLength;){var b=Wb(c[f]<<24|c[f+1]<<
16|c[f+2]<<8|c[f+3]);var g=Ie(c.subarray(f+4,f+8));b=1<b?f+b:c.byteLength;g===e[0]&&(1===e.length?n.push(c.subarray(f+8,b)):(f=Ta(c.subarray(f+8,b),e.slice(1)),f.length&&(n=n.concat(f))));f=b}return n};var Ie=function(c){var e=""+String.fromCharCode(c[0]);e+=String.fromCharCode(c[1]);e+=String.fromCharCode(c[2]);return e+=String.fromCharCode(c[3])};var $a={findBox:Ta,parseType:Ie,timescale:function(c){return Ta(c,["moov","trak"]).reduce(function(c,n){var e=Ta(n,["tkhd"])[0];if(!e)return null;var b=
e[0];b=0===b?12:20;e=Wb(e[b]<<24|e[b+1]<<16|e[b+2]<<8|e[b+3]);n=Ta(n,["mdia","mdhd"])[0];if(!n)return null;b=n[0];b=0===b?12:20;c[e]=Wb(n[b]<<24|n[b+1]<<16|n[b+2]<<8|n[b+3]);return c},{})},startTime:function(c,e){e=Ta(e,["moof","traf"]);e=[].concat.apply([],e.map(function(e){return Ta(e,["tfhd"]).map(function(f){f=Wb(f[4]<<24|f[5]<<16|f[6]<<8|f[7]);f=c[f]||9E4;var b=(b=Ta(e,["tfdt"]).map(function(c){var e=c[0];var f=Wb(c[4]<<24|c[5]<<16|c[6]<<8|c[7]);1===e&&(f*=Math.pow(2,32),f+=Wb(c[8]<<24|c[9]<<
16|c[10]<<8|c[11]));return f})[0])||Infinity;return b/f})}));e=Math.min.apply(null,e);return isFinite(e)?e:0},videoTrackIds:function(c){var e=[];Ta(c,["moov","trak"]).forEach(function(c){var f=Ta(c,["mdia","hdlr"]),b=Ta(c,["tkhd"]);f.forEach(function(c,a){c=Ie(c.subarray(8,12));a=b[a];"vide"===c&&(a=new DataView(a.buffer,a.byteOffset,a.byteLength),c=a.getUint8(0),a=0===c?a.getUint32(12):a.getUint32(20),e.push(a))})});return e}},gh=Math.pow(2,32)-1,hh,Je,U,Ke,ih,jh,kh,lh,mh,nh,oh,ph,Le,qh,rh,sh;(function(){var c;
U={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(c in U)U.hasOwnProperty(c)&&(U[c]=[c.charCodeAt(0),c.charCodeAt(1),c.charCodeAt(2),c.charCodeAt(3)]);Ke=new Uint8Array([105,115,111,109]);jh=new Uint8Array([97,118,99,49]);ih=new Uint8Array([0,
0,0,1]);kh=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);lh=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);mh={video:kh,audio:lh};ph=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);oh=new Uint8Array([0,0,0,0,0,0,0,0]);qh=Le=new Uint8Array([0,0,0,0,0,0,0,0]);rh=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);sh=Le;nh=new Uint8Array([0,0,0,
1,0,0,0,0,0,0,0,0])}})();var W=function(c){var e=[],n=0,f;for(f=1;f<arguments.length;f++)e.push(arguments[f]);for(f=e.length;f--;)n+=e[f].byteLength;var b=new Uint8Array(n+8);(new DataView(b.buffer,b.byteOffset,b.byteLength)).setUint32(0,b.byteLength);b.set(c,4);f=0;for(n=8;f<e.length;f++)b.set(e[f],n),n+=e[f].byteLength;return b};var Pk=function(){return W(U.dinf,W(U.dref,ph))};var Qk=function(c){return W(U.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,c.audioobjecttype<<
3|c.samplingfrequencyindex>>>1,c.samplingfrequencyindex<<7|c.channelcount<<3,6,1,2]))};var th=function(){return W(U.ftyp,Ke,ih,Ke,jh)};var Rk=function(c){return W(U.hdlr,mh[c])};var Sk=function(c){var e=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,c.duration>>>24&255,c.duration>>>16&255,c.duration>>>8&255,c.duration&255,85,196,0,0]);c.samplerate&&(e[12]=c.samplerate>>>24&255,e[13]=c.samplerate>>>16&255,e[14]=c.samplerate>>>8&255,e[15]=c.samplerate&255);return W(U.mdhd,e)};var Uk=function(c){return W(U.mdia,
Sk(c),Rk(c.type),Tk(c))};var Vk=function(c){return W(U.mfhd,new Uint8Array([0,0,0,0,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255]))};var Tk=function(c){return W(U.minf,"video"===c.type?W(U.vmhd,nh):W(U.smhd,oh),Pk(),Wk(c))};var uh=function(c){for(var e=c.length,n=[];e--;)n[e]=Xk(c[e]);return W.apply(null,[U.moov,Yk(4294967295)].concat(n).concat(Zk(c)))};var Zk=function(c){for(var e=c.length,n=[];e--;)n[e]=$k(c[e]);return W.apply(null,[U.mvex].concat(n))};var Yk=function(c){c=new Uint8Array([0,
0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(c&4278190080)>>24,(c&16711680)>>16,(c&65280)>>8,c&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return W(U.mvhd,c)};var al=function(c){c=c.samples||[];var e=new Uint8Array(4+c.length),n;for(n=0;n<c.length;n++){var f=c[n].flags;e[n+4]=f.dependsOn<<4|f.isDependedOn<<2|f.hasRedundancy}return W(U.sdtp,e)};var Wk=function(c){return W(U.stbl,
hh(c),W(U.stts,sh),W(U.stsc,qh),W(U.stsz,rh),W(U.stco,Le))};(function(){hh=function(n){return W(U.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===n.type?c(n):e(n))};var c=function(c){var e=c.sps||[],b=c.pps||[],g=[],a=[],l;for(l=0;l<e.length;l++)g.push((e[l].byteLength&65280)>>>8),g.push(e[l].byteLength&255),g=g.concat(Array.prototype.slice.call(e[l]));for(l=0;l<b.length;l++)a.push((b[l].byteLength&65280)>>>8),a.push(b[l].byteLength&255),a=a.concat(Array.prototype.slice.call(b[l]));return W(U.avc1,
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(c.width&65280)>>8,c.width&255,(c.height&65280)>>8,c.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),W(U.avcC,new Uint8Array([1,c.profileIdc,c.profileCompatibility,c.levelIdc,255].concat([e.length]).concat(g).concat([b.length]).concat(a))),W(U.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])))};var e=function(c){return W(U.mp4a,
new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(c.channelcount&65280)>>8,c.channelcount&255,(c.samplesize&65280)>>8,c.samplesize&255,0,0,0,0,(c.samplerate&65280)>>8,c.samplerate&255,0,0]),Qk(c))}})();var bl=function(c){c=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,0,(c.duration&4278190080)>>24,(c.duration&16711680)>>16,(c.duration&65280)>>8,c.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,
0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(c.width&65280)>>8,c.width&255,0,0,(c.height&65280)>>8,c.height&255,0,0]);return W(U.tkhd,c)};var cl=function(c){var e=W(U.tfhd,new Uint8Array([0,0,0,58,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var n=Math.floor(c.baseMediaDecodeTime/(gh+1));var f=Math.floor(c.baseMediaDecodeTime%(gh+1));n=W(U.tfdt,new Uint8Array([1,0,0,0,n>>>24&255,n>>>16&255,n>>>8&255,n&255,f>>>24&255,f>>>16&255,f>>>8&255,f&255]));if("audio"===
c.type)return c=Je(c,92),W(U.traf,e,n,c);f=al(c);c=Je(c,f.length+92);return W(U.traf,e,n,c,f)};var Xk=function(c){c.duration=c.duration||4294967295;return W(U.trak,bl(c),Uk(c))};var $k=function(c){var e=new Uint8Array([0,0,0,0,(c.id&4278190080)>>24,(c.id&16711680)>>16,(c.id&65280)>>8,c.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==c.type&&(e[e.length-1]=0);return W(U.trex,e)};(function(){var c=function(c,e){var f=0,a=0,b=0,n=0;c.length&&(void 0!==c[0].duration&&(f=1),void 0!==c[0].size&&(a=2),
void 0!==c[0].flags&&(b=4),void 0!==c[0].compositionTimeOffset&&(n=8));return[0,0,f|a|b|n,1,(c.length&4278190080)>>>24,(c.length&16711680)>>>16,(c.length&65280)>>>8,c.length&255,(e&4278190080)>>>24,(e&16711680)>>>16,(e&65280)>>>8,e&255]};var e=function(e,b){var f;e=e.samples||[];b+=20+16*e.length;b=c(e,b);for(f=0;f<e.length;f++){var a=e[f];b=b.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&
65280)>>>8,a.size&255,a.flags.isLeading<<2|a.flags.dependsOn,a.flags.isDependedOn<<6|a.flags.hasRedundancy<<4|a.flags.paddingValue<<1|a.flags.isNonSyncSample,a.flags.degradationPriority&61440,a.flags.degradationPriority&15,(a.compositionTimeOffset&4278190080)>>>24,(a.compositionTimeOffset&16711680)>>>16,(a.compositionTimeOffset&65280)>>>8,a.compositionTimeOffset&255])}return W(U.trun,new Uint8Array(b))};var n=function(e,b){var f;e=e.samples||[];b+=20+8*e.length;b=c(e,b);for(f=0;f<e.length;f++){var a=
e[f];b=b.concat([(a.duration&4278190080)>>>24,(a.duration&16711680)>>>16,(a.duration&65280)>>>8,a.duration&255,(a.size&4278190080)>>>24,(a.size&16711680)>>>16,(a.size&65280)>>>8,a.size&255])}return W(U.trun,new Uint8Array(b))};Je=function(c,b){return"audio"===c.type?n(c,b):e(c,b)}})();var rb={ftyp:th,mdat:function(c){return W(U.mdat,c)},moof:function(c,e){for(var n=[],f=e.length;f--;)n[f]=cl(e[f]);return W.apply(null,[U.moof,Vk(c)].concat(n))},moov:uh,initSegment:function(c){var e=th();c=uh(c);var n=
new Uint8Array(e.byteLength+c.byteLength);n.set(e);n.set(c,e.byteLength);return n}},vh=Object.freeze({default:rb,__moduleExports:rb,ftyp:rb.ftyp,mdat:rb.mdat,moof:rb.moof,moov:rb.moov,initSegment:rb.initSegment}),Xb=function(){this.init=function(){var c={};this.on=function(e,n){c[e]||(c[e]=[]);c[e]=c[e].concat(n)};this.off=function(e,n){if(!c[e])return!1;n=c[e].indexOf(n);c[e]=c[e].slice();c[e].splice(n,1);return-1<n};this.trigger=function(e){var n,f;if(n=c[e])if(2===arguments.length){var b=n.length;
for(f=0;f<b;++f)n[f].call(this,arguments[1])}else{var g=[];for(f=1;f<arguments.length;++f)g.push(arguments[f]);b=n.length;for(f=0;f<b;++f)n[f].apply(this,g)}};this.dispose=function(){c={}}}};Xb.prototype.pipe=function(c){this.on("data",function(e){c.push(e)});this.on("done",function(e){c.flush(e)});return c};Xb.prototype.push=function(c){this.trigger("data",c)};Xb.prototype.flush=function(c){this.trigger("done",c)};var wh=Object.freeze({default:Xb,__moduleExports:Xb}),sb={groupNalsIntoFrames:function(c){var e,
n=[],f=[];for(e=n.byteLength=0;e<c.length;e++){var b=c[e];"access_unit_delimiter_rbsp"===b.nalUnitType?(n.length&&(n.duration=b.dts-n.dts,f.push(n)),n=[b],n.byteLength=b.data.byteLength,n.pts=b.pts,n.dts=b.dts):("slice_layer_without_partitioning_rbsp_idr"===b.nalUnitType&&(n.keyFrame=!0),n.duration=b.dts-n.dts,n.byteLength+=b.data.byteLength,n.push(b))}f.length&&(!n.duration||0>=n.duration)&&(n.duration=f[f.length-1].duration);f.push(n);return f},groupFramesIntoGops:function(c){var e,n=[],f=[];n.byteLength=
0;n.nalCount=0;n.duration=0;n.pts=c[0].pts;n.dts=c[0].dts;f.byteLength=0;f.nalCount=0;f.duration=0;f.pts=c[0].pts;f.dts=c[0].dts;for(e=0;e<c.length;e++){var b=c[e];b.keyFrame?(n.length&&(f.push(n),f.byteLength+=n.byteLength,f.nalCount+=n.nalCount,f.duration+=n.duration),n=[b],n.nalCount=b.length,n.byteLength=b.byteLength,n.pts=b.pts,n.dts=b.dts,n.duration=b.duration):(n.duration+=b.duration,n.nalCount+=b.length,n.byteLength+=b.byteLength,n.push(b))}f.length&&0>=n.duration&&(n.duration=f[f.length-
1].duration);f.byteLength+=n.byteLength;f.nalCount+=n.nalCount;f.duration+=n.duration;f.push(n);return f},extendFirstKeyFrame:function(c){if(!c[0][0].keyFrame&&1<c.length){var e=c.shift();c.byteLength-=e.byteLength;c.nalCount-=e.nalCount;c[0][0].dts=e.dts;c[0][0].pts=e.pts;c[0][0].duration+=e.duration}return c},generateSampleTable:function(c,e){var n,f=e||0,b=[];for(e=0;e<c.length;e++){var g=c[e];for(n=0;n<g.length;n++){var a=g[n];var l={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,
degradationPriority:0,isNonSyncSample:1}};l.dataOffset=f;l.compositionTimeOffset=a.pts-a.dts;l.duration=a.duration;l.size=4*a.length;l.size+=a.byteLength;a.keyFrame&&(l.flags.dependsOn=2,l.flags.isNonSyncSample=0);a=l;f+=a.size;b.push(a)}}return b},concatenateNalData:function(c){var e,n,f,b=0,g=new Uint8Array(c.byteLength+4*c.nalCount),a=new DataView(g.buffer);for(e=0;e<c.length;e++){var l=c[e];for(n=0;n<l.length;n++){var r=l[n];for(f=0;f<r.length;f++){var z=r[f];a.setUint32(b,z.data.byteLength);
b+=4;g.set(z.data,b);b+=z.data.byteLength}}}return g}},xh=Object.freeze({default:sb,__moduleExports:sb,groupNalsIntoFrames:sb.groupNalsIntoFrames,groupFramesIntoGops:sb.groupFramesIntoGops,extendFirstKeyFrame:sb.extendFirstKeyFrame,generateSampleTable:sb.generateSampleTable,concatenateNalData:sb.concatenateNalData}),Yb={clearDtsInfo:function(c){delete c.minSegmentDts;delete c.maxSegmentDts;delete c.minSegmentPts;delete c.maxSegmentPts},calculateTrackBaseMediaDecodeTime:function(c,e){var n=c.minSegmentDts;
e||(n-=c.timelineStartInfo.dts);e=c.timelineStartInfo.baseMediaDecodeTime;e=Math.max(0,e+n);"audio"===c.type&&(c=c.samplerate/9E4,e=Math.floor(e*c));return e},collectDtsInfo:function(c,e){"number"===typeof e.pts&&(void 0===c.timelineStartInfo.pts&&(c.timelineStartInfo.pts=e.pts),c.minSegmentPts=void 0===c.minSegmentPts?e.pts:Math.min(c.minSegmentPts,e.pts),c.maxSegmentPts=void 0===c.maxSegmentPts?e.pts:Math.max(c.maxSegmentPts,e.pts));"number"===typeof e.dts&&(void 0===c.timelineStartInfo.dts&&(c.timelineStartInfo.dts=
e.dts),c.minSegmentDts=void 0===c.minSegmentDts?e.dts:Math.min(c.minSegmentDts,e.dts),c.maxSegmentDts=void 0===c.maxSegmentDts?e.dts:Math.max(c.maxSegmentDts,e.dts))}},yh=Object.freeze({default:Yb,__moduleExports:Yb,clearDtsInfo:Yb.clearDtsInfo,calculateTrackBaseMediaDecodeTime:Yb.calculateTrackBaseMediaDecodeTime,collectDtsInfo:Yb.collectDtsInfo}),tb={parseSei:function(c){for(var e=0,n={payloadType:-1,payloadSize:0},f=0,b=0;e<c.byteLength&&128!==c[e];){for(;255===c[e];)f+=255,e++;for(f+=c[e++];255===
c[e];)b+=255,e++;b+=c[e++];if(!n.payload&&4===f){n.payloadType=f;n.payloadSize=b;n.payload=c.subarray(e,e+b);break}e+=b;b=f=0}return n},parseUserData:function(c){return 181!==c.payload[0]||49!==(c.payload[1]<<8|c.payload[2])||"GA94"!==String.fromCharCode(c.payload[3],c.payload[4],c.payload[5],c.payload[6])||3!==c.payload[7]?null:c.payload.subarray(8,c.payload.length-1)},parseCaptionPackets:function(c,e){var n=[],f;if(!(e[0]&64))return n;var b=e[0]&31;for(f=0;f<b;f++){var g=3*f;var a={type:e[g+2]&
3,pts:c};e[g+2]&4&&(a.ccData=e[g+3]<<8|e[g+4],n.push(a))}return n},discardEmulationPreventionBytes:function(c){for(var e=c.byteLength,n=[],f=1,b;f<e-2;)0===c[f]&&0===c[f+1]&&3===c[f+2]?(n.push(f+2),f+=2):f++;if(0===n.length)return c;e-=n.length;b=new Uint8Array(e);var g=0;for(f=0;f<e;g++,f++)g===n[0]&&(g++,n.shift()),b[f]=c[g];return b},USER_DATA_REGISTERED_ITU_T_T35:4},zh=Object.freeze({default:tb,__moduleExports:tb,parseSei:tb.parseSei,parseUserData:tb.parseUserData,parseCaptionPackets:tb.parseCaptionPackets,
discardEmulationPreventionBytes:tb.discardEmulationPreventionBytes,USER_DATA_REGISTERED_ITU_T_T35:tb.USER_DATA_REGISTERED_ITU_T_T35}),qa=wh&&Xb||wh,vc=zh&&tb||zh,ub=function e(){e.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new ha(0,0),new ha(0,1),new ha(1,0),new ha(1,1)];this.reset();this.ccStreams_.forEach(function(e){e.on("data",this.trigger.bind(this,"data"));e.on("done",this.trigger.bind(this,"done"))},this)};ub.prototype=new qa;ub.prototype.push=function(e){if("sei_rbsp"===
e.nalUnitType){var n=vc.parseSei(e.escapedRBSP);n.payloadType===vc.USER_DATA_REGISTERED_ITU_T_T35&&(n=vc.parseUserData(n))&&(e.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:e.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(n=vc.parseCaptionPackets(e.pts,n),this.captionPackets_=this.captionPackets_.concat(n),this.latestDts_!==e.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=e.dts))}};ub.prototype.flush=function(){this.captionPackets_.length?
(this.captionPackets_.forEach(function(e,n){e.presortIndex=n}),this.captionPackets_.sort(function(e,n){return e.pts===n.pts?e.presortIndex-n.presortIndex:e.pts-n.pts}),this.captionPackets_.forEach(function(e){2>e.type&&this.dispatchCea608Packet(e)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(e){e.flush()},this)):this.ccStreams_.forEach(function(e){e.flush()},this)};ub.prototype.reset=function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=
[null,null];this.ccStreams_.forEach(function(e){e.reset()})};ub.prototype.dispatchCea608Packet=function(e){this.setsChannel1Active(e)?this.activeCea608Channel_[e.type]=0:this.setsChannel2Active(e)&&(this.activeCea608Channel_[e.type]=1);null!==this.activeCea608Channel_[e.type]&&this.ccStreams_[(e.type<<1)+this.activeCea608Channel_[e.type]].push(e)};ub.prototype.setsChannel1Active=function(e){return 4096===(e.ccData&30720)};ub.prototype.setsChannel2Active=function(e){return 6144===(e.ccData&30720)};
var dl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,
804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},ld=function(e){if(null===e)return"";e=dl[e]||e;return String.fromCharCode(e)},el=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Gb=function(){for(var e=[],n=15;n--;)e.push("");return e},ha=function b(n,f){b.prototype.init.call(this);this.field_=
n||0;this.dataChannel_=f||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(f){var a=f.ccData&32639;if(a===this.lastControlCode_)this.lastControlCode_=null;else{4096===(a&61440)?this.lastControlCode_=a:a!==this.PADDING_&&(this.lastControlCode_=null);var b=a>>>8;var g=a&255;a!==this.PADDING_&&(a===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":a===this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(f.pts),this.flushDisplayed(f.pts),
g=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=g,this.startPts_=f.pts):a===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(f.pts)):a===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(f.pts)):a===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(f.pts)):a===this.CARRIAGE_RETURN_?(this.clearFormatting(f.pts),this.flushDisplayed(f.pts),this.shiftRowsUp_(),this.startPts_=f.pts):a===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,
-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):a===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(f.pts),this.displayed_=Gb()):a===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=Gb():a===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(f.pts),this.displayed_=Gb()),this.mode_="paintOn",this.startPts_=f.pts):this.isSpecialCharacter(b,g)?(a=ld((b&3)<<8|g),this[this.mode_](f.pts,a),this.column_++):this.isExtCharacter(b,g)?("popOn"===this.mode_?
this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),a=ld((b&3)<<8|g),this[this.mode_](f.pts,a),this.column_++):this.isMidRowCode(b,g)?(this.clearFormatting(f.pts),this[this.mode_](f.pts," "),this.column_++,14===(g&14)&&this.addFormatting(f.pts,["i"]),1===(g&1)&&this.addFormatting(f.pts,["u"])):this.isOffsetControlCode(b,g)?this.column_+=g&3:this.isPAC(b,g)?(b=el.indexOf(a&7968),"rollUp"===this.mode_&&this.setRollUp(f.pts,
b),b!==this.row_&&(this.clearFormatting(f.pts),this.row_=b),g&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(f.pts,["u"]),16===(a&16)&&(this.column_=4*((a&14)>>1)),this.isColorPAC(g)&&14===(g&14)&&this.addFormatting(f.pts,["i"])):this.isNormalChar(b)&&(0===g&&(g=null),a=ld(b),a+=ld(g),this[this.mode_](f.pts,a),this.column_+=a.length))}}};ha.prototype=new qa;ha.prototype.flushDisplayed=function(n){var f=this.displayed_.map(function(f){return f.trim()}).join("\n").replace(/^\n+|\n+$/g,"");
f.length&&this.trigger("data",{startPts:this.startPts_,endPts:n,text:f,stream:this.name_})};ha.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=Gb();this.nonDisplayed_=Gb();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};ha.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=
(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};ha.prototype.isSpecialCharacter=function(n,
f){return n===this.EXT_&&48<=f&&63>=f};ha.prototype.isExtCharacter=function(n,f){return(n===this.EXT_+1||n===this.EXT_+2)&&32<=f&&63>=f};ha.prototype.isMidRowCode=function(n,f){return n===this.EXT_&&32<=f&&47>=f};ha.prototype.isOffsetControlCode=function(n,f){return n===this.OFFSET_&&33<=f&&35>=f};ha.prototype.isPAC=function(n,f){return n>=this.BASE_&&n<this.BASE_+8&&64<=f&&127>=f};ha.prototype.isColorPAC=function(n){return 64<=n&&79>=n||96<=n&&127>=n};ha.prototype.isNormalChar=function(n){return 32<=
n&&127>=n};ha.prototype.setRollUp=function(n,f){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(n),this.nonDisplayed_=Gb(),this.displayed_=Gb());if(void 0!==f&&f!==this.row_)for(n=0;n<this.rollUpRows_;n++)this.displayed_[f-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===f&&(f=this.row_);this.topRow_=f-this.rollUpRows_+1};ha.prototype.addFormatting=function(n,f){this.formatting_=this.formatting_.concat(f);f=f.reduce(function(f,g){return f+"<"+g+
">"},"");this[this.mode_](n,f)};ha.prototype.clearFormatting=function(n){if(this.formatting_.length){var f=this.formatting_.reverse().reduce(function(f,g){return f+"</"+g+">"},"");this.formatting_=[];this[this.mode_](n,f)}};ha.prototype.popOn=function(n,f){this.nonDisplayed_[this.row_]+=f};ha.prototype.rollUp=function(n,f){this.displayed_[this.row_]+=f};ha.prototype.shiftRowsUp_=function(){var n;for(n=0;n<this.topRow_;n++)this.displayed_[n]="";for(n=this.row_+1;15>n;n++)this.displayed_[n]="";for(n=
this.topRow_;n<this.row_;n++)this.displayed_[n]=this.displayed_[n+1];this.displayed_[this.row_]=""};ha.prototype.paintOn=function(n,f){this.displayed_[this.row_]+=f};var wc={CaptionStream:ub,Cea608Stream:ha},Ah=Object.freeze({default:wc,__moduleExports:wc,CaptionStream:wc.CaptionStream,Cea608Stream:wc.Cea608Stream}),Zb={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Bh=Object.freeze({default:Zb,__moduleExports:Zb,H264_STREAM_TYPE:Zb.H264_STREAM_TYPE,ADTS_STREAM_TYPE:Zb.ADTS_STREAM_TYPE,
METADATA_STREAM_TYPE:Zb.METADATA_STREAM_TYPE}),Me=function(n,f){var b=1;for(n>f&&(b=-1);4294967296<Math.abs(f-n);)n+=8589934592*b;return n},Ch=function b(f){var g,a;b.prototype.init.call(this);this.type_=f;this.push=function(f){f.type===this.type_&&(void 0===a&&(a=f.dts),f.dts=Me(f.dts,a),f.pts=Me(f.pts,a),g=f.dts,this.trigger("data",f))};this.flush=function(){a=g;this.trigger("done")};this.discontinuity=function(){g=a=void 0}};Ch.prototype=new qa;var xc={TimestampRolloverStream:Ch,handleRollover:Me},
Dh=Object.freeze({default:xc,__moduleExports:xc,TimestampRolloverStream:xc.TimestampRolloverStream,handleRollover:xc.handleRollover}),na=Bh&&Zb||Bh,yc=function(f,b,g){for(var a="";b<g;b++)a+="%"+("00"+f[b].toString(16)).slice(-2);return a},md=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},Eh={TXXX:function(f){var b;if(3===f.data[0]){for(b=1;b<f.data.length;b++)if(0===f.data[b]){f.description=decodeURIComponent(yc(f.data,1,b));f.value=decodeURIComponent(yc(f.data,b+1,f.data.length)).replace(/\0*$/,
"");break}f.data=f.value}},WXXX:function(f){var b;if(3===f.data[0])for(b=1;b<f.data.length;b++)if(0===f.data[b]){f.description=decodeURIComponent(yc(f.data,1,b));f.url=decodeURIComponent(yc(f.data,b+1,f.data.length));break}},PRIV:function(f){var b;for(b=0;b<f.data.length;b++)if(0===f.data[b]){f.owner=unescape(yc(f.data,0,b));break}f.privateData=f.data.subarray(b+1);f.data=f.privateData}};var zc=function(f){var b=!(!f||!f.debug);f=f&&f.descriptor;var g=0,a=[],l=0,r;zc.prototype.init.call(this);this.dispatchType=
na.METADATA_STREAM_TYPE.toString(16);if(f)for(r=0;r<f.length;r++)this.dispatchType+=("00"+f[r].toString(16)).slice(-2);this.push=function(f){var r;if("timed-metadata"===f.type)if(f.dataAlignmentIndicator&&(l=0,a.length=0),0===a.length&&(10>f.data.length||73!==f.data[0]||68!==f.data[1]||51!==f.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(a.push(f),l+=f.data.byteLength,1===a.length&&(g=md(f.data.subarray(6,10)),g+=10),!(l<g)){f={data:new Uint8Array(g),frames:[],pts:a[0].pts,
dts:a[0].dts};for(r=0;r<g;)f.data.set(a[0].data.subarray(0,g-r),r),r+=a[0].data.byteLength,l-=a[0].data.byteLength,a.shift();r=10;f.data[5]&64&&(r=r+4+md(f.data.subarray(10,14)),g-=md(f.data.subarray(16,20)));do{var z=md(f.data.subarray(r+4,r+8));if(1>z)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var d=String.fromCharCode(f.data[r],f.data[r+1],f.data[r+2],f.data[r+3]);d={id:d,data:f.data.subarray(r+10,r+z+10)};d.key=d.id;if(Eh[d.id]&&(Eh[d.id](d),"com.apple.streaming.transportStreamTimestamp"===
d.owner)){var h=d.data,m=(h[3]&1)<<30|h[4]<<22|h[5]<<14|h[6]<<6|h[7]>>>2;m*=4;m+=h[7]&3;d.timeStamp=m;void 0===f.pts&&void 0===f.dts&&(f.pts=d.timeStamp,f.dts=d.timeStamp);this.trigger("timestamp",d)}f.frames.push(d);r+=10;r+=z}while(r<g);this.trigger("data",f)}}};zc.prototype=new qa;var Fh=Object.freeze({default:zc,__moduleExports:zc}),Ne=Ah&&wc||Ah,Gh=Dh&&xc||Dh,fl=Fh&&zc||Fh,gl=Gh.TimestampRolloverStream;var Oe=function(){var f=new Uint8Array(188),b=0;Oe.prototype.init.call(this);this.push=function(g){var a=
0,l=188;if(b){var r=new Uint8Array(g.byteLength+b);r.set(f.subarray(0,b));r.set(g,b);b=0}else r=g;for(;l<r.byteLength;)71===r[a]&&71===r[l]?(this.trigger("data",r.subarray(a,l)),a+=188,l+=188):(a++,l++);a<r.byteLength&&(f.set(r.subarray(a),0),b=r.byteLength-a)};this.flush=function(){188===b&&71===f[0]&&(this.trigger("data",f),b=0);this.trigger("done")}};Oe.prototype=new qa;var nd=function(){nd.prototype.init.call(this);var f=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(f,
b){var l=0;b.payloadUnitStartIndicator&&(l+=f[l]+1);"pat"===b.type?g(f.subarray(l),b):a(f.subarray(l),b)};var g=function(a,b){b.section_number=a[7];b.last_section_number=a[8];f.pmtPid=(a[10]&31)<<8|a[11];b.pmtPid=f.pmtPid};var a=function(a,b){var l;if(a[5]&1){f.programMapTable={video:null,audio:null,"timed-metadata":{}};var g=3+((a[1]&15)<<8|a[2])-4;for(l=12+((a[10]&15)<<8|a[11]);l<g;){var r=a[l],d=(a[l+1]&31)<<8|a[l+2];r===na.H264_STREAM_TYPE&&null===f.programMapTable.video?f.programMapTable.video=
d:r===na.ADTS_STREAM_TYPE&&null===f.programMapTable.audio?f.programMapTable.audio=d:r===na.METADATA_STREAM_TYPE&&(f.programMapTable["timed-metadata"][d]=r);l+=((a[l+3]&15)<<8|a[l+4])+5}b.programMapTable=f.programMapTable}};this.push=function(a){var f={},l=4;f.payloadUnitStartIndicator=!!(a[1]&64);f.pid=a[1]&31;f.pid<<=8;f.pid|=a[2];1<(a[3]&48)>>>4&&(l+=a[l]+1);if(0===f.pid)f.type="pat",b(a.subarray(l),f),this.trigger("data",f);else if(f.pid===this.pmtPid)for(f.type="pmt",b(a.subarray(l),f),this.trigger("data",
f);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,l,f]):this.processPes_(a,l,f)};this.processPes_=function(a,f,b){b.streamType=b.pid===this.programMapTable.video?na.H264_STREAM_TYPE:b.pid===this.programMapTable.audio?na.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][b.pid];b.type="pes";b.data=a.subarray(f);this.trigger("data",b)}};nd.prototype=new qa;nd.STREAM_TYPES={h264:27,
adts:15};var Pe=function(){var f=this,b={data:[],size:0},g={data:[],size:0},a={data:[],size:0},l=function(a,b,l){var g=new Uint8Array(a.size),r={type:b},z,Q=0;if(a.data.length&&!(9>a.size)){r.trackId=a.data[0].pid;for(z=0;z<a.data.length;z++){var d=a.data[z];g.set(d.data,Q);Q+=d.data.byteLength}r.packetLength=6+(g[4]<<8|g[5]);r.dataAlignmentIndicator=0!==(g[6]&4);z=g[7];z&192&&(r.pts=(g[9]&14)<<27|(g[10]&255)<<20|(g[11]&254)<<12|(g[12]&255)<<5|(g[13]&254)>>>3,r.pts*=4,r.pts+=(g[13]&6)>>>1,r.dts=r.pts,
z&64&&(r.dts=(g[14]&14)<<27|(g[15]&255)<<20|(g[16]&254)<<12|(g[17]&255)<<5|(g[18]&254)>>>3,r.dts*=4,r.dts+=(g[18]&6)>>>1));r.data=g.subarray(9+g[8]);b="video"===b||r.packetLength<=a.size;if(l||b)a.size=0,a.data.length=0;b&&f.trigger("data",r)}};Pe.prototype.init.call(this);this.push=function(r){({pat:function(){},pes:function(){switch(r.streamType){case na.H264_STREAM_TYPE:case na.H264_STREAM_TYPE:var f=b;var Q="video";break;case na.ADTS_STREAM_TYPE:f=g;Q="audio";break;case na.METADATA_STREAM_TYPE:f=
a;Q="timed-metadata";break;default:return}r.payloadUnitStartIndicator&&l(f,Q,!0);f.data.push(r);f.size+=r.data.byteLength},pmt:function(){var a={type:"metadata",tracks:[]},b=r.programMapTable;null!==b.video&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.video,codec:"avc",type:"video"});null!==b.audio&&a.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+b.audio,codec:"adts",type:"audio"});f.trigger("data",a)}})[r.type]()};this.flush=function(){l(b,"video");l(g,"audio");l(a,
"timed-metadata");this.trigger("done")}};Pe.prototype=new qa;var od={PAT_PID:0,MP2T_PACKET_LENGTH:188,TransportPacketStream:Oe,TransportParseStream:nd,ElementaryStream:Pe,TimestampRolloverStream:gl,CaptionStream:Ne.CaptionStream,Cea608Stream:Ne.Cea608Stream,MetadataStream:fl},pd;for(pd in na)na.hasOwnProperty(pd)&&(od[pd]=na[pd]);var Hh=Object.freeze({default:od,__moduleExports:od}),Ih=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var Ac=function(){var f;Ac.prototype.init.call(this);
this.push=function(b){var g=0,a=0;if("audio"===b.type){if(f){var l=f;f=new Uint8Array(l.byteLength+b.data.byteLength);f.set(l);f.set(b.data,l.byteLength)}else f=b.data;for(;g+5<f.length;)if(255!==f[g]||240!==(f[g+1]&246))g++;else{l=2*(~f[g+1]&1);var r=(f[g+3]&3)<<11|f[g+4]<<3|(f[g+5]&224)>>5;var z=1024*((f[g+6]&3)+1);var Q=9E4*z/Ih[(f[g+2]&60)>>>2];r=g+r;if(f.byteLength<r)break;this.trigger("data",{pts:b.pts+a*Q,dts:b.dts+a*Q,sampleCount:z,audioobjecttype:(f[g+2]>>>6&3)+1,channelcount:(f[g+2]&1)<<
2|(f[g+3]&192)>>>6,samplerate:Ih[(f[g+2]&60)>>>2],samplingfrequencyindex:(f[g+2]&60)>>>2,samplesize:16,data:f.subarray(g+7+l,r)});if(f.byteLength===r){f=void 0;break}a++;f=f.subarray(r)}}};this.flush=function(){this.trigger("done")}};Ac.prototype=new qa;var Jh=Object.freeze({default:Ac,__moduleExports:Ac}),Qe=function(f){var b=f.byteLength,g=0,a=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+a};this.loadWord=function(){var l=f.byteLength-b,r=new Uint8Array(4),z=Math.min(4,
b);if(0===z)throw Error("no bytes available");r.set(f.subarray(l,l+z));g=(new DataView(r.buffer)).getUint32(0);a=8*z;b-=z};this.skipBits=function(f){if(!(a>f)){f-=a;var l=Math.floor(f/8);f-=8*l;b-=l;this.loadWord()}g<<=f;a-=f};this.readBits=function(f){var l=Math.min(a,f),z=g>>>32-l;a-=l;0<a?g<<=l:0<b&&this.loadWord();l=f-l;return 0<l?z<<l|this.readBits(l):z};this.skipLeadingZeros=function(){var f;for(f=0;f<a;++f)if(0!==(g&2147483648>>>f))return g<<=f,a-=f,f;this.loadWord();return f+this.skipLeadingZeros()};
this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()},Kh=Object.freeze({default:Qe,
__moduleExports:Qe}),hl=Kh&&Qe||Kh;var qd=function(){var f=0,b,g;qd.prototype.init.call(this);this.push=function(a){if(g){var l=new Uint8Array(g.byteLength+a.data.byteLength);l.set(g);l.set(a.data,g.byteLength);g=l}else g=a.data;for(;f<g.byteLength-3;f++)if(1===g[f+2]){b=f+5;break}for(;b<g.byteLength;)switch(g[b]){case 0:if(0!==g[b-1]){b+=2;break}else if(0!==g[b-2]){b++;break}f+3!==b-2&&this.trigger("data",g.subarray(f+3,b-2));do b++;while(1!==g[b]&&b<g.length);f=b-2;b+=3;break;case 1:if(0!==g[b-
1]||0!==g[b-2]){b+=3;break}this.trigger("data",g.subarray(f+3,b-2));f=b-2;b+=3;break;default:b+=3}g=g.subarray(f);b-=f;f=0};this.flush=function(){g&&3<g.byteLength&&this.trigger("data",g.subarray(f+3));g=null;f=0;this.trigger("done")}};qd.prototype=new qa;var il={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var Re=function(){var f=new qd,b,g,a;Re.prototype.init.call(this);var l=this;this.push=function(l){"video"===l.type&&(b=l.trackId,g=l.pts,a=l.dts,f.push(l))};
f.on("data",function(f){var r={trackId:b,pts:g,dts:a,data:f};switch(f[0]&31){case 5:r.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:r.nalUnitType="sei_rbsp";r.escapedRBSP=z(f.subarray(1));break;case 7:r.nalUnitType="seq_parameter_set_rbsp";r.escapedRBSP=z(f.subarray(1));r.config=Q(r.escapedRBSP);break;case 8:r.nalUnitType="pic_parameter_set_rbsp";break;case 9:r.nalUnitType="access_unit_delimiter_rbsp"}l.trigger("data",r)});f.on("done",function(){l.trigger("done")});this.flush=
function(){f.flush()};var r=function(a,f){var b=8,l=8,g;for(g=0;g<a;g++)0!==l&&(l=f.readExpGolomb(),l=(b+l+256)%256),b=0===l?b:l};var z=function(a){for(var f=a.byteLength,b=[],l=1,g;l<f-2;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(b.push(l+2),l+=2):l++;if(0===b.length)return a;f-=b.length;g=new Uint8Array(f);var r=0;for(l=0;l<f;r++,l++)r===b[0]&&(r++,b.shift()),g[l]=a[r];return g};var Q=function(a){var f=0,b=0,l=0,g=0,z=1;a=new hl(a);var Q=a.readUnsignedByte();var d=a.readUnsignedByte();var h=a.readUnsignedByte();
a.skipUnsignedExpGolomb();if(il[Q]){var m=a.readUnsignedExpGolomb();3===m&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var q=3!==m?8:12;for(m=0;m<q;m++)a.readBoolean()&&(6>m?r(16,a):r(64,a))}}a.skipUnsignedExpGolomb();m=a.readUnsignedExpGolomb();if(0===m)a.readUnsignedExpGolomb();else if(1===m)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),q=a.readUnsignedExpGolomb(),m=0;m<q;m++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);
m=a.readUnsignedExpGolomb();q=a.readUnsignedExpGolomb();var t=a.readBits(1);0===t&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(f=a.readUnsignedExpGolomb(),b=a.readUnsignedExpGolomb(),l=a.readUnsignedExpGolomb(),g=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var A=a.readUnsignedByte();switch(A){case 1:var v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;
case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}v&&(z=v[0]/v[1])}return{profileIdc:Q,levelIdc:h,profileCompatibility:d,width:Math.ceil((16*(m+1)-2*f-2*b)*z),height:(2-t)*(q+1)*16-2*l-2*g}}};Re.prototype=new qa;var Bc={H264Stream:Re,NalByteStream:qd},Lh=Object.freeze({default:Bc,
__moduleExports:Bc,H264Stream:Bc.H264Stream,NalByteStream:Bc.NalByteStream});var Cc=function(){var f=new Uint8Array,b=0;Cc.prototype.init.call(this);this.setTimestamp=function(f){b=f};this.parseId3TagSize=function(f,a){var b=f[a+6]<<21|f[a+7]<<14|f[a+8]<<7|f[a+9];return(f[a+5]&16)>>4?b+20:b+10};this.parseAdtsSize=function(f,a){return f[a+3]&6144|f[a+4]<<3|(f[a+5]&224)>>5};this.push=function(g){var a=0;if(f.length){var l=f.length;f=new Uint8Array(g.byteLength+l);f.set(f.subarray(0,l));f.set(g,l)}else f=
g;for(;3<=f.length-a;)if(73===f[a]&&68===f[a+1]&&51===f[a+2]){if(10>f.length-a)break;g=this.parseId3TagSize(f,a);if(g>f.length)break;l={type:"timed-metadata",data:f.subarray(a,a+g)};this.trigger("data",l);a+=g}else if(f[a]&1&&240===(f[a+1]&240)){if(7>f.length-a)break;g=this.parseAdtsSize(f,a);if(g>f.length)break;l={type:"audio",data:f.subarray(a,a+g),pts:b,dts:b};this.trigger("data",l);a+=g}else a++;f=0<f.length-a?f.subarray(a):new Uint8Array}};Cc.prototype=new qa;var Mh=Object.freeze({default:Cc,
__moduleExports:Cc}),vb=[33,16,5,32,164,27],Se=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],aa=function(f){for(var b=[];f--;)b.push(0);return b},Te=function(f){return Object.keys(f).reduce(function(b,g){b[g]=new Uint8Array(f[g].reduce(function(a,f){return a.concat(f)},[]));return b},{})}({96E3:[vb,[227,64],aa(154),[56]],88200:[vb,[231],aa(170),[56]],64E3:[vb,[248,192],aa(240),[56]],48E3:[vb,[255,192],aa(268),[55,148,128],aa(54),[112]],44100:[vb,[255,192],aa(268),[55,163,128],aa(84),[112]],32E3:[vb,
[255,192],aa(268),[55,234],aa(226),[112]],24E3:[vb,[255,192],aa(268),[55,255,128],aa(268),[111,112],aa(126),[224]],16E3:[vb,[255,192],aa(268),[55,255,128],aa(268),[111,255],aa(269),[223,108],aa(195),[1,192]],12E3:[Se,aa(268),[3,127,248],aa(268),[6,255,240],aa(268),[13,255,224],aa(268),[27,253,128],aa(259),[56]],11025:[Se,aa(268),[3,127,248],aa(268),[6,255,240],aa(268),[13,255,224],aa(268),[27,255,192],aa(268),[55,175,128],aa(108),[112]],8E3:[Se,aa(268),[3,121,16],aa(47),[7]]}),Nh=Object.freeze({default:Te,
__moduleExports:Te});var Oh=function(f){return 9E4*f};var Ph=function(f,b){return f*b};var Qh=function(f){return f/9E4};var Rh=function(f,b){return f/b};var kb={secondsToVideoTs:Oh,secondsToAudioTs:Ph,videoTsToSeconds:Qh,audioTsToSeconds:Rh,audioTsToVideoTs:function(f,b){return Oh(Rh(f,b))},videoTsToAudioTs:function(f,b){return Ph(Qh(f),b)}},Sh=Object.freeze({default:kb,__moduleExports:kb,secondsToVideoTs:kb.secondsToVideoTs,secondsToAudioTs:kb.secondsToAudioTs,videoTsToSeconds:kb.videoTsToSeconds,
audioTsToSeconds:kb.audioTsToSeconds,audioTsToVideoTs:kb.audioTsToVideoTs,videoTsToAudioTs:kb.videoTsToAudioTs}),Dc=vh&&rb||vh,Ec=xh&&sb||xh,ab=yh&&Yb||yh,Ua=Hh&&od||Hh,Th=Jh&&Ac||Jh,jl=Mh&&Cc||Mh,kl=Nh&&Te||Nh,Uh=Sh&&kb||Sh,ll=(Lh&&Bc||Lh).H264Stream,Ue=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ve=["width","height","profileIdc","levelIdc","profileCompatibility"];var ml=function(f){return 73===f[0]&&68===f[1]&&51===f[2]?!0:!1};var Vh=function(f,b){var g;
if(f.length!==b.length)return!1;for(g=0;g<f.length;g++)if(f[g]!==b[g])return!1;return!0};var nl=function(f){var b,g=0;for(b=0;b<f.length;b++){var a=f[b];g+=a.data.byteLength}return g};var Fc=function(f,b){var g=[],a=0,l=0,r=0,z=Infinity;b=b||{};Fc.prototype.init.call(this);this.push=function(a){ab.collectDtsInfo(f,a);f&&Ue.forEach(function(b){f[b]=a[b]});g.push(a)};this.setEarliestDts=function(a){l=a-f.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){z=a};this.setAudioAppendStart=
function(a){r=a};this.flush=function(){if(0!==g.length){var l=this.trimAdtsFramesByEarliestDts_(g);f.baseMediaDecodeTime=ab.calculateTrackBaseMediaDecodeTime(f,b.keepOriginalTimestamps);this.prefixWithSilence_(f,l);f.samples=this.generateSampleTable_(l);var r=Dc.mdat(this.concatenateFrameData_(l));g=[];l=Dc.moof(a,[f]);var z=new Uint8Array(l.byteLength+r.byteLength);a++;z.set(l);z.set(r,l.byteLength);ab.clearDtsInfo(f);this.trigger("data",{track:f,boxes:z})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,f){var b,l=b=0;if(f.length){var g=Uh.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var d=Math.ceil(9E4/(a.samplerate/1024));r&&z&&(b=g-Math.max(r,z),b=Math.floor(b/d),l=b*d);if(!(1>b||45E3<l)){d=kl[a.samplerate];d||(d=f[0].data);for(g=0;g<b;g++)f.splice(g,0,{data:d});a.baseMediaDecodeTime-=Math.floor(Uh.videoTsToAudioTs(l,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(a){if(f.minSegmentDts>=l)return a;f.minSegmentDts=Infinity;return a.filter(function(a){return a.dts>=
l?(f.minSegmentDts=Math.min(f.minSegmentDts,a.dts),f.minSegmentPts=f.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var f,b=[];for(f=0;f<a.length;f++){var l=a[f];b.push({size:l.data.byteLength,duration:1024})}return b};this.concatenateFrameData_=function(a){var f,b=0,l=new Uint8Array(nl(a));for(f=0;f<a.length;f++){var g=a[f];l.set(g.data,b);b+=g.data.byteLength}return l}};Fc.prototype=new qa;var rd=function(f,b){var g=0,a=[],l=[],r,z;b=b||{};rd.prototype.init.call(this);delete f.minPTS;
this.gopCache_=[];this.push=function(b){ab.collectDtsInfo(f,b);"seq_parameter_set_rbsp"!==b.nalUnitType||r||(r=b.config,f.sps=[b.data],Ve.forEach(function(a){f[a]=r[a]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||z||(z=b.data,f.pps=[b.data]);a.push(b)};this.flush=function(){for(var r,z,d;a.length&&"access_unit_delimiter_rbsp"!==a[0].nalUnitType;)a.shift();if(0!==a.length){r=Ec.groupNalsIntoFrames(a);r=Ec.groupFramesIntoGops(r);r[0][0].keyFrame||((z=this.getGopForFusion_(a[0],f))?(r.unshift(z),
r.byteLength+=z.byteLength,r.nalCount+=z.nalCount,r.pts=z.pts,r.dts=z.dts,r.duration+=z.duration):r=Ec.extendFirstKeyFrame(r));if(l.length){z=b.alignGopsAtEnd?this.alignGopsAtEnd_(r):this.alignGopsAtStart_(r);if(!z){this.gopCache_.unshift({gop:r.pop(),pps:f.pps,sps:f.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);a=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}ab.clearDtsInfo(f);r=z}ab.collectDtsInfo(f,r);f.samples=Ec.generateSampleTable(r);z=Dc.mdat(Ec.concatenateNalData(r));
f.baseMediaDecodeTime=ab.calculateTrackBaseMediaDecodeTime(f,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",r.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:r.pop(),pps:f.pps,sps:f.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);a=[];this.trigger("baseMediaDecodeTime",f.baseMediaDecodeTime);this.trigger("timelineStartInfo",f.timelineStartInfo);r=Dc.moof(g,[f]);d=new Uint8Array(r.byteLength+z.byteLength);g++;d.set(r);d.set(z,
r.byteLength);this.trigger("data",{track:f,boxes:d})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){ab.clearDtsInfo(f);z=r=void 0};this.getGopForFusion_=function(a){var b=Infinity,l;for(l=0;l<this.gopCache_.length;l++){var g=this.gopCache_[l];var r=g.gop;if(f.pps&&Vh(f.pps[0],g.pps[0])&&f.sps&&Vh(f.sps[0],g.sps[0])&&!(r.dts<f.timelineStartInfo.dts)&&(r=a.dts-r.dts-r.duration,-1E4<=r&&45E3>=r&&(!z||b>r))){var z=g;b=r}}return z?z.gop:null};this.alignGopsAtStart_=
function(a){var f,b;var g=a.byteLength;var r=a.nalCount;var z=a.duration;for(f=b=0;f<l.length&&b<a.length;){var d=l[f];var Q=a[b];if(d.pts===Q.pts)break;Q.pts>d.pts?f++:(b++,g-=Q.byteLength,r-=Q.nalCount,z-=Q.duration)}if(0===b)return a;if(b===a.length)return null;a=a.slice(b);a.byteLength=g;a.duration=z;a.nalCount=r;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var f;var b=l.length-1;var g=a.length-1;var r=null;for(f=!1;0<=b&&0<=g;){var z=l[b];var d=a[g];if(z.pts===d.pts){f=
!0;break}z.pts>d.pts?b--:(b===l.length-1&&(r=g),g--)}if(!f&&null===r)return null;b=f?g:r;if(0===b)return a;a=a.slice(b);b=a.reduce(function(a,f){a.byteLength+=f.byteLength;a.duration+=f.duration;a.nalCount+=f.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=b.byteLength;a.duration=b.duration;a.nalCount=b.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){l=a}};rd.prototype=new qa;var Gc=function(f,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks=
"undefined"!==typeof f.remux?!!f.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;Gc.prototype.init.call(this);this.push=function(f){if(f.text)return this.pendingCaptions.push(f);if(f.frames)return this.pendingMetadata.push(f);this.pendingTracks.push(f.track);this.pendingBoxes.push(f.boxes);this.pendingBytes+=f.boxes.byteLength;"video"===f.track.type&&(this.videoTrack=f.track);"audio"===
f.track.type&&(this.audioTrack=f.track)}};Gc.prototype=new qa;Gc.prototype.flush=function(f){var b=0,g={captions:[],captionStreams:{},metadata:[],info:{}},a=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==f&&"AudioSegmentStream"!==f||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(a=this.videoTrack.timelineStartInfo.pts,Ve.forEach(function(a){g.info[a]=
this.videoTrack[a]},this)):this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts,Ue.forEach(function(a){g.info[a]=this.audioTrack[a]},this));g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;f=Dc.initSegment(this.pendingTracks);g.initSegment=new Uint8Array(f.byteLength);g.initSegment.set(f);g.data=new Uint8Array(this.pendingBytes);for(f=0;f<this.pendingBoxes.length;f++)g.data.set(this.pendingBoxes[f],b),b+=this.pendingBoxes[f].byteLength;
for(f=0;f<this.pendingCaptions.length;f++)b=this.pendingCaptions[f],b.startTime=b.startPts-a,b.startTime/=9E4,b.endTime=b.endPts-a,b.endTime/=9E4,g.captionStreams[b.stream]=!0,g.captions.push(b);for(f=0;f<this.pendingMetadata.length;f++)b=this.pendingMetadata[f],b.cueTime=b.pts-a,b.cueTime/=9E4,g.metadata.push(b);g.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",g);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var We=function(f){var b=this,g=!0,a,l;We.prototype.init.call(this);f=f||{};this.baseMediaDecodeTime=f.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var a={};this.transmuxPipeline_=a;a.type="aac";a.metadataStream=new Ua.MetadataStream;a.aacStream=new jl;a.audioTimestampRolloverStream=new Ua.TimestampRolloverStream("audio");a.timedMetadataTimestampRolloverStream=
new Ua.TimestampRolloverStream("timed-metadata");a.adtsStream=new Th;a.coalesceStream=new Gc(f,a.metadataStream);a.headOfPipeline=a.aacStream;a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream);a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream);a.metadataStream.on("timestamp",function(f){a.aacStream.setTimestamp(f.timeStamp)});a.aacStream.on("data",function(g){"timed-metadata"!==g.type||a.audioSegmentStream||(l=l||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},
codec:"adts",type:"audio"},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new Fc(l,f),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream))});a.coalesceStream.on("data",this.trigger.bind(this,"data"));a.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="ts";g.metadataStream=new Ua.MetadataStream;g.packetStream=new Ua.TransportPacketStream;g.parseStream=new Ua.TransportParseStream;g.elementaryStream=
new Ua.ElementaryStream;g.videoTimestampRolloverStream=new Ua.TimestampRolloverStream("video");g.audioTimestampRolloverStream=new Ua.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=new Ua.TimestampRolloverStream("timed-metadata");g.adtsStream=new Th;g.h264Stream=new ll;g.captionStream=new Ua.CaptionStream;g.coalesceStream=new Gc(f,g.metadataStream);g.headOfPipeline=g.packetStream;g.packetStream.pipe(g.parseStream).pipe(g.elementaryStream);g.elementaryStream.pipe(g.videoTimestampRolloverStream).pipe(g.h264Stream);
g.elementaryStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.elementaryStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.h264Stream.pipe(g.captionStream).pipe(g.coalesceStream);g.elementaryStream.on("data",function(r){var z;if("metadata"===r.type){for(z=r.tracks.length;z--;)a||"video"!==r.tracks[z].type?l||"audio"!==r.tracks[z].type||(l=r.tracks[z],l.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(a=r.tracks[z],a.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime);a&&!g.videoSegmentStream&&(g.coalesceStream.numberOfTracks++,g.videoSegmentStream=new rd(a,f),g.videoSegmentStream.on("timelineStartInfo",function(a){l&&(l.timelineStartInfo=a,g.audioSegmentStream.setEarliestDts(a.dts))}),g.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),g.videoSegmentStream.on("baseMediaDecodeTime",function(a){l&&g.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),g.h264Stream.pipe(g.videoSegmentStream).pipe(g.coalesceStream));l&&!g.audioSegmentStream&&
(g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new Fc(l,f),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream))}});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(f){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=f;l&&(l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,ab.clearDtsInfo(l),l.timelineStartInfo.baseMediaDecodeTime=f,b.audioTimestampRolloverStream&&
b.audioTimestampRolloverStream.discontinuity());a&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),a.timelineStartInfo.dts=void 0,a.timelineStartInfo.pts=void 0,ab.clearDtsInfo(a),b.captionStream.reset(),a.timelineStartInfo.baseMediaDecodeTime=f);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){l&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};
this.alignGopsWith=function(f){a&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(f)};this.push=function(a){if(g){var f=ml(a);f&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():f||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();g=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){g=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};
We.prototype=new qa;var Hb={Transmuxer:We,VideoSegmentStream:rd,AudioSegmentStream:Fc,AUDIO_PROPERTIES:Ue,VIDEO_PROPERTIES:Ve};Object.freeze({default:Hb,__moduleExports:Hb,Transmuxer:Hb.Transmuxer,VideoSegmentStream:Hb.VideoSegmentStream,AudioSegmentStream:Hb.AudioSegmentStream,AUDIO_PROPERTIES:Hb.AUDIO_PROPERTIES,VIDEO_PROPERTIES:Hb.VIDEO_PROPERTIES});var sd=$a.parseType,Ma=function(f){return new Date(1E3*f-20828448E5)},Wh=function(f){return{isLeading:(f[0]&12)>>>2,dependsOn:f[0]&3,isDependedOn:(f[1]&
192)>>>6,hasRedundancy:(f[1]&48)>>>4,paddingValue:(f[1]&14)>>>1,isNonSyncSample:f[1]&1,degradationPriority:f[2]<<8|f[3]}},$b={avc1:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{dataReferenceIndex:b.getUint16(6),width:b.getUint16(24),height:b.getUint16(26),horizresolution:b.getUint16(28)+b.getUint16(30)/16,vertresolution:b.getUint16(32)+b.getUint16(34)/16,frameCount:b.getUint16(40),depth:b.getUint16(74),config:ra(f.subarray(78,f.byteLength))}},avcC:function(f){var b=new DataView(f.buffer,
f.byteOffset,f.byteLength),g={configurationVersion:f[0],avcProfileIndication:f[1],profileCompatibility:f[2],avcLevelIndication:f[3],lengthSizeMinusOne:f[4]&3,sps:[],pps:[]},a=f[5]&31,l;var r=6;for(l=0;l<a;l++){var z=b.getUint16(r);r+=2;g.sps.push(new Uint8Array(f.subarray(r,r+z)));r+=z}a=f[r];r++;for(l=0;l<a;l++)z=b.getUint16(r),r+=2,g.pps.push(new Uint8Array(f.subarray(r,r+z))),r+=z;return g},btrt:function(f){f=new DataView(f.buffer,f.byteOffset,f.byteLength);return{bufferSizeDB:f.getUint32(0),maxBitrate:f.getUint32(4),
avgBitrate:f.getUint32(8)}},esds:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),esId:f[6]<<8|f[7],streamPriority:f[8]&31,decoderConfig:{objectProfileIndication:f[11],streamType:f[12]>>>2&63,bufferSize:f[13]<<16|f[14]<<8|f[15],maxBitrate:f[16]<<24|f[17]<<16|f[18]<<8|f[19],avgBitrate:f[20]<<24|f[21]<<16|f[22]<<8|f[23],decoderConfigDescriptor:{tag:f[24],length:f[25],audioObjectType:f[26]>>>3&31,samplingFrequencyIndex:(f[26]&7)<<1|f[27]>>>7&1,channelConfiguration:f[27]>>>3&15}}}},
ftyp:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);b={majorBrand:sd(f.subarray(0,4)),minorVersion:b.getUint32(4),compatibleBrands:[]};for(var g=8;g<f.byteLength;)b.compatibleBrands.push(sd(f.subarray(g,g+4))),g+=4;return b},dinf:function(f){return{boxes:ra(f)}},dref:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),dataReferences:ra(f.subarray(8))}},hdlr:function(f){var b={version:(new DataView(f.buffer,f.byteOffset,f.byteLength)).getUint8(0),flags:new Uint8Array(f.subarray(1,
4)),handlerType:sd(f.subarray(8,12)),name:""},g;for(g=24;g<f.byteLength&&0!==f[g];g++)b.name+=String.fromCharCode(f[g]);b.name=decodeURIComponent(escape(b.name));return b},mdat:function(f){var b=f.byteLength,g=new DataView(f.buffer,f.byteOffset,f.byteLength),a=[],l;for(l=0;l+4<f.length;l+=r){var r=g.getUint32(l);l+=4;if(0>=r)a.push("<span style='color:red;'>MALFORMED DATA</span>");else switch(f[l]&31){case 1:a.push("slice_layer_without_partitioning_rbsp");break;case 5:a.push("slice_layer_without_partitioning_rbsp_idr");
break;case 6:a.push("sei_rbsp");break;case 7:a.push("seq_parameter_set_rbsp");break;case 8:a.push("pic_parameter_set_rbsp");break;case 9:a.push("access_unit_delimiter_rbsp");break;default:a.push("UNKNOWN NAL - "+f[l]&31)}}return{byteLength:b,nals:a}},mdhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g=4;f={version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),language:""};1===f.version?(g+=4,f.creationTime=Ma(b.getUint32(g)),g+=8,f.modificationTime=Ma(b.getUint32(g)),g+=
4,f.timescale=b.getUint32(g),g+=8):(f.creationTime=Ma(b.getUint32(g)),g+=4,f.modificationTime=Ma(b.getUint32(g)),g+=4,f.timescale=b.getUint32(g),g+=4);f.duration=b.getUint32(g);b=b.getUint16(g+4);f.language+=String.fromCharCode((b>>10)+96);f.language+=String.fromCharCode(((b&992)>>5)+96);f.language+=String.fromCharCode((b&31)+96);return f},mdia:function(f){return{boxes:ra(f)}},mfhd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),sequenceNumber:f[4]<<24|f[5]<<16|f[6]<<8|f[7]}},
minf:function(f){return{boxes:ra(f)}},mp4a:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);b={dataReferenceIndex:b.getUint16(6),channelcount:b.getUint16(16),samplesize:b.getUint16(18),samplerate:b.getUint16(24)+b.getUint16(26)/65536};28<f.byteLength&&(b.streamDescriptor=ra(f.subarray(28))[0]);return b},moof:function(f){return{boxes:ra(f)}},moov:function(f){return{boxes:ra(f)}},mvex:function(f){return{boxes:ra(f)}},mvhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),
g=4,a={version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4))};1===a.version?(g+=4,a.creationTime=Ma(b.getUint32(g)),g+=8,a.modificationTime=Ma(b.getUint32(g)),g+=4,a.timescale=b.getUint32(g),g+=8):(a.creationTime=Ma(b.getUint32(g)),g+=4,a.modificationTime=Ma(b.getUint32(g)),g+=4,a.timescale=b.getUint32(g),g+=4);a.duration=b.getUint32(g);g+=4;a.rate=b.getUint16(g)+b.getUint16(g+2)/16;g+=4;a.volume=b.getUint8(g)+b.getUint8(g+1)/8;g=g+2+2+8;a.matrix=new Uint32Array(f.subarray(g,g+36));a.nextTrackId=
b.getUint32(g+36+24);return a},pdin:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4)),rate:b.getUint32(4),initialDelay:b.getUint32(8)}},sdtp:function(f){var b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g;for(g=4;g<f.byteLength;g++)b.samples.push({dependsOn:(f[g]&48)>>4,isDependedOn:(f[g]&12)>>2,hasRedundancy:f[g]&3});return b},sidx:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),
g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),references:[],referenceId:b.getUint32(4),timescale:b.getUint32(8),earliestPresentationTime:b.getUint32(12),firstOffset:b.getUint32(16)},a=b.getUint16(22),l;for(l=24;a;l+=12,a--)g.references.push({referenceType:(f[l]&128)>>>7,referencedSize:b.getUint32(l)&2147483647,subsegmentDuration:b.getUint32(l+4),startsWithSap:!!(f[l+8]&128),sapType:(f[l+8]&112)>>>4,sapDeltaTime:b.getUint32(l+8)&268435455});return g},smhd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,
4)),balance:f[4]+f[5]/256}},stbl:function(f){return{boxes:ra(f)}},stco:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),chunkOffsets:[]};var g=b.getUint32(4),a;for(a=8;g;a+=4,g--)f.chunkOffsets.push(b.getUint32(a));return f},stsc:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g=b.getUint32(4);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleToChunks:[]};var a;for(a=8;g;a+=12,g--)f.sampleToChunks.push({firstChunk:b.getUint32(a),
samplesPerChunk:b.getUint32(a+4),sampleDescriptionIndex:b.getUint32(a+8)});return f},stsd:function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleDescriptions:ra(f.subarray(8))}},stsz:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g={version:f[0],flags:new Uint8Array(f.subarray(1,4)),sampleSize:b.getUint32(4),entries:[]},a;for(a=12;a<f.byteLength;a+=4)g.entries.push(b.getUint32(a));return g},stts:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);
f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),timeToSamples:[]};var g=b.getUint32(4),a;for(a=8;g;a+=8,g--)f.timeToSamples.push({sampleCount:b.getUint32(a),sampleDelta:b.getUint32(a+4)});return f},styp:function(f){return $b.ftyp(f)},tfdt:function(f){var b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),baseMediaDecodeTime:f[4]<<24|f[5]<<16|f[6]<<8|f[7]};1===b.version&&(b.baseMediaDecodeTime*=Math.pow(2,32),b.baseMediaDecodeTime+=f[8]<<24|f[9]<<16|f[10]<<8|f[11]);return b},tfhd:function(f){var b=
new DataView(f.buffer,f.byteOffset,f.byteLength);f={version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:b.getUint32(4)};var g=f.flags[2]&1,a=f.flags[2]&2,l=f.flags[2]&8,r=f.flags[2]&16,z=f.flags[2]&32,d=f.flags[0]&65536,h=f.flags[0]&131072;var m=8;g&&(m+=4,f.baseDataOffset=b.getUint32(12),m+=4);a&&(f.sampleDescriptionIndex=b.getUint32(m),m+=4);l&&(f.defaultSampleDuration=b.getUint32(m),m+=4);r&&(f.defaultSampleSize=b.getUint32(m),m+=4);z&&(f.defaultSampleFlags=b.getUint32(m));d&&(f.durationIsEmpty=
!0);!g&&h&&(f.baseDataOffsetIsMoof=!0);return f},tkhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength),g=4,a={version:b.getUint8(0),flags:new Uint8Array(f.subarray(1,4))};1===a.version?(g+=4,a.creationTime=Ma(b.getUint32(g)),g+=8,a.modificationTime=Ma(b.getUint32(g)),g+=4,a.trackId=b.getUint32(g),g=g+4+8):(a.creationTime=Ma(b.getUint32(g)),g+=4,a.modificationTime=Ma(b.getUint32(g)),g+=4,a.trackId=b.getUint32(g),g=g+4+4);a.duration=b.getUint32(g);g=g+4+8;a.layer=b.getUint16(g);g+=
2;a.alternateGroup=b.getUint16(g);g+=2;a.volume=b.getUint8(g)+b.getUint8(g+1)/8;g=g+2+2;a.matrix=new Uint32Array(f.subarray(g,g+36));g+=36;a.width=b.getUint16(g)+b.getUint16(g+2)/16;g+=4;a.height=b.getUint16(g)+b.getUint16(g+2)/16;return a},traf:function(f){return{boxes:ra(f)}},trak:function(f){return{boxes:ra(f)}},trex:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),trackId:b.getUint32(4),defaultSampleDescriptionIndex:b.getUint32(8),
defaultSampleDuration:b.getUint32(12),defaultSampleSize:b.getUint32(16),sampleDependsOn:f[20]&3,sampleIsDependedOn:(f[21]&192)>>6,sampleHasRedundancy:(f[21]&48)>>4,samplePaddingValue:(f[21]&14)>>1,sampleIsDifferenceSample:!!(f[21]&1),sampleDegradationPriority:b.getUint16(22)}},trun:function(f){var b={version:f[0],flags:new Uint8Array(f.subarray(1,4)),samples:[]},g=new DataView(f.buffer,f.byteOffset,f.byteLength),a=b.flags[2]&1,l=b.flags[2]&4,r=b.flags[1]&1,z=b.flags[1]&2,d=b.flags[1]&4,h=b.flags[1]&
8,m=g.getUint32(4),q=8;a&&(b.dataOffset=g.getInt32(q),q+=4);l&&m&&(a={flags:Wh(f.subarray(q,q+4))},q+=4,r&&(a.duration=g.getUint32(q),q+=4),z&&(a.size=g.getUint32(q),q+=4),h&&(a.compositionTimeOffset=g.getUint32(q),q+=4),b.samples.push(a),m--);for(;m--;)a={},r&&(a.duration=g.getUint32(q),q+=4),z&&(a.size=g.getUint32(q),q+=4),d&&(a.flags=Wh(f.subarray(q,q+4)),q+=4),h&&(a.compositionTimeOffset=g.getUint32(q),q+=4),b.samples.push(a);return b},"url ":function(f){return{version:f[0],flags:new Uint8Array(f.subarray(1,
4))}},vmhd:function(f){var b=new DataView(f.buffer,f.byteOffset,f.byteLength);return{version:f[0],flags:new Uint8Array(f.subarray(1,4)),graphicsmode:b.getUint16(4),opcolor:new Uint16Array([b.getUint16(6),b.getUint16(8),b.getUint16(10)])}}};var ra=function(f){var b=0,g=[],a;var l=new ArrayBuffer(f.length);var r=new Uint8Array(l);for(a=0;a<f.length;++a)r[a]=f[a];for(l=new DataView(l);b<f.byteLength;){r=l.getUint32(b);a=sd(f.subarray(b+4,b+8));var z=1<r?b+r:f.byteLength;b=($b[a]||function(a){return{data:a}})(f.subarray(b+
8,z));b.size=r;b.type=a;g.push(b);b=z}return g};var Xh=function(f,b){b=b||0;var g=Array(2*b+1).join(" ");return f.map(function(a,f){return g+a.type+"\n"+Object.keys(a).filter(function(a){return"type"!==a&&"boxes"!==a}).map(function(f){var b=g+"  "+f+": ";f=a[f];return f instanceof Uint8Array||f instanceof Uint32Array?(f=Array.prototype.slice.call(new Uint8Array(f.buffer,f.byteOffset,f.byteLength)).map(function(a){return" "+("00"+a.toString(16)).slice(-2)}).join("").match(/.{1,24}/g))?1===f.length?
b+"<"+f.join("").slice(1)+">":b+"<\n"+f.map(function(a){return g+"  "+a}).join("\n")+"\n"+g+"  >":b+"<>":b+JSON.stringify(f,null,2).split("\n").map(function(a,f){return 0===f?a:g+"  "+a}).join("\n")}).join("\n")+(a.boxes?"\n"+Xh(a.boxes,b+1):"")}).join("\n")};var lb={inspect:ra,textify:Xh,parseTfdt:$b.tfdt,parseHdlr:$b.hdlr,parseTfhd:$b.tfhd,parseTrun:$b.trun},Yh=Object.freeze({default:lb,__moduleExports:lb,inspect:lb.inspect,textify:lb.textify,parseTfdt:lb.parseTfdt,parseHdlr:lb.parseHdlr,parseTfhd:lb.parseTfhd,
parseTrun:lb.parseTrun}),Xe=Yh&&lb||Yh,ol=vc.discardEmulationPreventionBytes,pl=Ne.CaptionStream,ql=function(f,b,g){var a=b,l=g.defaultSampleDuration||0,r=g.defaultSampleSize||0,z=g.trackId,d=[];f.forEach(function(f){f=Xe.parseTrun(f).samples;f.forEach(function(f){void 0===f.duration&&(f.duration=l);void 0===f.size&&(f.size=r);f.trackId=z;f.dts=a;void 0===f.compositionTimeOffset&&(f.compositionTimeOffset=0);f.pts=a+f.compositionTimeOffset;a+=f.duration});d=d.concat(f)});return d},rl=function(f,b){var g=
$a.findBox(f,["moof","traf"]),a={},l=[];$a.findBox(f,["mdat"]).forEach(function(a,f){l.push({mdat:a,traf:g[f]})});l.forEach(function(f){var l=f.mdat,g=f.traf;f=$a.findBox(g,["tfhd"]);var r=Xe.parseTfhd(f[0]);f=r.trackId;var d=$a.findBox(g,["tfdt"]);d=0<d.length?Xe.parseTfdt(d[0]).baseMediaDecodeTime:0;g=$a.findBox(g,["trun"]);if(b===f&&0<g.length){g=ql(g,d,r);r=new DataView(l.buffer,l.byteOffset,l.byteLength);d=[];var h;for(h=0;h+4<l.length;h+=m){var m=r.getUint32(h);h+=4;if(!(0>=m))switch(l[h]&31){case 6:var q=
l.subarray(h+1,h+1+m);a:{var t=h;for(var v=0;v<g.length;v++){var A=g[v];if(t<A.size){t=A;break a}t-=A.size}t=null}q={nalUnitType:"sei_rbsp",size:m,data:q,escapedRBSP:ol(q),trackId:f};if(t){q.pts=t.pts;q.dts=t.dts;var x=t}else q.pts=x.pts,q.dts=x.dts;d.push(q)}}a[f]||(a[f]=[]);a[f]=a[f].concat(d)}});return a},Ye=function(){var f=!1,b,g,a,l,r;this.isInitialized=function(){return f};this.init=function(){b=new pl;f=!0;b.on("data",function(a){a.startTime=a.startPts/l;a.endTime=a.endPts/l;r.captions.push(a);
r.captionStreams[a.stream]=!0})};this.isNewInit=function(f,b){return f&&0===f.length||b&&"object"===("undefined"===typeof b?"undefined":ka(b))&&0===Object.keys(b).length?!1:a!==f[0]||l!==b[a]};this.parse=function(f,b,d){if(this.isInitialized()){if(!b||!d)return null;if(this.isNewInit(b,d))a=b[0],l=d[a];else if(!a||!l)return g.push(f),null}else return null;for(;0<g.length;){var z=g.shift();this.parse(z,b,d)}b=a;d=l;f=b?{seiNals:rl(f,b)[b],timescale:d}:null;if(null===f||!f.seiNals)return null;this.pushNals(f.seiNals);
this.flushStream();return r};this.pushNals=function(a){if(!this.isInitialized()||!a||0===a.length)return null;a.forEach(function(a){b.push(a)})};this.flushStream=function(){if(!this.isInitialized())return null;b.flush()};this.clearParsedCaptions=function(){r.captions=[];r.captionStreams={}};this.resetCaptionStream=function(){if(!this.isInitialized())return null;b.reset()};this.clearAllCaptions=function(){this.clearParsedCaptions();this.resetCaptionStream()};this.reset=function(){g=[];l=a=null;r?this.clearParsedCaptions():
r={captions:[],captionStreams:{}};this.resetCaptionStream()};this.reset()},Zh=Object.freeze({default:Ye,__moduleExports:Ye}),sl=Zh&&Ye||Zh,$h=function(f){var b=f[1]&31;return b=b<<8|f[2]},td=function(f){return!!(f[1]&64)},ud=function(f){var b=0;1<(f[3]&48)>>>4&&(b+=f[4]+1);return b},Ze=function(f){switch(f){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";
default:return null}},bb={parseType:function(f,b){f=$h(f);return 0===f?"pat":f===b?"pmt":b?"pes":null},parsePat:function(f){var b=td(f),g=4+ud(f);b&&(g+=f[g]+1);return(f[g+10]&31)<<8|f[g+11]},parsePmt:function(f){var b={},g=td(f),a=4+ud(f);g&&(a+=f[a]+1);if(f[a+5]&1){g=3+((f[a+1]&15)<<8|f[a+2])-4;for(var l=12+((f[a+10]&15)<<8|f[a+11]);l<g;){var r=a+l;b[(f[r+1]&31)<<8|f[r+2]]=f[r];l+=((f[r+3]&15)<<8|f[r+4])+5}return b}},parsePayloadUnitStartIndicator:td,parsePesType:function(f,b){f=$h(f);switch(b[f]){case na.H264_STREAM_TYPE:return"video";
case na.ADTS_STREAM_TYPE:return"audio";case na.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(f){if(!td(f))return null;var b=4+ud(f);if(b>=f.byteLength)return null;var g=null;var a=f[b+7];a&192&&(g={},g.pts=(f[b+9]&14)<<27|(f[b+10]&255)<<20|(f[b+11]&254)<<12|(f[b+12]&255)<<5|(f[b+13]&254)>>>3,g.pts*=4,g.pts+=(f[b+13]&6)>>>1,g.dts=g.pts,a&64&&(g.dts=(f[b+14]&14)<<27|(f[b+15]&255)<<20|(f[b+16]&254)<<12|(f[b+17]&255)<<5|(f[b+18]&254)>>>3,g.dts*=4,g.dts+=(f[b+
18]&6)>>>1));return g},videoPacketContainsKeyFrame:function(f){var b=4+ud(f);f=f.subarray(b);for(var g=b=0,a=!1;g<f.byteLength-3;g++)if(1===f[g+2]){b=g+5;break}for(;b<f.byteLength;)switch(f[b]){case 0:if(0!==f[b-1]){b+=2;break}else if(0!==f[b-2]){b++;break}g+3!==b-2&&(g=Ze(f[g+3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(a=!0));do b++;while(1!==f[b]&&b<f.length);g=b-2;b+=3;break;case 1:if(0!==f[b-1]||0!==f[b-2]){b+=3;break}g=Ze(f[g+3]&31);"slice_layer_without_partitioning_rbsp_idr"===
g&&(a=!0);g=b-2;b+=3;break;default:b+=3}(f=f.subarray(g))&&3<f.byteLength&&(g=Ze(f[3]&31),"slice_layer_without_partitioning_rbsp_idr"===g&&(a=!0));return a}},ai=Object.freeze({default:bb,__moduleExports:bb,parseType:bb.parseType,parsePat:bb.parsePat,parsePmt:bb.parsePmt,parsePayloadUnitStartIndicator:bb.parsePayloadUnitStartIndicator,parsePesType:bb.parsePesType,parsePesTime:bb.parsePesTime,videoPacketContainsKeyFrame:bb.videoPacketContainsKeyFrame}),tl=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,
16E3,12E3,11025,8E3,7350],bi=function(f){return f[0]<<21|f[1]<<14|f[2]<<7|f[3]},wb={parseId3TagSize:function(f,b){var g=f[b+6]<<21|f[b+7]<<14|f[b+8]<<7|f[b+9];return(f[b+5]&16)>>4?g+20:g+10},parseAdtsSize:function(f,b){return f[b+3]&6144|f[b+4]<<3|(f[b+5]&224)>>5},parseType:function(f,b){return 73===f[b]&&68===f[b+1]&&51===f[b+2]?"timed-metadata":f[b]&1&&240===(f[b+1]&240)?"audio":null},parseSampleRate:function(f){for(var b=0;b+5<f.length;)if(255!==f[b]||240!==(f[b+1]&246))b++;else return tl[(f[b+
2]&60)>>>2];return null},parseAacTimestamp:function(f){var b=10;f[5]&64&&(b=b+4+bi(f.subarray(10,14)));do{var g=bi(f.subarray(b+4,b+8));if(1>g)break;var a=String.fromCharCode(f[b],f[b+1],f[b+2],f[b+3]);if("PRIV"===a){a=f.subarray(b+10,b+g+10);for(var l=0;l<a.byteLength;l++)if(0===a[l]){var r=unescape,z,d=a,h=l,m="";for(z=0;z<h;z++)m+="%"+("00"+d[z].toString(16)).slice(-2);if("com.apple.streaming.transportStreamTimestamp"===r(m))return f=a.subarray(l+1),b=(f[3]&1)<<30|f[4]<<22|f[5]<<14|f[6]<<6|f[7]>>>
2,b*=4,b+=f[7]&3;break}}b+=10;b+=g}while(b<f.byteLength);return null}},ci=Object.freeze({default:wb,__moduleExports:wb,parseId3TagSize:wb.parseId3TagSize,parseAdtsSize:wb.parseAdtsSize,parseType:wb.parseType,parseSampleRate:wb.parseSampleRate,parseAacTimestamp:wb.parseAacTimestamp}),Hc=ci&&wb||ci,ac=Gh.handleRollover;var ja=ai&&bb||ai;var ul=function(f,b){if(f.audio&&f.audio.length){var g=b;"undefined"===typeof g&&(g=f.audio[0].dts);f.audio.forEach(function(a){a.dts=ac(a.dts,g);a.pts=ac(a.pts,g);
a.dtsTime=a.dts/9E4;a.ptsTime=a.pts/9E4})}if(f.video&&f.video.length){var a=b;"undefined"===typeof a&&(a=f.video[0].dts);f.video.forEach(function(f){f.dts=ac(f.dts,a);f.pts=ac(f.pts,a);f.dtsTime=f.dts/9E4;f.ptsTime=f.pts/9E4});f.firstKeyFrame&&(f=f.firstKeyFrame,f.dts=ac(f.dts,a),f.pts=ac(f.pts,a),f.dtsTime=f.dts/9E4,f.ptsTime=f.dts/9E4)}},vd=function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function");},vl=function(){function f(f,g){for(var a=0;a<g.length;a++){var b=
g[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(b,g,a){g&&f(b.prototype,g);a&&f(b,a);return b}}(),wl=function(f,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":ka(b)));f.prototype=Object.create(b&&b.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?Object.setPrototypeOf(f,
b):f.__proto__=b)},Na=null,xl=function(){function f(b){vd(this,f);if(!Na){var g=[[[],[],[],[],[]],[[],[],[],[],[]]],a=g[0],l=g[1],r=a[4],z=l[4],d,h,m,q=[],t=[],v;for(d=0;256>d;d++)t[(q[d]=d<<1^283*(d>>7))^d]=d;for(h=m=0;!r[h];h^=v||1,m=t[m]||1){var A=m^m<<1^m<<2^m<<3^m<<4;A=A>>8^A&255^99;r[h]=A;z[A]=h;var x=q[d=q[v=q[h]]];var B=16843009*x^65537*d^257*v^16843008*h;x=257*q[A]^16843008*A;for(d=0;4>d;d++)a[d][h]=x=x<<24^x>>>8,l[d][A]=B=B<<24^B>>>8}for(d=0;5>d;d++)a[d]=a[d].slice(0),l[d]=l[d].slice(0);
Na=g}this._tables=[[Na[0][0].slice(),Na[0][1].slice(),Na[0][2].slice(),Na[0][3].slice(),Na[0][4].slice()],[Na[1][0].slice(),Na[1][1].slice(),Na[1][2].slice(),Na[1][3].slice(),Na[1][4].slice()]];g=this._tables[0][4];a=this._tables[1];h=b.length;m=1;if(4!==h&&6!==h&&8!==h)throw Error("Invalid aes key size");r=b.slice(0);z=[];this._key=[r,z];for(b=h;b<4*h+28;b++){l=r[b-1];if(0===b%h||8===h&&4===b%h)l=g[l>>>24]<<24^g[l>>16&255]<<16^g[l>>8&255]<<8^g[l&255],0===b%h&&(l=l<<8^l>>>24^m<<24,m=m<<1^283*(m>>
7));r[b]=r[b-h]^l}for(h=0;b;h++,b--)l=r[h&3?b:b-4],z[h]=4>=b||4>h?l:a[0][g[l>>>24]]^a[1][g[l>>16&255]]^a[2][g[l>>8&255]]^a[3][g[l&255]]}f.prototype.decrypt=function(f,g,a,l,r,d){var b=this._key[1];f^=b[0];l^=b[1];a^=b[2];g^=b[3];var z=b.length/4-2,h,m=4;var q=this._tables[1];var t=q[0],v=q[1],A=q[2],x=q[3],B=q[4];for(h=0;h<z;h++){q=t[f>>>24]^v[l>>16&255]^A[a>>8&255]^x[g&255]^b[m];var G=t[l>>>24]^v[a>>16&255]^A[g>>8&255]^x[f&255]^b[m+1];var u=t[a>>>24]^v[g>>16&255]^A[f>>8&255]^x[l&255]^b[m+2];g=t[g>>>
24]^v[f>>16&255]^A[l>>8&255]^x[a&255]^b[m+3];m+=4;f=q;l=G;a=u}for(h=0;4>h;h++)r[(3&-h)+d]=B[f>>>24]<<24^B[l>>16&255]<<16^B[a>>8&255]<<8^B[g&255]^b[m++],q=f,f=l,l=a,a=g,g=q};return f}(),di=function(){function f(){vd(this,f);this.listeners={}}f.prototype.on=function(f,g){this.listeners[f]||(this.listeners[f]=[]);this.listeners[f].push(g)};f.prototype.off=function(f,g){if(!this.listeners[f])return!1;g=this.listeners[f].indexOf(g);this.listeners[f].splice(g,1);return-1<g};f.prototype.trigger=function(f){var b=
this.listeners[f];if(b)if(2===arguments.length)for(var a=b.length,l=0;l<a;++l)b[l].call(this,arguments[1]);else{a=Array.prototype.slice.call(arguments,1);l=b.length;for(var r=0;r<l;++r)b[r].apply(this,a)}};f.prototype.dispose=function(){this.listeners={}};f.prototype.pipe=function(f){this.on("data",function(b){f.push(b)})};return f}(),ei=function(f){function b(){vd(this,b);var g=f.call(this,di);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");g=!g||"object"!==
("undefined"===typeof g?"undefined":ka(g))&&"function"!==typeof g?this:g;g.jobs=[];g.delay=1;g.timeout_=null;return g}wl(b,f);b.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};b.prototype.push=function(f){this.jobs.push(f);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return b}(di),Oa=function(f){return f<<24|(f&65280)<<8|(f&16711680)>>8|f>>>24},fi=function(f,b,g){var a=
new Int32Array(f.buffer,f.byteOffset,f.byteLength>>2);b=new xl(Array.prototype.slice.call(b));f=new Uint8Array(f.byteLength);var l=new Int32Array(f.buffer),r;var d=g[0];var h=g[1];var m=g[2];g=g[3];for(r=0;r<a.length;r+=4){var q=Oa(a[r]);var t=Oa(a[r+1]);var v=Oa(a[r+2]);var A=Oa(a[r+3]);b.decrypt(q,t,v,A,l,r);l[r]=Oa(l[r]^d);l[r+1]=Oa(l[r+1]^h);l[r+2]=Oa(l[r+2]^m);l[r+3]=Oa(l[r+3]^g);d=q;h=t;m=v;g=A}return f},yl=function(){function f(b,g,a,l){vd(this,f);var r=f.STEP,d=new Int32Array(b.buffer),h=
new Uint8Array(b.byteLength);b=0;this.asyncStream_=new ei;this.asyncStream_.push(this.decryptChunk_(d.subarray(b,b+r),g,a,h));for(b=r;b<d.length;b+=r)a=new Uint32Array([Oa(d[b-4]),Oa(d[b-3]),Oa(d[b-2]),Oa(d[b-1])]),this.asyncStream_.push(this.decryptChunk_(d.subarray(b,b+r),g,a,h));this.asyncStream_.push(function(){l(null,h.subarray(0,h.byteLength-h[h.byteLength-1]))})}f.prototype.decryptChunk_=function(f,g,a,l){return function(){var b=fi(f,g,a);l.set(b,f.byteOffset)}};vl(f,null,[{key:"STEP",get:function(){return 32E3}}]);
return f}(),mb=function(f,b){if(/^[a-z]+:/i.test(b))return b;/\/\//i.test(f)||(f=gd.buildAbsoluteURL(F.location.href,f));return gd.buildAbsoluteURL(f,b)},Pa=function(f,b){if(!(f instanceof b))throw new TypeError("Cannot call a class as a function");},Va=function(){function f(f,g){for(var a=0;a<g.length;a++){var b=g[a];b.enumerable=b.enumerable||!1;b.configurable=!0;"value"in b&&(b.writable=!0);Object.defineProperty(f,b.key,b)}}return function(b,g,a){g&&f(b.prototype,g);a&&f(b,a);return b}}(),zl=function l(b,
g,a){null===b&&(b=Function.prototype);var r=Object.getOwnPropertyDescriptor(b,g);if(void 0===r){if(b=Object.getPrototypeOf(b),null!==b)return l(b,g,a)}else{if("value"in r)return r.value;g=r.get;return void 0===g?void 0:g.call(a)}},nb=function(b,g){if("function"!==typeof g&&null!==g)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof g?"undefined":ka(g)));b.prototype=Object.create(g&&g.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}});
g&&(Object.setPrototypeOf?Object.setPrototypeOf(b,g):b.__proto__=g)},cb=function(b,g){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!g||"object"!==("undefined"===typeof g?"undefined":ka(g))&&"function"!==typeof g?b:g},Al=function(){return function(b,g){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b)){var a=[],l=!0,r=!1,d=void 0;try{for(var h=b[Symbol.iterator](),m;!(l=(m=h.next()).done)&&(a.push(m.value),!g||a.length!==g);l=!0);}catch(Ed){r=
!0,d=Ed}finally{try{if(!l&&h["return"])h["return"]()}finally{if(r)throw d;}}return a}throw new TypeError("Invalid attempt to destructure non-iterable instance");}}(),$e=D.mergeOptions,Bl=D.log,af=function(b,g){["AUDIO","SUBTITLES"].forEach(function(a){for(var l in b.mediaGroups[a])for(var r in b.mediaGroups[a][l])g(b.mediaGroups[a][l][r],a,l,r)})},Cl=function(b,g,a){var l=g.slice();a=a||0;g=Math.min(b.length,g.length+a);for(var r=a;r<g;r++)l[r-a]=$e(b[r],l[r-a]);return l},bf=function(b,g){b=$e(b,
{});var a=b.playlists[g.uri];if(!a||a.segments&&g.segments&&a.segments.length===g.segments.length&&a.mediaSequence===g.mediaSequence)return null;var l=$e(a,g);a.segments&&(l.segments=Cl(a.segments,g.segments,g.mediaSequence-a.mediaSequence));l.segments.forEach(function(a){var b=l.resolvedUri;a.resolvedUri||(a.resolvedUri=mb(b,a.uri));a.key&&!a.key.resolvedUri&&(a.key.resolvedUri=mb(b,a.key.uri));a.map&&!a.map.resolvedUri&&(a.map.resolvedUri=mb(b,a.map.uri))});for(a=0;a<b.playlists.length;a++)b.playlists[a].uri===
g.uri&&(b.playlists[a]=l);b.playlists[g.uri]=l;return b},gi=function(b){for(var g=b.playlists.length;g--;){var a=b.playlists[g];b.playlists[a.uri]=a;a.resolvedUri=mb(b.uri,a.uri);a.id=g;a.attributes||(a.attributes={},Bl.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute."))}},hi=function(b){af(b,function(g){g.uri&&(g.resolvedUri=mb(b.uri,g.uri))})},ii=function(b,g){var a=b.segments[b.segments.length-1];return g&&a&&a.duration?1E3*a.duration:500*(b.targetDuration||10)},wd=function(b){function g(a,
b,r){Pa(this,g);var l=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));l.srcUrl=a;l.hls_=b;l.withCredentials=r;if(!l.srcUrl)throw Error("A non-empty playlist URL is required");l.state="HAVE_NOTHING";l.on("mediaupdatetimeout",function(){"HAVE_METADATA"===l.state&&(l.state="HAVE_CURRENT_METADATA",l.request=l.hls_.xhr({uri:mb(l.master.uri,l.media().uri),withCredentials:l.withCredentials},function(a,b){if(l.request){if(a)return l.playlistRequestError(l.request,l.media().uri,"HAVE_METADATA");
l.haveMetadata(l.request,l.media().uri)}}))});return l}nb(g,b);Va(g,[{key:"playlistRequestError",value:function(a,b,g){this.request=null;g&&(this.state=g);this.error={playlist:this.master.playlists[b],status:a.status,message:"HLS playlist request error at URL: "+b,responseText:a.responseText,code:500<=a.status?4:2};this.trigger("error")}},{key:"haveMetadata",value:function(a,b){var l=this;this.request=null;this.state="HAVE_METADATA";var g=new Yg;g.push(a.responseText);g.end();g.manifest.uri=b;g.manifest.attributes=
g.manifest.attributes||{};a=bf(this.master,g.manifest);this.targetDuration=g.manifest.targetDuration;a?(this.master=a,this.media_=this.master.playlists[g.manifest.uri]):this.trigger("playlistunchanged");this.media().endList||(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=F.setTimeout(function(){l.trigger("mediaupdatetimeout")},ii(this.media(),!!a)));this.trigger("loadedplaylist")}},{key:"dispose",value:function(){this.stopRequest();F.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",
value:function(){if(this.request){var a=this.request;this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){var b=this;if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var g=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var d=!this.media_||a.uri!==this.media_.uri;if(this.master.playlists[a.uri].endList)this.request&&
(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=a,d&&(this.trigger("mediachanging"),this.trigger("mediachange"));else if(d){this.state="SWITCHING_MEDIA";if(this.request){if(mb(this.master.uri,a.uri)===this.request.url)return;this.request.onreadystatechange=null;this.request.abort();this.request=null}this.media_&&this.trigger("mediachanging");this.request=this.hls_.xhr({uri:mb(this.master.uri,a.uri),withCredentials:this.withCredentials},
function(l,r){if(b.request){if(l)return b.playlistRequestError(b.request,a.uri,g);b.haveMetadata(r,a.uri);"HAVE_MASTER"===g?b.trigger("loadedmetadata"):b.trigger("mediachange")}})}}},{key:"pause",value:function(){this.stopRequest();F.clearTimeout(this.mediaUpdateTimeout);"HAVE_NOTHING"===this.state&&(this.started=!1);"SWITCHING_MEDIA"===this.state?this.state=this.media_?"HAVE_METADATA":"HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")}},{key:"load",value:function(a){var b=
this;F.clearTimeout(this.mediaUpdateTimeout);var g=this.media();a?this.mediaUpdateTimeout=F.setTimeout(function(){return b.load()},g?g.targetDuration/2*1E3:5E3):this.started?g&&!g.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,g){if(a.request){a.request=null;if(b)return a.error={status:g.status,message:"HLS playlist request error at URL: "+
a.srcUrl,responseText:g.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");b=new Yg;b.push(g.responseText);b.end();a.state="HAVE_MASTER";b.manifest.uri=a.srcUrl;if(b.manifest.playlists)a.master=b.manifest,gi(a.master),hi(a.master),a.trigger("loadedplaylist"),a.request||a.media(b.manifest.playlists[0]);else return a.master={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:F.location.href,playlists:[{uri:a.srcUrl,id:0}]},a.master.playlists[a.srcUrl]=
a.master.playlists[0],a.master.playlists[0].resolvedUri=a.srcUrl,a.master.playlists[0].attributes=a.master.playlists[0].attributes||{},a.haveMetadata(g,a.srcUrl),a.trigger("loadedmetadata")}})}}]);return g}(D.EventTarget),ji=D.createTimeRange,Dl=function(b,g){var a=0;g-=b.mediaSequence;var l=b.segments[g];if(l){if("undefined"!==typeof l.start)return{result:l.start,precise:!0};if("undefined"!==typeof l.end)return{result:l.end-l.duration,precise:!0}}for(;g--;){l=b.segments[g];if("undefined"!==typeof l.end)return{result:a+
l.end,precise:!0};a+=l.duration;if("undefined"!==typeof l.start)return{result:a+l.start,precise:!0}}return{result:a,precise:!1}},ki=function(b,g,a){"undefined"===typeof g&&(g=b.mediaSequence+b.segments.length);if(g<b.mediaSequence)return 0;var l=Dl(b,g);if(l.precise)return l.result;a:{var r=0;for(var d=g-b.mediaSequence;d<b.segments.length;d++){g=b.segments[d];if("undefined"!==typeof g.start){b=g.start-r;r=!0;break a}r+=g.duration;if("undefined"!==typeof g.end){b=g.end-r;r=!0;break a}}b=-1;r=!1}return r?
b:l.result+a},li=function(b,g,a){if(!b)return 0;"number"!==typeof a&&(a=0);if("undefined"===typeof g){if(b.totalDuration)return b.totalDuration;if(!b.endList)return F.Infinity}return ki(b,g,a)},Ic=function(b,g,a){var l=0;g>a&&(a=[a,g],g=a[0],a=a[1]);if(0>g){for(;g<Math.min(0,a);g++)l+=b.targetDuration;g=0}for(;g<a;g++)l+=b.segments[g].duration;return l},mi=function(b){if(!b.segments.length)return 0;for(var g=b.segments.length-1,a=b.segments[g].duration||b.targetDuration,l=a+2*b.targetDuration;g--&&
!(a+=b.segments[g].duration,a>=l););return Math.max(0,g)},ni=function(b,g,a){if(!b||!b.segments)return null;if(b.endList)return li(b);if(null===g)return null;g=g||0;a=a?mi(b):b.segments.length;return ki(b,b.mediaSequence+a,g)},oi=function(b,g){if(0===g-Math.floor(g))return g+.1*b;for(var a=g.toString().split(".")[1].length,l=1;l<=a;l++){var r=Math.pow(10,l),d=g*r;if(0===d-Math.floor(d)||l===a)return(d+b)/r}},El=oi.bind(null,1),Fl=oi.bind(null,-1),pi=function(b){return b.excludeUntil&&b.excludeUntil>
Date.now()},cf=function(b){return b.excludeUntil&&Infinity===b.excludeUntil},xd=function(b){var g=pi(b);return!b.disabled&&!g},qi=function(b,g){return g.attributes&&g.attributes[b]},df=function(b,g){if(1===b.playlists.length)return!0;var a=g.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===b.playlists.filter(function(b){return xd(b)?(b.attributes.BANDWIDTH||0)<a:!1}).length},Ka={duration:li,seekable:function(b,g){var a=g||0;b=ni(b,g,!0);return null===b?ji():ji(a,b)},safeLiveIndex:mi,getMediaInfoForTime:function(b,
g,a,l){var r,d=b.segments.length,h=g-l;if(0>h){if(0<a)for(r=a-1;0<=r;r--){var m=b.segments[r];h+=Fl(m.duration);if(0<h)return{mediaIndex:r,startTime:l-Ic(b,a,r)}}return{mediaIndex:0,startTime:g}}if(0>a){for(r=a;0>r;r++)if(h-=b.targetDuration,0>h)return{mediaIndex:0,startTime:g};a=0}for(r=a;r<d;r++)if(m=b.segments[r],h-=El(m.duration),0>h)return{mediaIndex:r,startTime:l+Ic(b,a,r)};return{mediaIndex:d-1,startTime:g}},isEnabled:xd,isDisabled:function(b){return b.disabled},isBlacklisted:pi,isIncompatible:cf,
playlistEnd:ni,isAes:function(b){for(var g=0;g<b.segments.length;g++)if(b.segments[g].key)return!0;return!1},isFmp4:function(b){for(var g=0;g<b.segments.length;g++)if(b.segments[g].map)return!0;return!1},hasAttribute:qi,estimateSegmentRequestTime:function(b,g,a){var l=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;return qi("BANDWIDTH",a)?(b*a.attributes.BANDWIDTH-8*l)/g:NaN},isLowestEnabledRendition:df},Gl=D.xhr,Hl=D.mergeOptions,ri=function(){return function l(g,a){g=Hl({timeout:45E3},
g);var r=l.beforeRequest||D.Hls.xhr.beforeRequest;r&&"function"===typeof r&&(r=r(g))&&(g=r);var d=Gl(g,function(l,g){var r=d.response;!l&&r&&(d.responseTime=Date.now(),d.roundTripTime=d.responseTime-d.requestTime,d.bytesReceived=r.byteLength||r.length,d.bandwidth||(d.bandwidth=Math.floor(d.bytesReceived/d.roundTripTime*8E3)));g.headers&&(d.responseHeaders=g.headers);l&&"ETIMEDOUT"===l.code&&(d.timedout=!0);l||d.aborted||200===g.statusCode||206===g.statusCode||0===g.statusCode||(l=Error("XHR Failed with a response of: "+
(d&&(r||d.responseText))));a(l,d)}),h=d.abort;d.abort=function(){d.aborted=!0;return h.apply(d,arguments)};d.uri=g.uri;d.requestTime=Date.now();return d}},Il=function(b,g){b=b.toString(16);return"00".substring(0,2-b.length)+b+(g%2?" ":"")},Jl=function(b){return 32<=b&&126>b?String.fromCharCode(b):"."},si=function(b){var g={};Object.keys(b).forEach(function(a){var l=b[a];ArrayBuffer.isView(l)?g[a]={bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:g[a]=l});return g},yd=function(b){var g=
b.byterange||{length:Infinity,offset:0};return[g.length,g.offset,b.resolvedUri].join()},ti=function(b){b=Array.prototype.slice.call(b);for(var g="",a,l,r=0;r<b.length/16;r++)a=b.slice(16*r,16*r+16).map(Il).join(""),l=b.slice(16*r,16*r+16).map(Jl).join(""),g+=a+" "+l+"\n";return g},Kl=Object.freeze({createTransferableMessage:si,initSegmentId:yd,hexDump:ti,tagDump:function(b){return ti(b.bytes)},textRanges:function(b){var g="",a;for(a=0;a<b.length;a++){var l=b;var r=a;l=l.start(r)+"-"+l.end(r);g+=l+
" "}return g}}),bc=1/30,Ib=3*bc,ui=function(b,g){var a=[],l;if(b&&b.length)for(l=0;l<b.length;l++)g(b.start(l),b.end(l))&&a.push([b.start(l),b.end(l)]);return D.createTimeRanges(a)},vi=function(b,g){return ui(b,function(a,b){return a-bc<=g&&b+bc>=g})},wi=function(b,g){return ui(b,function(a){return a-bc>=g})},ef=function(b){var g=[];if(!b||!b.length)return"";for(var a=0;a<b.length;a++)g.push(b.start(a)+" => "+b.end(a));return g.join(", ")},Ll=function(b,g){var a=2<arguments.length&&void 0!==arguments[2]?
arguments[2]:1;return((b.length?b.end(b.length-1):0)-g)/a},xi=function(b){for(var g=[],a=0;a<b.length;a++)g.push({start:b.start(a),end:b.end(a)});return g},cc=function(b,g,a){var l;if(a&&a.cues)for(l=a.cues.length;l--;){var r=a.cues[l];r.startTime<=g&&r.endTime>=b&&a.removeCue(r)}},Ml=function(b){Object.defineProperties(b.frame,{id:{get:function(){D.log.warn("cue.frame.id is deprecated. Use cue.value.key instead.");return b.value.key}},value:{get:function(){D.log.warn("cue.frame.value is deprecated. Use cue.value.data instead.");
return b.value.data}},privateData:{get:function(){D.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead.");return b.value.data}}})},yi=function(b){return isNaN(b)||Infinity===Math.abs(b)?Number.MAX_VALUE:b},Nl=function(b,g,a){var l=F.WebKitDataCue||F.VTTCue;g&&g.forEach(function(a){this.inbandTextTracks_[a.stream].addCue(new l(a.startTime+this.timestampOffset,a.endTime+this.timestampOffset,a.text))},b);if(a){var r=yi(b.mediaSource_.duration);a.forEach(function(a){var b=a.cueTime+
this.timestampOffset;a.frames.forEach(function(a){var g=new l(b,b,a.value||a.url||a.data||"");g.frame=a;g.value=a;Ml(g);this.metadataTrack_.addCue(g)},this)},b);if(b.metadataTrack_&&b.metadataTrack_.cues&&b.metadataTrack_.cues.length){b=b.metadataTrack_.cues;g=[];for(a=0;a<b.length;a++)b[a]&&g.push(b[a]);var d=g.reduce(function(a,b){var l=a[b.startTime]||[];l.push(b);a[b.startTime]=l;return a},{}),h=Object.keys(d).sort(function(a,b){return Number(a)-Number(b)});h.forEach(function(a,b){var l=Number(h[b+
1])||r;d[a].forEach(function(a){a.endTime=l})})}}},Jb="undefined"!==typeof window?window:{},Nd="undefined"===typeof Symbol?"__target":Symbol(),pj=Jb.BlobBuilder||Jb.WebKitBlobBuilder||Jb.MozBlobBuilder||Jb.MSBlobBuilder,Ob=Jb.URL||Jb.webkitURL||Ob&&Ob.msURL,Nb=Jb.Worker;if(Nb){var zi=Gf("self.onmessage = function () {}"),Ai=new Uint8Array(1);try{var ff=new Nb(zi);ff.postMessage(Ai,[Ai.buffer])}catch(b){Nb=null}finally{Ob.revokeObjectURL(zi),ff&&ff.terminate()}}var Pl=new Ff("./transmuxer-worker.worker.js",
function(b,g){var a=this;(function(){var b=Math.pow(2,32)-1,g,d,h,m,q,t,v,A,x,B,G,u,w,H,sa,P;(function(){var a;h={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};if("undefined"!==typeof Uint8Array){for(a in h)h.hasOwnProperty(a)&&(h[a]=[a.charCodeAt(0),a.charCodeAt(1),
a.charCodeAt(2),a.charCodeAt(3)]);m=new Uint8Array([105,115,111,109]);t=new Uint8Array([97,118,99,49]);q=new Uint8Array([0,0,0,1]);v=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]);A=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);x={video:v,audio:A};u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]);G=new Uint8Array([0,0,0,0,0,0,0,0]);
H=w=new Uint8Array([0,0,0,0,0,0,0,0]);sa=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]);P=w;B=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})();var E=function(a){var b=[],l=0,g;for(g=1;g<arguments.length;g++)b.push(arguments[g]);for(g=b.length;g--;)l+=b[g].byteLength;var r=new Uint8Array(l+8);(new DataView(r.buffer,r.byteOffset,r.byteLength)).setUint32(0,r.byteLength);r.set(a,4);g=0;for(l=8;g<b.length;g++)r.set(b[g],l),l+=b[g].byteLength;return r};var ba=function(){return E(h.dinf,E(h.dref,u))};var R=function(a){return E(h.esds,
new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))};var ca=function(){return E(h.ftyp,m,q,m,t)};var y=function(a){return E(h.hdlr,x[a])};var Y=function(a){var b=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,a.duration&255,85,196,0,0]);a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,
b[14]=a.samplerate>>>8&255,b[15]=a.samplerate&255);return E(h.mdhd,b)};var ia=function(a){return E(h.mdia,Y(a),y(a.type),C(a))};var O=function(a){return E(h.mfhd,new Uint8Array([0,0,0,0,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255]))};var C=function(a){return E(h.minf,"video"===a.type?E(h.vmhd,B):E(h.smhd,G),ba(),Z(a))};var D=function(a){for(var b=a.length,g=[];b--;)g[b]=Ha(a[b]);return E.apply(null,[h.moov,T(4294967295)].concat(g).concat(F(a)))};var F=function(a){for(var b=a.length,g=[];b--;)g[b]=
Nc(a[b]);return E.apply(null,[h.mvex].concat(g))};var T=function(a){a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(a&4278190080)>>24,(a&16711680)>>16,(a&65280)>>8,a&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return E(h.mvhd,a)};var Kb=function(a){a=a.samples||[];var b=new Uint8Array(4+a.length),g;for(g=0;g<a.length;g++){var l=a[g].flags;b[g+4]=l.dependsOn<<4|l.isDependedOn<<
2|l.hasRedundancy}return E(h.sdtp,b)};var Z=function(a){return E(h.stbl,g(a),E(h.stts,P),E(h.stsc,H),E(h.stsz,sa),E(h.stco,w))};(function(){g=function(g){return E(h.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===g.type?a(g):b(g))};var a=function(a){var b=a.sps||[],g=a.pps||[],l=[],r=[],d;for(d=0;d<b.length;d++)l.push((b[d].byteLength&65280)>>>8),l.push(b[d].byteLength&255),l=l.concat(Array.prototype.slice.call(b[d]));for(d=0;d<g.length;d++)r.push((g[d].byteLength&65280)>>>8),r.push(g[d].byteLength&
255),r=r.concat(Array.prototype.slice.call(g[d]));return E(h.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(a.width&65280)>>8,a.width&255,(a.height&65280)>>8,a.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),E(h.avcC,new Uint8Array([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([b.length]).concat(l).concat([g.length]).concat(r))),E(h.btrt,new Uint8Array([0,
28,156,128,0,45,198,192,0,45,198,192])))};var b=function(a){return E(h.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(a.channelcount&65280)>>8,a.channelcount&255,(a.samplesize&65280)>>8,a.samplesize&255,0,0,0,0,(a.samplerate&65280)>>8,a.samplerate&255,0,0]),R(a))}})();var db=function(a){a=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,0,(a.duration&4278190080)>>24,(a.duration&16711680)>>16,(a.duration&65280)>>8,a.duration&255,
0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(a.width&65280)>>8,a.width&255,0,0,(a.height&65280)>>8,a.height&255,0,0]);return E(h.tkhd,a)};var Aa=function(a){var g=E(h.tfhd,new Uint8Array([0,0,0,58,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0]));var l=Math.floor(a.baseMediaDecodeTime/(b+1));var r=Math.floor(a.baseMediaDecodeTime%(b+1));l=E(h.tfdt,new Uint8Array([1,0,0,0,l>>>24&255,l>>>
16&255,l>>>8&255,l&255,r>>>24&255,r>>>16&255,r>>>8&255,r&255]));if("audio"===a.type)return a=d(a,92),E(h.traf,g,l,a);r=Kb(a);a=d(a,r.length+92);return E(h.traf,g,l,a,r)};var Ha=function(a){a.duration=a.duration||4294967295;return E(h.trak,db(a),ia(a))};var Nc=function(a){var b=new Uint8Array([0,0,0,0,(a.id&4278190080)>>24,(a.id&16711680)>>16,(a.id&65280)>>8,a.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);"video"!==a.type&&(b[b.length-1]=0);return E(h.trex,b)};(function(){var a=function(a,b){var g=0,l=
0,r=0,d=0;a.length&&(void 0!==a[0].duration&&(g=1),void 0!==a[0].size&&(l=2),void 0!==a[0].flags&&(r=4),void 0!==a[0].compositionTimeOffset&&(d=8));return[0,0,g|l|r|d,1,(a.length&4278190080)>>>24,(a.length&16711680)>>>16,(a.length&65280)>>>8,a.length&255,(b&4278190080)>>>24,(b&16711680)>>>16,(b&65280)>>>8,b&255]};var b=function(b,g){var l;b=b.samples||[];g+=20+16*b.length;g=a(b,g);for(l=0;l<b.length;l++){var r=b[l];g=g.concat([(r.duration&4278190080)>>>24,(r.duration&16711680)>>>16,(r.duration&65280)>>>
8,r.duration&255,(r.size&4278190080)>>>24,(r.size&16711680)>>>16,(r.size&65280)>>>8,r.size&255,r.flags.isLeading<<2|r.flags.dependsOn,r.flags.isDependedOn<<6|r.flags.hasRedundancy<<4|r.flags.paddingValue<<1|r.flags.isNonSyncSample,r.flags.degradationPriority&61440,r.flags.degradationPriority&15,(r.compositionTimeOffset&4278190080)>>>24,(r.compositionTimeOffset&16711680)>>>16,(r.compositionTimeOffset&65280)>>>8,r.compositionTimeOffset&255])}return E(h.trun,new Uint8Array(g))};var g=function(b,g){var l;
b=b.samples||[];g+=20+8*b.length;g=a(b,g);for(l=0;l<b.length;l++){var r=b[l];g=g.concat([(r.duration&4278190080)>>>24,(r.duration&16711680)>>>16,(r.duration&65280)>>>8,r.duration&255,(r.size&4278190080)>>>24,(r.size&16711680)>>>16,(r.size&65280)>>>8,r.size&255])}return E(h.trun,new Uint8Array(g))};d=function(a,l){return"audio"===a.type?g(a,l):b(a,l)}})();var J={ftyp:ca,mdat:function(a){return E(h.mdat,a)},moof:function(a,b){for(var g=[],l=b.length;l--;)g[l]=Aa(b[l]);return E.apply(null,[h.moof,O(a)].concat(g))},
moov:D,initSegment:function(a){var b=ca();a=D(a);var g=new Uint8Array(b.byteLength+a.byteLength);g.set(b);g.set(a,b.byteLength);return g}},I=function(){this.init=function(){var a={};this.on=function(b,g){a[b]||(a[b]=[]);a[b]=a[b].concat(g)};this.off=function(b,g){if(!a[b])return!1;g=a[b].indexOf(g);a[b]=a[b].slice();a[b].splice(g,1);return-1<g};this.trigger=function(b){var g,l;if(g=a[b])if(2===arguments.length){var r=g.length;for(l=0;l<r;++l)g[l].call(this,arguments[1])}else{var d=[];for(l=1;l<arguments.length;++l)d.push(arguments[l]);
r=g.length;for(l=0;l<r;++l)g[l].apply(this,d)}};this.dispose=function(){a={}}}};I.prototype.pipe=function(a){this.on("data",function(b){a.push(b)});this.on("done",function(b){a.flush(b)});return a};I.prototype.push=function(a){this.trigger("data",a)};I.prototype.flush=function(a){this.trigger("done",a)};var Ra={groupNalsIntoFrames:function(a){var b,g=[],l=[];for(b=g.byteLength=0;b<a.length;b++){var r=a[b];"access_unit_delimiter_rbsp"===r.nalUnitType?(g.length&&(g.duration=r.dts-g.dts,l.push(g)),g=
[r],g.byteLength=r.data.byteLength,g.pts=r.pts,g.dts=r.dts):("slice_layer_without_partitioning_rbsp_idr"===r.nalUnitType&&(g.keyFrame=!0),g.duration=r.dts-g.dts,g.byteLength+=r.data.byteLength,g.push(r))}l.length&&(!g.duration||0>=g.duration)&&(g.duration=l[l.length-1].duration);l.push(g);return l},groupFramesIntoGops:function(a){var b,g=[],l=[];g.byteLength=0;g.nalCount=0;g.duration=0;g.pts=a[0].pts;g.dts=a[0].dts;l.byteLength=0;l.nalCount=0;l.duration=0;l.pts=a[0].pts;l.dts=a[0].dts;for(b=0;b<a.length;b++){var r=
a[b];r.keyFrame?(g.length&&(l.push(g),l.byteLength+=g.byteLength,l.nalCount+=g.nalCount,l.duration+=g.duration),g=[r],g.nalCount=r.length,g.byteLength=r.byteLength,g.pts=r.pts,g.dts=r.dts,g.duration=r.duration):(g.duration+=r.duration,g.nalCount+=r.length,g.byteLength+=r.byteLength,g.push(r))}l.length&&0>=g.duration&&(g.duration=l[l.length-1].duration);l.byteLength+=g.byteLength;l.nalCount+=g.nalCount;l.duration+=g.duration;l.push(g);return l},extendFirstKeyFrame:function(a){if(!a[0][0].keyFrame&&
1<a.length){var b=a.shift();a.byteLength-=b.byteLength;a.nalCount-=b.nalCount;a[0][0].dts=b.dts;a[0][0].pts=b.pts;a[0][0].duration+=b.duration}return a},generateSampleTable:function(a,b){var g,l=b||0,r=[];for(b=0;b<a.length;b++){var d=a[b];for(g=0;g<d.length;g++){var h=d[g];var z={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};z.dataOffset=l;z.compositionTimeOffset=h.pts-h.dts;z.duration=h.duration;z.size=4*h.length;z.size+=h.byteLength;
h.keyFrame&&(z.flags.dependsOn=2,z.flags.isNonSyncSample=0);h=z;l+=h.size;r.push(h)}}return r},concatenateNalData:function(a){var b,g,l,r=0,d=new Uint8Array(a.byteLength+4*a.nalCount),h=new DataView(d.buffer);for(b=0;b<a.length;b++){var z=a[b];for(g=0;g<z.length;g++){var m=z[g];for(l=0;l<m.length;l++){var q=m[l];h.setUint32(r,q.data.byteLength);r+=4;d.set(q.data,r);r+=q.data.byteLength}}}return d}},Da={clearDtsInfo:function(a){delete a.minSegmentDts;delete a.maxSegmentDts;delete a.minSegmentPts;delete a.maxSegmentPts},
calculateTrackBaseMediaDecodeTime:function(a,b){var g=a.minSegmentDts;b||(g-=a.timelineStartInfo.dts);b=a.timelineStartInfo.baseMediaDecodeTime;b=Math.max(0,b+g);"audio"===a.type&&(a=a.samplerate/9E4,b=Math.floor(b*a));return b},collectDtsInfo:function(a,b){"number"===typeof b.pts&&(void 0===a.timelineStartInfo.pts&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts=void 0===a.minSegmentPts?b.pts:Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts=void 0===a.maxSegmentPts?b.pts:Math.max(a.maxSegmentPts,
b.pts));"number"===typeof b.dts&&(void 0===a.timelineStartInfo.dts&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts=void 0===a.minSegmentDts?b.dts:Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts=void 0===a.maxSegmentDts?b.dts:Math.max(a.maxSegmentDts,b.dts))}},ea={parseSei:function(a){for(var b=0,g={payloadType:-1,payloadSize:0},l=0,r=0;b<a.byteLength&&128!==a[b];){for(;255===a[b];)l+=255,b++;for(l+=a[b++];255===a[b];)r+=255,b++;r+=a[b++];if(!g.payload&&4===l){g.payloadType=l;g.payloadSize=r;g.payload=
a.subarray(b,b+r);break}b+=r;r=l=0}return g},parseUserData:function(a){return 181!==a.payload[0]||49!==(a.payload[1]<<8|a.payload[2])||"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])||3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},parseCaptionPackets:function(a,b){var g=[],l;if(!(b[0]&64))return g;var r=b[0]&31;for(l=0;l<r;l++){var d=3*l;var h={type:b[d+2]&3,pts:a};b[d+2]&4&&(h.ccData=b[d+3]<<8|b[d+4],g.push(h))}return g},discardEmulationPreventionBytes:function(a){for(var b=
a.byteLength,g=[],l=1,r;l<b-2;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(g.push(l+2),l+=2):l++;if(0===g.length)return a;b-=g.length;r=new Uint8Array(b);var d=0;for(l=0;l<b;d++,l++)d===g[0]&&(d++,g.shift()),r[l]=a[d];return r},USER_DATA_REGISTERED_ITU_T_T35:4},L=function Ol(){Ol.prototype.init.call(this);this.captionPackets_=[];this.ccStreams_=[new K(0,0),new K(0,1),new K(1,0),new K(1,1)];this.reset();this.ccStreams_.forEach(function(a){a.on("data",this.trigger.bind(this,"data"));a.on("done",this.trigger.bind(this,
"done"))},this)};L.prototype=new I;L.prototype.push=function(a){if("sei_rbsp"===a.nalUnitType){var b=ea.parseSei(a.escapedRBSP);b.payloadType===ea.USER_DATA_REGISTERED_ITU_T_T35&&(b=ea.parseUserData(b))&&(a.dts<this.latestDts_?this.ignoreNextEqualDts_=!0:a.dts===this.latestDts_&&this.ignoreNextEqualDts_?(this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1)):(b=ea.parseCaptionPackets(a.pts,b),this.captionPackets_=this.captionPackets_.concat(b),this.latestDts_!==a.dts&&(this.numSameDts_=
0),this.numSameDts_++,this.latestDts_=a.dts))}};L.prototype.flush=function(){this.captionPackets_.length?(this.captionPackets_.forEach(function(a,b){a.presortIndex=b}),this.captionPackets_.sort(function(a,b){return a.pts===b.pts?a.presortIndex-b.presortIndex:a.pts-b.pts}),this.captionPackets_.forEach(function(a){2>a.type&&this.dispatchCea608Packet(a)},this),this.captionPackets_.length=0,this.ccStreams_.forEach(function(a){a.flush()},this)):this.ccStreams_.forEach(function(a){a.flush()},this)};L.prototype.reset=
function(){this.latestDts_=null;this.ignoreNextEqualDts_=!1;this.numSameDts_=0;this.activeCea608Channel_=[null,null];this.ccStreams_.forEach(function(a){a.reset()})};L.prototype.dispatchCea608Packet=function(a){this.setsChannel1Active(a)?this.activeCea608Channel_[a.type]=0:this.setsChannel2Active(a)&&(this.activeCea608Channel_[a.type]=1);null!==this.activeCea608Channel_[a.type]&&this.ccStreams_[(a.type<<1)+this.activeCea608Channel_[a.type]].push(a)};L.prototype.setsChannel1Active=function(a){return 4096===
(a.ccData&30720)};L.prototype.setsChannel2Active=function(a){return 6144===(a.ccData&30720)};var eb={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,
568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Qa=function(a){if(null===a)return"";a=eb[a]||a;return String.fromCharCode(a)},N=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],M=function(){for(var a=
[],b=15;b--;)a.push("");return a},K=function gf(a,b){gf.prototype.init.call(this);this.field_=a||0;this.dataChannel_=b||0;this.name_="CC"+((this.field_<<1|this.dataChannel_)+1);this.setConstants();this.reset();this.push=function(a){var b=a.ccData&32639;if(b===this.lastControlCode_)this.lastControlCode_=null;else{4096===(b&61440)?this.lastControlCode_=b:b!==this.PADDING_&&(this.lastControlCode_=null);var g=b>>>8;var l=b&255;b!==this.PADDING_&&(b===this.RESUME_CAPTION_LOADING_?this.mode_="popOn":b===
this.END_OF_CAPTION_?(this.mode_="popOn",this.clearFormatting(a.pts),this.flushDisplayed(a.pts),l=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=l,this.startPts_=a.pts):b===this.ROLL_UP_2_ROWS_?(this.rollUpRows_=2,this.setRollUp(a.pts)):b===this.ROLL_UP_3_ROWS_?(this.rollUpRows_=3,this.setRollUp(a.pts)):b===this.ROLL_UP_4_ROWS_?(this.rollUpRows_=4,this.setRollUp(a.pts)):b===this.CARRIAGE_RETURN_?(this.clearFormatting(a.pts),this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=
a.pts):b===this.BACKSPACE_?"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1):b===this.ERASE_DISPLAYED_MEMORY_?(this.flushDisplayed(a.pts),this.displayed_=M()):b===this.ERASE_NON_DISPLAYED_MEMORY_?this.nonDisplayed_=M():b===this.RESUME_DIRECT_CAPTIONING_?("paintOn"!==this.mode_&&(this.flushDisplayed(a.pts),this.displayed_=M()),this.mode_="paintOn",this.startPts_=a.pts):this.isSpecialCharacter(g,
l)?(b=Qa((g&3)<<8|l),this[this.mode_](a.pts,b),this.column_++):this.isExtCharacter(g,l)?("popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),b=Qa((g&3)<<8|l),this[this.mode_](a.pts,b),this.column_++):this.isMidRowCode(g,l)?(this.clearFormatting(a.pts),this[this.mode_](a.pts," "),this.column_++,14===(l&14)&&this.addFormatting(a.pts,["i"]),1===(l&1)&&this.addFormatting(a.pts,["u"])):this.isOffsetControlCode(g,
l)?this.column_+=l&3:this.isPAC(g,l)?(g=N.indexOf(b&7968),"rollUp"===this.mode_&&this.setRollUp(a.pts,g),g!==this.row_&&(this.clearFormatting(a.pts),this.row_=g),l&1&&-1===this.formatting_.indexOf("u")&&this.addFormatting(a.pts,["u"]),16===(b&16)&&(this.column_=4*((b&14)>>1)),this.isColorPAC(l)&&14===(l&14)&&this.addFormatting(a.pts,["i"])):this.isNormalChar(g)&&(0===l&&(l=null),b=Qa(g),b+=Qa(l),this[this.mode_](a.pts,b),this.column_+=b.length))}}};K.prototype=new I;K.prototype.flushDisplayed=function(a){var b=
this.displayed_.map(function(a){return a.trim()}).join("\n").replace(/^\n+|\n+$/g,"");b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b,stream:this.name_})};K.prototype.reset=function(){this.mode_="popOn";this.startPts_=this.topRow_=0;this.displayed_=M();this.nonDisplayed_=M();this.lastControlCode_=null;this.column_=0;this.row_=14;this.rollUpRows_=2;this.formatting_=[]};K.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<
8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31);this.PADDING_=0;this.RESUME_CAPTION_LOADING_=this.CONTROL_|32;this.END_OF_CAPTION_=this.CONTROL_|47;this.ROLL_UP_2_ROWS_=this.CONTROL_|37;this.ROLL_UP_3_ROWS_=this.CONTROL_|38;this.ROLL_UP_4_ROWS_=this.CONTROL_|39;this.CARRIAGE_RETURN_=this.CONTROL_|45;this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41;this.BACKSPACE_=this.CONTROL_|33;this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44;
this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46};K.prototype.isSpecialCharacter=function(a,b){return a===this.EXT_&&48<=b&&63>=b};K.prototype.isExtCharacter=function(a,b){return(a===this.EXT_+1||a===this.EXT_+2)&&32<=b&&63>=b};K.prototype.isMidRowCode=function(a,b){return a===this.EXT_&&32<=b&&47>=b};K.prototype.isOffsetControlCode=function(a,b){return a===this.OFFSET_&&33<=b&&35>=b};K.prototype.isPAC=function(a,b){return a>=this.BASE_&&a<this.BASE_+8&&64<=b&&127>=b};K.prototype.isColorPAC=function(a){return 64<=
a&&79>=a||96<=a&&127>=a};K.prototype.isNormalChar=function(a){return 32<=a&&127>=a};K.prototype.setRollUp=function(a,b){"rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(a),this.nonDisplayed_=M(),this.displayed_=M());if(void 0!==b&&b!==this.row_)for(a=0;a<this.rollUpRows_;a++)this.displayed_[b-a]=this.displayed_[this.row_-a],this.displayed_[this.row_-a]="";void 0===b&&(b=this.row_);this.topRow_=b-this.rollUpRows_+1};K.prototype.addFormatting=function(a,b){this.formatting_=
this.formatting_.concat(b);b=b.reduce(function(a,b){return a+"<"+b+">"},"");this[this.mode_](a,b)};K.prototype.clearFormatting=function(a){if(this.formatting_.length){var b=this.formatting_.reverse().reduce(function(a,b){return a+"</"+b+">"},"");this.formatting_=[];this[this.mode_](a,b)}};K.prototype.popOn=function(a,b){this.nonDisplayed_[this.row_]+=b};K.prototype.rollUp=function(a,b){this.displayed_[this.row_]+=b};K.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]=
"";for(a=this.row_+1;15>a;a++)this.displayed_[a]="";for(a=this.topRow_;a<this.row_;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[this.row_]=""};K.prototype.paintOn=function(a,b){this.displayed_[this.row_]+=b};var ya=K,Ca={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Lb=function(a,b){var g=1;for(a>b&&(g=-1);4294967296<Math.abs(b-a);)a+=8589934592*g;return a},X=function gf(a){var b,g;gf.prototype.init.call(this);this.type_=a;this.push=function(a){a.type===this.type_&&
(void 0===g&&(g=a.dts),a.dts=Lb(a.dts,g),a.pts=Lb(a.pts,g),b=a.dts,this.trigger("data",a))};this.flush=function(){g=b;this.trigger("done")};this.discontinuity=function(){b=g=void 0}};X.prototype=new I;var oa=function(a,b,g){for(var l="";b<g;b++)l+="%"+("00"+a[b].toString(16)).slice(-2);return l},Ia=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},Ab={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(oa(a.data,1,b));a.value=decodeURIComponent(oa(a.data,
b+1,a.data.length)).replace(/\0*$/,"");break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=decodeURIComponent(oa(a.data,1,b));a.url=decodeURIComponent(oa(a.data,b+1,a.data.length));break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=unescape(oa(a.data,0,b));break}a.privateData=a.data.subarray(b+1);a.data=a.privateData}};var fa=function(a){var b=!(!a||!a.debug);a=a&&a.descriptor;var g=0,l=[],r=0,
d;fa.prototype.init.call(this);this.dispatchType=Ca.METADATA_STREAM_TYPE.toString(16);if(a)for(d=0;d<a.length;d++)this.dispatchType+=("00"+a[d].toString(16)).slice(-2);this.push=function(a){var d;if("timed-metadata"===a.type)if(a.dataAlignmentIndicator&&(r=0,l.length=0),0===l.length&&(10>a.data.length||73!==a.data[0]||68!==a.data[1]||51!==a.data[2]))b&&console.log("Skipping unrecognized metadata packet");else if(l.push(a),r+=a.data.byteLength,1===l.length&&(g=Ia(a.data.subarray(6,10)),g+=10),!(r<
g)){a={data:new Uint8Array(g),frames:[],pts:l[0].pts,dts:l[0].dts};for(d=0;d<g;)a.data.set(l[0].data.subarray(0,g-d),d),d+=l[0].data.byteLength,r-=l[0].data.byteLength,l.shift();d=10;a.data[5]&64&&(d=d+4+Ia(a.data.subarray(10,14)),g-=Ia(a.data.subarray(16,20)));do{var h=Ia(a.data.subarray(d+4,d+8));if(1>h)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");var z=String.fromCharCode(a.data[d],a.data[d+1],a.data[d+2],a.data[d+3]);z={id:z,data:a.data.subarray(d+10,d+h+10)};
z.key=z.id;if(Ab[z.id]&&(Ab[z.id](z),"com.apple.streaming.transportStreamTimestamp"===z.owner)){var m=z.data,q=(m[3]&1)<<30|m[4]<<22|m[5]<<14|m[6]<<6|m[7]>>>2;q*=4;q+=m[7]&3;z.timeStamp=q;void 0===a.pts&&void 0===a.dts&&(a.pts=z.timeStamp,a.dts=z.timeStamp);this.trigger("timestamp",z)}a.frames.push(z);d+=10;d+=h}while(d<g);this.trigger("data",a)}}};fa.prototype=new I;var Ba=function(){var a=new Uint8Array(188),b=0;Ba.prototype.init.call(this);this.push=function(g){var l=0,r=188;if(b){var d=new Uint8Array(g.byteLength+
b);d.set(a.subarray(0,b));d.set(g,b);b=0}else d=g;for(;r<d.byteLength;)71===d[l]&&71===d[r]?(this.trigger("data",d.subarray(l,r)),l+=188,r+=188):(l++,r++);l<d.byteLength&&(a.set(d.subarray(l),0),b=d.byteLength-l)};this.flush=function(){188===b&&71===a[0]&&(this.trigger("data",a),b=0);this.trigger("done")}};Ba.prototype=new I;var Xa=function(){Xa.prototype.init.call(this);var a=this;this.packetsWaitingForPmt=[];this.programMapTable=void 0;var b=function(a,b){var r=0;b.payloadUnitStartIndicator&&(r+=
a[r]+1);"pat"===b.type?g(a.subarray(r),b):l(a.subarray(r),b)};var g=function(b,g){g.section_number=b[7];g.last_section_number=b[8];a.pmtPid=(b[10]&31)<<8|b[11];g.pmtPid=a.pmtPid};var l=function(b,g){var l;if(b[5]&1){a.programMapTable={video:null,audio:null,"timed-metadata":{}};var r=3+((b[1]&15)<<8|b[2])-4;for(l=12+((b[10]&15)<<8|b[11]);l<r;){var d=b[l],h=(b[l+1]&31)<<8|b[l+2];d===Ca.H264_STREAM_TYPE&&null===a.programMapTable.video?a.programMapTable.video=h:d===Ca.ADTS_STREAM_TYPE&&null===a.programMapTable.audio?
a.programMapTable.audio=h:d===Ca.METADATA_STREAM_TYPE&&(a.programMapTable["timed-metadata"][h]=d);l+=((b[l+3]&15)<<8|b[l+4])+5}g.programMapTable=a.programMapTable}};this.push=function(a){var g={},l=4;g.payloadUnitStartIndicator=!!(a[1]&64);g.pid=a[1]&31;g.pid<<=8;g.pid|=a[2];1<(a[3]&48)>>>4&&(l+=a[l]+1);if(0===g.pid)g.type="pat",b(a.subarray(l),g),this.trigger("data",g);else if(g.pid===this.pmtPid)for(g.type="pmt",b(a.subarray(l),g),this.trigger("data",g);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,
this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([a,l,g]):this.processPes_(a,l,g)};this.processPes_=function(a,b,g){g.streamType=g.pid===this.programMapTable.video?Ca.H264_STREAM_TYPE:g.pid===this.programMapTable.audio?Ca.ADTS_STREAM_TYPE:this.programMapTable["timed-metadata"][g.pid];g.type="pes";g.data=a.subarray(b);this.trigger("data",g)}};Xa.prototype=new I;Xa.STREAM_TYPES={h264:27,adts:15};var ta=function(){var a=this,b={data:[],size:0},g={data:[],
size:0},l={data:[],size:0},r=function(b,g,l){var r=new Uint8Array(b.size),d={type:g},h,z=0;if(b.data.length&&!(9>b.size)){d.trackId=b.data[0].pid;for(h=0;h<b.data.length;h++){var m=b.data[h];r.set(m.data,z);z+=m.data.byteLength}d.packetLength=6+(r[4]<<8|r[5]);d.dataAlignmentIndicator=0!==(r[6]&4);h=r[7];h&192&&(d.pts=(r[9]&14)<<27|(r[10]&255)<<20|(r[11]&254)<<12|(r[12]&255)<<5|(r[13]&254)>>>3,d.pts*=4,d.pts+=(r[13]&6)>>>1,d.dts=d.pts,h&64&&(d.dts=(r[14]&14)<<27|(r[15]&255)<<20|(r[16]&254)<<12|(r[17]&
255)<<5|(r[18]&254)>>>3,d.dts*=4,d.dts+=(r[18]&6)>>>1));d.data=r.subarray(9+r[8]);g="video"===g||d.packetLength<=b.size;if(l||g)b.size=0,b.data.length=0;g&&a.trigger("data",d)}};ta.prototype.init.call(this);this.push=function(d){({pat:function(){},pes:function(){switch(d.streamType){case Ca.H264_STREAM_TYPE:case Ca.H264_STREAM_TYPE:var a=b;var h="video";break;case Ca.ADTS_STREAM_TYPE:a=g;h="audio";break;case Ca.METADATA_STREAM_TYPE:a=l;h="timed-metadata";break;default:return}d.payloadUnitStartIndicator&&
r(a,h,!0);a.data.push(d);a.size+=d.data.byteLength},pmt:function(){var b={type:"metadata",tracks:[]},g=d.programMapTable;null!==g.video&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.video,codec:"avc",type:"video"});null!==g.audio&&b.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+g.audio,codec:"adts",type:"audio"});a.trigger("data",b)}})[d.type]()};this.flush=function(){r(b,"video");r(g,"audio");r(l,"timed-metadata");this.trigger("done")}};ta.prototype=new I;var S={PAT_PID:0,
MP2T_PACKET_LENGTH:188,TransportPacketStream:Ba,TransportParseStream:Xa,ElementaryStream:ta,TimestampRolloverStream:X,CaptionStream:L,Cea608Stream:ya,MetadataStream:fa},U;for(U in Ca)Ca.hasOwnProperty(U)&&(S[U]=Ca[U]);var W=[96E3,88200,64E3,48E3,44100,32E3,24E3,22050,16E3,12E3,11025,8E3,7350];var V=function(){var a;V.prototype.init.call(this);this.push=function(b){var g=0,l=0;if("audio"===b.type){if(a){var r=a;a=new Uint8Array(r.byteLength+b.data.byteLength);a.set(r);a.set(b.data,r.byteLength)}else a=
b.data;for(;g+5<a.length;)if(255!==a[g]||240!==(a[g+1]&246))g++;else{r=2*(~a[g+1]&1);var d=(a[g+3]&3)<<11|a[g+4]<<3|(a[g+5]&224)>>5;var h=1024*((a[g+6]&3)+1);var z=9E4*h/W[(a[g+2]&60)>>>2];d=g+d;if(a.byteLength<d)break;this.trigger("data",{pts:b.pts+l*z,dts:b.dts+l*z,sampleCount:h,audioobjecttype:(a[g+2]>>>6&3)+1,channelcount:(a[g+2]&1)<<2|(a[g+3]&192)>>>6,samplerate:W[(a[g+2]&60)>>>2],samplingfrequencyindex:(a[g+2]&60)>>>2,samplesize:16,data:a.subarray(g+7+r,d)});if(a.byteLength===d){a=void 0;break}l++;
a=a.subarray(d)}}};this.flush=function(){this.trigger("done")}};V.prototype=new I;var Pc=function(a){var b=a.byteLength,g=0,l=0;this.length=function(){return 8*b};this.bitsAvailable=function(){return 8*b+l};this.loadWord=function(){var r=a.byteLength-b,d=new Uint8Array(4),h=Math.min(4,b);if(0===h)throw Error("no bytes available");d.set(a.subarray(r,r+h));g=(new DataView(d.buffer)).getUint32(0);l=8*h;b-=h};this.skipBits=function(a){if(!(l>a)){a-=l;var r=Math.floor(a/8);a-=8*r;b-=r;this.loadWord()}g<<=
a;l-=a};this.readBits=function(a){var r=Math.min(l,a),d=g>>>32-r;l-=r;0<l?g<<=r:0<b&&this.loadWord();r=a-r;return 0<r?d<<r|this.readBits(r):d};this.skipLeadingZeros=function(){var a;for(a=0;a<l;++a)if(0!==(g&2147483648>>>a))return g<<=a,l-=a,a;this.loadWord();return a+this.skipLeadingZeros()};this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())};this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();
return this.readBits(a+1)-1};this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)};this.readBoolean=function(){return 1===this.readBits(1)};this.readUnsignedByte=function(){return this.readBits(8)};this.loadWord()};var aa=function(){var a=0,b,g;aa.prototype.init.call(this);this.push=function(l){if(g){var r=new Uint8Array(g.byteLength+l.data.byteLength);r.set(g);r.set(l.data,g.byteLength);g=r}else g=l.data;for(;a<g.byteLength-3;a++)if(1===g[a+2]){b=a+5;break}for(;b<
g.byteLength;)switch(g[b]){case 0:if(0!==g[b-1]){b+=2;break}else if(0!==g[b-2]){b++;break}a+3!==b-2&&this.trigger("data",g.subarray(a+3,b-2));do b++;while(1!==g[b]&&b<g.length);a=b-2;b+=3;break;case 1:if(0!==g[b-1]||0!==g[b-2]){b+=3;break}this.trigger("data",g.subarray(a+3,b-2));a=b-2;b+=3;break;default:b+=3}g=g.subarray(a);b-=a;a=0};this.flush=function(){g&&3<g.byteLength&&this.trigger("data",g.subarray(a+3));g=null;a=0;this.trigger("done")}};aa.prototype=new I;var Dd={100:!0,110:!0,122:!0,244:!0,
44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0};var da=function(){var a=new aa,b,g,l;da.prototype.init.call(this);var r=this;this.push=function(r){"video"===r.type&&(b=r.trackId,g=r.pts,l=r.dts,a.push(r))};a.on("data",function(a){var d={trackId:b,pts:g,dts:l,data:a};switch(a[0]&31){case 5:d.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:d.nalUnitType="sei_rbsp";d.escapedRBSP=h(a.subarray(1));break;case 7:d.nalUnitType="seq_parameter_set_rbsp";d.escapedRBSP=h(a.subarray(1));
d.config=z(d.escapedRBSP);break;case 8:d.nalUnitType="pic_parameter_set_rbsp";break;case 9:d.nalUnitType="access_unit_delimiter_rbsp"}r.trigger("data",d)});a.on("done",function(){r.trigger("done")});this.flush=function(){a.flush()};var d=function(a,b){var g=8,l=8,r;for(r=0;r<a;r++)0!==l&&(l=b.readExpGolomb(),l=(g+l+256)%256),g=0===l?g:l};var h=function(a){for(var b=a.byteLength,g=[],l=1,r;l<b-2;)0===a[l]&&0===a[l+1]&&3===a[l+2]?(g.push(l+2),l+=2):l++;if(0===g.length)return a;b-=g.length;r=new Uint8Array(b);
var d=0;for(l=0;l<b;d++,l++)d===g[0]&&(d++,g.shift()),r[l]=a[d];return r};var z=function(a){var b=0,g=0,l=0,r=0,h=1;a=new Pc(a);var z=a.readUnsignedByte();var m=a.readUnsignedByte();var q=a.readUnsignedByte();a.skipUnsignedExpGolomb();if(Dd[z]){var t=a.readUnsignedExpGolomb();3===t&&a.skipBits(1);a.skipUnsignedExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);if(a.readBoolean()){var v=3!==t?8:12;for(t=0;t<v;t++)a.readBoolean()&&(6>t?d(16,a):d(64,a))}}a.skipUnsignedExpGolomb();t=a.readUnsignedExpGolomb();
if(0===t)a.readUnsignedExpGolomb();else if(1===t)for(a.skipBits(1),a.skipExpGolomb(),a.skipExpGolomb(),v=a.readUnsignedExpGolomb(),t=0;t<v;t++)a.skipExpGolomb();a.skipUnsignedExpGolomb();a.skipBits(1);t=a.readUnsignedExpGolomb();v=a.readUnsignedExpGolomb();var A=a.readBits(1);0===A&&a.skipBits(1);a.skipBits(1);a.readBoolean()&&(b=a.readUnsignedExpGolomb(),g=a.readUnsignedExpGolomb(),l=a.readUnsignedExpGolomb(),r=a.readUnsignedExpGolomb());if(a.readBoolean()&&a.readBoolean()){var Q=a.readUnsignedByte();
switch(Q){case 1:var x=[1,1];break;case 2:x=[12,11];break;case 3:x=[10,11];break;case 4:x=[16,11];break;case 5:x=[40,33];break;case 6:x=[24,11];break;case 7:x=[20,11];break;case 8:x=[32,11];break;case 9:x=[80,33];break;case 10:x=[18,11];break;case 11:x=[15,11];break;case 12:x=[64,33];break;case 13:x=[160,99];break;case 14:x=[4,3];break;case 15:x=[3,2];break;case 16:x=[2,1];break;case 255:x=[a.readUnsignedByte()<<8|a.readUnsignedByte(),a.readUnsignedByte()<<8|a.readUnsignedByte()]}x&&(h=x[0]/x[1])}return{profileIdc:z,
levelIdc:q,profileCompatibility:m,width:Math.ceil((16*(t+1)-2*b-2*g)*h),height:(2-A)*(v+1)*16-2*l-2*r}}};da.prototype=new I;var ha=function(){var a=new Uint8Array,b=0;ha.prototype.init.call(this);this.setTimestamp=function(a){b=a};this.parseId3TagSize=function(a,b){var g=a[b+6]<<21|a[b+7]<<14|a[b+8]<<7|a[b+9];return(a[b+5]&16)>>4?g+20:g+10};this.parseAdtsSize=function(a,b){return a[b+3]&6144|a[b+4]<<3|(a[b+5]&224)>>5};this.push=function(g){var l=0;if(a.length){var r=a.length;a=new Uint8Array(g.byteLength+
r);a.set(a.subarray(0,r));a.set(g,r)}else a=g;for(;3<=a.length-l;)if(73===a[l]&&68===a[l+1]&&51===a[l+2]){if(10>a.length-l)break;g=this.parseId3TagSize(a,l);if(g>a.length)break;r={type:"timed-metadata",data:a.subarray(l,l+g)};this.trigger("data",r);l+=g}else if(a[l]&1&&240===(a[l+1]&240)){if(7>a.length-l)break;g=this.parseAdtsSize(a,l);if(g>a.length)break;r={type:"audio",data:a.subarray(l,l+g),pts:b,dts:b};this.trigger("data",r);l+=g}else l++;a=0<a.length-l?a.subarray(l):new Uint8Array}};ha.prototype=
new I;L=[33,16,5,32,164,27];ya=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252];X=function(a){for(var b=[];a--;)b.push(0);return b};var ja=function(a){return Object.keys(a).reduce(function(b,g){b[g]=new Uint8Array(a[g].reduce(function(a,b){return a.concat(b)},[]));return b},{})}({96E3:[L,[227,64],X(154),[56]],88200:[L,[231],X(170),[56]],64E3:[L,[248,192],X(240),[56]],48E3:[L,[255,192],X(268),[55,148,128],X(54),[112]],44100:[L,[255,192],X(268),[55,163,128],X(84),[112]],32E3:[L,[255,192],X(268),[55,234],
X(226),[112]],24E3:[L,[255,192],X(268),[55,255,128],X(268),[111,112],X(126),[224]],16E3:[L,[255,192],X(268),[55,255,128],X(268),[111,255],X(269),[223,108],X(195),[1,192]],12E3:[ya,X(268),[3,127,248],X(268),[6,255,240],X(268),[13,255,224],X(268),[27,253,128],X(259),[56]],11025:[ya,X(268),[3,127,248],X(268),[6,255,240],X(268),[13,255,224],X(268),[27,255,192],X(268),[55,175,128],X(108),[112]],8E3:[ya,X(268),[3,121,16],X(47),[7]]});var Ya=function(a){return 9E4*a};var ka=function(a,b){return a*b};var ua=
function(a){return a/9E4};var la=function(a,b){return a/b};var ma={secondsToVideoTs:Ya,secondsToAudioTs:ka,videoTsToSeconds:ua,audioTsToSeconds:la,audioTsToVideoTs:function(a,b){return Ya(la(a,b))},videoTsToAudioTs:function(a,b){return ka(ua(a),b)}},na=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],pa=["width","height","profileIdc","levelIdc","profileCompatibility"];var wa=function(a){return 73===a[0]&&68===a[1]&&51===a[2]?!0:!1};var va=function(a,b){var g;if(a.length!==
b.length)return!1;for(g=0;g<a.length;g++)if(a[g]!==b[g])return!1;return!0};var za=function(a){var b,g=0;for(b=0;b<a.length;b++){var l=a[b];g+=l.data.byteLength}return g};var qa=function(a,b){var g=[],l=0,r=0,d=0,h=Infinity;b=b||{};qa.prototype.init.call(this);this.push=function(b){Da.collectDtsInfo(a,b);a&&na.forEach(function(g){a[g]=b[g]});g.push(b)};this.setEarliestDts=function(b){r=b-a.timelineStartInfo.baseMediaDecodeTime};this.setVideoBaseMediaDecodeTime=function(a){h=a};this.setAudioAppendStart=
function(a){d=a};this.flush=function(){if(0!==g.length){var r=this.trimAdtsFramesByEarliestDts_(g);a.baseMediaDecodeTime=Da.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.prefixWithSilence_(a,r);a.samples=this.generateSampleTable_(r);var d=J.mdat(this.concatenateFrameData_(r));g=[];r=J.moof(l,[a]);var h=new Uint8Array(r.byteLength+d.byteLength);l++;h.set(r);h.set(d,r.byteLength);Da.clearDtsInfo(a);this.trigger("data",{track:a,boxes:h})}this.trigger("done","AudioSegmentStream")};
this.prefixWithSilence_=function(a,b){var g,l=g=0;if(b.length){var r=ma.audioTsToVideoTs(a.baseMediaDecodeTime,a.samplerate);var z=Math.ceil(9E4/(a.samplerate/1024));d&&h&&(g=r-Math.max(d,h),g=Math.floor(g/z),l=g*z);if(!(1>g||45E3<l)){z=ja[a.samplerate];z||(z=b[0].data);for(r=0;r<g;r++)b.splice(r,0,{data:z});a.baseMediaDecodeTime-=Math.floor(ma.videoTsToAudioTs(l,a.samplerate))}}};this.trimAdtsFramesByEarliestDts_=function(b){if(a.minSegmentDts>=r)return b;a.minSegmentDts=Infinity;return b.filter(function(b){return b.dts>=
r?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):!1})};this.generateSampleTable_=function(a){var b,g=[];for(b=0;b<a.length;b++){var l=a[b];g.push({size:l.data.byteLength,duration:1024})}return g};this.concatenateFrameData_=function(a){var b,g=0,l=new Uint8Array(za(a));for(b=0;b<a.length;b++){var r=a[b];l.set(r.data,g);g+=r.data.byteLength}return l}};qa.prototype=new I;var Bb=function(a,b){var g=0,l=[],r=[],d,h;b=b||{};Bb.prototype.init.call(this);delete a.minPTS;
this.gopCache_=[];this.push=function(b){Da.collectDtsInfo(a,b);"seq_parameter_set_rbsp"!==b.nalUnitType||d||(d=b.config,a.sps=[b.data],pa.forEach(function(b){a[b]=d[b]},this));"pic_parameter_set_rbsp"!==b.nalUnitType||h||(h=b.data,a.pps=[b.data]);l.push(b)};this.flush=function(){for(var d,h,z;l.length&&"access_unit_delimiter_rbsp"!==l[0].nalUnitType;)l.shift();if(0!==l.length){d=Ra.groupNalsIntoFrames(l);d=Ra.groupFramesIntoGops(d);d[0][0].keyFrame||((h=this.getGopForFusion_(l[0],a))?(d.unshift(h),
d.byteLength+=h.byteLength,d.nalCount+=h.nalCount,d.pts=h.pts,d.dts=h.dts,d.duration+=h.duration):d=Ra.extendFirstKeyFrame(d));if(r.length){h=b.alignGopsAtEnd?this.alignGopsAtEnd_(d):this.alignGopsAtStart_(d);if(!h){this.gopCache_.unshift({gop:d.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);l=[];this.resetStream_();this.trigger("done","VideoSegmentStream");return}Da.clearDtsInfo(a);d=h}Da.collectDtsInfo(a,d);a.samples=Ra.generateSampleTable(d);h=J.mdat(Ra.concatenateNalData(d));
a.baseMediaDecodeTime=Da.calculateTrackBaseMediaDecodeTime(a,b.keepOriginalTimestamps);this.trigger("processedGopsInfo",d.map(function(a){return{pts:a.pts,dts:a.dts,byteLength:a.byteLength}}));this.gopCache_.unshift({gop:d.pop(),pps:a.pps,sps:a.sps});this.gopCache_.length=Math.min(6,this.gopCache_.length);l=[];this.trigger("baseMediaDecodeTime",a.baseMediaDecodeTime);this.trigger("timelineStartInfo",a.timelineStartInfo);d=J.moof(g,[a]);z=new Uint8Array(d.byteLength+h.byteLength);g++;z.set(d);z.set(h,
d.byteLength);this.trigger("data",{track:a,boxes:z})}this.resetStream_();this.trigger("done","VideoSegmentStream")};this.resetStream_=function(){Da.clearDtsInfo(a);h=d=void 0};this.getGopForFusion_=function(b){var g=Infinity,l;for(l=0;l<this.gopCache_.length;l++){var r=this.gopCache_[l];var d=r.gop;if(a.pps&&va(a.pps[0],r.pps[0])&&a.sps&&va(a.sps[0],r.sps[0])&&!(d.dts<a.timelineStartInfo.dts)&&(d=b.dts-d.dts-d.duration,-1E4<=d&&45E3>=d&&(!h||g>d))){var h=r;g=d}}return h?h.gop:null};this.alignGopsAtStart_=
function(a){var b,g;var l=a.byteLength;var d=a.nalCount;var h=a.duration;for(b=g=0;b<r.length&&g<a.length;){var z=r[b];var m=a[g];if(z.pts===m.pts)break;m.pts>z.pts?b++:(g++,l-=m.byteLength,d-=m.nalCount,h-=m.duration)}if(0===g)return a;if(g===a.length)return null;a=a.slice(g);a.byteLength=l;a.duration=h;a.nalCount=d;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsAtEnd_=function(a){var b;var g=r.length-1;var l=a.length-1;var d=null;for(b=!1;0<=g&&0<=l;){var h=r[g];var z=a[l];if(h.pts===z.pts){b=
!0;break}h.pts>z.pts?g--:(g===r.length-1&&(d=l),l--)}if(!b&&null===d)return null;g=b?l:d;if(0===g)return a;a=a.slice(g);g=a.reduce(function(a,b){a.byteLength+=b.byteLength;a.duration+=b.duration;a.nalCount+=b.nalCount;return a},{byteLength:0,duration:0,nalCount:0});a.byteLength=g.byteLength;a.duration=g.duration;a.nalCount=g.nalCount;a.pts=a[0].pts;a.dts=a[0].dts;return a};this.alignGopsWith=function(a){r=a}};Bb.prototype=new I;var ra=function(a,b){this.numberOfTracks=0;this.metadataStream=b;this.remuxTracks=
"undefined"!==typeof a.remux?!!a.remux:!0;this.pendingTracks=[];this.videoTrack=null;this.pendingBoxes=[];this.pendingCaptions=[];this.pendingMetadata=[];this.emittedTracks=this.pendingBytes=0;ra.prototype.init.call(this);this.push=function(a){if(a.text)return this.pendingCaptions.push(a);if(a.frames)return this.pendingMetadata.push(a);this.pendingTracks.push(a.track);this.pendingBoxes.push(a.boxes);this.pendingBytes+=a.boxes.byteLength;"video"===a.track.type&&(this.videoTrack=a.track);"audio"===
a.track.type&&(this.audioTrack=a.track)}};ra.prototype=new I;ra.prototype.flush=function(a){var b=0,g={captions:[],captionStreams:{},metadata:[],info:{}},l=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==a&&"AudioSegmentStream"!==a||this.remuxTracks)return;if(0===this.pendingTracks.length){this.emittedTracks++;this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}this.videoTrack?(l=this.videoTrack.timelineStartInfo.pts,pa.forEach(function(a){g.info[a]=
this.videoTrack[a]},this)):this.audioTrack&&(l=this.audioTrack.timelineStartInfo.pts,na.forEach(function(a){g.info[a]=this.audioTrack[a]},this));g.type=1===this.pendingTracks.length?this.pendingTracks[0].type:"combined";this.emittedTracks+=this.pendingTracks.length;a=J.initSegment(this.pendingTracks);g.initSegment=new Uint8Array(a.byteLength);g.initSegment.set(a);g.data=new Uint8Array(this.pendingBytes);for(a=0;a<this.pendingBoxes.length;a++)g.data.set(this.pendingBoxes[a],b),b+=this.pendingBoxes[a].byteLength;
for(a=0;a<this.pendingCaptions.length;a++)b=this.pendingCaptions[a],b.startTime=b.startPts-l,b.startTime/=9E4,b.endTime=b.endPts-l,b.endTime/=9E4,g.captionStreams[b.stream]=!0,g.captions.push(b);for(a=0;a<this.pendingMetadata.length;a++)b=this.pendingMetadata[a],b.cueTime=b.pts-l,b.cueTime/=9E4,g.metadata.push(b);g.metadata.dispatchType=this.metadataStream.dispatchType;this.pendingTracks.length=0;this.videoTrack=null;this.pendingBoxes.length=0;this.pendingBytes=this.pendingCaptions.length=0;this.pendingMetadata.length=
0;this.trigger("data",g);this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)};var xa=function(a){var b=this,g=!0,l,r;xa.prototype.init.call(this);a=a||{};this.baseMediaDecodeTime=a.baseMediaDecodeTime||0;this.transmuxPipeline_={};this.setupAacPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="aac";g.metadataStream=new S.MetadataStream;g.aacStream=new ha;g.audioTimestampRolloverStream=new S.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=
new S.TimestampRolloverStream("timed-metadata");g.adtsStream=new V;g.coalesceStream=new ra(a,g.metadataStream);g.headOfPipeline=g.aacStream;g.aacStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.aacStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.metadataStream.on("timestamp",function(a){g.aacStream.setTimestamp(a.timeStamp)});g.aacStream.on("data",function(l){"timed-metadata"!==l.type||g.audioSegmentStream||(r=r||{timelineStartInfo:{baseMediaDecodeTime:b.baseMediaDecodeTime},
codec:"adts",type:"audio"},g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new qa(r,a),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream))});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setupTsPipeline=function(){var g={};this.transmuxPipeline_=g;g.type="ts";g.metadataStream=new S.MetadataStream;g.packetStream=new S.TransportPacketStream;g.parseStream=new S.TransportParseStream;g.elementaryStream=new S.ElementaryStream;
g.videoTimestampRolloverStream=new S.TimestampRolloverStream("video");g.audioTimestampRolloverStream=new S.TimestampRolloverStream("audio");g.timedMetadataTimestampRolloverStream=new S.TimestampRolloverStream("timed-metadata");g.adtsStream=new V;g.h264Stream=new da;g.captionStream=new S.CaptionStream;g.coalesceStream=new ra(a,g.metadataStream);g.headOfPipeline=g.packetStream;g.packetStream.pipe(g.parseStream).pipe(g.elementaryStream);g.elementaryStream.pipe(g.videoTimestampRolloverStream).pipe(g.h264Stream);
g.elementaryStream.pipe(g.audioTimestampRolloverStream).pipe(g.adtsStream);g.elementaryStream.pipe(g.timedMetadataTimestampRolloverStream).pipe(g.metadataStream).pipe(g.coalesceStream);g.h264Stream.pipe(g.captionStream).pipe(g.coalesceStream);g.elementaryStream.on("data",function(d){var h;if("metadata"===d.type){for(h=d.tracks.length;h--;)l||"video"!==d.tracks[h].type?r||"audio"!==d.tracks[h].type||(r=d.tracks[h],r.timelineStartInfo.baseMediaDecodeTime=b.baseMediaDecodeTime):(l=d.tracks[h],l.timelineStartInfo.baseMediaDecodeTime=
b.baseMediaDecodeTime);l&&!g.videoSegmentStream&&(g.coalesceStream.numberOfTracks++,g.videoSegmentStream=new Bb(l,a),g.videoSegmentStream.on("timelineStartInfo",function(a){r&&(r.timelineStartInfo=a,g.audioSegmentStream.setEarliestDts(a.dts))}),g.videoSegmentStream.on("processedGopsInfo",b.trigger.bind(b,"gopInfo")),g.videoSegmentStream.on("baseMediaDecodeTime",function(a){r&&g.audioSegmentStream.setVideoBaseMediaDecodeTime(a)}),g.h264Stream.pipe(g.videoSegmentStream).pipe(g.coalesceStream));r&&!g.audioSegmentStream&&
(g.coalesceStream.numberOfTracks++,g.audioSegmentStream=new qa(r,a),g.adtsStream.pipe(g.audioSegmentStream).pipe(g.coalesceStream))}});g.coalesceStream.on("data",this.trigger.bind(this,"data"));g.coalesceStream.on("done",this.trigger.bind(this,"done"))};this.setBaseMediaDecodeTime=function(a){var b=this.transmuxPipeline_;this.baseMediaDecodeTime=a;r&&(r.timelineStartInfo.dts=void 0,r.timelineStartInfo.pts=void 0,Da.clearDtsInfo(r),r.timelineStartInfo.baseMediaDecodeTime=a,b.audioTimestampRolloverStream&&
b.audioTimestampRolloverStream.discontinuity());l&&(b.videoSegmentStream&&(b.videoSegmentStream.gopCache_=[],b.videoTimestampRolloverStream.discontinuity()),l.timelineStartInfo.dts=void 0,l.timelineStartInfo.pts=void 0,Da.clearDtsInfo(l),b.captionStream.reset(),l.timelineStartInfo.baseMediaDecodeTime=a);b.timedMetadataTimestampRolloverStream&&b.timedMetadataTimestampRolloverStream.discontinuity()};this.setAudioAppendStart=function(a){r&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(a)};
this.alignGopsWith=function(a){l&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(a)};this.push=function(a){if(g){var b=wa(a);b&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():b||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline();g=!1}this.transmuxPipeline_.headOfPipeline.push(a)};this.flush=function(){g=!0;this.transmuxPipeline_.headOfPipeline.flush()};this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}};
xa.prototype=new I;var Fa=function(){function a(a,b){for(var g=0;g<b.length;g++){var l=b[g];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}return function(b,g,l){g&&a(b.prototype,g);l&&a(b,l);return b}}(),Ga=function(a,b){b.on("data",function(b){var g=b.initSegment;b.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};g=b.data;b.data=g.buffer;a.postMessage({action:"data",segment:b,byteOffset:g.byteOffset,byteLength:g.byteLength},
[b.data])});if(b.captionStream)b.captionStream.on("data",function(b){a.postMessage({action:"caption",data:b})});b.on("done",function(b){a.postMessage({action:"done"})});b.on("gopInfo",function(b){a.postMessage({action:"gopInfo",gopInfo:b})})},Ea=function(){function a(b,g){if(!(this instanceof a))throw new TypeError("Cannot call a class as a function");this.options=g||{};this.self=b;this.init()}Fa(a,[{key:"init",value:function(){this.transmuxer&&this.transmuxer.dispose();this.transmuxer=new xa(this.options);
Ga(this.self,this.transmuxer)}},{key:"push",value:function(a){a=new Uint8Array(a.data,a.byteOffset,a.byteLength);this.transmuxer.push(a)}},{key:"reset",value:function(){this.init()}},{key:"setTimestampOffset",value:function(a){this.transmuxer.setBaseMediaDecodeTime(Math.round(9E4*(a.timestampOffset||0)))}},{key:"setAudioAppendStart",value:function(a){this.transmuxer.setAudioAppendStart(Math.ceil(9E4*a.appendStart))}},{key:"flush",value:function(a){this.transmuxer.flush()}},{key:"resetCaptions",value:function(){this.transmuxer.resetCaptions()}},
{key:"alignGopsWith",value:function(a){this.transmuxer.alignGopsWith(a.gopsToAlignWith.slice())}}]);return a}();return new function(a){a.onmessage=function(b){if("init"===b.data.action&&b.data.options)this.messageHandlers=new Ea(a,b.data.options);else if(this.messageHandlers||(this.messageHandlers=new Ea(a)),b.data&&b.data.action&&"init"!==b.data.action&&this.messageHandlers[b.data.action])this.messageHandlers[b.data.action](b.data)}}(a)})()}),Bi={videoCodec:"avc1",videoObjectTypeIndicator:".4d400d",
audioProfile:"2"},Ci=function(b){return b.map(function(b){return b.replace(/avc1\.(\d+)\.(\d+)/i,function(a,b,g){a=("00"+Number(b).toString(16)).slice(-2);g=("00"+Number(g).toString(16)).slice(-2);return"avc1."+a+"00"+g})})},Jc=function(){var b=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",g={codecCount:0},a;g.codecCount=b.split(",").length;g.codecCount=g.codecCount||2;if(a=/(^|\s|,)+(avc[13])([^ ,]*)/i.exec(b))g.videoCodec=a[2],g.videoObjectTypeIndicator=a[3];g.audioProfile=/(^|\s|,)+mp4a.[0-9A-Fa-f]+\.([0-9A-Fa-f]+)/i.exec(b);
g.audioProfile=g.audioProfile&&g.audioProfile[2];return g},Ql=function(b){return b.replace(/avc1\.(\d+)\.(\d+)/i,function(b){return Ci([b])[0]})},hf=function(b,g,a){return b+"/"+g+'; codecs="'+a.filter(function(a){return!!a}).join(", ")+'"'},Rl=function(b,g){if(!b.mediaGroups.AUDIO||!g)return null;b=b.mediaGroups.AUDIO[g];if(!b)return null;for(var a in b)if(g=b[a],g.default&&g.playlists)return Jc(g.playlists[0].attributes.CODECS).audioProfile;return null},Sl=function(b){var g={type:"",parameters:{}};
b=b.trim().split(";");g.type=b.shift().trim();b.forEach(function(a){var b=a.trim().split("=");1<b.length&&(a=b[0].replace(/"/g,"").trim(),b=b[1].replace(/"/g,"").trim(),g.parameters[a]=b)});return g},Tl=function(b,g,a){if("undefined"===typeof g||null===g||!b.length)return[];g=Math.ceil(9E4*(g-a+3));for(a=0;a<b.length&&!(b[a].pts>g);a++);return b.slice(a)},Ul=function(b,g,a){var l=null,r=null,d=0,h=[],m=[];if(!b&&!g)return D.createTimeRange();if(!b)return g.buffered;if(!g||a)return b.buffered;if(0===
b.buffered.length&&0===g.buffered.length)return D.createTimeRange();b=b.buffered;g=g.buffered;for(a=b.length;a--;)h.push({time:b.start(a),type:"start"}),h.push({time:b.end(a),type:"end"});for(a=g.length;a--;)h.push({time:g.start(a),type:"start"}),h.push({time:g.end(a),type:"end"});h.sort(function(a,b){return a.time-b.time});for(a=0;a<h.length;a++)"start"===h[a].type?(d++,2===d&&(l=h[a].time)):"end"===h[a].type&&(d--,1===d&&(r=h[a].time)),null!==l&&null!==r&&(m.push([l,r]),r=l=null);return D.createTimeRanges(m)},
Vl=function(b,g){var a=b.addSourceBuffer(g),l=Object.create(null);l.updating=!1;l.realBuffer_=a;b=function(b){"function"===typeof a[b]?l[b]=function(){return a[b].apply(a,arguments)}:"undefined"===typeof l[b]&&Object.defineProperty(l,b,{get:function(){return a[b]},set:function(g){return a[b]=g}})};for(var r in a)b(r);return l},Wl=function(b){function g(a,b){Pa(this,g);var l=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,D.EventTarget));l.timestampOffset_=0;l.pendingBuffers_=[];l.bufferUpdating_=
!1;l.mediaSource_=a;l.codecs_=b;l.audioCodec_=null;l.videoCodec_=null;l.audioDisabled_=!1;l.appendAudioInitSegment_=!0;l.gopBuffer_=[];l.timeMapping_=0;l.safeAppend_=11<=D.browser.IE_VERSION;a={remux:!1,alignGopsAtEnd:l.safeAppend_};l.codecs_.forEach(function(a){/mp4a\.\d+.\d+/i.test(a)?l.audioCodec_=a:/avc1\.[\da-f]+/i.test(a)&&(l.videoCodec_=a)});l.transmuxer_=new Pl;l.transmuxer_.postMessage({action:"init",options:a});l.transmuxer_.onmessage=function(a){if("data"===a.data.action)return l.data_(a);
if("done"===a.data.action)return l.done_(a);if("gopInfo"===a.data.action)return l.appendGopInfo_(a)};Object.defineProperty(l,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(a){"number"===typeof a&&0<=a&&(this.timestampOffset_=a,this.appendAudioInitSegment_=!0,this.timeMapping_=this.gopBuffer_.length=0,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:a}))}});Object.defineProperty(l,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},
set:function(a){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=a);this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=a)}});Object.defineProperty(l,"updating",{get:function(){return!!(this.bufferUpdating_||!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating)}});Object.defineProperty(l,"buffered",{get:function(){return Ul(this.videoBuffer_,this.audioBuffer_,this.audioDisabled_)}});return l}nb(g,b);Va(g,[{key:"data_",value:function(a){var b=
a.data.segment;b.data=new Uint8Array(b.data,a.data.byteOffset,a.data.byteLength);b.initSegment=new Uint8Array(b.initSegment.data,b.initSegment.byteOffset,b.initSegment.byteLength);a=this.mediaSource_.player_;if(b.captions&&b.captions.length){this.inbandTextTracks_||(this.inbandTextTracks_={});for(var g in b.captionStreams)if(!this.inbandTextTracks_[g]){a.tech_.trigger({type:"usage",name:"hls-608"});var d=a.textTracks().getTrackById(g);this.inbandTextTracks_[g]=d?d:a.addRemoteTextTrack({kind:"captions",
id:g,label:g},!1).track}}b.metadata&&b.metadata.length&&!this.metadataTrack_&&(this.metadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,this.metadataTrack_.inBandMetadataTrackDispatchType=b.metadata.dispatchType);this.pendingBuffers_.push(b)}},{key:"done_",value:function(a){"closed"===this.mediaSource_.readyState?this.pendingBuffers_.length=0:this.processPendingSegments_()}},{key:"createRealSourceBuffers_",value:function(){var a=this,b=["audio","video"];b.forEach(function(g){if(a[g+
"Codec_"]&&!a[g+"Buffer_"]){var l=null;a.mediaSource_[g+"Buffer_"]?(l=a.mediaSource_[g+"Buffer_"],l.updating=!1):(l=Vl(a.mediaSource_.nativeMediaSource_,g+'/mp4;codecs="'+a[g+"Codec_"]+'"'),a.mediaSource_[g+"Buffer_"]=l);a[g+"Buffer_"]=l;["update","updatestart","updateend"].forEach(function(r){l.addEventListener(r,function(){if("audio"!==g||!a.audioDisabled_)if("updateend"===r&&(a[g+"Buffer_"].updating=!1),b.every(function(b){return"audio"===b&&a.audioDisabled_?!0:g!==b&&a[b+"Buffer_"]&&a[b+"Buffer_"].updating?
!1:!0}))return a.trigger(r)})})}})}},{key:"appendBuffer",value:function(a){this.bufferUpdating_=!0;if(this.audioBuffer_&&this.audioBuffer_.buffered.length){var b=this.audioBuffer_.buffered;this.transmuxer_.postMessage({action:"setAudioAppendStart",appendStart:b.end(b.length-1)})}this.videoBuffer_&&this.transmuxer_.postMessage({action:"alignGopsWith",gopsToAlignWith:Tl(this.gopBuffer_,this.mediaSource_.player_?this.mediaSource_.player_.currentTime():null,this.timeMapping_)});this.transmuxer_.postMessage({action:"push",
data:a.buffer,byteOffset:a.byteOffset,byteLength:a.byteLength},[a.buffer]);this.transmuxer_.postMessage({action:"flush"})}},{key:"appendGopInfo_",value:function(a){var b=this.gopBuffer_;a=a.data.gopInfo;if(a.length)if(this.safeAppend_)b=a.slice();else{var g=a[0].pts,d=0;for(d;d<b.length&&!(b[d].pts>=g);d++);b=b.slice(0,d).concat(a)}this.gopBuffer_=b}},{key:"remove",value:function(a,b){if(this.videoBuffer_){this.videoBuffer_.updating=!0;this.videoBuffer_.remove(a,b);var g=this.gopBuffer_,l=this.timeMapping_,
d=Math.ceil(9E4*(a-l)),h=Math.ceil(9E4*(b-l));l=g.slice();for(var m=g.length;m--&&!(g[m].pts<=h););if(-1!==m){for(h=m+1;h--&&!(g[h].pts<=d););h=Math.max(h,0);l.splice(h,m-h+1)}this.gopBuffer_=l}!this.audioDisabled_&&this.audioBuffer_&&(this.audioBuffer_.updating=!0,this.audioBuffer_.remove(a,b));cc(a,b,this.metadataTrack_);if(this.inbandTextTracks_)for(var q in this.inbandTextTracks_)cc(a,b,this.inbandTextTracks_[q])}},{key:"processPendingSegments_",value:function(){var a={video:{segments:[],bytes:0},
audio:{segments:[],bytes:0},captions:[],metadata:[]};a=this.pendingBuffers_.reduce(function(a,b){var g=b.type,l=b.data,r=b.initSegment;a[g].segments.push(l);a[g].bytes+=l.byteLength;a[g].initSegment=r;b.captions&&(a.captions=a.captions.concat(b.captions));b.info&&(a[g].info=b.info);b.metadata&&(a.metadata=a.metadata.concat(b.metadata));return a},a);this.videoBuffer_||this.audioBuffer_||(0===a.video.bytes&&(this.videoCodec_=null),0===a.audio.bytes&&(this.audioCodec_=null),this.createRealSourceBuffers_());
a.audio.info&&this.mediaSource_.trigger({type:"audioinfo",info:a.audio.info});a.video.info&&this.mediaSource_.trigger({type:"videoinfo",info:a.video.info});this.appendAudioInitSegment_&&(!this.audioDisabled_&&this.audioBuffer_&&(a.audio.segments.unshift(a.audio.initSegment),a.audio.bytes+=a.audio.initSegment.byteLength),this.appendAudioInitSegment_=!1);var b=!1;this.videoBuffer_&&a.video.bytes?(a.video.segments.unshift(a.video.initSegment),a.video.bytes+=a.video.initSegment.byteLength,this.concatAndAppendSegments_(a.video,
this.videoBuffer_),Nl(this,a.captions,a.metadata)):!this.videoBuffer_||!this.audioDisabled_&&this.audioBuffer_||(b=!0);!this.audioDisabled_&&this.audioBuffer_&&this.concatAndAppendSegments_(a.audio,this.audioBuffer_);this.pendingBuffers_.length=0;b&&this.trigger("updateend");this.bufferUpdating_=!1}},{key:"concatAndAppendSegments_",value:function(a,b){var g=0,l=void 0;if(a.bytes){l=new Uint8Array(a.bytes);a.segments.forEach(function(a){l.set(a,g);g+=a.byteLength});try{b.updating=!0,b.appendBuffer(l)}catch(Q){this.mediaSource_.player_&&
this.mediaSource_.player_.error({code:-3,type:"APPEND_BUFFER_ERR",message:Q.message,originalError:Q})}}}},{key:"abort",value:function(){this.videoBuffer_&&this.videoBuffer_.abort();!this.audioDisabled_&&this.audioBuffer_&&this.audioBuffer_.abort();this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"});this.pendingBuffers_.length=0;this.bufferUpdating_=!1}}]);return g}(D.EventTarget),jf=function(b){function g(){Pa(this,g);var a=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this)),
b=void 0;a.nativeMediaSource_=new F.MediaSource;for(b in a.nativeMediaSource_)b in g.prototype||"function"!==typeof a.nativeMediaSource_[b]||(a[b]=a.nativeMediaSource_[b].bind(a.nativeMediaSource_));a.duration_=NaN;Object.defineProperty(a,"duration",{get:function(){return Infinity===this.duration_?this.duration_:this.nativeMediaSource_.duration},set:function(a){this.duration_=a;Infinity!==a&&(this.nativeMediaSource_.duration=a)}});Object.defineProperty(a,"seekable",{get:function(){return Infinity===
this.duration_?D.createTimeRanges([[0,this.nativeMediaSource_.duration]]):this.nativeMediaSource_.seekable}});Object.defineProperty(a,"readyState",{get:function(){return this.nativeMediaSource_.readyState}});Object.defineProperty(a,"activeSourceBuffers",{get:function(){return this.activeSourceBuffers_}});a.sourceBuffers=[];a.activeSourceBuffers_=[];a.updateActiveSourceBuffers_=function(){a.activeSourceBuffers_.length=0;if(1===a.sourceBuffers.length){var b=a.sourceBuffers[0];b.appendAudioInitSegment_=
!0;b.audioDisabled_=!b.audioCodec_;a.activeSourceBuffers_.push(b)}else{var g=!1,l=!0;for(b=0;b<a.player_.audioTracks().length;b++){var d=a.player_.audioTracks()[b];if(d.enabled&&"main"!==d.kind){g=!0;l=!1;break}}a.sourceBuffers.forEach(function(b,r){b.appendAudioInitSegment_=!0;if(b.videoCodec_&&b.audioCodec_)b.audioDisabled_=g;else if(b.videoCodec_&&!b.audioCodec_)b.audioDisabled_=!0,l=!1;else if(!b.videoCodec_&&b.audioCodec_&&(b.audioDisabled_=r?l:!l,b.audioDisabled_))return;a.activeSourceBuffers_.push(b)})}};
a.onPlayerMediachange_=function(){a.sourceBuffers.forEach(function(a){a.appendAudioInitSegment_=!0})};a.onHlsReset_=function(){a.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.postMessage({action:"resetCaptions"})})};a.onHlsSegmentTimeMapping_=function(b){a.sourceBuffers.forEach(function(a){return a.timeMapping_=b.mapping})};["sourceopen","sourceclose","sourceended"].forEach(function(a){this.nativeMediaSource_.addEventListener(a,this.trigger.bind(this))},a);a.on("sourceopen",function(b){if(b=
L.querySelector('[src="'+a.url_+'"]'))a.player_=D(b.parentNode),a.player_.tech_.on("hls-reset",a.onHlsReset_),a.player_.tech_.on("hls-segment-time-mapping",a.onHlsSegmentTimeMapping_),a.player_.audioTracks&&a.player_.audioTracks()&&(a.player_.audioTracks().on("change",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("addtrack",a.updateActiveSourceBuffers_),a.player_.audioTracks().on("removetrack",a.updateActiveSourceBuffers_)),a.player_.on("mediachange",a.onPlayerMediachange_)});a.on("sourceended",
function(b){b=yi(a.duration);for(var g=0;g<a.sourceBuffers.length;g++){var l=a.sourceBuffers[g];(l=l.metadataTrack_&&l.metadataTrack_.cues)&&l.length&&(l[l.length-1].endTime=b)}});a.on("sourceclose",function(a){this.sourceBuffers.forEach(function(a){a.transmuxer_&&a.transmuxer_.terminate()});this.sourceBuffers.length=0;this.player_&&(this.player_.audioTracks&&this.player_.audioTracks()&&(this.player_.audioTracks().off("change",this.updateActiveSourceBuffers_),this.player_.audioTracks().off("addtrack",
this.updateActiveSourceBuffers_),this.player_.audioTracks().off("removetrack",this.updateActiveSourceBuffers_)),this.player_.el_&&(this.player_.off("mediachange",this.onPlayerMediachange_),this.player_.tech_.off("hls-reset",this.onHlsReset_),this.player_.tech_.off("hls-segment-time-mapping",this.onHlsSegmentTimeMapping_)))});return a}nb(g,b);Va(g,[{key:"addSeekableRange_",value:function(a,b){if(Infinity!==this.duration)throw a=Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),
a.name="InvalidStateError",a.code=11,a;if(b>this.nativeMediaSource_.duration||isNaN(this.nativeMediaSource_.duration))this.nativeMediaSource_.duration=b}},{key:"addSourceBuffer",value:function(a){var b=void 0;b=Sl(a);/^(video|audio)\/mp2t$/i.test(b.type)?(a=[],b.parameters&&b.parameters.codecs&&(a=b.parameters.codecs.split(","),a=Ci(a),a=a.filter(function(a){return/mp4a\.\d+.\d+/i.test(a)||/avc1\.[\da-f]+/i.test(a)})),0===a.length&&(a=["avc1.4d400d","mp4a.40.2"]),b=new Wl(this,a),0!==this.sourceBuffers.length&&
(this.sourceBuffers[0].createRealSourceBuffers_(),b.createRealSourceBuffers_(),this.sourceBuffers[0].audioDisabled_=!0)):b=this.nativeMediaSource_.addSourceBuffer(a);this.sourceBuffers.push(b);return b}}]);return g}(D.EventTarget),Di=0;D.mediaSources={};var Ei=function(b,g){if(b=D.mediaSources[b])b.trigger({type:"sourceopen",swfId:g});else throw Error("Media Source not found (Video.js)");},kf=function(){return!!F.MediaSource&&!!F.MediaSource.isTypeSupported&&F.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},
Kc=function(){this.MediaSource={open:Ei,supportsNativeMediaSources:kf};if(kf())return new jf;throw Error("Cannot use create a virtual MediaSource for this video");};Kc.open=Ei;Kc.supportsNativeMediaSources=kf;var Fi={createObjectURL:function(b){if(b instanceof jf){var g=F.URL.createObjectURL(b.nativeMediaSource_);return b.url_=g}if(!(b instanceof jf))return g=F.URL.createObjectURL(b),b.url_=g;g="blob:vjs-media-source/"+Di;Di++;D.mediaSources[g]=b;return g}};D.MediaSource=Kc;D.URL=Fi;var Xl=D.mergeOptions,
Gi=function(b,g){var a=Xl(b,{duration:g.duration,minimumUpdatePeriod:g.minimumUpdatePeriod});for(b=0;b<g.playlists.length;b++){var l=bf(a,g.playlists[b]);l&&(a=l)}af(g,function(b,g,l,d){if(b.playlists&&b.playlists.length){var r=b.playlists[0].uri;if(b=bf(a,b.playlists[0]))a=b,a.mediaGroups[g][l][d].playlists[0]=a.playlists[r]}});return a},lf=function(b){function g(a,b,r,d){Pa(this,g);var l=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));l.hls_=b;l.withCredentials=r;if(!a)throw Error("A non-empty playlist URL or playlist is required");
l.on("minimumUpdatePeriod",function(){l.refreshXml_()});l.on("mediaupdatetimeout",function(){l.refreshMedia_()});if("string"===typeof a)return l.srcUrl=a,l.state="HAVE_NOTHING",cb(l);l.masterPlaylistLoader_=d;l.state="HAVE_METADATA";l.started=!0;l.media(a);F.setTimeout(function(){l.trigger("loadedmetadata")},0);return l}nb(g,b);Va(g,[{key:"dispose",value:function(){this.stopRequest();F.clearTimeout(this.mediaUpdateTimeout)}},{key:"stopRequest",value:function(){if(this.request){var a=this.request;
this.request=null;a.onreadystatechange=null;a.abort()}}},{key:"media",value:function(a){if(!a)return this.media_;if("HAVE_NOTHING"===this.state)throw Error("Cannot switch media playlist from "+this.state);var b=this.state;if("string"===typeof a){if(!this.master.playlists[a])throw Error("Unknown playlist URI: "+a);a=this.master.playlists[a]}var g=!this.media_||a.uri!==this.media_.uri;this.state="HAVE_METADATA";g&&(this.media_&&this.trigger("mediachanging"),this.media_=a,this.refreshMedia_(),"HAVE_MASTER"!==
b&&this.trigger("mediachange"))}},{key:"pause",value:function(){this.stopRequest();"HAVE_NOTHING"===this.state&&(this.started=!1)}},{key:"load",value:function(){this.started?this.trigger("loadedplaylist"):this.start()}},{key:"parseMasterXml",value:function(){var a=Ok(this.masterXml_,{manifestUri:this.srcUrl,clientOffset:this.clientOffset_});a.uri=this.srcUrl;for(var b=0;b<a.playlists.length;b++){var g="placeholder-uri-"+b;a.playlists[b].uri=g;a.playlists[g]=a.playlists[b]}af(a,function(b,g,l,r){b.playlists&&
b.playlists.length&&(g="placeholder-uri-"+g+"-"+l+"-"+r,b.playlists[0].uri=g,a.playlists[g]=b.playlists[0])});gi(a);hi(a);return a}},{key:"start",value:function(){var a=this;this.started=!0;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,g){if(a.request){a.request=null;if(b)return a.error={status:g.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:g.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");
a.masterXml_=g.responseText;a.masterLoaded_=g.responseHeaders&&g.responseHeaders.date?Date.parse(g.responseHeaders.date):Date.now();a.syncClientServerClock_(a.onClientServerClockSync_.bind(a))}})}},{key:"syncClientServerClock_",value:function(a){var b=this,g=Nk(eh(this.masterXml_));if(null===g)return this.clientOffset_=this.masterLoaded_-Date.now(),a();if("DIRECT"===g.method)return this.clientOffset_=g.value-Date.now(),a();this.request=this.hls_.xhr({uri:mb(this.srcUrl,g.value),method:g.method,withCredentials:this.withCredentials},
function(l,r){if(b.request){if(l)return b.clientOffset_=b.masterLoaded_-Date.now(),a();l="HEAD"===g.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):b.masterLoaded_:Date.parse(r.responseText);b.clientOffset_=l-Date.now();a()}})}},{key:"onClientServerClockSync_",value:function(){var a=this;this.master=this.parseMasterXml();this.state="HAVE_MASTER";this.trigger("loadedplaylist");this.media_||this.media(this.master.playlists[0]);F.setTimeout(function(){a.trigger("loadedmetadata")},
0);this.master.minimumUpdatePeriod&&F.setTimeout(function(){a.trigger("minimumUpdatePeriod")},this.master.minimumUpdatePeriod)}},{key:"refreshXml_",value:function(){var a=this;this.request=this.hls_.xhr({uri:this.srcUrl,withCredentials:this.withCredentials},function(b,g){if(a.request){a.request=null;if(b)return a.error={status:g.status,message:"DASH playlist request error at URL: "+a.srcUrl,responseText:g.responseText,code:2},"HAVE_NOTHING"===a.state&&(a.started=!1),a.trigger("error");a.masterXml_=
g.responseText;b=a.parseMasterXml();a.master=Gi(a.master,b);F.setTimeout(function(){a.trigger("minimumUpdatePeriod")},a.master.minimumUpdatePeriod)}})}},{key:"refreshMedia_",value:function(){var a=this,b=void 0,g=void 0;this.masterPlaylistLoader_?(b=this.masterPlaylistLoader_.master,g=this.masterPlaylistLoader_.parseMasterXml()):(b=this.master,g=this.parseMasterXml());(b=Gi(b,g))?(this.masterPlaylistLoader_?this.masterPlaylistLoader_.master=b:this.master=b,this.media_=b.playlists[this.media_.uri]):
this.trigger("playlistunchanged");this.media().endList||(this.mediaUpdateTimeout=F.setTimeout(function(){a.trigger("mediaupdatetimeout")},ii(this.media(),!!b)));this.trigger("loadedplaylist")}}]);return g}(D.EventTarget),Lc=function(b){return D.log.debug?D.log.debug.bind(D,"VHS:",b+" >"):function(){}},Yl=function(){function b(g,a,l,r){Pa(this,b);this.callbacks_=[];this.pendingCallback_=null;this.timestampOffset_=0;this.mediaSource=g;this.processedAppend_=!1;this.type_=l;this.mimeType_=a;this.logger_=
Lc("SourceUpdater["+l+"]["+a+"]");"closed"===g.readyState?g.addEventListener("sourceopen",this.createSourceBuffer_.bind(this,a,r)):this.createSourceBuffer_(a,r)}Va(b,[{key:"createSourceBuffer_",value:function(b,a){var g=this;this.sourceBuffer_=this.mediaSource.addSourceBuffer(b);this.logger_("created SourceBuffer");if(a&&(a.trigger("sourcebufferadded"),2>this.mediaSource.sourceBuffers.length)){a.on("sourcebufferadded",function(){g.start_()});return}this.start_()}},{key:"start_",value:function(){var b=
this;this.started_=!0;this.onUpdateendCallback_=function(){var a=b.pendingCallback_;b.pendingCallback_=null;b.logger_("buffered ["+ef(b.buffered())+"]");a&&a();b.runCallback_()};this.sourceBuffer_.addEventListener("updateend",this.onUpdateendCallback_);this.runCallback_()}},{key:"abort",value:function(b){var a=this;this.processedAppend_&&this.queueCallback_(function(){a.sourceBuffer_.abort()},b)}},{key:"appendBuffer",value:function(b,a){var g=this;this.processedAppend_=!0;this.queueCallback_(function(){g.sourceBuffer_.appendBuffer(b)},
a)}},{key:"buffered",value:function(){return this.sourceBuffer_?this.sourceBuffer_.buffered:D.createTimeRanges()}},{key:"remove",value:function(b,a){var g=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:ic;this.processedAppend_&&this.queueCallback_(function(){g.logger_("remove ["+b+" => "+a+"]");g.sourceBuffer_.remove(b,a)},r)}},{key:"updating",value:function(){return!this.sourceBuffer_||this.sourceBuffer_.updating||this.pendingCallback_}},{key:"timestampOffset",value:function(b){var a=
this;"undefined"!==typeof b&&(this.queueCallback_(function(){a.sourceBuffer_.timestampOffset=b}),this.timestampOffset_=b);return this.timestampOffset_}},{key:"queueCallback_",value:function(b,a){this.callbacks_.push([b.bind(this),a]);this.runCallback_()}},{key:"runCallback_",value:function(){if(!this.updating()&&this.callbacks_.length&&this.started_){var b=this.callbacks_.shift();this.pendingCallback_=b[1];b[0]()}}},{key:"dispose",value:function(){this.sourceBuffer_.removeEventListener("updateend",
this.onUpdateendCallback_);this.sourceBuffer_&&"open"===this.mediaSource.readyState&&this.sourceBuffer_.abort()}}]);return b}(),Wa={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,GOAL_BUFFER_LENGTH_RATE:1,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,BUFFER_LOW_WATER_LINE_RATE:1},Hi=function(b){var g={};b.byterange&&(b=b.byterange,g.Range="bytes="+b.offset+"-"+(b.offset+b.length-1));return g},Ii=function(b){b.forEach(function(b){b.abort()})},Zl=function(b){var g=b.target;
g=Date.now()-g.requestTime;g={bandwidth:Infinity,bytesReceived:0,roundTripTime:g||0};g.bytesReceived=b.loaded;g.bandwidth=Math.floor(g.bytesReceived/g.roundTripTime*8E3);return g},mf=function(b,g){return g.timedout?{status:g.status,message:"HLS request timed-out at URL: "+g.uri,code:-101,xhr:g}:g.aborted?{status:g.status,message:"HLS request aborted at URL: "+g.uri,code:-102,xhr:g}:b?{status:g.status,message:"HLS request errored at URL: "+g.uri,code:2,xhr:g}:null},$l=function(b,g){return function(a,
l){var r=l.response;if(a=mf(a,l))return g(a,b);if(16!==r.byteLength)return g({status:l.status,message:"Invalid HLS key at URL: "+l.uri,code:2,xhr:l},b);l=new DataView(r);b.key.bytes=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]);return g(null,b)}},am=function(b,g,a){return function(l,r){var d=r.response;if(l=mf(l,r))return a(l,b);if(0===d.byteLength)return a({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:2,xhr:r},b);b.map.bytes=new Uint8Array(r.response);
g.isInitialized()||g.init();b.map.timescales=$a.timescale(b.map.bytes);b.map.videoTrackIds=$a.videoTrackIds(b.map.bytes);return a(null,b)}},bm=function(b,g,a){return function(l,r){var d=r.response;if(l=mf(l,r))return a(l,b);if(0===d.byteLength)return a({status:r.status,message:"Empty HLS segment content at URL: "+r.uri,code:2,xhr:r},b);b.stats={bandwidth:r.bandwidth,bytesReceived:r.bytesReceived||0,roundTripTime:r.roundTripTime||0};b.key?b.encryptedBytes=new Uint8Array(r.response):b.bytes=new Uint8Array(r.response);
b.map&&b.map.bytes&&(g.isInitialized()||g.init(),(r=g.parse(b.bytes,b.map.videoTrackIds,b.map.timescales))&&r.captions&&(b.captionStreams=r.captionStreams,b.fmp4Captions=r.captions));return a(null,b)}},cm=function(b,g,a){b.addEventListener("message",function z(r){if(r.data.source===g.requestId)return b.removeEventListener("message",z),r=r.data.decrypted,g.bytes=new Uint8Array(r.bytes,r.byteOffset,r.byteLength),a(null,g)});b.postMessage(si({source:g.requestId,encrypted:g.encryptedBytes,key:g.key.bytes,
iv:g.key.iv}),[g.encryptedBytes.buffer,g.key.bytes.buffer])},dm=function(b){return b.reduce(function(b,a){return a.code>b.code?a:b})},em=function(b,g,a){var l=[],r=0;return function(d,h){d&&(Ii(b),l.push(d));r+=1;if(r===b.length)return h.endOfAllRequests=Date.now(),0<l.length?(d=dm(l),a(d,h)):h.encryptedBytes?cm(g,h,a):a(null,h)}},fm=function(b,g){return function(a){b.stats=D.mergeOptions(b.stats,Zl(a));!b.stats.firstBytesReceivedAt&&b.stats.bytesReceived&&(b.stats.firstBytesReceivedAt=Date.now());
return g(a,b)}},gm=function(b,g,a,l,r,d,h){var m=[];a=em(m,a,h);if(r.key){h=D.mergeOptions(g,{uri:r.key.resolvedUri,responseType:"arraybuffer"});var z=$l(r,a);h=b(h,z);m.push(h)}r.map&&!r.map.bytes&&(h=D.mergeOptions(g,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:Hi(r.map)}),z=am(r,l,a),h=b(h,z),m.push(h));g=D.mergeOptions(g,{uri:r.resolvedUri,responseType:"arraybuffer",headers:Hi(r)});l=bm(r,l,a);b=b(g,l);b.addEventListener("progress",fm(r,d));m.push(b);return function(){return Ii(m)}},
Ji=function(b,g){return b?(b=F.getComputedStyle(b))?b[g]:"":""},Mc=function(b,g){var a=b.slice();b.sort(function(b,r){var l=g(b,r);return 0===l?a.indexOf(b)-a.indexOf(r):l})},nf=function(b,g){var a=void 0,l=void 0;b.attributes.BANDWIDTH&&(a=b.attributes.BANDWIDTH);a=a||F.Number.MAX_VALUE;g.attributes.BANDWIDTH&&(l=g.attributes.BANDWIDTH);l=l||F.Number.MAX_VALUE;return a-l},hm=function(b,g,a,l){b=b.playlists.map(function(a){var b=a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width;var g=a.attributes.RESOLUTION&&
a.attributes.RESOLUTION.height;var l=(l=a.attributes.BANDWIDTH)||F.Number.MAX_VALUE;return{bandwidth:l,width:b,height:g,playlist:a}});Mc(b,function(a,b){return a.bandwidth-b.bandwidth});b=b.filter(function(a){return!Ka.isIncompatible(a.playlist)});var r=b.filter(function(a){return Ka.isEnabled(a.playlist)});r.length||(r=b.filter(function(a){return!Ka.isDisabled(a.playlist)}));var d=r.filter(function(a){return a.bandwidth*Wa.BANDWIDTH_VARIANCE<g}),h=d[d.length-1],m=d.filter(function(a){return a.bandwidth===
h.bandwidth})[0];d=d.filter(function(a){return a.width&&a.height});Mc(d,function(a,b){return a.width-b.width});var q=d.filter(function(b){return b.width===a&&b.height===l});h=q[q.length-1];q=q.filter(function(a){return a.bandwidth===h.bandwidth})[0];var t=void 0,v=void 0;v=void 0;q||(t=d.filter(function(b){return b.width>a||b.height>l}),v=t.filter(function(a){return a.width===t[0].width&&a.height===t[0].height}),h=v[v.length-1],v=v.filter(function(a){return a.bandwidth===h.bandwidth})[0]);return(b=
v||q||m||r[0]||b[0])?b.playlist:null},im=function(b){var g=b.currentTime,a=b.bandwidth,l=b.duration,r=b.segmentDuration,d=b.timeUntilRebuffer,h=b.currentTimeline,m=b.syncController;b=b.master.playlists.filter(function(a){return!Ka.isIncompatible(a)});var q=b.filter(Ka.isEnabled);q.length||(q=b.filter(function(a){return!Ka.isDisabled(a)}));b=q.filter(Ka.hasAttribute.bind(null,"BANDWIDTH")).map(function(b){var z=m.getSyncPoint(b,l,h,g)?1:2;z=Ka.estimateSegmentRequestTime(r,a,b)*z-d;return{playlist:b,
rebufferingImpact:z}});q=b.filter(function(a){return 0>=a.rebufferingImpact});Mc(q,function(a,b){return nf(b.playlist,a.playlist)});if(q.length)return q[0];Mc(b,function(a,b){return a.rebufferingImpact-b.rebufferingImpact});return b[0]||null},jm=function(b){var g=b.inbandTextTracks,a=b.captionArray,l=b.timestampOffset;if(a){var r=window.WebKitDataCue||window.VTTCue;a.forEach(function(a){var b=a.stream,d=a.startTime,h=a.endTime;g[b]&&(d+=l,h+=l,g[b].addCue(new r(d,h,a.text)))})}},Ki=function(b,g,a){if(!b||
!g)return!1;a=a===b.segments.length;return b.endList&&"open"===g.readyState&&a},km=function(b,g,a){return"main"===b&&g&&a?a.containsAudio||a.containsVideo?g.containsVideo&&!a.containsVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!g.containsVideo&&a.containsVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":
null:"Neither audio nor video found in segment.":null},lm=function(b){var g=b.segment,a=b.playlist,l=a.mediaSequence,r=a.segments;return["appending ["+b.mediaIndex+"] of ["+l+", "+(l+(void 0===r?[]:r).length)+"] from playlist ["+a.id+"]","["+g.start+" => "+g.end+"] in timeline ["+b.timeline+"]"].join(" ")},of=function(b){function g(a){Pa(this,g);var b=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));if(!a)throw new TypeError("Initialization settings are required");if("function"!==typeof a.currentTime)throw new TypeError("No currentTime getter specified");
if(!a.mediaSource)throw new TypeError("No MediaSource specified");b.bandwidth=a.bandwidth;b.throughput={rate:0,count:0};b.roundTrip=NaN;b.resetStats_();b.mediaIndex=null;b.hasPlayed_=a.hasPlayed;b.currentTime_=a.currentTime;b.seekable_=a.seekable;b.seeking_=a.seeking;b.duration_=a.duration;b.mediaSource_=a.mediaSource;b.hls_=a.hls;b.loaderType_=a.loaderType;b.startingMedia_=void 0;b.segmentMetadataTrack_=a.segmentMetadataTrack;b.goalBufferLength_=a.goalBufferLength;b.sourceType_=a.sourceType;b.inbandTextTracks_=
a.inbandTextTracks;b.state_="INIT";b.checkBufferTimeout_=null;b.error_=void 0;b.currentTimeline_=-1;b.pendingSegment_=null;b.mimeType_=null;b.sourceUpdater_=null;b.xhrOptions_=null;b.activeInitSegmentId_=null;b.initSegments_={};b.captionParser_=new sl;b.decrypter_=a.decrypter;b.syncController_=a.syncController;b.syncPoint_={segmentIndex:0,time:0};b.syncController_.on("syncinfoupdate",function(){return b.trigger("syncinfoupdate")});b.mediaSource_.addEventListener("sourceopen",function(){return b.ended_=
!1});b.fetchAtBuffer_=!1;b.logger_=Lc("SegmentLoader["+b.loaderType_+"]");Object.defineProperty(b,"state",{get:function(){return this.state_},set:function(a){a!==this.state_&&(this.logger_(this.state_+" -> "+a),this.state_=a)}});return b}nb(g,b);Va(g,[{key:"resetStats_",value:function(){this.mediaSecondsLoaded=this.mediaTransferDuration=this.mediaRequestsErrored=this.mediaRequestsTimedout=this.mediaRequestsAborted=this.mediaRequests=this.mediaBytesTransferred=0}},{key:"dispose",value:function(){this.state=
"DISPOSED";this.pause();this.abort_();this.sourceUpdater_&&this.sourceUpdater_.dispose();this.resetStats_();this.captionParser_.reset()}},{key:"abort",value:function(){"WAITING"!==this.state?this.pendingSegment_&&(this.pendingSegment_=null):(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_())}},{key:"abort_",value:function(){this.pendingSegment_&&this.pendingSegment_.abortRequests();this.pendingSegment_=null}},{key:"error",value:function(a){"undefined"!==typeof a&&(this.error_=
a);this.pendingSegment_=null;return this.error_}},{key:"endOfStream",value:function(){this.ended_=!0;this.pause();this.trigger("ended")}},{key:"buffered_",value:function(){return this.sourceUpdater_?this.sourceUpdater_.buffered():D.createTimeRanges()}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var g=yd(a),d=this.initSegments_[g];b&&!d&&a.bytes&&(this.initSegments_[g]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:a.bytes,
timescales:a.timescales,videoTrackIds:a.videoTrackIds});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&(this.sourceUpdater_||this.mimeType_&&"INIT"===this.state)&&!this.paused()}},{key:"load",value:function(){this.monitorBuffer_();if(this.playlist_){this.syncController_.setDateTimeMapping(this.playlist_);if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY")}}},
{key:"init_",value:function(){this.state="READY";this.sourceUpdater_=new Yl(this.mediaSource_,this.mimeType_,this.loaderType_,this.sourceBufferEmitter_);this.resetEverything();return this.monitorBuffer_()}},{key:"playlist",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(a){var g=this.playlist_,d=this.pendingSegment_;this.playlist_=a;this.xhrOptions_=b;this.hasPlayed_()||(a.syncInfo={mediaSequence:a.mediaSequence,time:0});this.logger_("playlist update ["+(g?g.id:
null)+" => "+a.id+"]");this.trigger("syncinfoupdate");if("INIT"===this.state&&this.couldBeginLoading_())return this.init_();g&&g.uri===a.uri?(b=a.mediaSequence-g.mediaSequence,this.logger_("live window shift ["+b+"]"),null!==this.mediaIndex&&(this.mediaIndex-=b),d&&(d.mediaIndex-=b,0<=d.mediaIndex&&(d.segment=a.segments[d.mediaIndex])),this.syncController_.saveExpiredSegmentInfo(g,a)):null!==this.mediaIndex&&this.resyncLoader()}}},{key:"pause",value:function(){this.checkBufferTimeout_&&(F.clearTimeout(this.checkBufferTimeout_),
this.checkBufferTimeout_=null)}},{key:"paused",value:function(){return null===this.checkBufferTimeout_}},{key:"mimeType",value:function(a,b){this.mimeType_||(this.mimeType_=a,this.sourceBufferEmitter_=b,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_())}},{key:"resetEverything",value:function(a){this.ended_=!1;this.resetLoader();this.remove(0,this.duration_(),a);this.captionParser_.clearAllCaptions();this.trigger("reseteverything")}},{key:"resetLoader",value:function(){this.fetchAtBuffer_=
!1;this.resyncLoader()}},{key:"resyncLoader",value:function(){this.syncPoint_=this.mediaIndex=null;this.abort()}},{key:"remove",value:function(a,b,g){this.sourceUpdater_&&this.sourceUpdater_.remove(a,b,g);cc(a,b,this.segmentMetadataTrack_);if(this.inbandTextTracks_)for(var l in this.inbandTextTracks_)cc(a,b,this.inbandTextTracks_[l])}},{key:"monitorBuffer_",value:function(){this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),
1)}},{key:"monitorBufferTick_",value:function(){"READY"===this.state&&this.fillBuffer_();this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_);this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),500)}},{key:"fillBuffer_",value:function(){if(!this.sourceUpdater_.updating()){this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_()));var a=this.checkBuffer_(this.buffered_(),this.playlist_,
this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(a)if(Ki(this.playlist_,this.mediaSource_,a.mediaIndex))this.endOfStream();else if(a.mediaIndex!==this.playlist_.segments.length-1||"ended"!==this.mediaSource_.readyState||this.seeking_()){if(a.timeline!==this.currentTimeline_||null!==a.startOfSegment&&a.startOfSegment<this.sourceUpdater_.timestampOffset())this.syncController_.reset(),a.timestampOffset=a.startOfSegment,this.captionParser_.clearAllCaptions();this.loadSegment_(a)}}}},
{key:"checkBuffer_",value:function(a,b,g,d,h,m){var l=0;a.length&&(l=a.end(a.length-1));a=Math.max(0,l-h);if(!b.segments.length||a>=this.goalBufferLength_()||!d&&1<=a)return null;if(null===m)return g=this.getSyncSegmentCandidate_(b),this.generateSegmentInfo_(b,g,null,!0);if(null!==g)return l=(d=b.segments[g])&&d.end?d.end:l,this.generateSegmentInfo_(b,g+1,l,!1);this.fetchAtBuffer_?(l=Ka.getMediaInfoForTime(b,l,m.segmentIndex,m.time),g=l.mediaIndex,l=l.startTime):(l=Ka.getMediaInfoForTime(b,h,m.segmentIndex,
m.time),g=l.mediaIndex,l=l.startTime);return this.generateSegmentInfo_(b,g,l,!1)}},{key:"getSyncSegmentCandidate_",value:function(a){var b=this;if(-1===this.currentTimeline_)return 0;var g=a.segments.map(function(a,b){return{timeline:a.timeline,segmentIndex:b}}).filter(function(a){return a.timeline===b.currentTimeline_});return g.length?g[Math.min(g.length-1,1)].segmentIndex:Math.max(a.segments.length-1,0)}},{key:"generateSegmentInfo_",value:function(a,b,g,d){if(0>b||b>=a.segments.length)return null;
var l=a.segments[b];return{requestId:"segment-loader-"+Math.random(),uri:l.resolvedUri,mediaIndex:b,isSyncRequest:d,startOfSegment:g,playlist:a,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:l.timeline,duration:l.duration,segment:l}}},{key:"abortRequestEarly_",value:function(a){if(this.hls_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH||1E3>Date.now()-(a.firstBytesReceivedAt||Date.now()))return!1;var b=this.currentTime_(),g=a.bandwidth,d=this.pendingSegment_.duration,
h=Ka.estimateSegmentRequestTime(d,g,this.playlist_,a.bytesReceived);a=Ll(this.buffered_(),b,this.hls_.tech_.playbackRate())-1;if(h<=a)return!1;if(b=im({master:this.hls_.playlists.master,currentTime:b,bandwidth:g,duration:this.duration_(),segmentDuration:d,timeUntilRebuffer:a,currentTimeline:this.currentTimeline_,syncController:this.syncController_})){g=h-a-b.rebufferingImpact;d=.5;a<=bc&&(d=1);if(!b.playlist||b.playlist.uri===this.playlist_.uri||g<d)return!1;this.bandwidth=b.playlist.attributes.BANDWIDTH*
Wa.BANDWIDTH_VARIANCE+1;this.abort();this.trigger("earlyabort");return!0}}},{key:"handleProgress_",value:function(a,b){this.pendingSegment_&&b.requestId===this.pendingSegment_.requestId&&!this.abortRequestEarly_(b.stats)&&this.trigger("progress")}},{key:"loadSegment_",value:function(a){this.state="WAITING";this.pendingSegment_=a;this.trimBackBuffer_(a);a.abortRequests=gm(this.hls_.xhr,this.xhrOptions_,this.decrypter_,this.captionParser_,this.createSimplifiedSegmentObj_(a),this.handleProgress_.bind(this),
this.segmentRequestFinished_.bind(this))}},{key:"trimBackBuffer_",value:function(a){var b=this.seekable_();a=this.currentTime_();var g=this.playlist_.targetDuration||10;b=b.length&&0<b.start(0)&&b.start(0)<a?b.start(0):a-30;a=Math.min(b,a-g);0<a&&this.remove(0,a)}},{key:"createSimplifiedSegmentObj_",value:function(a){var b=a.segment,g={resolvedUri:b.resolvedUri,byterange:b.byterange,requestId:a.requestId};b.key&&(a=b.key.iv||new Uint32Array([0,0,0,a.mediaIndex+a.playlist.mediaSequence]),g.key={resolvedUri:b.key.resolvedUri,
iv:a});b.map&&(g.map=this.initSegment(b.map));return g}},{key:"segmentRequestFinished_",value:function(a,b){this.mediaRequests+=1;b.stats&&(this.mediaBytesTransferred+=b.stats.bytesReceived,this.mediaTransferDuration+=b.stats.roundTripTime);this.pendingSegment_?b.requestId===this.pendingSegment_.requestId&&(a?(this.pendingSegment_=null,this.state="READY",-102===a.code?this.mediaRequestsAborted+=1:(this.pause(),-101===a.code?(this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")):
(this.mediaRequestsErrored+=1,this.error(a),this.trigger("error")))):(this.bandwidth=b.stats.bandwidth,this.roundTrip=b.stats.roundTripTime,b.map&&(b.map=this.initSegment(b.map,!0)),this.processSegmentResponse_(b))):this.mediaRequestsAborted+=1}},{key:"processSegmentResponse_",value:function(a){var b=this.pendingSegment_;b.bytes=a.bytes;a.map&&(b.segment.map.bytes=a.map.bytes);b.endOfAllRequests=a.endOfAllRequests;if(a.fmp4Captions){b=this.inbandTextTracks_;var g=this.hls_.tech_,d=a.captionStreams,
h;for(h in d)b[h]||(g.trigger({type:"usage",name:"hls-608"}),d=g.textTracks().getTrackById(h),b[h]=d?d:g.addRemoteTextTrack({kind:"captions",id:h,label:h},!1).track);jm({inbandTextTracks:this.inbandTextTracks_,captionArray:a.fmp4Captions,timestampOffset:0});this.captionParser_.clearParsedCaptions()}this.handleSegment_()}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_){var b=this.pendingSegment_,g=b.segment,d=this.syncController_.probeSegmentInfo(b);"undefined"===typeof this.startingMedia_&&
d&&(d.containsAudio||d.containsVideo)&&(this.startingMedia_={containsAudio:d.containsAudio,containsVideo:d.containsVideo});if(d=km(this.loaderType_,this.startingMedia_,d))this.error({message:d,blacklistDuration:Infinity}),this.trigger("error");else if(b.isSyncRequest)this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";else{null!==b.timestampOffset&&b.timestampOffset!==this.sourceUpdater_.timestampOffset()&&(this.sourceUpdater_.timestampOffset(b.timestampOffset),this.trigger("timestampoffset"));
d=this.syncController_.mappingForTimeline(b.timeline);null!==d&&this.trigger({type:"segmenttimemapping",mapping:d});this.state="APPENDING";if(g.map){var h=yd(g.map);this.activeInitSegmentId_&&this.activeInitSegmentId_===h||(d=this.initSegment(g.map),this.sourceUpdater_.appendBuffer(d.bytes,function(){a.activeInitSegmentId_=h}))}b.byteLength=b.bytes.byteLength;this.mediaSecondsLoaded="number"===typeof g.start&&"number"===typeof g.end?this.mediaSecondsLoaded+(g.end-g.start):this.mediaSecondsLoaded+
g.duration;this.logger_(lm(b));this.sourceUpdater_.appendBuffer(b.bytes,this.handleUpdateEnd_.bind(this))}}else this.state="READY"}},{key:"handleUpdateEnd_",value:function(){if(this.pendingSegment_){var a=this.pendingSegment_,b=a.segment,g=null!==this.mediaIndex;this.pendingSegment_=null;this.recordThroughput_(a);this.addSegmentMetadataCue_(a);this.state="READY";this.mediaIndex=a.mediaIndex;this.fetchAtBuffer_=!0;this.currentTimeline_=a.timeline;this.trigger("syncinfoupdate");b.end&&this.currentTime_()-
b.end>3*a.playlist.targetDuration?this.resetEverything():(g&&this.trigger("bandwidthupdate"),this.trigger("progress"),Ki(a.playlist,this.mediaSource_,a.mediaIndex+1)&&this.endOfStream(),this.paused()||this.monitorBuffer_())}else this.state="READY",this.paused()||this.monitorBuffer_()}},{key:"recordThroughput_",value:function(a){var b=this.throughput.rate,g=Date.now()-a.endOfAllRequests+1;this.throughput.rate+=(Math.floor(a.byteLength/g*8E3)-b)/++this.throughput.count}},{key:"addSegmentMetadataCue_",
value:function(a){if(this.segmentMetadataTrack_){var b=a.segment,g=b.start;b=b.end;if("number"===typeof g&&isFinite(g)&&"number"===typeof b&&isFinite(b)){cc(g,b,this.segmentMetadataTrack_);var d=F.WebKitDataCue||F.VTTCue;a={bandwidth:a.playlist.attributes.BANDWIDTH,resolution:a.playlist.attributes.RESOLUTION,codecs:a.playlist.attributes.CODECS,byteLength:a.byteLength,uri:a.uri,timeline:a.timeline,playlist:a.playlist.uri,start:g,end:b};var h=JSON.stringify(a);g=new d(g,b,h);g.value=a;this.segmentMetadataTrack_.addCue(g)}}}}]);
return g}(D.EventTarget),Li=new Uint8Array(["\n","\n"].map(function(b){return b.charCodeAt(0)})),mm=function(b){function g(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Pa(this,g);b=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,a,b));b.mediaSource_=null;b.subtitlesTrack_=null;return b}nb(g,b);Va(g,[{key:"buffered_",value:function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues.length)return D.createTimeRanges();var a=this.subtitlesTrack_.cues;return D.createTimeRanges([[a[0].startTime,
a[a.length-1].startTime]])}},{key:"initSegment",value:function(a){var b=1<arguments.length&&void 0!==arguments[1]?arguments[1]:!1;if(!a)return null;var g=yd(a),d=this.initSegments_[g];b&&!d&&a.bytes&&(b=new Uint8Array(Li.byteLength+a.bytes.byteLength),b.set(a.bytes),b.set(Li,a.bytes.byteLength),this.initSegments_[g]=d={resolvedUri:a.resolvedUri,byterange:a.byterange,bytes:b});return d||a}},{key:"couldBeginLoading_",value:function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()}},{key:"init_",
value:function(){this.state="READY";this.resetEverything();return this.monitorBuffer_()}},{key:"track",value:function(a){if("undefined"===typeof a)return this.subtitlesTrack_;this.subtitlesTrack_=a;"INIT"===this.state&&this.couldBeginLoading_()&&this.init_();return this.subtitlesTrack_}},{key:"remove",value:function(a,b){cc(a,b,this.subtitlesTrack_)}},{key:"fillBuffer_",value:function(){var a=this;this.syncPoint_||(this.syncPoint_=this.syncController_.getSyncPoint(this.playlist_,this.duration_(),
this.currentTimeline_,this.currentTime_()));var b=this.checkBuffer_(this.buffered_(),this.playlist_,this.mediaIndex,this.hasPlayed_(),this.currentTime_(),this.syncPoint_);if(b=this.skipEmptySegments_(b))null===this.syncController_.timestampOffsetForTimeline(b.timeline)?(this.syncController_.one("timestampoffset",function(){a.state="READY";a.paused()||a.monitorBuffer_()}),this.state="WAITING_ON_TIMELINE"):this.loadSegment_(b)}},{key:"skipEmptySegments_",value:function(a){for(;a&&a.segment.empty;)a=
this.generateSegmentInfo_(a.playlist,a.mediaIndex+1,a.startOfSegment+a.duration,a.isSyncRequest);return a}},{key:"handleSegment_",value:function(){var a=this;if(this.pendingSegment_&&this.subtitlesTrack_){this.state="APPENDING";var b=this.pendingSegment_,g=b.segment;if("function"!==typeof F.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var d=function(){a.handleSegment_()};this.state="WAITING_ON_VTTJS";this.subtitlesTrack_.tech_.one("vttjsloaded",d);this.subtitlesTrack_.tech_.one("vttjserror",
function(){a.subtitlesTrack_.tech_.off("vttjsloaded",d);a.error({message:"Error loading vtt.js"});a.state="READY";a.pause();a.trigger("error")})}else{g.requested=!0;try{this.parseVTTCues_(b)}catch(Q){return this.error({message:Q.message}),this.state="READY",this.pause(),this.trigger("error")}this.updateTimeMapping_(b,this.syncController_.timelines[b.timeline],this.playlist_);b.isSyncRequest?(this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY"):(b.byteLength=b.bytes.byteLength,
this.mediaSecondsLoaded+=g.duration,b.cues.length&&this.remove(b.cues[0].endTime,b.cues[b.cues.length-1].endTime),b.cues.forEach(function(b){a.subtitlesTrack_.addCue(b)}),this.handleUpdateEnd_())}}else this.state="READY"}},{key:"parseVTTCues_",value:function(a){var b=void 0,g=!1;"function"===typeof F.TextDecoder?b=new F.TextDecoder("utf8"):(b=F.WebVTT.StringDecoder(),g=!0);b=new F.WebVTT.Parser(F,F.vttjs,b);a.cues=[];a.timestampmap={MPEGTS:0,LOCAL:0};b.oncue=a.cues.push.bind(a.cues);b.ontimestampmap=
function(b){return a.timestampmap=b};b.onparsingerror=function(a){D.log.warn("Error encountered when parsing cues: "+a.message)};if(a.segment.map){var d=a.segment.map.bytes;g&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));b.parse(d)}d=a.bytes;g&&(d=decodeURIComponent(escape(String.fromCharCode.apply(null,d))));b.parse(d);b.flush()}},{key:"updateTimeMapping_",value:function(a,b,g){var l=a.segment;if(b)if(a.cues.length){var d=a.timestampmap,r=d.MPEGTS/9E4-d.LOCAL+b.mapping;a.cues.forEach(function(a){a.startTime+=
r;a.endTime+=r});g.syncInfo||(g.syncInfo={mediaSequence:g.mediaSequence+a.mediaIndex,time:Math.min(a.cues[0].startTime,a.cues[a.cues.length-1].startTime-l.duration)})}else l.empty=!0}}]);return g}(of),nm=function(b,g){if(b.segments)for(var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,l=void 0,d=0;d<b.segments.length;d++){var h=b.segments[d];if(!l)a:{var m=a+h.duration/2;l=g.cues;for(var q=0;q<l.length;q++){var t=l[q];if(m>=t.adStartTime&&m<=t.adEndTime){l=t;break a}}l=null}if(l){if("cueIn"in
h){l.endTime=a;l.adEndTime=a;a+=h.duration;l=null;continue}if(a<l.endTime){a+=h.duration;continue}l.endTime+=h.duration}else"cueOut"in h&&(l=new F.VTTCue(a,a+h.duration,h.cueOut),l.adStartTime=a,l.adEndTime=a+parseFloat(h.cueOut),g.addCue(l)),"cueOutCont"in h&&(m=h.cueOutCont.split("/").map(parseFloat),l=Al(m,2),m=l[0],q=l[1],l=new F.VTTCue(a,a+h.duration,""),l.adStartTime=a-m,l.adEndTime=l.adStartTime+q,g.addCue(l));a+=h.duration}},Mi=[{name:"VOD",run:function(b,g,a,l,d){return Infinity!==a?{time:0,
segmentIndex:0}:null}},{name:"ProgramDateTime",run:function(b,g,a,l,d){if(!b.datetimeToDisplayTime)return null;g=g.segments||[];l=a=null;d=d||0;for(var r=0;r<g.length;r++){var h=g[r];if(h.dateTimeObject){h=h.dateTimeObject.getTime()/1E3+b.datetimeToDisplayTime;var m=Math.abs(d-h);if(null!==l&&l<m)break;l=m;a={time:h,segmentIndex:r}}}return a}},{name:"Segment",run:function(b,g,a,l,d){b=g.segments||[];a=g=null;d=d||0;for(var r=0;r<b.length;r++){var h=b[r];if(h.timeline===l&&"undefined"!==typeof h.start){var m=
Math.abs(d-h.start);if(null!==a&&a<m)break;if(!g||null===a||a>=m)a=m,g={time:h.start,segmentIndex:r}}}return g}},{name:"Discontinuity",run:function(b,g,a,l,d){a=null;d=d||0;if(g.discontinuityStarts&&g.discontinuityStarts.length){l=null;for(var r=0;r<g.discontinuityStarts.length;r++){var h=g.discontinuityStarts[r],m=b.discontinuities[g.discontinuitySequence+r+1];if(m){var q=Math.abs(d-m.time);if(null!==l&&l<q)break;if(!a||null===l||l>=q)l=q,a={time:m.time,segmentIndex:h}}}}return a}},{name:"Playlist",
run:function(b,g,a,l,d){return g.syncInfo?{time:g.syncInfo.time,segmentIndex:g.syncInfo.mediaSequence-g.mediaSequence}:null}}],om=function(b){function g(){Pa(this,g);var a=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this));a.inspectCache_=void 0;a.timelines=[];a.discontinuities=[];a.datetimeToDisplayTime=null;a.logger_=Lc("SyncController");return a}nb(g,b);Va(g,[{key:"getSyncPoint",value:function(a,b,g,d){a=this.runStrategies_(a,b,g,d);return a.length?this.selectSyncPoint_(a,{key:"time",
value:d}):null}},{key:"getExpiredTime",value:function(a,b){if(!a||!a.segments)return null;b=this.runStrategies_(a,b,a.discontinuitySequence,0);if(!b.length)return null;b=this.selectSyncPoint_(b,{key:"segmentIndex",value:0});0<b.segmentIndex&&(b.time*=-1);return Math.abs(b.time+Ic(a,b.segmentIndex,0))}},{key:"runStrategies_",value:function(a,b,g,d){for(var l=[],r=0;r<Mi.length;r++){var h=Mi[r],m=h.run(this,a,b,g,d);m&&(m.strategy=h.name,l.push({strategy:h.name,syncPoint:m}))}return l}},{key:"selectSyncPoint_",
value:function(a,b){for(var g=a[0].syncPoint,l=Math.abs(a[0].syncPoint[b.key]-b.value),d=a[0].strategy,h=1;h<a.length;h++){var m=Math.abs(a[h].syncPoint[b.key]-b.value);m<l&&(l=m,g=a[h].syncPoint,d=a[h].strategy)}this.logger_("syncPoint for ["+b.key+": "+b.value+"] chosen with strategy"+(" ["+d+"]: [time:"+g.time+",")+(" segmentIndex:"+g.segmentIndex+"]"));return g}},{key:"saveExpiredSegmentInfo",value:function(a,b){for(var g=b.mediaSequence-a.mediaSequence-1;0<=g;g--){var l=a.segments[g];if(l&&"undefined"!==
typeof l.start){b.syncInfo={mediaSequence:a.mediaSequence+g,time:l.start};this.logger_("playlist refresh sync: [time:"+b.syncInfo.time+","+(" mediaSequence: "+b.syncInfo.mediaSequence+"]"));this.trigger("syncinfoupdate");break}}}},{key:"setDateTimeMapping",value:function(a){!this.datetimeToDisplayTime&&a.segments&&a.segments.length&&a.segments[0].dateTimeObject&&(this.datetimeToDisplayTime=-(a.segments[0].dateTimeObject.getTime()/1E3))}},{key:"reset",value:function(){this.inspectCache_=void 0}},{key:"probeSegmentInfo",
value:function(a){var b=a.segment,g=a.playlist,d;(d=b.map?this.probeMp4Segment_(a):this.probeTsSegment_(a))&&this.calculateSegmentTimeMapping_(a,d)&&(this.saveDiscontinuitySyncInfo_(a),g.syncInfo||(g.syncInfo={mediaSequence:g.mediaSequence+a.mediaIndex,time:b.start}));return d}},{key:"probeMp4Segment_",value:function(a){var b=a.segment,g=$a.timescale(b.map.bytes);g=$a.startTime(g,a.bytes);null!==a.timestampOffset&&(a.timestampOffset-=g);return{start:g,end:g+b.duration}}},{key:"probeTsSegment_",value:function(a){var b=
a.bytes;a=this.inspectCache_;var g=73===b[0]&&68===b[1]&&51===b[2]?!0:!1;if(g)b:{var d=!1,h=0,m=null;g=null;for(var q,t=0,v;3<=b.length-t;){switch(Hc.parseType(b,t)){case "timed-metadata":if(10>b.length-t){d=!0;break}q=Hc.parseId3TagSize(b,t);if(q>b.length){d=!0;break}null===g&&(v=b.subarray(t,t+q),g=Hc.parseAacTimestamp(v));t+=q;break;case "audio":if(7>b.length-t){d=!0;break}q=Hc.parseAdtsSize(b,t);if(q>b.length){d=!0;break}null===m&&(v=b.subarray(t,t+q),m=Hc.parseSampleRate(v));h++;t+=q;break;default:t++}if(d){b=
null;break b}}null===m||null===g?b=null:(b=9E4/m,b={audio:[{type:"audio",dts:g,pts:g},{type:"audio",dts:g+1024*h*b,pts:g+1024*h*b}]})}else{g={pid:null,table:null};d={};m=0;for(q=188;q<b.byteLength;)if(71===b[m]&&71===b[q]){t=b.subarray(m,q);v=ja.parseType(t,g.pid);switch(v){case "pat":g.pid||(g.pid=ja.parsePat(t));break;case "pmt":g.table||(g.table=ja.parsePmt(t))}if(g.pid&&g.table)break;m+=188;q+=188}else m++,q++;for(h in g.table)if(g.table.hasOwnProperty(h))switch(g.table[h]){case na.H264_STREAM_TYPE:d.video=
[];var A;q=b;t=g;v=d;var x=0,B=188,G=!1,u=[];for(A=0;B<q.byteLength;)if(71===q[x]&&71===q[B]){m=q.subarray(x,B);var w=ja.parseType(m,t.pid);switch(w){case "pes":var E=ja.parsePesType(m,t.table);w=ja.parsePayloadUnitStartIndicator(m);if("video"===E&&(w&&!G&&(E=ja.parsePesTime(m))&&(E.type="video",v.video.push(E),G=!0),!v.firstKeyFrame)){if(w&&0!==A){E=new Uint8Array(A);for(w=0;u.length;)A=u.shift(),E.set(A,w),w+=A.byteLength;ja.videoPacketContainsKeyFrame(E)&&(v.firstKeyFrame=ja.parsePesTime(E),v.firstKeyFrame.type=
"video");A=0}u.push(m);A+=m.byteLength}}if(G&&v.firstKeyFrame)break;x+=188;B+=188}else x++,B++;B=q.byteLength;x=B-188;for(G=!1;0<=x;)if(71===q[x]&&71===q[B]){m=q.subarray(x,B);w=ja.parseType(m,t.pid);switch(w){case "pes":if(E=ja.parsePesType(m,t.table),w=ja.parsePayloadUnitStartIndicator(m),"video"===E&&w&&(E=ja.parsePesTime(m)))E.type="video",v.video.push(E),G=!0}if(G)break;x-=188;B-=188}else x--,B--;0===d.video.length&&delete d.video;break;case na.ADTS_STREAM_TYPE:d.audio=[];m=b;q=g;t=d;v=0;x=188;
for(B=!1;x<m.byteLength;)if(71===m[v]&&71===m[x]){G=m.subarray(v,x);u=ja.parseType(G,q.pid);switch(u){case "pes":if(A=ja.parsePesType(G,q.table),u=ja.parsePayloadUnitStartIndicator(G),"audio"===A&&u&&(G=ja.parsePesTime(G)))G.type="audio",t.audio.push(G),B=!0}if(B)break;v+=188;x+=188}else v++,x++;x=m.byteLength;v=x-188;for(B=!1;0<=v;)if(71===m[v]&&71===m[x]){G=m.subarray(v,x);u=ja.parseType(G,q.pid);switch(u){case "pes":if(A=ja.parsePesType(G,q.table),u=ja.parsePayloadUnitStartIndicator(G),"audio"===
A&&u&&(G=ja.parsePesTime(G)))G.type="audio",t.audio.push(G),B=!0}if(B)break;v-=188;x-=188}else v--,x--;0===d.audio.length&&delete d.audio}b=d}b&&(b.audio||b.video)?(ul(b,a),a=b):a=null;h=b=void 0;if(!a)return null;a.video&&2===a.video.length?(this.inspectCache_=a.video[1].dts,b=a.video[0].dtsTime,h=a.video[1].dtsTime):a.audio&&2===a.audio.length&&(this.inspectCache_=a.audio[1].dts,b=a.audio[0].dtsTime,h=a.audio[1].dtsTime);return{start:b,end:h,containsVideo:a.video&&2===a.video.length,containsAudio:a.audio&&
2===a.audio.length}}},{key:"timestampOffsetForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].time}},{key:"mappingForTimeline",value:function(a){return"undefined"===typeof this.timelines[a]?null:this.timelines[a].mapping}},{key:"calculateSegmentTimeMapping_",value:function(a,b){var g=a.segment,l=this.timelines[a.timeline];if(null!==a.timestampOffset)l={time:a.startOfSegment,mapping:a.startOfSegment-b.start},this.timelines[a.timeline]=l,this.trigger("timestampoffset"),
this.logger_("time mapping for timeline "+a.timeline+": "+("[time: "+l.time+"] [mapping: "+l.mapping+"]")),g.start=a.startOfSegment,g.end=b.end+l.mapping;else if(l)g.start=b.start+l.mapping,g.end=b.end+l.mapping;else return!1;return!0}},{key:"saveDiscontinuitySyncInfo_",value:function(a){var b=a.playlist,g=a.segment;if(g.discontinuity)this.discontinuities[g.timeline]={time:g.start,accuracy:0};else if(b.discontinuityStarts&&b.discontinuityStarts.length)for(var d=0;d<b.discontinuityStarts.length;d++){var h=
b.discontinuityStarts[d],m=b.discontinuitySequence+d+1,q=h-a.mediaIndex,t=Math.abs(q);if(!this.discontinuities[m]||this.discontinuities[m].accuracy>t)h=0>q?g.start-Ic(b,a.mediaIndex,h):g.end+Ic(b,a.mediaIndex+1,h),this.discontinuities[m]={time:h,accuracy:t}}}}]);return g}(D.EventTarget),pm=new Ff("./decrypter-worker.worker.js",function(b,g){var a=this;(function(){var b=function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function");},g=function(){function a(a,b){for(var g=
0;g<b.length;g++){var l=b[g];l.enumerable=l.enumerable||!1;l.configurable=!0;"value"in l&&(l.writable=!0);Object.defineProperty(a,l.key,l)}}return function(b,g,l){g&&a(b.prototype,g);l&&a(b,l);return b}}(),d=function(a,b){if("function"!==typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof b?"undefined":ka(b)));a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}});b&&(Object.setPrototypeOf?
Object.setPrototypeOf(a,b):a.__proto__=b)},h=null,m=function(){function a(g){b(this,a);if(!h){var l=[[[],[],[],[],[]],[[],[],[],[],[]]],d=l[0],r=l[1],m=d[4],q=r[4],t,v,A,x=[],z=[],B;for(t=0;256>t;t++)z[(x[t]=t<<1^283*(t>>7))^t]=t;for(v=A=0;!m[v];v^=B||1,A=z[A]||1){var G=A^A<<1^A<<2^A<<3^A<<4;G=G>>8^G&255^99;m[v]=G;q[G]=v;var u=x[t=x[B=x[v]]];var w=16843009*u^65537*t^257*B^16843008*v;u=257*x[G]^16843008*G;for(t=0;4>t;t++)d[t][v]=u=u<<24^u>>>8,r[t][G]=w=w<<24^w>>>8}for(t=0;5>t;t++)d[t]=d[t].slice(0),
r[t]=r[t].slice(0);h=l}this._tables=[[h[0][0].slice(),h[0][1].slice(),h[0][2].slice(),h[0][3].slice(),h[0][4].slice()],[h[1][0].slice(),h[1][1].slice(),h[1][2].slice(),h[1][3].slice(),h[1][4].slice()]];l=this._tables[0][4];d=this._tables[1];v=g.length;A=1;if(4!==v&&6!==v&&8!==v)throw Error("Invalid aes key size");m=g.slice(0);q=[];this._key=[m,q];for(g=v;g<4*v+28;g++){r=m[g-1];if(0===g%v||8===v&&4===g%v)r=l[r>>>24]<<24^l[r>>16&255]<<16^l[r>>8&255]<<8^l[r&255],0===g%v&&(r=r<<8^r>>>24^A<<24,A=A<<1^
283*(A>>7));m[g]=m[g-v]^r}for(v=0;g;v++,g--)r=m[v&3?g:g-4],q[v]=4>=g||4>v?r:d[0][l[r>>>24]]^d[1][l[r>>16&255]]^d[2][l[r>>8&255]]^d[3][l[r&255]]}a.prototype.decrypt=function(a,b,g,l,d,r){var h=this._key[1];a^=h[0];l^=h[1];g^=h[2];b^=h[3];var m=h.length/4-2,q,t=4;var v=this._tables[1];var A=v[0],x=v[1],z=v[2],B=v[3],G=v[4];for(q=0;q<m;q++){v=A[a>>>24]^x[l>>16&255]^z[g>>8&255]^B[b&255]^h[t];var u=A[l>>>24]^x[g>>16&255]^z[b>>8&255]^B[a&255]^h[t+1];var w=A[g>>>24]^x[b>>16&255]^z[a>>8&255]^B[l&255]^h[t+
2];b=A[b>>>24]^x[a>>16&255]^z[l>>8&255]^B[g&255]^h[t+3];t+=4;a=v;l=u;g=w}for(q=0;4>q;q++)d[(3&-q)+r]=G[a>>>24]<<24^G[l>>16&255]<<16^G[g>>8&255]<<8^G[b&255]^h[t++],v=a,a=l,l=g,g=b,b=v};return a}(),q=function(){function a(){b(this,a);this.listeners={}}a.prototype.on=function(a,b){this.listeners[a]||(this.listeners[a]=[]);this.listeners[a].push(b)};a.prototype.off=function(a,b){if(!this.listeners[a])return!1;b=this.listeners[a].indexOf(b);this.listeners[a].splice(b,1);return-1<b};a.prototype.trigger=
function(a){var b=this.listeners[a];if(b)if(2===arguments.length)for(var g=b.length,l=0;l<g;++l)b[l].call(this,arguments[1]);else{g=Array.prototype.slice.call(arguments,1);l=b.length;for(var d=0;d<l;++d)b[d].apply(this,g)}};a.prototype.dispose=function(){this.listeners={}};a.prototype.pipe=function(a){this.on("data",function(b){a.push(b)})};return a}(),t=function(a){function g(){b(this,g);var l=a.call(this,q);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
l=!l||"object"!==("undefined"===typeof l?"undefined":ka(l))&&"function"!==typeof l?this:l;l.jobs=[];l.delay=1;l.timeout_=null;return l}d(g,a);g.prototype.processJob_=function(){this.jobs.shift()();this.timeout_=this.jobs.length?setTimeout(this.processJob_.bind(this),this.delay):null};g.prototype.push=function(a){this.jobs.push(a);this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))};return g}(q),v=function(a){return a<<24|(a&65280)<<8|(a&16711680)>>8|a>>>24},A=function(){function a(g,
l,d,r){b(this,a);var h=a.STEP,m=new Int32Array(g.buffer),q=new Uint8Array(g.byteLength);g=0;this.asyncStream_=new t;this.asyncStream_.push(this.decryptChunk_(m.subarray(g,g+h),l,d,q));for(g=h;g<m.length;g+=h)d=new Uint32Array([v(m[g-4]),v(m[g-3]),v(m[g-2]),v(m[g-1])]),this.asyncStream_.push(this.decryptChunk_(m.subarray(g,g+h),l,d,q));this.asyncStream_.push(function(){r(null,q.subarray(0,q.byteLength-q[q.byteLength-1]))})}a.prototype.decryptChunk_=function(a,b,g,l){return function(){var d=new Int32Array(a.buffer,
a.byteOffset,a.byteLength>>2),r=new m(Array.prototype.slice.call(b)),h=new Uint8Array(a.byteLength),q=new Int32Array(h.buffer),t;var A=g[0];var x=g[1];var z=g[2];var B=g[3];for(t=0;t<d.length;t+=4){var G=v(d[t]);var u=v(d[t+1]);var w=v(d[t+2]);var E=v(d[t+3]);r.decrypt(G,u,w,E,q,t);q[t]=v(q[t]^A);q[t+1]=v(q[t+1]^x);q[t+2]=v(q[t+2]^z);q[t+3]=v(q[t+3]^B);A=G;x=u;z=w;B=E}l.set(h,a.byteOffset)}};g(a,null,[{key:"STEP",get:function(){return 32E3}}]);return a}(),x=function(a){var b={};Object.keys(a).forEach(function(g){var l=
a[g];ArrayBuffer.isView(l)?b[g]={bytes:l.buffer,byteOffset:l.byteOffset,byteLength:l.byteLength}:b[g]=l});return b};return new function(a){a.onmessage=function(b){var g=b.data;b=new Uint8Array(g.encrypted.bytes,g.encrypted.byteOffset,g.encrypted.byteLength);var l=new Uint32Array(g.key.bytes,g.key.byteOffset,g.key.byteLength/4),d=new Uint32Array(g.iv.bytes,g.iv.byteOffset,g.iv.byteLength/4);new A(b,l,d,function(b,l){a.postMessage(x({source:g.source,decrypted:l}),[l.buffer])})}}(a)})()}),zd=function(b,
g){b.abort();b.pause();g&&g.activePlaylistLoader&&(g.activePlaylistLoader.pause(),g.activePlaylistLoader=null)},qm=function(b,g){return function(){var a=g.segmentLoaders,l=a[b],d=a.main;a=g.mediaTypes[b];var h=a.activeTrack();h=a.activeGroup(h);var m=a.activePlaylistLoader;zd(l,a);h&&(h.playlistLoader?(l.resyncLoader(),l=h.playlistLoader,a.activePlaylistLoader=l,l.load()):m&&d.resetEverything())}},rm=function(b,g){return function(){var a=g.segmentLoaders,l=a[b],d=a.main;a=g.mediaTypes[b];var h=a.activeTrack(),
m=a.activeGroup(h),q=a.activePlaylistLoader;zd(l,a);m&&(m.playlistLoader?q===m.playlistLoader?(l=m.playlistLoader,a.activePlaylistLoader=l,l.load()):(l.track&&l.track(h),l.resetEverything(),l=m.playlistLoader,a.activePlaylistLoader=l,l.load()):d.resetEverything())}},Ad={AUDIO:function(b,g){return function(){var a=g.mediaTypes[b],l=g.blacklistCurrentPlaylist;zd(g.segmentLoaders[b],a);var d=a.activeTrack(),h=a.activeGroup();h=(h.filter(function(a){return a.default})[0]||h[0]).id;h=a.tracks[h];if(d===
h)l({message:"Problem encountered loading the default audio track."});else{D.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var m in a.tracks)a.tracks[m].enabled=a.tracks[m]===h;a.onTrackChanged()}}},SUBTITLES:function(b,g){return function(){var a=g.segmentLoaders[b],l=g.mediaTypes[b];D.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track.");zd(a,l);if(a=l.activeTrack())a.mode="disabled";l.onTrackChanged()}}},Ni={AUDIO:function(b,
g,a){if(g){var l=a.tech,d=a.requestOptions,h=a.segmentLoaders[b];g.on("loadedmetadata",function(){var a=g.media();h.playlist(a,d);(!l.paused()||a.endList&&"none"!==l.preload())&&h.load()});g.on("loadedplaylist",function(){h.playlist(g.media(),d);l.paused()||h.load()});g.on("error",Ad[b](b,a))}},SUBTITLES:function(b,g,a){var l=a.tech,d=a.requestOptions,h=a.segmentLoaders[b],m=a.mediaTypes[b];g.on("loadedmetadata",function(){var a=g.media();h.playlist(a,d);h.track(m.activeTrack());(!l.paused()||a.endList&&
"none"!==l.preload())&&h.load()});g.on("loadedplaylist",function(){h.playlist(g.media(),d);l.paused()||h.load()});g.on("error",Ad[b](b,a))}},sm=function(b,g){return function(a){return a.attributes[b]===g}},tm=function(b){return function(g){return g.resolvedUri===b}},um={AUDIO:function(b,g){var a=g.hls,l=g.sourceType,d=g.segmentLoaders[b],h=g.requestOptions.withCredentials,m=g.master,q=m.mediaGroups;m=m.playlists;var t=g.mediaTypes[b],v=t.groups;t=t.tracks;var A=g.masterPlaylistLoader;q[b]&&0!==Object.keys(q[b]).length||
(q[b]={main:{default:{default:!0}}});for(var x in q[b]){v[x]||(v[x]=[]);var B=m.filter(sm(b,x)),G;for(G in q[b][x]){var u=q[b][x][G];B.filter(tm(u.resolvedUri)).length&&delete u.resolvedUri;var w=u.resolvedUri?new wd(u.resolvedUri,a,h):u.playlists&&"dash"===l?new lf(u.playlists[0],a,h,A):null;u=D.mergeOptions({id:G,playlistLoader:w},u);Ni[b](b,u.playlistLoader,g);v[x].push(u);if("undefined"===typeof t[G]){w=D.AudioTrack;var E=G,H=u.default?"main":"alternative";u.characteristics&&0<=u.characteristics.indexOf("public.accessibility.describes-video")&&
(H="main-desc");u=new w({id:E,kind:H,enabled:!1,language:u.language,default:u.default,label:G});t[G]=u}}}d.on("error",Ad[b](b,g))},SUBTITLES:function(b,g){var a=g.tech,l=g.hls,d=g.sourceType,h=g.segmentLoaders[b],m=g.requestOptions.withCredentials,q=g.master.mediaGroups,t=g.mediaTypes[b],v=t.groups;t=t.tracks;var A=g.masterPlaylistLoader,x;for(x in q[b]){v[x]||(v[x]=[]);for(var B in q[b][x])if(!q[b][x][B].forced){var G=q[b][x][B],u=void 0;"hls"===d?u=new wd(G.resolvedUri,l,m):"dash"===d&&(u=new lf(G.playlists[0],
l,m,A));G=D.mergeOptions({id:B,playlistLoader:u},G);Ni[b](b,G.playlistLoader,g);v[x].push(G);"undefined"===typeof t[B]&&(G=a.addRemoteTextTrack({id:B,kind:"subtitles",enabled:!1,language:G.language,label:B},!1).track,t[B]=G)}}h.on("error",Ad[b](b,g))},"CLOSED-CAPTIONS":function(b,g){var a=g.tech,l=g.master.mediaGroups,d=g.mediaTypes[b];g=d.groups;d=d.tracks;for(var h in l[b]){g[h]||(g[h]=[]);for(var m in l[b][h]){var q=l[b][h][m];q.instreamId.match(/CC\d/)&&(g[h].push(D.mergeOptions({id:m},q)),"undefined"===
typeof d[m]&&(q=a.addRemoteTextTrack({id:q.instreamId,kind:"captions",enabled:!1,language:q.language,label:m},!1).track,d[m]=q))}}}},vm=function(b,g){return function(a){var l=g.mediaTypes[b].groups,d=g.masterPlaylistLoader.media();if(!d)return null;var h=null;d.attributes[b]&&(h=l[d.attributes[b]]);h=h||l.main;return"undefined"===typeof a?h:null===a?null:h.filter(function(b){return b.id===a.id})[0]||null}},wm={AUDIO:function(b,g){return function(){var a=g.mediaTypes[b].tracks,l;for(l in a)if(a[l].enabled)return a[l];
return null}},SUBTITLES:function(b,g){return function(){var a=g.mediaTypes[b].tracks,l;for(l in a)if("showing"===a[l].mode)return a[l];return null}}},xm=function(b){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(a){um[a](a,b)});var g=b.mediaTypes,a=b.masterPlaylistLoader,l=b.tech,d=b.hls;["AUDIO","SUBTITLES"].forEach(function(a){g[a].activeGroup=vm(a,b);g[a].activeTrack=wm[a](a,b);g[a].onGroupChanged=qm(a,b);g[a].onTrackChanged=rm(a,b)});var h=g.AUDIO.activeGroup();h=(h.filter(function(a){return a.default})[0]||
h[0]).id;g.AUDIO.tracks[h].enabled=!0;g.AUDIO.onTrackChanged();a.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(a){return g[a].onGroupChanged()})});var m=function(){g.AUDIO.onTrackChanged();l.trigger({type:"usage",name:"hls-audio-change"})};l.audioTracks().addEventListener("change",m);l.remoteTextTracks().addEventListener("change",g.SUBTITLES.onTrackChanged);d.on("dispose",function(){l.audioTracks().removeEventListener("change",m);l.remoteTextTracks().removeEventListener("change",
g.SUBTITLES.onTrackChanged)});l.clearTracks("audio");for(var q in g.AUDIO.tracks)l.audioTracks().addTrack(g.AUDIO.tracks[q])},ym=function(){var b={};["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(g){b[g]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:ic,activeTrack:ic,onGroupChanged:ic,onTrackChanged:ic}});return b},xb=void 0,zm="mediaRequests mediaRequestsAborted mediaRequestsTimedout mediaRequestsErrored mediaTransferDuration mediaBytesTransferred".split(" "),Am=function(b){return this.audioSegmentLoader_[b]+
this.mainSegmentLoader_[b]},Bm=function(b){function g(a){Pa(this,g);var b=cb(this,(g.__proto__||Object.getPrototypeOf(g)).call(this)),d=a.url,h=a.withCredentials,m=a.tech,q=a.bandwidth,t=a.externHls,v=a.useCueTags,A=a.blacklistDuration,x=a.enableLowInitialPlaylist,B=a.sourceType,G=a.seekTo;if(!d)throw Error("A non-empty playlist URL is required");xb=t;b.withCredentials=h;b.tech_=m;b.hls_=m.hls;b.seekTo_=G;b.sourceType_=B;b.useCueTags_=v;b.blacklistDuration=A;b.enableLowInitialPlaylist=x;b.useCueTags_&&
(b.cueTagsTrack_=b.tech_.addTextTrack("metadata","ad-cues"),b.cueTagsTrack_.inBandMetadataTrackDispatchType="");b.requestOptions_={withCredentials:b.withCredentials,timeout:null};b.mediaTypes_=ym();b.mediaSource=new D.MediaSource;b.mediaSource.addEventListener("sourceopen",b.handleSourceOpen_.bind(b));b.seekable_=D.createTimeRanges();b.hasPlayed_=function(){return!1};b.syncController_=new om(a);b.segmentMetadataTrack_=m.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track;b.decrypter_=
new pm;b.inbandTextTracks_={};h={hls:b.hls_,mediaSource:b.mediaSource,currentTime:b.tech_.currentTime.bind(b.tech_),seekable:function(){return b.seekable()},seeking:function(){return b.tech_.seeking()},duration:function(){return b.mediaSource.duration},hasPlayed:function(){return b.hasPlayed_()},goalBufferLength:function(){return b.goalBufferLength()},bandwidth:q,syncController:b.syncController_,decrypter:b.decrypter_,sourceType:b.sourceType_,inbandTextTracks:b.inbandTextTracks_};b.masterPlaylistLoader_=
"dash"===b.sourceType_?new lf(d,b.hls_,b.withCredentials):new wd(d,b.hls_,b.withCredentials);b.setupMasterPlaylistLoaderListeners_();b.mainSegmentLoader_=new of(D.mergeOptions(h,{segmentMetadataTrack:b.segmentMetadataTrack_,loaderType:"main"}),a);b.audioSegmentLoader_=new of(D.mergeOptions(h,{loaderType:"audio"}),a);b.subtitleSegmentLoader_=new mm(D.mergeOptions(h,{loaderType:"vtt"}),a);b.setupSegmentLoaderListeners_();zm.forEach(function(a){b[a+"_"]=Am.bind(b,a)});b.logger_=Lc("MPC");b.masterPlaylistLoader_.load();
return b}nb(g,b);Va(g,[{key:"setupMasterPlaylistLoaderListeners_",value:function(){var a=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var b=a.masterPlaylistLoader_.media(),g=1500*a.masterPlaylistLoader_.targetDuration;df(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=g;b.endList&&"none"!==a.tech_.preload()&&(a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.mainSegmentLoader_.load());xm({sourceType:a.sourceType_,
segmentLoaders:{AUDIO:a.audioSegmentLoader_,SUBTITLES:a.subtitleSegmentLoader_,main:a.mainSegmentLoader_},tech:a.tech_,requestOptions:a.requestOptions_,masterPlaylistLoader:a.masterPlaylistLoader_,hls:a.hls_,master:a.master(),mediaTypes:a.mediaTypes_,blacklistCurrentPlaylist:a.blacklistCurrentPlaylist.bind(a)});a.triggerPresenceUsage_(a.master(),b);try{a.setupSourceBuffers_()}catch(z){return D.log.warn("Failed to create SourceBuffers",z),a.mediaSource.endOfStream("decode")}a.setupFirstPlay();a.trigger("selectedinitialmedia")});
this.masterPlaylistLoader_.on("loadedplaylist",function(){var b=a.masterPlaylistLoader_.media();if(b){if(a.useCueTags_&&a.updateAdCues_(b),a.mainSegmentLoader_.playlist(b,a.requestOptions_),a.updateDuration(),a.tech_.paused()||(a.mainSegmentLoader_.load(),a.audioSegmentLoader_&&a.audioSegmentLoader_.load()),!b.endList){var g=function(){var b=a.seekable();0!==b.length&&a.mediaSource.addSeekableRange_(b.start(0),b.end(0))};if(Infinity!==a.duration())a.tech_.one("durationchange",function Q(){if(Infinity===
a.duration())g();else a.tech_.one("durationchange",Q)});else g()}}else a.excludeUnsupportedVariants_(),b=void 0,a.enableLowInitialPlaylist&&(b=a.selectInitialPlaylist()),b||(b=a.selectPlaylist()),a.initialMedia_=b,a.masterPlaylistLoader_.media(a.initialMedia_)});this.masterPlaylistLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.masterPlaylistLoader_.error)});this.masterPlaylistLoader_.on("mediachanging",function(){a.mainSegmentLoader_.abort();a.mainSegmentLoader_.pause()});this.masterPlaylistLoader_.on("mediachange",
function(){var b=a.masterPlaylistLoader_.media(),g=1500*a.masterPlaylistLoader_.targetDuration;df(a.masterPlaylistLoader_.master,a.masterPlaylistLoader_.media())?a.requestOptions_.timeout=0:a.requestOptions_.timeout=g;a.mainSegmentLoader_.playlist(b,a.requestOptions_);a.mainSegmentLoader_.load();a.tech_.trigger({type:"mediachange",bubbles:!0})});this.masterPlaylistLoader_.on("playlistunchanged",function(){var b=a.masterPlaylistLoader_.media();a.stuckAtPlaylistEnd_(b)&&(a.blacklistCurrentPlaylist({message:"Playlist no longer updating."}),
a.tech_.trigger("playliststuck"))});this.masterPlaylistLoader_.on("renditiondisabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})});this.masterPlaylistLoader_.on("renditionenabled",function(){a.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})}},{key:"triggerPresenceUsage_",value:function(a,b){a=a.mediaGroups||{};var g=!0,l=Object.keys(a.AUDIO),d;for(d in a.AUDIO)for(var h in a.AUDIO[d])a.AUDIO[d][h].uri||(g=!1);g&&this.tech_.trigger({type:"usage",name:"hls-demuxed"});
Object.keys(a.SUBTITLES).length&&this.tech_.trigger({type:"usage",name:"hls-webvtt"});xb.Playlist.isAes(b)&&this.tech_.trigger({type:"usage",name:"hls-aes"});xb.Playlist.isFmp4(b)&&this.tech_.trigger({type:"usage",name:"hls-fmp4"});l.length&&1<Object.keys(a.AUDIO[l[0]]).length&&this.tech_.trigger({type:"usage",name:"hls-alternate-audio"});this.useCueTags_&&this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"})}},{key:"setupSegmentLoaderListeners_",value:function(){var a=this;this.mainSegmentLoader_.on("bandwidthupdate",
function(){var b=a.selectPlaylist(),g=a.masterPlaylistLoader_.media(),d=a.tech_.buffered();d=d.length?d.end(d.length-1)-a.tech_.currentTime():0;var h=a.bufferLowWaterLine();(!g.endList||a.duration()<Wa.MAX_BUFFER_LOW_WATER_LINE||b.attributes.BANDWIDTH<g.attributes.BANDWIDTH||d>=h)&&a.masterPlaylistLoader_.media(b);a.tech_.trigger("bandwidthupdate")});this.mainSegmentLoader_.on("progress",function(){a.trigger("progress")});this.mainSegmentLoader_.on("error",function(){a.blacklistCurrentPlaylist(a.mainSegmentLoader_.error())});
this.mainSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("timestampoffset",function(){a.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})});this.audioSegmentLoader_.on("syncinfoupdate",function(){a.onSyncInfoUpdate_()});this.mainSegmentLoader_.on("ended",function(){a.onEndOfStream()});this.mainSegmentLoader_.on("earlyabort",function(){a.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},
120)});this.mainSegmentLoader_.on("reseteverything",function(){a.tech_.trigger("hls-reset")});this.mainSegmentLoader_.on("segmenttimemapping",function(b){a.tech_.trigger({type:"hls-segment-time-mapping",mapping:b.mapping})});this.audioSegmentLoader_.on("ended",function(){a.onEndOfStream()})}},{key:"mediaSecondsLoaded_",value:function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)}},{key:"load",value:function(){this.mainSegmentLoader_.load();
this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()}},{key:"smoothQualityChange_",value:function(){var a=this.selectPlaylist();a!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(a),this.mainSegmentLoader_.resetLoader())}},{key:"fastQualityChange_",value:function(){var a=this,b=this.selectPlaylist();b!==this.masterPlaylistLoader_.media()&&(this.masterPlaylistLoader_.media(b),
this.mainSegmentLoader_.resetEverything(function(){D.browser.IE_VERSION||D.browser.IS_EDGE?a.tech_.setCurrentTime(a.tech_.currentTime()+.04):a.tech_.setCurrentTime(a.tech_.currentTime())}))}},{key:"play",value:function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.seekTo_(0);this.hasPlayed_()&&this.load();var a=this.tech_.seekable();if(Infinity===this.tech_.duration()&&this.tech_.currentTime()<a.start(0))return this.seekTo_(a.end(a.length-1))}}},{key:"setupFirstPlay",value:function(){var a=
this,b=this.masterPlaylistLoader_.media();if(!b||this.tech_.paused()||this.hasPlayed_())return!1;if(!b.endList){var g=this.seekable();if(!g.length)return!1;if(D.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",function(){a.trigger("firstplay");a.seekTo_(g.end(0));a.hasPlayed_=function(){return!0}}),!1;this.trigger("firstplay");this.seekTo_(g.end(0))}this.hasPlayed_=function(){return!0};this.load();return!0}},{key:"handleSourceOpen_",value:function(){try{this.setupSourceBuffers_()}catch(l){return D.log.warn("Failed to create Source Buffers",
l),this.mediaSource.endOfStream("decode")}if(this.tech_.autoplay()){var a=this.tech_.play();"undefined"!==typeof a&&"function"===typeof a.then&&a.then(null,function(a){})}this.trigger("sourceopen")}},{key:"onEndOfStream",value:function(){var a=this.mainSegmentLoader_.ended_;this.mediaTypes_.AUDIO.activePlaylistLoader&&(a=!this.mainSegmentLoader_.startingMedia_||this.mainSegmentLoader_.startingMedia_.containsVideo?a&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_);a&&this.mediaSource.endOfStream()}},
{key:"stuckAtPlaylistEnd_",value:function(a){if(!this.seekable().length)return!1;var b=this.syncController_.getExpiredTime(a,this.mediaSource.duration);if(null===b)return!1;a=xb.Playlist.playlistEnd(a,b);b=this.tech_.currentTime();var g=this.tech_.buffered();if(!g.length)return a-b<=Ib;g=g.end(g.length-1);return g-b<=Ib&&a-g<=Ib}},{key:"blacklistCurrentPlaylist",value:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},b=arguments[1];var g=a.playlist||this.masterPlaylistLoader_.media();
b=b||a.blacklistDuration||this.blacklistDuration;if(!g){this.error=a;try{return this.mediaSource.endOfStream("network")}catch(Q){return this.trigger("error")}}var d=1===this.masterPlaylistLoader_.master.playlists.filter(xd).length;if(d)return D.log.warn("Problem encountered with the current HLS playlist. Trying again since it is the final playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(d);g.excludeUntil=Date.now()+1E3*b;this.tech_.trigger("blacklistplaylist");this.tech_.trigger({type:"usage",
name:"hls-rendition-blacklisted"});b=this.selectPlaylist();D.log.warn("Problem encountered with the current HLS playlist."+(a.message?" "+a.message:"")+" Switching to another playlist.");return this.masterPlaylistLoader_.media(b)}},{key:"pauseLoading",value:function(){this.mainSegmentLoader_.pause();this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.pause();this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.pause()}},{key:"setCurrentTime",value:function(a){var b=
vi(this.tech_.buffered(),a);if(!this.masterPlaylistLoader_||!this.masterPlaylistLoader_.media()||!this.masterPlaylistLoader_.media().segments)return 0;if(b&&b.length)return a;this.mainSegmentLoader_.resetEverything();this.mainSegmentLoader_.abort();this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort());this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort());
this.load()}},{key:"duration",value:function(){return this.masterPlaylistLoader_?this.mediaSource?this.mediaSource.duration:xb.Playlist.duration(this.masterPlaylistLoader_.media()):0}},{key:"seekable",value:function(){return this.seekable_}},{key:"onSyncInfoUpdate_",value:function(){var a=void 0;if(this.masterPlaylistLoader_){var b=this.masterPlaylistLoader_.media();if(b){var g=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null!==g){var d=xb.Playlist.seekable(b,g);if(0!==d.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){b=
this.mediaTypes_.AUDIO.activePlaylistLoader.media();g=this.syncController_.getExpiredTime(b,this.mediaSource.duration);if(null===g)return;a=xb.Playlist.seekable(b,g);if(0===a.length)return}a?a.start(0)>d.end(0)||d.start(0)>a.end(0)?this.seekable_=d:this.seekable_=D.createTimeRanges([[a.start(0)>d.start(0)?a.start(0):d.start(0),a.end(0)<d.end(0)?a.end(0):d.end(0)]]):this.seekable_=d;this.logger_("seekable updated ["+ef(this.seekable_)+"]");this.tech_.trigger("seekablechanged")}}}}}},{key:"updateDuration",
value:function(){var a=this,b=this.mediaSource.duration,g=xb.Playlist.duration(this.masterPlaylistLoader_.media()),d=this.tech_.buffered(),h=function Ed(){a.mediaSource.duration=g;a.tech_.trigger("durationchange");a.mediaSource.removeEventListener("sourceopen",Ed)};0<d.length&&(g=Math.max(g,d.end(d.length-1)));b!==g&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",h):h())}},{key:"dispose",value:function(){var a=this;this.decrypter_.terminate();this.masterPlaylistLoader_.dispose();
this.mainSegmentLoader_.dispose();["AUDIO","SUBTITLES"].forEach(function(b){b=a.mediaTypes_[b].groups;for(var g in b)b[g].forEach(function(a){a.playlistLoader&&a.playlistLoader.dispose()})});this.audioSegmentLoader_.dispose();this.subtitleSegmentLoader_.dispose()}},{key:"master",value:function(){return this.masterPlaylistLoader_.master}},{key:"media",value:function(){return this.masterPlaylistLoader_.media()||this.initialMedia_}},{key:"setupSourceBuffers_",value:function(){var a=this.masterPlaylistLoader_.media(),
b;if(a&&"open"===this.mediaSource.readyState){var g=this.masterPlaylistLoader_.master;var d=a.segments&&a.segments.length&&a.segments[0].map?"mp4":"mp2t";var h=a.attributes||{};var m=h.CODECS?Jc(h.CODECS):Bi;var q=a.attributes||{};h=!0;var t=!1;if(a){if(g.mediaGroups.AUDIO&&q.AUDIO){var v=g.mediaGroups.AUDIO[q.AUDIO];if(v){t=!0;h=!1;for(var A in v)if(!v[A].uri&&!v[A].playlists){h=!0;break}}}t&&!m.audioProfile&&(h||(m.audioProfile=Rl(g,q.AUDIO)),m.audioProfile||(D.log.warn("Multiple audio tracks present but no audio codec string is specified. Attempting to use the default audio codec (mp4a.40.2)"),
m.audioProfile=Bi.audioProfile));var x;m.videoCodec&&(b=""+m.videoCodec+m.videoObjectTypeIndicator);m.audioProfile&&(x="mp4a.40."+m.audioProfile);g=hf("audio",d,[x]);A=hf("video",d,[b]);d=hf("video",d,[b,x]);b=t?!h&&b?[A,g]:h||b?[d,g]:[g,g]:b?[d]:[g]}else b=[];if(1>b.length)return this.error="No compatible SourceBuffer configuration for the variant stream:"+a.resolvedUri,this.mediaSource.endOfStream("decode");this.configureLoaderMimeTypes_(b);this.excludeIncompatibleVariants_(a)}}},{key:"configureLoaderMimeTypes_",
value:function(a){var b=1<a.length&&-1===a[0].indexOf(",")&&a[0]!==a[1]?new D.EventTarget:null;this.mainSegmentLoader_.mimeType(a[0],b);a[1]&&this.audioSegmentLoader_.mimeType(a[1],b)}},{key:"excludeUnsupportedVariants_",value:function(){this.master().playlists.forEach(function(a){a.attributes.CODECS&&F.MediaSource&&F.MediaSource.isTypeSupported&&!F.MediaSource.isTypeSupported('video/mp4; codecs="'+Ql(a.attributes.CODECS)+'"')&&(a.excludeUntil=Infinity)})}},{key:"excludeIncompatibleVariants_",value:function(a){var b=
2,g=null,d=void 0;a.attributes.CODECS&&(d=Jc(a.attributes.CODECS),g=d.videoCodec,b=d.codecCount);this.master().playlists.forEach(function(a){var l={codecCount:2,videoCodec:null};a.attributes.CODECS&&(l=Jc(a.attributes.CODECS));l.codecCount!==b&&(a.excludeUntil=Infinity);l.videoCodec!==g&&(a.excludeUntil=Infinity)})}},{key:"updateAdCues_",value:function(a){var b=0,g=this.seekable();g.length&&(b=g.start(0));nm(a,this.cueTagsTrack_,b)}},{key:"goalBufferLength",value:function(){var a=this.tech_.currentTime(),
b=Wa.GOAL_BUFFER_LENGTH;return Math.min(b+a*Wa.GOAL_BUFFER_LENGTH_RATE,Math.max(b,Wa.MAX_GOAL_BUFFER_LENGTH))}},{key:"bufferLowWaterLine",value:function(){var a=this.tech_.currentTime(),b=Wa.BUFFER_LOW_WATER_LINE;return Math.min(b+a*Wa.BUFFER_LOW_WATER_LINE_RATE,Math.max(b,Wa.MAX_BUFFER_LOW_WATER_LINE))}}]);return g}(D.EventTarget),Cm=function(b,g,a){return function(l){var d=b.master.playlists[g],h=cf(d),m=xd(d);if("undefined"===typeof l)return m;l?delete d.disabled:d.disabled=!0;l===m||h||(a(),l?
b.trigger("renditionenabled"):b.trigger("renditiondisabled"));return l}},Dm=function r(g,a,l){Pa(this,r);var d=g.masterPlaylistController_.fastQualityChange_.bind(g.masterPlaylistController_);if(a.attributes.RESOLUTION){var h=a.attributes.RESOLUTION;this.width=h.width;this.height=h.height}this.bandwidth=a.attributes.BANDWIDTH;this.id=l;this.enabled=Cm(g.playlists,a.uri,d)},Em=function(g){var a=g.playlists;g.representations=function(){return a.master.playlists.filter(function(a){return!cf(a)}).map(function(a,
d){return new Dm(g,a,a.uri)})}},Oi=["seeking","seeked","pause","playing","error"],Fm=function(){function g(a){var l=this;Pa(this,g);this.tech_=a.tech;this.seekable=a.seekable;this.seekTo=a.seekTo;this.consecutiveUpdates=0;this.checkCurrentTimeTimeout_=this.timer_=this.lastRecordedTime=null;this.logger_=Lc("PlaybackWatcher");this.logger_("initialize");var d=function(){return l.monitorCurrentTime_()},h=function(){return l.techWaiting_()},m=function(){return l.cancelTimer_()},q=function(){return l.fixesBadSeeks_()};
this.tech_.on("seekablechanged",q);this.tech_.on("waiting",h);this.tech_.on(Oi,m);this.tech_.on("canplay",d);this.dispose=function(){l.logger_("dispose");l.tech_.off("seekablechanged",q);l.tech_.off("waiting",h);l.tech_.off(Oi,m);l.tech_.off("canplay",d);l.checkCurrentTimeTimeout_&&F.clearTimeout(l.checkCurrentTimeTimeout_);l.cancelTimer_()}}Va(g,[{key:"monitorCurrentTime_",value:function(){this.checkCurrentTime_();this.checkCurrentTimeTimeout_&&F.clearTimeout(this.checkCurrentTimeTimeout_);this.checkCurrentTimeTimeout_=
F.setTimeout(this.monitorCurrentTime_.bind(this),250)}},{key:"checkCurrentTime_",value:function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())this.consecutiveUpdates=0,this.lastRecordedTime=this.tech_.currentTime();else if(!this.tech_.paused()&&!this.tech_.seeking()){var a=this.tech_.currentTime(),g=this.tech_.buffered();if(this.lastRecordedTime===a&&(!g.length||a+Ib>=g.end(g.length-1)))return this.techWaiting_();5<=this.consecutiveUpdates&&a===this.lastRecordedTime?(this.consecutiveUpdates++,
this.waiting_()):a===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=a)}}},{key:"cancelTimer_",value:function(){this.consecutiveUpdates=0;this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_));this.timer_=null}},{key:"fixesBadSeeks_",value:function(){var a=this.tech_.seeking(),g=this.seekable(),d=this.tech_.currentTime(),h=void 0;a&&this.afterSeekableWindow_(g,d)&&(h=g.end(g.length-1));a&&this.beforeSeekableWindow_(g,d)&&(h=g.start(0)+
Ib);return"undefined"!==typeof h?(this.logger_("Trying to seek outside of seekable at time "+d+" with "+("seekable range "+ef(g)+". Seeking to ")+(h+".")),this.seekTo(h),!0):!1}},{key:"waiting_",value:function(){if(!this.techWaiting_()){var a=this.tech_.currentTime(),g=this.tech_.buffered();g=vi(g,a);g.length&&a+3<=g.end(0)&&(this.cancelTimer_(),this.seekTo(a),this.logger_("Stopped at "+a+" while inside a buffered region "+("["+g.start(0)+" -> "+g.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),
this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"}))}}},{key:"techWaiting_",value:function(){var a=this.seekable(),g=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_()||this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(a,g))return a=a.end(a.length-1),this.logger_("Fell out of live window at time "+g+". Seeking to "+("live point (seekable end) "+a)),this.cancelTimer_(),this.seekTo(a),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),
!0;var d=this.tech_.buffered();a=wi(d,g);return this.videoUnderflow_(a,d,g)?(this.cancelTimer_(),this.seekTo(g),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0):0<a.length?(d=a.start(0)-g,this.logger_("Stopped at "+g+", setting timer for "+d+", seeking "+("to "+a.start(0))),this.timer_=setTimeout(this.skipTheGap_.bind(this),1E3*d,g),!0):!1}},{key:"afterSeekableWindow_",value:function(a,g){return a.length?g>a.end(a.length-1)+Ib?!0:!1:!1}},{key:"beforeSeekableWindow_",value:function(a,
g){return a.length&&0<a.start(0)&&g<a.start(0)-Ib?!0:!1}},{key:"videoUnderflow_",value:function(a,g,d){return 0===a.length&&(a=this.gapFromVideoUnderflow_(g,d))?(this.logger_("Encountered a gap in video from "+a.start+" to "+a.end+". "+("Seeking to current time "+d)),!0):!1}},{key:"skipTheGap_",value:function(a){var g=this.tech_.buffered(),d=this.tech_.currentTime();g=wi(g,d);this.cancelTimer_();0!==g.length&&d===a&&(this.logger_("skipTheGap_:","currentTime:",d,"scheduled currentTime:",a,"nextRange start:",
g.start(0)),this.seekTo(g.start(0)+bc),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))}},{key:"gapFromVideoUnderflow_",value:function(a,g){if(2>a.length)a=D.createTimeRanges();else{for(var l=[],d=1;d<a.length;d++){var h=a.end(d-1),m=a.start(d);l.push([h,m])}a=D.createTimeRanges(l)}for(l=0;l<a.length;l++)if(d=a.start(l),h=a.end(l),4>g-d&&2<g-d)return{start:d,end:h};return null}}]);return g}(),Gm={errorInterval:30,getSource:function(g){var a=this.tech({IWillNotUseThisInPlugins:!0}).currentSource_;
return g(a)}},Hm=function r(a,l){var d=0,h=0,m=D.mergeOptions(Gm,l);a.ready(function(){a.trigger({type:"usage",name:"hls-error-reload-initialized"})});var q=function(){h&&a.currentTime(h)},t=function(l){null!==l&&void 0!==l&&(h=Infinity!==a.duration()&&a.currentTime()||0,a.one("loadedmetadata",q),a.src(l),a.trigger({type:"usage",name:"hls-error-reload"}),a.play())},v=function(){if(Date.now()-d<1E3*m.errorInterval)a.trigger({type:"usage",name:"hls-error-reload-canceled"});else{if(m.getSource&&"function"===
typeof m.getSource)return d=Date.now(),m.getSource.call(a,t);D.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")}},A=function Kj(){a.off("loadedmetadata",q);a.off("error",v);a.off("dispose",Kj)};a.on("error",v);a.on("dispose",A);a.reloadSourceOnError=function(l){A();r(a,l)}},Pi=function(a){Hm(this,a)};D.use("*",function(a){return{setSource:function(a,d){d(null,a)},setCurrentTime:function(l){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(l);
return l},play:function(){a.vhs&&a.currentSource().src===a.vhs.source_.src&&a.vhs.setCurrentTime(a.currentTime())}}});var xa={PlaylistLoader:wd,Playlist:Ka,Decrypter:yl,AsyncStream:ei,decrypt:fi,utils:Kl,STANDARD_PLAYLIST_SELECTOR:function(){return hm(this.playlists.master,this.systemBandwidth,parseInt(Ji(this.tech_.el(),"width"),10),parseInt(Ji(this.tech_.el(),"height"),10))},INITIAL_PLAYLIST_SELECTOR:function(){var a=this.playlists.master.playlists.filter(Ka.isEnabled);Mc(a,function(a,d){return nf(a,
d)});return a.filter(function(a){return Jc(a.attributes.CODECS).videoCodec})[0]||null},comparePlaylistBandwidth:nf,comparePlaylistResolution:function(a,l){var d=void 0,h=void 0;a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&(d=a.attributes.RESOLUTION.width);d=d||F.Number.MAX_VALUE;l.attributes.RESOLUTION&&l.attributes.RESOLUTION.width&&(h=l.attributes.RESOLUTION.width);h=h||F.Number.MAX_VALUE;return d===h&&a.attributes.BANDWIDTH&&l.attributes.BANDWIDTH?a.attributes.BANDWIDTH-l.attributes.BANDWIDTH:
d-h},xhr:ri()};"GOAL_BUFFER_LENGTH MAX_GOAL_BUFFER_LENGTH GOAL_BUFFER_LENGTH_RATE BUFFER_LOW_WATER_LINE MAX_BUFFER_LOW_WATER_LINE BUFFER_LOW_WATER_LINE_RATE BANDWIDTH_VARIANCE".split(" ").forEach(function(a){Object.defineProperty(xa,a,{get:function(){D.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");return Wa[a]},set:function(l){D.log.warn("using Hls."+a+" is UNSAFE be sure you know what you are doing");"number"!==typeof l||0>l?D.log.warn("value of Hls."+a+" must be greater than or equal to 0"):
Wa[a]=l}})});var Qi=function(a){return/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i.test(a)?"hls":/^application\/dash\+xml/i.test(a)?"dash":null},Ri=function(a,l){l=l.media();for(var d=-1,h=0;h<a.length;h++)if(a[h].id===l.uri){d=h;break}a.selectedIndex_=d;a.trigger({selectedIndex:d,type:"change"})},Im=function(a,l){l.representations().forEach(function(l){a.addQualityLevel(l)});Ri(a,l.playlists)};xa.canPlaySource=function(){return D.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};
xa.supportsNativeHls=function(){var a=L.createElement("video");return D.getTech("Html5").isSupported()?"application/vnd.apple.mpegurl audio/mpegurl audio/x-mpegurl application/x-mpegurl video/x-mpegurl video/mpegurl application/mpegurl".split(" ").some(function(l){return/maybe|probably/i.test(a.canPlayType(l))}):!1}();var Jm=D.getTech("Html5").isSupported()?/maybe|probably/i.test(L.createElement("video").canPlayType("application/dash+xml")):!1;xa.supportsNativeDash=Jm;xa.supportsTypeNatively=function(a){return"hls"===
a?xa.supportsNativeHls:"dash"===a?xa.supportsNativeDash:!1};xa.isSupported=function(){return D.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Si=function(a){function l(a,d,h){Pa(this,l);var r=cb(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,d,h.hls));d.options_&&d.options_.playerId&&(h=D(d.options_.playerId),h.hasOwnProperty("hls")||Object.defineProperty(h,"hls",{get:function(){D.log.warn("player.hls is deprecated. Use player.tech().hls instead.");
d.trigger({type:"usage",name:"hls-player-access"});return r}}),h.vhs=r,h.dash=r);r.tech_=d;r.source_=a;r.stats={};r.setOptions_();if(r.options_.overrideNative&&d.overrideNativeAudioTracks&&d.overrideNativeVideoTracks)d.overrideNativeAudioTracks(!0),d.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(d.featuresNativeVideoTracks||d.featuresNativeAudioTracks))throw Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");r.on(L,["fullscreenchange","webkitfullscreenchange",
"mozfullscreenchange","MSFullscreenChange"],function(a){(a=L.fullscreenElement||L.webkitFullscreenElement||L.mozFullScreenElement||L.msFullscreenElement)&&a.contains(r.tech_.el())&&r.masterPlaylistController_.smoothQualityChange_()});r.on(r.tech_,"error",function(){this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()});r.on(r.tech_,"play",r.play);return r}nb(l,a);Va(l,[{key:"setOptions_",value:function(){var a=this;this.options_.withCredentials=this.options_.withCredentials||
!1;"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300);"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=4194304);this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&4194304===this.options_.bandwidth;["withCredentials","bandwidth"].forEach(function(l){"undefined"!==typeof a.source_[l]&&(a.options_[l]=a.source_[l])});this.bandwidth=this.options_.bandwidth}},{key:"src",value:function(a,l){var d=this;a&&(this.setOptions_(),
this.options_.url=this.source_.src,this.options_.tech=this.tech_,this.options_.externHls=xa,this.options_.sourceType=Qi(l),this.options_.seekTo=function(a){d.tech_.setCurrentTime(a);d.setCurrentTime(a)},this.masterPlaylistController_=new Bm(this.options_),this.playbackWatcher_=new Fm(D.mergeOptions(this.options_,{seekable:function(){return d.seekable()}})),this.masterPlaylistController_.on("error",function(){D.players[d.tech_.options_.playerId].error(d.masterPlaylistController_.error)}),this.masterPlaylistController_.selectPlaylist=
this.selectPlaylist?this.selectPlaylist.bind(this):xa.STANDARD_PLAYLIST_SELECTOR.bind(this),this.masterPlaylistController_.selectInitialPlaylist=xa.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(a){this.masterPlaylistController_.selectPlaylist=a.bind(this)}},
throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=a;this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(a){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=a;this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},
systemBandwidth:{get:function(){return Math.floor(1/(1/(this.bandwidth||1)+(0<this.throughput?1/this.throughput:0)))},set:function(){D.log.error('The "systemBandwidth" property is read-only')}}}),Object.defineProperties(this.stats,{bandwidth:{get:function(){return d.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return d.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return d.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},
mediaRequestsTimedout:{get:function(){return d.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return d.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return d.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return d.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return d.masterPlaylistController_.mediaSecondsLoaded_()||
0},enumerable:!0},buffered:{get:function(){return xi(d.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return d.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return d.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return d.tech_.name_},enumerable:!0},duration:{get:function(){return d.tech_.duration()},enumerable:!0},master:{get:function(){return d.playlists.master},enumerable:!0},playerDimensions:{get:function(){return d.tech_.currentDimensions()},
enumerable:!0},seekable:{get:function(){return xi(d.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return d.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.masterPlaylistController_.on("selectedinitialmedia",function(){Em(d);if("dash"===d.options_.sourceType){var a=D.players[d.tech_.options_.playerId];
if(a.eme){var l=d.source_.keySystems;var h=d.playlists.media(),r=d.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader.media();if(l){var m={},q;for(q in l)m[q]={audioContentType:'audio/mp4; codecs="'+r.attributes.CODECS+'"',videoContentType:'video/mp4; codecs="'+h.attributes.CODECS+'"'},h.contentProtection&&h.contentProtection[q]&&h.contentProtection[q].pssh&&(m[q].pssh=h.contentProtection[q].pssh),"string"===typeof l[q]&&(m[q].url=l[q]);l=D.mergeOptions(l,m)}l&&(a.currentSource().keySystems=
l)}}}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.tech_.ready(function(){return d.setupQualityLevels_()}),this.tech_.el()&&this.tech_.src(D.URL.createObjectURL(this.masterPlaylistController_.mediaSource)))}},{key:"setupQualityLevels_",value:function(){var a=this,d=D.players[this.tech_.options_.playerId];d&&d.qualityLevels&&(this.qualityLevels_=d.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Im(a.qualityLevels_,
a)}),this.playlists.on("mediachange",function(){Ri(a.qualityLevels_,a.playlists)}))}},{key:"play",value:function(){this.masterPlaylistController_.play()}},{key:"setCurrentTime",value:function(a){this.masterPlaylistController_.setCurrentTime(a)}},{key:"duration",value:function(){return this.masterPlaylistController_.duration()}},{key:"seekable",value:function(){return this.masterPlaylistController_.seekable()}},{key:"dispose",value:function(){this.playbackWatcher_&&this.playbackWatcher_.dispose();
this.masterPlaylistController_&&this.masterPlaylistController_.dispose();this.qualityLevels_&&this.qualityLevels_.dispose();zl(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"dispose",this).call(this)}}]);return l}(D.getComponent("Component")),pf={name:"videojs-http-streaming",VERSION:"1.2.6",canHandleSource:function(a){var d=D.mergeOptions(D.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{});return pf.canPlayType(a.type,d)},handleSource:function(a,d){var l=D.mergeOptions(D.options,
2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});d.hls=new Si(a,d,l);d.hls.xhr=ri();d.hls.src(a.src,a.type);return d.hls},canPlayType:function(a){var d=D.mergeOptions(D.options,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}).hls.overrideNative,h=Qi(a);return!h||xa.supportsTypeNatively(h)&&!d?"":"maybe"}};if("undefined"===typeof D.MediaSource||"undefined"===typeof D.URL)D.MediaSource=Kc,D.URL=Fi;Kc.supportsNativeMediaSources()&&D.getTech("Html5").registerSourceHandler(pf,0);D.HlsHandler=
Si;D.HlsSourceHandler=pf;D.Hls=xa;D.use||D.registerComponent("Hls",xa);D.options.hls=D.options.hls||{};D.registerPlugin?D.registerPlugin("reloadSourceOnError",Pi):D.plugin("reloadSourceOnError",Pi);return D});!function(){var C=window&&window.videojs;C&&(C.CDN_VERSION="7.2.4");!0}();/*
 The MIT License (MIT)
 Player for VAST and VPAID
*/
window.isDesktop=!/Android|Silk|Mobile|PlayBook/.test(window.navigator.userAgent);window.mutedVideoAd=window.mutedVideoAd||!window.isDesktop;
(function(C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define([],C):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).VASTPlayer=C()})(function(){return function h(u,y,w){function d(m,v){if(!y[m]){if(!u[m]){var x="function"==typeof require&&require;if(!v&&x)return x(m,!0);if(q)return q(m,!0);v=Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v;}v=y[m]=
{exports:{}};u[m][0].call(v.exports,function(h){var q=u[m][1][h];return d(q?q:h)},v,v.exports,h,u,y,w)}return y[m].exports}for(var q="function"==typeof require&&require,B=0;B<w.length;B++)d(w[B]);return d}({1:[function(u,y,w){y.exports=u("./lib/VASTPlayer")},{"./lib/VASTPlayer":5}],2:[function(u,y,w){function h(d,h,q){h.on(d,function(){for(var h=[],m=arguments.length;m--;)h[m]=arguments[m];q.emit.apply(q,[d].concat(h))})}function d(d,m,q){q.forEach(function(q){0<m.listeners(q).length&&h(q,d,m)});
m.on("newListener",function(v){-1<q.indexOf(v)&&1>m.listeners(v).length&&h(v,d,m)})}function q(d){this.events=d.slice();this.__private__={target:null,source:null}}q.prototype.from=function(h){this.__private__.source=h;this.__private__.target&&d(h,this.__private__.target,this.events);return this};q.prototype.to=function(h){this.__private__.target=h;this.__private__.source&&d(this.__private__.source,h,this.events);return this};y.exports=q},{}],3:[function(u,y,w){function h(h){var m=this;d.call(this,
Math.floor(h.duration||0));this.video=h;[q.PLAYING,q.PAUSE,q.TIMEUPDATE].forEach(function(d){return h.addEventListener(d,function(){return m.tick()},!1)})}var d=u("./VideoTracker");w=u("util").inherits;var q=u("./enums/HTML_MEDIA_EVENTS");w(h,d);h.prototype._getState=function(){return{playing:!this.video.paused,currentTime:this.video.currentTime}};y.exports=h},{"./VideoTracker":7,"./enums/HTML_MEDIA_EVENTS":8,util:35}],4:[function(u,y,w){function h(d){return d}function d(d,h){(d||[]).forEach(function(d){(new Image).src=
h(d)})}function q(d,q){this.pixels=d.reduce(function(d,h){h&&(d[h.event]||(d[h.event]=[])).push(h.uri);return d},{});this.__private__={mapper:q||h}}var B=u("./enums/VPAID_EVENTS");q.prototype.track=function(m){function q(m,q,v){function G(d){return t((q||h)(d))}return function(){v&&!v()||d(x[m],G)}}var x=this.pixels,t=this.__private__.mapper,u=m.adVolume;m.on(B.AdSkipped,q("skip"));m.on(B.AdStarted,q("creativeView"));m.on(B.AdVolumeChange,q("unmute",null,function(){return 0===u&&0<m.adVolume}));m.on(B.AdVolumeChange,
q("mute",null,function(){return 0<u&&0===m.adVolume}));m.on(B.AdImpression,q("impression"));m.on(B.AdVideoStart,q("start"));m.on(B.AdVideoFirstQuartile,q("firstQuartile"));m.on(B.AdVideoMidpoint,q("midpoint"));m.on(B.AdVideoThirdQuartile,q("thirdQuartile"));m.on(B.AdVideoComplete,q("complete"));m.on(B.AdClickThru,q("clickThrough"));m.on(B.AdUserAcceptInvitation,q("acceptInvitationLinear"));m.on(B.AdUserMinimize,q("collapse"));m.on(B.AdUserClose,q("closeLinear"));m.on(B.AdPaused,q("pause"));m.on(B.AdPlaying,
q("resume"));m.on(B.AdError,q("error",function(d){return d.replace(/\[ERRORCODE\]/g,901)}));m.on(B.AdVolumeChange,function(){u=m.adVolume})};y.exports=q},{"./enums/VPAID_EVENTS":10}],5:[function(u,y,w){function h(){var d={},m=arguments.length,q,t;for(q=0;q<m;q++){var v=arguments[q]||{};for(t in v){var x=v[t];void 0===d[t]&&(d[t]=x);"object"===typeof x&&(d[t]=h(d[t],x))}}return d}function d(d){return d}function q(){return Error("VASTPlayer not ready.")}function B(d){return function(){var h=this,m=
this.__private__.player;return this.ready?m[d].apply(m,arguments).then(function(){return h}):ba.reject(q())}}function m(d){return{get:function(){if(!this.ready)throw q();return this.__private__.player[d]},set:function(h){if(!this.ready)throw q();return this.__private__.player[d]=h}}}function v(m,q){var t=this;x.call(this);this.__private__={container:m,config:h(q,{vast:{resolveWrappers:!0,maxRedirects:6},tracking:{mapper:d},mutedVideoAd:!0}),vast:null,ready:!1,player:null};window.mutedVideoAd=this.__private__.config.mutedVideoAd||
!window.isDesktop;this.on(G.AdClickThru,function(d,h,m){d=d||t.vast.get("ads[0].creatives[0].videoClicks.clickThrough");m&&d&&window.open(d)})}var x=u("events").EventEmitter;w=u("util").inherits;var t=u("vastacular").VAST,H=u("./players/JavaScriptVPAID"),R=u("./players/FlashVPAID"),P=u("./players/HTMLVideo"),O=u("./enums/MIME"),G=u("./enums/VPAID_EVENTS"),E=u("./EventProxy"),ba=u("lie"),T=u("./PixelReporter");w(v,x);Object.defineProperties(v.prototype,{container:{get:function(){return this.__private__.container}},
config:{get:function(){return this.__private__.config}},vast:{get:function(){return this.__private__.vast}},ready:{get:function(){return this.__private__.ready}},adRemainingTime:m("adRemainingTime"),adDuration:m("adDuration"),adVolume:m("adVolume")});v.prototype.load=function(d){var h=this;return t.fetch(d,this.config.vast).then(function(d){var m=function(){var m=d.filter("ads[0].creatives[0].mediaFiles",function(d){return(d.type===O.JAVASCRIPT||"application/x-javascript"===d.type)&&"VPAID"===d.apiFramework}),
q=d.filter("ads[0].creatives[0].mediaFiles",function(d){return d.type===O.FLASH&&"VPAID"===d.apiFramework}),t=d.filter("ads[0].creatives[0].mediaFiles",function(){return!0});return 0<m.length?{player:new H(h.container),mediaFiles:m}:0<q.length?{player:new R(h.container,v.vpaidSWFLocation),mediaFiles:q}:{player:new P(h.container),mediaFiles:t}}(),q=d.get("ads[0].creatives[0].parameters"),t=[].concat(d.map("ads[0].impressions",function(d){return{event:"impression",uri:d.uri}}),d.map("ads[0].errors",
function(d){return{event:"error",uri:d}}),d.get("ads[0].creatives[0].trackingEvents"),d.map("ads[0].creatives[0].videoClicks.clickTrackings",function(d){return{event:"clickThrough",uri:d}})),A=m.player;m=m.mediaFiles;var x=new E(G),u=new T(t,h.config.tracking.mapper);x.from(A).to(h);h.__private__.vast=d;h.__private__.player=A;return A.load(m,q).then(function(){u.track(A)})}).then(function(){h.__private__.ready=!0;h.emit("ready");return h}).catch(function(d){h.emit("error",d);throw d;})};v.prototype.startAd=
B("startAd");v.prototype.stopAd=B("stopAd");v.prototype.pauseAd=B("pauseAd");v.prototype.skipAd=B("skipAd",G.AdSkipped);v.prototype.resumeAd=B("resumeAd");v.vpaidSWFLocation="https://cdn.jsdelivr.net/npm/vast-player@0.2.10/dist/vast-player--vpaid.swf";y.exports=v},{"./EventProxy":2,"./PixelReporter":4,"./enums/MIME":9,"./enums/VPAID_EVENTS":10,"./players/FlashVPAID":12,"./players/HTMLVideo":13,"./players/JavaScriptVPAID":14,events:19,lie:21,util:35,vastacular:36}],6:[function(u,y,w){function h(d){var h=
d.split(".").map(parseFloat);this.string=d;this.major=h[0];this.minor=h[1];this.patch=h[2];Object.freeze(this)}h.prototype.toString=function(){return this.string};y.exports=h},{}],7:[function(u,y,w){function h(d,h){h.fired[d]||(h.emit(d),h.fired[d]=!0)}function d(d){q.apply(this,arguments);this.duration=d;this.seconds=Array.apply([],Array(d)).map(function(){return!1});this.fired=[B.AdVideoStart,B.AdVideoFirstQuartile,B.AdVideoMidpoint,B.AdVideoThirdQuartile,B.AdVideoComplete].reduce(function(d,h){d[h]=
!1;return d},{})}var q=u("events").EventEmitter;w=u("util").inherits;var B=u("./enums/VPAID_EVENTS");w(d,q);d.prototype.tick=function(){function d(d){return q.slice(0,u[d-1]).every(function(d){return!0===d})}var q=this.seconds,x=this._getState(),t=Math.round(x.currentTime)-1,u=[1,2,3,4].map(function(d){return Math.floor(this.duration/4*d)},this);x.playing&&(h(B.AdVideoStart,this),-1<t&&(this.seconds[t]=!0));d(1)&&h(B.AdVideoFirstQuartile,this);d(2)&&h(B.AdVideoMidpoint,this);d(3)&&h(B.AdVideoThirdQuartile,
this);d(4)&&h(B.AdVideoComplete,this)};y.exports=d},{"./enums/VPAID_EVENTS":10,events:19,util:35}],8:[function(u,y,w){u="abort canplay canplaythrough durationchange emptied encrypted ended error interruptbegin interruptend loadeddata loadedmetadata loadstart mozaudioavailable pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" ");u.forEach(function(h){this[h.toUpperCase()]=h},u);Object.freeze(u);y.exports=u},{}],9:[function(u,y,w){u={JAVASCRIPT:"application/javascript",
FLASH:"application/x-shockwave-flash"};Object.freeze(u);y.exports=u},{}],10:[function(u,y,w){var h="AdLoaded AdStarted AdStopped AdSkipped AdSkippableStateChange AdSizeChange AdLinearChange AdDurationChange AdExpandedChange AdRemainingTimeChange AdVolumeChange AdImpression AdVideoStart AdVideoFirstQuartile AdVideoMidpoint AdVideoThirdQuartile AdVideoComplete AdClickThru AdInteraction AdUserAcceptInvitation AdUserMinimize AdUserClose AdPaused AdPlaying AdLog AdError".split(" ");h.forEach(function(d){h[d]=
d});Object.freeze(h);y.exports=h},{}],11:[function(u,y,w){var h=u("./window"),d=document.createElement("video");d.setAttribute("class","hd1vplayer_video");d.setAttribute("autoplay","true");w.isDesktop=window.isDesktop;d.volume=.4;d.playsinline=!0;d.setAttribute("playsinline","true");!0===window.mutedVideoAd&&(d.muted=!0,d.setAttribute("muted","true"));var q=u("./enums/MIME");w.canPlay=function(u){var m=h.navigator.mimeTypes,v=h.ActiveXObject;switch(u){case q.FLASH:try{return new v("ShockwaveFlash.ShockwaveFlash"),
2}catch(x){return m&&m[q.FLASH]?2:0}case q.JAVASCRIPT:case "application/x-javascript":return 2;default:if(d.canPlayType)switch(d.canPlayType(u)){case "probably":return 2;case "maybe":return 1}}return 0};Object.freeze(w)},{"./enums/MIME":9,"./window":17}],12:[function(u,y,w){function h(h,m){d.apply(this,arguments);this.swfURI=m;this.object=null}var d=u("./VPAID");w=u("util").inherits;var q=u("lie"),B=u("../uuid"),m=u("querystring"),v=u("../enums/VPAID_EVENTS"),x=u("../VPAIDVersion");w(h,d);h.prototype.load=
function(d,h){var t=this,u=d[0].uri,w=d[0].bitrate;return new q(function(d,q){function G(d){t.container.removeChild(E);t.api=null;t.object=null;delete window[A];d&&q(d)}var E=document.createElement("object"),A="vast_player__"+B(20),H=m.stringify({vpaidURI:u,eventCallback:A});E.type="application/x-shockwave-flash";E.data=t.swfURI+"?"+H;E.style.display="block";E.style.width="100%";E.style.height="100%";E.style.border="none";E.style.opacity="0";E.innerHTML=['<param name="movie" value="'+t.swfURI+'">',
'<param name="flashvars" value="'+H+'">','<param name="quality" value="high">\n<param name="play" value="false">\n<param name="loop" value="false">\n<param name="wmode" value="opaque">\n<param name="scale" value="noscale">\n<param name="salign" value="lt">\n<param name="allowScriptAccess" value="always">'].join("\n");t.object=E;window[A]=function(d){switch(d.type){case v.AdClickThru:return t.emit(d.type,d.url,d.Id,d.playerHandles);case v.AdInteraction:case v.AdLog:return t.emit(d.type,d.Id);case v.AdError:return t.emit(d.type,
d.message);default:return t.emit(d.type)}};t.once("VPAIDInterfaceReady",function(){var d=E.getBoundingClientRect(),m=t.vpaidVersion=new x(E.handshakeVersion("2.0"));if(2<m.major)return q(Error("VPAID version "+m+" is not supported."));t.on("VPAIDInterfaceResize",function(){var d=E.getBoundingClientRect();t.resizeAd(d.width,d.height,"normal")});E.initAd(d.width,d.height,"normal",w,h,null)});t.once(v.AdLoaded,function(){t.api=E;E.style.opacity="1";d(t)});t.once(v.AdError,function(d){G(Error(d))});t.once(v.AdStopped,
G);t.container.appendChild(E)})};y.exports=h},{"../VPAIDVersion":6,"../enums/VPAID_EVENTS":10,"../uuid":16,"./VPAID":15,lie:21,querystring:26,util:35}],13:[function(u,y,w){function h(d,h,m){return d.addEventListener(h,m,!1)}function d(d,m,q){return h(d,m,function ca(){d.removeEventListener(m,ca,!1);return q.apply(this,arguments)})}function q(d,h){function m(){return Error("The <video> has not been loaded.")}return function(){if(!this.video){if(h)return x.reject(m());throw m();}return d.apply(this,
arguments)}}function B(d,h){var m=h.width;d=d.map(function(d){return{mediaFile:d,playability:t(d.type)}}).filter(function(d){return 0<d.playability}).sort(H("-playability","-mediaFile.bitrate"));h=d.map(function(d){return Math.abs(m-d.mediaFile.width)});d=d[h.indexOf(Math.min.apply(Math,h))];return!d||1>d.playability?null:d.mediaFile}function m(d){this.container=d;this.video=null;this.__private__={hasPlayed:!1}}w=u("events").EventEmitter;var v=u("util").inherits,x=u("lie"),t=u("../environment").canPlay,
H=u("sort-by"),R=u("../enums/VPAID_EVENTS"),P=u("../enums/HTML_MEDIA_EVENTS"),O=u("../HTMLVideoTracker"),G=u("../EventProxy");v(m,w);Object.defineProperties(m.prototype,{adRemainingTime:{get:q(function(){return this.video.duration-this.video.currentTime})},adDuration:{get:q(function(){return this.video.duration})},adVolume:{get:q(function(){return this.video.volume}),set:q(function(d){this.video.volume=d})}});m.prototype.load=function(m){var q=this;return new x(function(t,v){var A=document.createElement("video"),
x=B(m,q.container.getBoundingClientRect());if(!x)return v(Error("There are no playable <MediaFile>s."));A.setAttribute("webkit-playsinline",!0);A.volume=.4;A.setAttribute("playsinline","true");A.playsinline=!0;!0===window.mutedVideoAd&&(A.muted=!0,A.setAttribute("muted","true"));A.src=x.uri.trim();A.preload="auto";A.setAttribute("autoplay","true");A.style.display="block";A.style.width="100%";A.style.height="100%";A.style.objectFit="contain";A.setAttribute("class","hd1vplayer_video");d(A,P.LOADEDMETADATA,
function(){var d=new O(A);(new G(R)).from(d).to(q);q.video=A;t(q);q.emit(R.AdLoaded);h(A,P.DURATIONCHANGE,function(){q.emit(R.AdDurationChange)});h(A,P.VOLUMECHANGE,function(){q.emit(R.AdVolumeChange)})});d(A,P.ERROR,function(){var d=A.error;q.emit(R.AdError,d.message);v(d)});d(A,P.PLAYING,function(){q.__private__.hasPlayed=!0;q.emit(R.AdImpression)});d(A,P.ENDED,function(){q.stopAd()});h(A,"click",function(){q.emit(R.AdClickThru,null,null,!0)});q.container.appendChild(A)})};m.prototype.startAd=q(function(){var h=
this,m=this.video;return this.__private__.hasPlayed?x.reject(Error("The ad has already been started.")):new x(function(q){d(m,P.PLAYING,function(){q(h);h.emit(R.AdStarted)});return m.play()})},!0);m.prototype.stopAd=q(function(){this.container.removeChild(this.video);this.emit(R.AdStopped);return x.resolve(this)},!0);m.prototype.pauseAd=q(function(){var h=this,m=this.video;return this.video.paused?x.resolve(this):new x(function(q){d(m,P.PAUSE,function(){q(h);h.emit(R.AdPaused)});return m.pause()})},
!0);m.prototype.resumeAd=q(function(){var h=this,m=this.video;return this.__private__.hasPlayed?this.video.paused?new x(function(q){d(m,P.PLAY,function(){q(h);h.emit(R.AdPlaying)});return m.play()}):x.resolve(this):x.reject(Error("The ad has not been started yet."))},!0);y.exports=m},{"../EventProxy":2,"../HTMLVideoTracker":3,"../enums/HTML_MEDIA_EVENTS":8,"../enums/VPAID_EVENTS":10,"../environment":11,events:19,lie:21,"sort-by":28,util:35}],14:[function(u,y,w){function h(){d.apply(this,arguments);
this.frame=null}w=u("util").inherits;var d=u("./VPAID"),q=u("lie"),B=u("../enums/VPAID_EVENTS"),m=u("../environment").isDesktop,v=u("../VPAIDVersion");w(h,d);h.prototype.load=function(d,h){var t=this,x=d[0].uri;x=x?x.trim():"";var u=d[0].bitrate;return new q(function(d,q){function G(d){t.container.removeChild(w);t.frame=null;t.api=null;d&&q(d)}var w=document.createElement("iframe"),H=document.createElement("script"),A=document.createElement("video");w.src="about:blank";w.style.width="100%";w.style.height=
"100%";w.style.display="block";w.style.opacity="1";w.style.border="none";w.setAttribute("frameborder","0");w.setAttribute("allowfullscreen","true");w.setAttribute("scrolling","no");w.setAttribute("allow","autoplay");w.setAttribute("class","hd1vplayer_iframe");w.setAttribute("id","vpaid_iframe");A.setAttribute("webkit-playsinline","true");A.setAttribute("playsinline","true");A.setAttribute("autoplay","true");A.volume=.4;A.playsinline=!0;A.setAttribute("playsinline","true");!0===window.mutedVideoAd&&
(A.muted=!0,A.setAttribute("muted","true"));A.style.display="block";A.style.width="100%";A.style.height="100%";A.style.objectFit="contain";t.container.appendChild(w);w.contentWindow.document.open();w.contentWindow.document.close();setTimeout(function(){w.contentWindow.document.body.appendChild(A)},600);w.contentWindow.document.body.style.margin="0";t.frame=w;H.src=x;H.onload=function(){var x=w.contentWindow.getVPAIDAd(),E=w.getBoundingClientRect(),H=w.contentWindow.document.body,P=t.vpaidVersion=
new v(x.handshakeVersion("2.0"));if(2<P.major)return q(Error("VPAID version "+P+" is not supported."));w.contentWindow.addEventListener("resize",function(){var d=w.getBoundingClientRect();t.resizeAd(d.width,d.height,"normal")},!1);B.forEach(function(d){return x.subscribe(function(){for(var h=Array(arguments.length),m=arguments.length;m--;)h[m]=arguments[m];return t.emit.apply(t,[d].concat(h))},d)});t.once(B.AdLoaded,function(){w.style.opacity="1";t.api=x;d(t)});t.once(B.AdError,function(d){G(Error(d))});
t.once(B.AdStopped,G);x.initAd(E.width,E.height,"normal",u,{AdParameters:h},{slot:H,videoSlot:A,videoSlotCanAutoPlay:m,playerHadarOne:!0})};H.onerror=function(){G(Error("Failed to load MediaFile ["+x+"]."))};w.contentWindow.document.head.appendChild(H)})};y.exports=h},{"../VPAIDVersion":6,"../enums/VPAID_EVENTS":10,"../environment":11,"./VPAID":15,lie:21,util:35}],15:[function(u,y,w){function h(d,h){return function(){var m=arguments,q=this.api,v=this;if(!h){if(!q)throw Error("Ad has not been loaded.");
return q[d].apply(q,m)}return new B(function(t,x){if(!q)return x(Error("Ad has not been loaded."));v.once(h,function(){t(v)});return q[d].apply(q,m)})}}function d(d){this.container=d;this.vpaidVersion=this.api=null}w=u("util").inherits;var q=u("events").EventEmitter,B=u("lie");u=u("../enums/VPAID_EVENTS");w(d,q);Object.defineProperties(d.prototype,{adLinear:{get:h("getAdLinear")},adWidth:{get:h("getAdWidth")},adHeight:{get:h("getAdHeight")},adExpanded:{get:h("getAdExpanded")},adSkippableState:{get:h("getAdSkippableState")},
adRemainingTime:{get:h("getAdRemainingTime")},adDuration:{get:h("getAdDuration")},adVolume:{get:h("getAdVolume"),set:h("setAdVolume")},adCompanions:{get:h("getAdCompanions")},adIcons:{get:h("getAdIcons")}});d.prototype.load=function(){throw Error("VPAID subclass must implement load() method.");};d.prototype.resizeAd=h("resizeAd",u.AdSizeChange);d.prototype.startAd=h("startAd",u.AdStarted);d.prototype.stopAd=h("stopAd",u.AdStopped);d.prototype.pauseAd=h("pauseAd",u.AdPaused);d.prototype.resumeAd=h("resumeAd",
u.AdPlaying);d.prototype.expandAd=h("expandAd",u.AdExpandedChange);d.prototype.collapseAd=h("collapseAd",u.AdExpandedChange);d.prototype.skipAd=h("skipAd",u.AdSkipped);y.exports=d},{"../enums/VPAID_EVENTS":10,events:19,lie:21,util:35}],16:[function(u,y,w){y.exports=function(h){for(var d="";h--;)d+="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()));return d}},{}],17:[function(u,y,w){y.exports=window},{}],18:[function(u,y,w){function h(d){if(d){for(var q in h.prototype)d[q]=
h.prototype[q];return d}}"undefined"!==typeof y&&(y.exports=h);h.prototype.on=h.prototype.addEventListener=function(d,h){this._callbacks=this._callbacks||{};(this._callbacks["$"+d]=this._callbacks["$"+d]||[]).push(h);return this};h.prototype.once=function(d,h){function q(){this.off(d,q);h.apply(this,arguments)}q.fn=h;this.on(d,q);return this};h.prototype.off=h.prototype.removeListener=h.prototype.removeAllListeners=h.prototype.removeEventListener=function(d,h){this._callbacks=this._callbacks||{};
if(0==arguments.length)return this._callbacks={},this;var q=this._callbacks["$"+d];if(!q)return this;if(1==arguments.length)return delete this._callbacks["$"+d],this;for(var m,v=0;v<q.length;v++)if(m=q[v],m===h||m.fn===h){q.splice(v,1);break}return this};h.prototype.emit=function(d){this._callbacks=this._callbacks||{};var h=[].slice.call(arguments,1),u=this._callbacks["$"+d];if(u){u=u.slice(0);for(var m=0,v=u.length;m<v;++m)u[m].apply(this,h)}return this};h.prototype.listeners=function(d){this._callbacks=
this._callbacks||{};return this._callbacks["$"+d]||[]};h.prototype.hasListeners=function(d){return!!this.listeners(d).length}},{}],19:[function(u,y,w){function h(){this._events=this._events||{};this._maxListeners=this._maxListeners||void 0}function d(d){return"function"===typeof d}function q(d){return"object"===typeof d&&null!==d}y.exports=h;h.EventEmitter=h;h.prototype._events=void 0;h.prototype._maxListeners=void 0;h.defaultMaxListeners=10;h.prototype.setMaxListeners=function(d){if("number"!==typeof d||
0>d||isNaN(d))throw TypeError("n must be a positive number");this._maxListeners=d;return this};h.prototype.emit=function(h){var m;this._events||(this._events={});if("error"===h&&(!this._events.error||q(this._events.error)&&!this._events.error.length)){var v=arguments[1];if(v instanceof Error)throw v;throw TypeError('Uncaught, unspecified "error" event.');}var x=this._events[h];if(void 0===x)return!1;if(d(x))switch(arguments.length){case 1:x.call(this);break;case 2:x.call(this,arguments[1]);break;
case 3:x.call(this,arguments[1],arguments[2]);break;default:v=arguments.length;var t=Array(v-1);for(m=1;m<v;m++)t[m-1]=arguments[m];x.apply(this,t)}else if(q(x)){v=arguments.length;t=Array(v-1);for(m=1;m<v;m++)t[m-1]=arguments[m];x=x.slice();v=x.length;for(m=0;m<v;m++)x[m].apply(this,t)}return!0};h.prototype.addListener=function(u,m){if(!d(m))throw TypeError("listener must be a function");this._events||(this._events={});this._events.newListener&&this.emit("newListener",u,d(m.listener)?m.listener:
m);this._events[u]?q(this._events[u])?this._events[u].push(m):this._events[u]=[this._events[u],m]:this._events[u]=m;q(this._events[u])&&!this._events[u].warned&&(m=void 0!==this._maxListeners?this._maxListeners:h.defaultMaxListeners)&&0<m&&this._events[u].length>m&&(this._events[u].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[u].length),"function"===typeof console.trace&&console.trace());
return this};h.prototype.on=h.prototype.addListener;h.prototype.once=function(h,m){function q(){this.removeListener(h,q);x||(x=!0,m.apply(this,arguments))}if(!d(m))throw TypeError("listener must be a function");var x=!1;q.listener=m;this.on(h,q);return this};h.prototype.removeListener=function(h,m){if(!d(m))throw TypeError("listener must be a function");if(!this._events||!this._events[h])return this;var v=this._events[h];var x=v.length;var t=-1;if(v===m||d(v.listener)&&v.listener===m)delete this._events[h],
this._events.removeListener&&this.emit("removeListener",h,m);else if(q(v)){for(;0<x--;)if(v[x]===m||v[x].listener&&v[x].listener===m){t=x;break}if(0>t)return this;1===v.length?(v.length=0,delete this._events[h]):v.splice(t,1);this._events.removeListener&&this.emit("removeListener",h,m)}return this};h.prototype.removeAllListeners=function(h){if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[h]&&delete this._events[h],this;if(0===arguments.length){for(m in this._events)"removeListener"!==
m&&this.removeAllListeners(m);this.removeAllListeners("removeListener");this._events={};return this}var m=this._events[h];if(d(m))this.removeListener(h,m);else for(;m.length;)this.removeListener(h,m[m.length-1]);delete this._events[h];return this};h.prototype.listeners=function(h){return this._events&&this._events[h]?d(this._events[h])?[this._events[h]]:this._events[h].slice():[]};h.listenerCount=function(h,m){return h._events&&h._events[m]?d(h._events[m])?1:h._events[m].length:0}},{}],20:[function(u,
y,w){(function(h){function d(){t=!0;for(var d,h,m=w.length;m;){h=w;w=[];for(d=-1;++d<m;)h[d]();m=w.length}t=!1}var q=h.MutationObserver||h.WebKitMutationObserver;if(q){var u=0;q=new q(d);var m=h.document.createTextNode("");q.observe(m,{characterData:!0});var v=function(){m.data=u=++u%2}}else if(h.setImmediate||"undefined"===typeof h.MessageChannel)v="document"in h&&"onreadystatechange"in h.document.createElement("script")?function(){var m=h.document.createElement("script");m.onreadystatechange=function(){d();
m.onreadystatechange=null;m.parentNode.removeChild(m);m=null};h.document.documentElement.appendChild(m)}:function(){setTimeout(d,0)};else{var x=new h.MessageChannel;x.port1.onmessage=d;v=function(){x.port2.postMessage(0)}}var t,w=[];y.exports=function(d){1!==w.push(d)||t||v()}}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],21:[function(u,y,w){function h(){}function d(d){if("function"!==typeof d)throw new TypeError("resolver must be a function");
this.state=O;this.queue=[];this.outcome=void 0;d!==h&&v(this,d)}function q(d,h,m){this.promise=d;"function"===typeof h&&(this.onFulfilled=h,this.callFulfilled=this.otherCallFulfilled);"function"===typeof m&&(this.onRejected=m,this.callRejected=this.otherCallRejected)}function B(d,h,m){t(function(){try{var q=h(m)}catch(A){return H.reject(d,A)}q===d?H.reject(d,new TypeError("Cannot resolve promise with itself")):H.resolve(d,q)})}function m(d){var h=d&&d.then;if(d&&("object"===typeof d||"function"===
typeof d)&&"function"===typeof h)return function(){h.apply(d,arguments)}}function v(d,h){function m(h){t||(t=!0,H.reject(d,h))}function q(h){t||(t=!0,H.resolve(d,h))}var t=!1,v=x(function(){h(q,m)});"error"===v.status&&m(v.value)}function x(d,h){var m={};try{m.value=d(h),m.status="success"}catch(T){m.status="error",m.value=T}return m}var t=u("immediate"),H={},R=["REJECTED"],P=["FULFILLED"],O=["PENDING"];y.exports=d;d.prototype["finally"]=function(d){if("function"!==typeof d)return this;var h=this.constructor;
return this.then(function(m){return h.resolve(d()).then(function(){return m})},function(m){return h.resolve(d()).then(function(){throw m;})})};d.prototype["catch"]=function(d){return this.then(null,d)};d.prototype.then=function(d,m){if("function"!==typeof d&&this.state===P||"function"!==typeof m&&this.state===R)return this;var t=new this.constructor(h);this.state!==O?B(t,this.state===P?d:m,this.outcome):this.queue.push(new q(t,d,m));return t};q.prototype.callFulfilled=function(d){H.resolve(this.promise,
d)};q.prototype.otherCallFulfilled=function(d){B(this.promise,this.onFulfilled,d)};q.prototype.callRejected=function(d){H.reject(this.promise,d)};q.prototype.otherCallRejected=function(d){B(this.promise,this.onRejected,d)};H.resolve=function(d,h){var q=x(m,h);if("error"===q.status)return H.reject(d,q.value);if(q=q.value)v(d,q);else{d.state=P;d.outcome=h;q=-1;for(var t=d.queue.length;++q<t;)d.queue[q].callFulfilled(h)}return d};H.reject=function(d,h){d.state=R;d.outcome=h;for(var m=-1,q=d.queue.length;++m<
q;)d.queue[m].callRejected(h);return d};d.resolve=function(d){return d instanceof this?d:H.resolve(new this(h),d)};d.reject=function(d){var m=new this(h);return H.reject(m,d)};d.all=function(d){function m(d,h){q.resolve(d).then(function(d){x[h]=d;++u!==t||v||(v=!0,H.resolve(G,x))},function(d){v||(v=!0,H.reject(G,d))})}var q=this;if("[object Array]"!==Object.prototype.toString.call(d))return this.reject(new TypeError("must be an array"));var t=d.length,v=!1;if(!t)return this.resolve([]);for(var x=
Array(t),u=0,w=-1,G=new this(h);++w<t;)m(d[w],w);return G};d.race=function(d){function m(d){q.resolve(d).then(function(d){v||(v=!0,H.resolve(u,d))},function(d){v||(v=!0,H.reject(u,d))})}var q=this;if("[object Array]"!==Object.prototype.toString.call(d))return this.reject(new TypeError("must be an array"));var t=d.length,v=!1;if(!t)return this.resolve([]);for(var x=-1,u=new this(h);++x<t;)m(d[x]);return u}},{immediate:20}],22:[function(u,y,w){(function(h,d){"object"===typeof y&&"object"===typeof y.exports?
y.exports=d():h.objectPath=d()})(this,function(){function h(d){if(!d)return!0;if(!u(d)||0!==d.length)for(var h in d)if(w.call(d,h))return!1;return!0}function d(d){return"number"===typeof d||"[object Number]"===t.call(d)}function q(d){return"string"===typeof d||"[object String]"===t.call(d)}function u(d){return"object"===typeof d&&"number"===typeof d.length&&"[object Array]"===t.call(d)}function m(d){var h=parseInt(d);return h.toString()===d?h:d}function v(t,x,u,w){d(x)&&(x=[x]);if(h(x))return t;if(q(x))return v(t,
x.split("."),u,w);var G=m(x[0]);if(1===x.length)return x=t[G],void 0!==x&&w||(t[G]=u),x;void 0===t[G]&&(d(G)?t[G]=[]:t[G]={});return v(t[G],x.slice(1),u,w)}function x(t,v){d(v)&&(v=[v]);if(!h(t)){if(h(v))return t;if(q(v))return x(t,v.split("."));var w=m(v[0]),B=t[w];if(1===v.length)void 0!==B&&(u(t)?t.splice(w,1):delete t[w]);else if(void 0!==t[w])return x(t[w],v.slice(1));return t}}var t=Object.prototype.toString,w=Object.prototype.hasOwnProperty,y={ensureExists:function(d,h,m){return v(d,h,m,!0)},
set:function(d,h,m,q){return v(d,h,m,q)},insert:function(d,h,m,q){var t=y.get(d,h);q=~~q;u(t)||(t=[],y.set(d,h,t));t.splice(q,0,m)},empty:function(m,v){if(h(v))return m;if(!h(m)){var x,B;if(!(x=y.get(m,v)))return m;if(q(x))return y.set(m,v,"");if("boolean"===typeof x||"[object Boolean]"===t.call(x))return y.set(m,v,!1);if(d(x))return y.set(m,v,0);if(u(x))x.length=0;else if("object"===typeof x&&"[object Object]"===t.call(x))for(B in x)w.call(x,B)&&delete x[B];else return y.set(m,v,null)}},push:function(d,
h){var m=y.get(d,h);u(m)||(m=[],y.set(d,h,m));m.push.apply(m,Array.prototype.slice.call(arguments,2))},coalesce:function(d,h,m){for(var q,t=0,v=h.length;t<v;t++)if(void 0!==(q=y.get(d,h[t])))return q;return m},get:function(t,v,x){d(v)&&(v=[v]);if(h(v))return t;if(h(t))return x;if(q(v))return y.get(t,v.split("."),x);var u=m(v[0]);return 1===v.length?void 0===t[u]?x:t[u]:y.get(t[u],v.slice(1),x)},del:function(d,h){return x(d,h)}};return y})},{}],23:[function(u,y,w){function h(){throw Error("setTimeout has not been defined");
}function d(){throw Error("clearTimeout has not been defined");}function q(d){if(H===setTimeout)return setTimeout(d,0);if((H===h||!H)&&setTimeout)return H=setTimeout,setTimeout(d,0);try{return H(d,0)}catch(T){try{return H.call(null,d,0)}catch(A){return H.call(this,d,0)}}}function B(h){if(R===clearTimeout)return clearTimeout(h);if((R===d||!R)&&clearTimeout)return R=clearTimeout,clearTimeout(h);try{return R(h)}catch(T){try{return R.call(null,h)}catch(A){return R.call(this,h)}}}function m(){O&&G&&(O=
!1,G.length?P=G.concat(P):E=-1,P.length&&v())}function v(){if(!O){var d=q(m);O=!0;for(var h=P.length;h;){G=P;for(P=[];++E<h;)G&&G[E].run();E=-1;h=P.length}G=null;O=!1;B(d)}}function x(d,h){this.fun=d;this.array=h}function t(){}u=y.exports={};try{var H="function"===typeof setTimeout?setTimeout:h}catch(ba){H=h}try{var R="function"===typeof clearTimeout?clearTimeout:d}catch(ba){R=d}var P=[],O=!1,G,E=-1;u.nextTick=function(d){var h=Array(arguments.length-1);if(1<arguments.length)for(var m=1;m<arguments.length;m++)h[m-
1]=arguments[m];P.push(new x(d,h));1!==P.length||O||q(v)};x.prototype.run=function(){this.fun.apply(null,this.array)};u.title="browser";u.browser=!0;u.env={};u.argv=[];u.version="";u.versions={};u.on=t;u.addListener=t;u.once=t;u.off=t;u.removeListener=t;u.removeAllListeners=t;u.emit=t;u.prependListener=t;u.prependOnceListener=t;u.listeners=function(d){return[]};u.binding=function(d){throw Error("process.binding is not supported");};u.cwd=function(){return"/"};u.chdir=function(d){throw Error("process.chdir is not supported");
};u.umask=function(){return 0}},{}],24:[function(u,y,w){y.exports=function(d,q,u,m){u=u||"=";var v={};if("string"!==typeof d||0===d.length)return v;var x=/\+/g;d=d.split(q||"&");q=1E3;m&&"number"===typeof m.maxKeys&&(q=m.maxKeys);m=d.length;0<q&&m>q&&(m=q);for(q=0;q<m;++q){var t=d[q].replace(x,"%20"),w=t.indexOf(u);if(0<=w){var B=t.substr(0,w);t=t.substr(w+1)}else B=t,t="";B=decodeURIComponent(B);t=decodeURIComponent(t);Object.prototype.hasOwnProperty.call(v,B)?h(v[B])?v[B].push(t):v[B]=[v[B],t]:
v[B]=t}return v};var h=Array.isArray||function(d){return"[object Array]"===Object.prototype.toString.call(d)}},{}],25:[function(u,y,w){function h(d,h){if(d.map)return d.map(h);for(var m=[],q=0;q<d.length;q++)m.push(h(d[q],q));return m}var d=function(d){switch(typeof d){case "string":return d;case "boolean":return d?"true":"false";case "number":return isFinite(d)?d:"";default:return""}};y.exports=function(m,v,x,t){v=v||"&";x=x||"=";null===m&&(m=void 0);return"object"===typeof m?h(B(m),function(t){var u=
encodeURIComponent(d(t))+x;return q(m[t])?h(m[t],function(h){return u+encodeURIComponent(d(h))}).join(v):u+encodeURIComponent(d(m[t]))}).join(v):t?encodeURIComponent(d(t))+x+encodeURIComponent(d(m)):""};var q=Array.isArray||function(d){return"[object Array]"===Object.prototype.toString.call(d)},B=Object.keys||function(d){var h=[],m;for(m in d)Object.prototype.hasOwnProperty.call(d,m)&&h.push(m);return h}},{}],26:[function(u,y,w){w.decode=w.parse=u("./decode");w.encode=w.stringify=u("./encode")},{"./decode":24,
"./encode":25}],27:[function(u,y,w){y.exports=function(h,d,q){for(var u=0,m=h.length,v=3==arguments.length?q:h[u++];u<m;)v=d.call(null,v,h[u],++u,h);return v}},{}],28:[function(u,y,w){var h=u("object-path");var d=function(d){return function(h){return typeof h===d}};var q=function(d,m){var q=1,x=m||function(d,h){return h};"-"===d[0]&&(q=-1,d=d.substr(1));return function(m,v){var t;m=x(d,h.get(m,d));v=x(d,h.get(v,d));m<v&&(t=-1);m>v&&(t=1);m===v&&(t=0);return t*q}};y.exports=function(){var h=Array.prototype.slice.call(arguments),
m=h.filter(d("string")),v=h.filter(d("function"))[0];return function(d,h){for(var t=m.length,x=0,u=0;0===x&&u<t;)x=q(m[u],v)(d,h),u++;return x}}},{"object-path":22}],29:[function(u,y,w){function h(){}function d(d){switch({}.toString.call(d)){case "[object File]":case "[object Blob]":case "[object FormData]":return!0;default:return!1}}function q(d){if(!O(d))return d;var h=[],m;for(m in d)null!=d[m]&&B(h,m,d[m]);return h.join("&")}function B(d,h,m){if(Array.isArray(m))return m.forEach(function(m){B(d,
h,m)});d.push(encodeURIComponent(h)+"="+encodeURIComponent(m))}function m(d){var h={};d=d.split("&");for(var m,q=0,t=d.length;q<t;++q)m=d[q],m=m.split("="),h[decodeURIComponent(m[0])]=decodeURIComponent(m[1]);return h}function v(d){return R(d.split(/ *; */),function(d,h){var m=h.split(/ *= */);h=m.shift();m=m.shift();h&&m&&(d[h]=m);return d},{})}function x(d,h){this.req=d;this.xhr=this.req.xhr;this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||"undefined"===
typeof this.xhr.responseType?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;this.setStatusProperties(this.xhr.status);d=this.xhr.getAllResponseHeaders().split(/\r?\n/);h={};d.pop();for(var m=0,q=d.length;m<q;++m){var t=d[m];var v=t.indexOf(":");var x=t.slice(0,v).toLowerCase();v=ba(t.slice(v+1));h[x]=v}this.header=this.headers=h;this.header["content-type"]=this.xhr.getResponseHeader("content-type");this.setHeaderProperties(this.header);this.body="HEAD"!=this.req.method?this.parseBody(this.text?
this.text:this.xhr.response):null}function t(d,h){var m=this;this._query=this._query||[];this.method=d;this.url=h;this.header={};this._header={};this.on("end",function(){var d=null,h=null;try{h=new x(m)}catch(Aa){return d=Error("Parser is unable to parse the response"),d.parse=!0,d.original=Aa,d.rawResponse=m.xhr&&m.xhr.responseText?m.xhr.responseText:null,d.statusCode=m.xhr&&m.xhr.status?m.xhr.status:null,m.callback(d)}m.emit("response",h);if(d||200<=h.status&&300>h.status)return m.callback(d,h);
var q=Error(h.statusText||"Unsuccessful HTTP response");q.original=d;q.response=h;q.status=h.status;m.callback(q,h)})}function H(d,h){d=E("DELETE",d);h&&d.end(h);return d}w=u("emitter");var R=u("reduce"),P=u("./request-base"),O=u("./is-object");var G="undefined"!==typeof window?window:"undefined"!==typeof self?self:this;var E=y.exports=u("./request").bind(null,t);E.getXHR=function(){if(!G.XMLHttpRequest||G.location&&"file:"==G.location.protocol&&G.ActiveXObject){try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(A){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(A){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(A){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(A){}}else return new XMLHttpRequest;
return!1};var ba="".trim?function(d){return d.trim()}:function(d){return d.replace(/(^\s*|\s*$)/g,"")};E.serializeObject=q;E.parseString=m;E.types={html:"text/html",json:"application/json",xml:"application/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};E.serialize={"application/x-www-form-urlencoded":q,"application/json":JSON.stringify};E.parse={"application/x-www-form-urlencoded":m,"application/json":JSON.parse};
x.prototype.get=function(d){return this.header[d.toLowerCase()]};x.prototype.setHeaderProperties=function(d){d=this.header["content-type"]||"";this.type=d.split(/ *; */).shift();d=v(d);for(var h in d)this[h]=d[h]};x.prototype.parseBody=function(d){var h=E.parse[this.type];!h&&/[\/+]json\b/.test(this.type)&&(h=E.parse["application/json"]);return h&&d&&(d.length||d instanceof Object)?h(d):null};x.prototype.setStatusProperties=function(d){1223===d&&(d=204);var h=d/100|0;this.status=this.statusCode=d;
this.statusType=h;this.info=1==h;this.ok=2==h;this.clientError=4==h;this.serverError=5==h;this.error=4==h||5==h?this.toError():!1;this.accepted=202==d;this.noContent=204==d;this.badRequest=400==d;this.unauthorized=401==d;this.notAcceptable=406==d;this.notFound=404==d;this.forbidden=403==d};x.prototype.toError=function(){var d=this.req,h=d.method;d=d.url;var m=Error("cannot "+h+" "+d+" ("+this.status+")");m.status=this.status;m.method=h;m.url=d;return m};E.Response=x;w(t.prototype);for(var T in P)t.prototype[T]=
P[T];t.prototype.abort=function(){if(!this.aborted)return this.aborted=!0,this.xhr&&this.xhr.abort(),this.clearTimeout(),this.emit("abort"),this};t.prototype.type=function(d){this.set("Content-Type",E.types[d]||d);return this};t.prototype.responseType=function(d){this._responseType=d;return this};t.prototype.accept=function(d){this.set("Accept",E.types[d]||d);return this};t.prototype.auth=function(d,h,m){m||(m={type:"basic"});switch(m.type){case "basic":d=btoa(d+":"+h);this.set("Authorization","Basic "+
d);break;case "auto":this.username=d,this.password=h}return this};t.prototype.query=function(d){"string"!=typeof d&&(d=q(d));d&&this._query.push(d);return this};t.prototype.attach=function(d,h,m){this._getFormData().append(d,h,m||h.name);return this};t.prototype._getFormData=function(){this._formData||(this._formData=new G.FormData);return this._formData};t.prototype.send=function(h){var m=O(h),q=this._header["content-type"];if(m&&O(this._data))for(var t in h)this._data[t]=h[t];else"string"==typeof h?
(q||this.type("form"),q=this._header["content-type"],this._data="application/x-www-form-urlencoded"==q?this._data?this._data+"&"+h:h:(this._data||"")+h):this._data=h;if(!m||d(h))return this;q||this.type("json");return this};x.prototype.parse=function(d){G.console&&console.warn("Client-side parse() method has been renamed to serialize(). This method is not compatible with superagent v2.0");this.serialize(d);return this};x.prototype.serialize=function(d){this._parser=d;return this};t.prototype.callback=
function(d,h){var m=this._callback;this.clearTimeout();m(d,h)};t.prototype.crossDomainError=function(){var d=Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");d.crossDomain=!0;d.status=this.status;d.method=this.method;d.url=this.url;this.callback(d)};t.prototype.timeoutError=function(){var d=this._timeout,h=Error("timeout of "+d+"ms exceeded");h.timeout=d;this.callback(h)};t.prototype.withCredentials=
function(){this._withCredentials=!0;return this};t.prototype.end=function(m){var q=this,t=this.xhr=E.getXHR(),v=this._query.join("&"),x=this._timeout,u=this._formData||this._data;this._callback=m||h;t.onreadystatechange=function(){if(4==t.readyState){try{var d=t.status}catch(Ba){d=0}if(0==d)return q.timedout?q.timeoutError():q.aborted?void 0:q.crossDomainError();q.emit("end")}};m=function(d){0<d.total&&(d.percent=d.loaded/d.total*100);d.direction="download";q.emit("progress",d)};this.hasListeners("progress")&&
(t.onprogress=m);try{t.upload&&this.hasListeners("progress")&&(t.upload.onprogress=m)}catch(Ha){}x&&!this._timer&&(this._timer=setTimeout(function(){q.timedout=!0;q.abort()},x));v&&(v=E.serializeObject(v),this.url+=~this.url.indexOf("?")?"&"+v:"?"+v);this.username&&this.password?t.open(this.method,this.url,!0,this.username,this.password):t.open(this.method,this.url,!0);this._withCredentials&&(t.withCredentials=!0);"GET"==this.method||"HEAD"==this.method||"string"==typeof u||d(u)||(v=this._header["content-type"],
x=this._parser||E.serialize[v?v.split(";")[0]:""],!x&&/[\/+]json\b/.test(v)&&(x=E.serialize["application/json"]),x&&(u=x(u)));for(var w in this.header)null!=this.header[w]&&t.setRequestHeader(w,this.header[w]);this._responseType&&(t.responseType=this._responseType);this.emit("request",this);t.send("undefined"!==typeof u?u:null);return this};E.Request=t;E.get=function(d,h,m){d=E("GET",d);"function"==typeof h&&(m=h,h=null);h&&d.query(h);m&&d.end(m);return d};E.head=function(d,h,m){d=E("HEAD",d);"function"==
typeof h&&(m=h,h=null);h&&d.send(h);m&&d.end(m);return d};E.del=H;E["delete"]=H;E.patch=function(d,h,m){d=E("PATCH",d);"function"==typeof h&&(m=h,h=null);h&&d.send(h);m&&d.end(m);return d};E.post=function(d,h,m){d=E("POST",d);"function"==typeof h&&(m=h,h=null);h&&d.send(h);m&&d.end(m);return d};E.put=function(d,h,m){d=E("PUT",d);"function"==typeof h&&(m=h,h=null);h&&d.send(h);m&&d.end(m);return d}},{"./is-object":30,"./request":32,"./request-base":31,emitter:18,reduce:27}],30:[function(u,y,w){y.exports=
function(h){return null!=h&&"object"==typeof h}},{}],31:[function(u,y,w){var h=u("./is-object");w.clearTimeout=function(){this._timeout=0;clearTimeout(this._timer);return this};w.parse=function(d){this._parser=d;return this};w.timeout=function(d){this._timeout=d;return this};w.then=function(d,h){return this.end(function(q,m){q?h(q):d(m)})};w.use=function(d){d(this);return this};w.get=function(d){return this._header[d.toLowerCase()]};w.getHeader=w.get;w.set=function(d,q){if(h(d)){for(var u in d)this.set(u,
d[u]);return this}this._header[d.toLowerCase()]=q;this.header[d]=q;return this};w.unset=function(d){delete this._header[d.toLowerCase()];delete this.header[d];return this};w.field=function(d,h){this._getFormData().append(d,h);return this}},{"./is-object":30}],32:[function(u,y,w){y.exports=function(h,d,q){return"function"==typeof q?(new h("GET",d)).end(q):2==arguments.length?new h("GET",d):new h(d,q)}},{}],33:[function(u,y,w){y.exports="function"===typeof Object.create?function(h,d){h.super_=d;h.prototype=
Object.create(d.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}})}:function(h,d){h.super_=d;var q=function(){};q.prototype=d.prototype;h.prototype=new q;h.prototype.constructor=h}},{}],34:[function(u,y,w){y.exports=function(h){return h&&"object"===typeof h&&"function"===typeof h.copy&&"function"===typeof h.fill&&"function"===typeof h.readUInt8}},{}],35:[function(u,y,w){(function(h,d){function q(d,h){var q={seen:[],stylize:m};3<=arguments.length&&(q.depth=arguments[2]);4<=
arguments.length&&(q.colors=arguments[3]);E(h)?q.showHidden=h:h&&w._extend(q,h);A(q.showHidden)&&(q.showHidden=!1);A(q.depth)&&(q.depth=2);A(q.colors)&&(q.colors=!1);A(q.customInspect)&&(q.customInspect=!0);q.colors&&(q.stylize=B);return x(q,d,q.depth)}function B(d,h){return(h=q.styles[h])?"\u001b["+q.colors[h][0]+"m"+d+"\u001b["+q.colors[h][1]+"m":d}function m(d,h){return d}function v(d){var h={};d.forEach(function(d,m){h[d]=!0});return h}function x(d,h,m){if(d.customInspect&&h&&ia(h.inspect)&&h.inspect!==
w.inspect&&(!h.constructor||h.constructor.prototype!==h)){var q=h.inspect(m,d);T(q)||(q=x(d,q,m));return q}if(q=t(d,h))return q;var u=Object.keys(h),A=v(u);d.showHidden&&(u=Object.getOwnPropertyNames(h));if(Y(h)&&(0<=u.indexOf("message")||0<=u.indexOf("description")))return y(h);if(0===u.length){if(ia(h))return d.stylize("[Function"+(h.name?": "+h.name:"")+"]","special");if(ca(h))return d.stylize(RegExp.prototype.toString.call(h),"regexp");if(Z(h))return d.stylize(Date.prototype.toString.call(h),
"date");if(Y(h))return y(h)}q="";var B=!1,H=["{","}"];G(h)&&(B=!0,H=["[","]"]);ia(h)&&(q=" [Function"+(h.name?": "+h.name:"")+"]");ca(h)&&(q=" "+RegExp.prototype.toString.call(h));Z(h)&&(q=" "+Date.prototype.toUTCString.call(h));Y(h)&&(q=" "+y(h));if(0===u.length&&(!B||0==h.length))return H[0]+q+H[1];if(0>m)return ca(h)?d.stylize(RegExp.prototype.toString.call(h),"regexp"):d.stylize("[Object]","special");d.seen.push(h);u=B?R(d,h,m,A,u):u.map(function(q){return P(d,h,m,A,q,B)});d.seen.pop();return O(u,
q,H)}function t(d,h){if(A(h))return d.stylize("undefined","undefined");if(T(h))return h="'"+JSON.stringify(h).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'",d.stylize(h,"string");if(ba(h))return d.stylize(""+h,"number");if(E(h))return d.stylize(""+h,"boolean");if(null===h)return d.stylize("null","null")}function y(d){return"["+Error.prototype.toString.call(d)+"]"}function R(d,h,m,q,t){for(var v=[],x=0,u=h.length;x<u;++x)Object.prototype.hasOwnProperty.call(h,String(x))?v.push(P(d,
h,m,q,String(x),!0)):v.push("");t.forEach(function(t){t.match(/^\d+$/)||v.push(P(d,h,m,q,t,!0))});return v}function P(d,h,m,q,t,v){var u,w;h=Object.getOwnPropertyDescriptor(h,t)||{value:h[t]};h.get?w=h.set?d.stylize("[Getter/Setter]","special"):d.stylize("[Getter]","special"):h.set&&(w=d.stylize("[Setter]","special"));Object.prototype.hasOwnProperty.call(q,t)||(u="["+t+"]");w||(0>d.seen.indexOf(h.value)?(w=null===m?x(d,h.value,null):x(d,h.value,m-1),-1<w.indexOf("\n")&&(w=v?w.split("\n").map(function(d){return"  "+
d}).join("\n").substr(2):"\n"+w.split("\n").map(function(d){return"   "+d}).join("\n"))):w=d.stylize("[Circular]","special"));if(A(u)){if(v&&t.match(/^\d+$/))return w;u=JSON.stringify(""+t);u.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(u=u.substr(1,u.length-2),u=d.stylize(u,"name")):(u=u.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),u=d.stylize(u,"string"))}return u+": "+w}function O(d,h,m){var q=0;return 60<d.reduce(function(d,h){q++;0<=h.indexOf("\n")&&q++;return d+h.replace(/\u001b\[\d\d?m/g,
"").length+1},0)?m[0]+(""===h?"":h+"\n ")+" "+d.join(",\n  ")+" "+m[1]:m[0]+h+" "+d.join(", ")+" "+m[1]}function G(d){return Array.isArray(d)}function E(d){return"boolean"===typeof d}function ba(d){return"number"===typeof d}function T(d){return"string"===typeof d}function A(d){return void 0===d}function ca(d){return sa(d)&&"[object RegExp]"===Object.prototype.toString.call(d)}function sa(d){return"object"===typeof d&&null!==d}function Z(d){return sa(d)&&"[object Date]"===Object.prototype.toString.call(d)}
function Y(d){return sa(d)&&("[object Error]"===Object.prototype.toString.call(d)||d instanceof Error)}function ia(d){return"function"===typeof d}function Aa(d){return 10>d?"0"+d.toString(10):d.toString(10)}function Ha(){var d=new Date,h=[Aa(d.getHours()),Aa(d.getMinutes()),Aa(d.getSeconds())].join(":");return[d.getDate(),Ia[d.getMonth()],h].join(" ")}var Ba=/%[sdj%]/g;w.format=function(d){if(!T(d)){for(var h=[],m=0;m<arguments.length;m++)h.push(q(arguments[m]));return h.join(" ")}m=1;var t=arguments,
v=t.length;h=String(d).replace(Ba,function(d){if("%%"===d)return"%";if(m>=v)return d;switch(d){case "%s":return String(t[m++]);case "%d":return Number(t[m++]);case "%j":try{return JSON.stringify(t[m++])}catch(ta){return"[Circular]"}default:return d}});for(var x=t[m];m<v;x=t[++m])h=null!==x&&sa(x)?h+(" "+q(x)):h+(" "+x);return h};w.deprecate=function(m,q){if(A(d.process))return function(){return w.deprecate(m,q).apply(this,arguments)};if(!0===h.noDeprecation)return m;var t=!1;return function(){if(!t){if(h.throwDeprecation)throw Error(q);
h.traceDeprecation?console.trace(q):console.error(q);t=!0}return m.apply(this,arguments)}};var oa={},Qa;w.debuglog=function(d){A(Qa)&&(Qa=h.env.NODE_DEBUG||"");d=d.toUpperCase();if(!oa[d])if((new RegExp("\\b"+d+"\\b","i")).test(Qa)){var m=h.pid;oa[d]=function(){var h=w.format.apply(w,arguments);console.error("%s %d: %s",d,m,h)}}else oa[d]=function(){};return oa[d]};w.inspect=q;q.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],
cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]};q.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"};w.isArray=G;w.isBoolean=E;w.isNull=function(d){return null===d};w.isNullOrUndefined=function(d){return null==d};w.isNumber=ba;w.isString=T;w.isSymbol=function(d){return"symbol"===typeof d};w.isUndefined=A;w.isRegExp=ca;w.isObject=sa;w.isDate=Z;w.isError=Y;w.isFunction=ia;w.isPrimitive=function(d){return null===
d||"boolean"===typeof d||"number"===typeof d||"string"===typeof d||"symbol"===typeof d||"undefined"===typeof d};w.isBuffer=u("./support/isBuffer");var Ia="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ");w.log=function(){console.log("%s - %s",Ha(),w.format.apply(w,arguments))};w.inherits=u("inherits");w._extend=function(d,h){if(!h||!sa(h))return d;for(var m=Object.keys(h),q=m.length;q--;)d[m[q]]=h[m[q]];return d}}).call(this,u("_process"),"undefined"!==typeof global?global:"undefined"!==
typeof self?self:"undefined"!==typeof window?window:{})},{"./support/isBuffer":34,_process:23,inherits:33}],36:[function(u,y,w){w.VAST=u("./lib/VAST")},{"./lib/VAST":37}],37:[function(u,y,w){function h(){}function d(d){m(d,this,!0);this.ads.forEach(function(d){v({system:{version:null},errors:[]},d);d.creatives.forEach(function(d){v({id:null,sequence:null,adID:null},d);O[d.type](d)});P[d.type](d)});this.__private__={wrappers:[],inlines:[]}}var q=u("lie"),B=u("superagent"),m=u("./utils/copy"),v=u("./utils/defaults"),
x=u("./utils/extend"),t=u("./utils/nodeify_promise"),H=Array.prototype.push,R=u("./xml_from_vast"),P={inline:function(d){v({description:null,survey:null},d)},wrapper:function(){}},O={linear:function(d){v({trackingEvents:[],parameters:null,videoClicks:null},d);(d.mediaFiles||[]).forEach(function(d){v({id:null,bitrate:null,scalable:null,maintainAspectRatio:null,apiFramework:null},d)})},companions:function(d){d.companions.forEach(function(d){v({expandedWidth:null,expandedHeight:null,apiFramework:null,
trackingEvents:[],clickThrough:null,altText:null,parameters:null},d)})},nonLinear:function(d){v({trackingEvents:[]},d);d.ads.forEach(function(d){v({id:null,expandedWidth:null,expandedHeight:null,scalable:null,maintainAspectRatio:null,minSuggestedDuration:null,apiFramework:null,clickThrough:null,parameters:null},d)})}};Object.defineProperties(d.prototype,{wrappers:{get:function(){var d=this.__private__.wrappers;d.length=0;H.apply(d,this.filter("ads",function(d){return"wrapper"===d.type}));return d}},
inlines:{get:function(){var d=this.__private__.inlines;d.length=0;H.apply(d,this.filter("ads",function(d){return"inline"===d.type}));return d}}});d.prototype.get=function(d){return((d||"").match(/[^\[\]\.]+/g)||[]).reduce(function(d,h){return(d||void 0)&&d[h]},this)};d.prototype.set=function(d,h){function m(d,h){switch(d.input.charAt(h)){case ".":return Object;case "[":return Array;case "]":return m(d,h+1);default:return null}}var q=function(){for(var h=/[^\[\]\.]+/g,q=[],t;t=h.exec(d);)q.push({token:t[0],
type:m(t,t.index+t[0].length)});return q}(),t=q.pop();q=q.reduce(function(d,h){return d[h.token]||(d[h.token]=new h.type)},this);if(!d)throw Error("prop must be specified.");return q[t.token]=h};d.prototype.map=function(d,h){d=this.get(d)||[];var m=d.length,q=[];if(!(d instanceof Array))return q;for(var t=0;t<m;t++)q.push(h.call(this,d[t],t,d));return q};d.prototype.filter=function(d,h){d=this.get(d)||[];var m=d.length,q=[];if(!(d instanceof Array))return q;for(var t=0;t<m;t++)h.call(this,d[t],t,
d)&&q.push(d[t]);return q};d.prototype.find=function(d,h){d=this.get(d)||[];var m=d.length;if(d instanceof Array)for(var q=0;q<m;q++)if(h.call(this,d[q],q,d))return d[q]};d.prototype.toPOJO=function(){var d=JSON.parse(JSON.stringify(this));delete d.__private__;return d};d.prototype.copy=function(){return new this.constructor(this.toPOJO())};d.prototype.resolveWrappers=function(d,h){function m(d,h){function m(d){return function(h){return h.type===d}}var q=function(d){return{linear:d.filter(m("linear")),
companions:d.filter(m("companions")),nonLinear:d.filter(m("nonLinear"))}}(d.creatives);v(d.impressions,h.impressions);v(d.errors,h.errors);h.creatives.forEach(function(d){v(q[d.type].shift()||{},d)});H.apply(h.creatives,"wrapper"!==h.type?[]:["linear","companions","nonLinear"].reduce(function(d,h){return d.concat(q[h])},[]));return h}var u=isNaN(d)?Infinity:d;d="function"===typeof d?d:h;var w=this.constructor,y=this;return 0===u?q.reject(Error("Too many redirects were made.")):t(q.all(this.map("wrappers",
function(d){return q.resolve(B.get(d.vastAdTagURI)).then(function(h){return{wrapper:d,response:w.pojoFromXML(h.text).ads}})})).then(function(d){var h=d.map(function(d){return d.wrapper}),q=d.map(function(d){return d.response});return new w(x(y.toPOJO(),{ads:y.map("ads",function(d){var t=h.indexOf(d),v=h[t];return(t=q[t])?t.map(m.bind(null,v)):[d]}).reduce(function(d,h){return d.concat(h)})}))}).then(function(d){return 0<d.get("wrappers.length")?d.resolveWrappers(u-1):d}),d)};d.prototype.toXML=function(){var d=
this.validate();if(!d.valid)throw Error("VAST is invalid: "+d.reasons.join(", "));return R(this)};d.prototype.validate=function(){function d(d){t.get(d)||v.push(d+" is required")}function m(d){0<t.get(d+".length")||v.push(d+" must contain at least one value")}function q(h,q){q.exists.map(h).forEach(d);q.atLeastOne.map(h).forEach(m)}var t=this,v=[],x={inline:function(d){var m={linear:function(d){q(d,{exists:["duration"],atLeastOne:["mediaFiles"]})},companions:function(d){t.get(d("companions")).forEach(function(h,
m){q(function(h){return d("companions["+m+"]."+h)},{exists:[],atLeastOne:["resources"]})})},nonLinear:function(d){t.get(d("ads")).forEach(function(h,m){q(function(h){return d("ads["+m+"]."+h)},{exists:[],atLeastOne:["resources"]})})}};q(d,{exists:["title"],atLeastOne:["creatives"]});t.get(d("creatives")).forEach(function(t,v){function x(h){return d("creatives["+v+"]."+h)}q(x,{exists:["type"],atLeastOne:[]});(m[t.type]||h)(x)})},wrapper:function(d){q(d,{exists:["vastAdTagURI"],atLeastOne:[]})}};q(function(d){return d},
{exists:[],atLeastOne:["ads"]});this.get("ads").forEach(function(d,m){function t(d){return"ads["+m+"]."+d}q(t,{exists:["type","system.name"],atLeastOne:["impressions"]});(x[d.type]||h)(t)});return{valid:0===v.length,reasons:0===v.length?null:v}};d.pojoFromXML=u("./pojo_from_xml");d.fetch=function(d,h,m){var v="object"===typeof h?h||{}:{};h="function"===typeof m?m:h;var x=this;return t(q.resolve(B.get(d).set(v.headers||{})).then(function(d){d=new x(x.pojoFromXML(d.text));return v.resolveWrappers?d.resolveWrappers(v.maxRedirects):
d}),h)};y.exports=d},{"./pojo_from_xml":38,"./utils/copy":40,"./utils/defaults":41,"./utils/extend":42,"./utils/nodeify_promise":43,"./xml_from_vast":50,lie:21,superagent:29}],38:[function(u,y,w){function h(d){return d[0]||{attributes:{}}}function d(d){return d.find("StaticResource,IFrameResource,HTMLResource").map(function(d){return{type:d.tag.replace(/Resource$/,"").toLowerCase(),creativeType:d.attributes.creativeType,data:d.value}})}var q=u("./utils/parse_xml"),B=u("./utils/timestamp_to_seconds"),
m=u("./utils/string_to_boolean"),v=u("./utils/extend"),x=u("./utils/trim_object"),t=u("./utils/numberify"),H={linear:function(d){var q=h(d.find("Duration")),v=d.find("Tracking"),x=h(d.find("AdParameters")),u=d.find("VideoClicks")[0];d=d.find("MediaFile");return{type:"linear",duration:B(q.value)||void 0,trackingEvents:v.map(function(d){return{event:d.attributes.event,uri:d.value}}),parameters:x.value,videoClicks:u&&function(){var d=h(u.find("ClickThrough")),m=u.find("ClickTracking"),q=u.find("CustomClick");
return{clickThrough:d.value,clickTrackings:m.map(function(d){return d.value}),customClicks:q.map(function(d){return{id:d.attributes.id,uri:d.value}})}}(),mediaFiles:d.map(function(d){var h=d.attributes;return{id:h.id,delivery:h.delivery,type:h.type,uri:d.value,bitrate:t(h.bitrate),width:t(h.width),height:t(h.height),scalable:m(h.scalable),maintainAspectRatio:m(h.maintainAspectRatio),apiFramework:h.apiFramework}})}},companions:function(m){return{type:"companions",companions:m.find("Companion").map(function(m){var q=
m.find("Tracking"),v=h(m.find("CompanionClickThrough")),x=h(m.find("AltText")),u=h(m.find("AdParameters"));return{id:m.attributes.id,width:t(m.attributes.width),height:t(m.attributes.height),expandedWidth:t(m.attributes.expandedWidth),expandedHeight:t(m.attributes.expandedHeight),apiFramework:m.attributes.apiFramework,resources:d(m),trackingEvents:q.map(function(d){return{event:d.attributes.event,uri:d.value}}),clickThrough:v.value,altText:x.value,parameters:u.value}})}},nonLinear:function(q){var v=
q.find("NonLinear");q=q.find("Tracking");return{type:"nonLinear",ads:v.map(function(q){var v=h(q.find("NonLinearClickThrough")),x=h(q.find("AdParameters"));return{id:q.attributes.id,width:t(q.attributes.width),height:t(q.attributes.height),expandedWidth:t(q.attributes.expandedWidth),expandedHeight:t(q.attributes.expandedHeight),scalable:m(q.attributes.scalable),maintainAspectRatio:m(q.attributes.maintainAspectRatio),minSuggestedDuration:B(q.attributes.minSuggestedDuration)||void 0,apiFramework:q.attributes.apiFramework,
resources:d(q),clickThrough:v.value,parameters:x.value}}),trackingEvents:q.map(function(d){return{event:d.attributes.event,uri:d.value}})}}},R={inline:function(d){var m=h(d.find("AdTitle")),q=h(d.find("Description"));d=h(d.find("Survey"));return{type:"inline",title:m.value,description:q.value,survey:d.value}},wrapper:function(d){return{type:"wrapper",vastAdTagURI:h(d.find("VASTAdTagURI")).value}}};y.exports=function(d){var m=q(d);if(!m("VAST")[0])throw Error("["+d+"] is not a valid VAST document.");
return x({version:h(m("VAST")).attributes.version,ads:m("Ad").map(function(d){var m=h(d.find("Wrapper,InLine")).tag.toLowerCase(),q=h(d.find("AdSystem")),x=d.find("Error"),u=d.find("Impression"),w=d.find("Creative");return v({id:d.attributes.id,system:{name:q.value,version:q.attributes.version},errors:x.map(function(d){return d.value}),impressions:u.map(function(d){return{uri:d.value,id:d.attributes.id}}),creatives:w.map(function(d){var m=function(){switch(h(d.find("Linear,CompanionAds,NonLinearAds")).tag){case "Linear":return"linear";
case "CompanionAds":return"companions";case "NonLinearAds":return"nonLinear"}}();return v({id:d.attributes.id,sequence:t(d.attributes.sequence),adID:d.attributes.AdID},H[m](d))})},R[m](d))})},!0)}},{"./utils/extend":42,"./utils/numberify":44,"./utils/parse_xml":45,"./utils/string_to_boolean":47,"./utils/timestamp_to_seconds":48,"./utils/trim_object":49}],39:[function(u,y,w){function h(d){return null!==d&&void 0!==d}function d(d){return void 0!==d?String(d).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,
"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):""}function q(d){for(var h="";d--;)h+=" ";return h}function B(d){return(void 0!==d?function(d){for(var h=[],m=/]]\x3e/g,q=0,t,v;t=m.exec(d);)v=t.index+2,h.push(t.input.substring(q,v)),q=v;h.push(d.substring(q,d.length));return h}(String(d)):[""]).reduce(function(d,h){return d+"<![CDATA["+h+"]]\x3e"},"")}function m(h){return h.cdata?B(h.value):d(h.value)}function v(x,t,u){var w=x.tag,B=x.attributes||{},y=Object.keys(B),H=x.value,E=0<(x.children||
[]).length;y=y.every(function(d){return h(B[d])})&&0<y.length;H=h(H)||E||y;y=q(t);var ba="<"+w+Object.keys(B).reduce(function(m,q){return u&&!h(B[q])?m:m+" "+q+'="'+d(B[q])+'"'},"")+">";w="</"+w+">";return!u||H||x.required?E?[y+ba].concat(x.children.reduce(function(d,h){return d.concat(v(h,t+4,u))},[]),[y+w]):[y+ba+m(x)+w]:[]}y.exports=function(d,h){return['<?xml version="1.0" encoding="UTF-8"?>'].concat(v(d,0,h)).join("\n")}},{}],40:[function(u,y,w){function h(d,h,x){return Object.keys(d).reduce(function(h,
m){h[m]=x?q(d[m],null,!0):d[m];return h},h||{})}function d(d,h,x){h=h||[];B.apply(h,x?d.map(function(d){return q(d,null,!0)}):d);return h}function q(m,q,x){var t=("object"===typeof q||null)&&q;q="boolean"===typeof q?q:x;return Object(m)!==m?m:m instanceof Array?d(m,t,q):h(m,t,q)}var B=Array.prototype.push;y.exports=q},{}],41:[function(u,y,w){function h(d){return Object(d)===d}function d(d){return d instanceof Array}var q=Array.prototype.push;y.exports=function x(m,v){return[m,v].every(d)?(q.apply(v,
m.filter(function(d){return 0>v.indexOf(d)})),v):Object.keys(m).reduce(function(d,q){[m[q],d[q]].every(h)&&x(m[q],d[q]);q in d||(d[q]=m[q]);return d},v)}},{}],42:[function(u,y,w){y.exports=function(){return Array.prototype.slice.call(arguments).reduce(function(h,d){return Object.keys(d||{}).reduce(function(h,u){h[u]=d[u];return h},h)},{})}},{}],43:[function(u,y,w){y.exports=function(h,d){if("function"!==typeof d)return h;h.then(function(h){d(null,h)},function(h){d(h)});return h}},{}],44:[function(u,
y,w){y.exports=function(h){if(/string|number|boolean/.test(typeof h))return isNaN(h)?void 0:Number(h)}},{}],45:[function(u,y,w){function h(m){return{tag:m.tagName,value:0<m.childElementCount?null:m.textContent,attributes:B.call(m.attributes,function(d,h){d[h.name]=h.value;return d},{}),find:function(q){return d.call(m.querySelectorAll(q),h)},children:function(){return q.call(m.childNodes,function(d){return d instanceof Element}).map(h)}}}var d=Array.prototype.map,q=Array.prototype.filter,B=Array.prototype.reduce,
m=new DOMParser;y.exports=function(q){var v=m.parseFromString(q,"application/xml");return function(m){return d.call(v.querySelectorAll(m),h)}}},{}],46:[function(u,y,w){function h(d){return(9<d?"":"0")+d.toString()}y.exports=function(d){return Number(d)!==d?null:[Math.floor(d/60/60),Math.floor(d/60%60),Math.floor(d%60%60)].map(h).join(":")}},{}],47:[function(u,y,w){y.exports=function(h){switch((h||"").toLowerCase()){case "true":return!0;case "false":return!1}}},{}],48:[function(u,y,w){y.exports=function(h){return(h=
(h||"").match(/^(\d\d):(\d\d):(\d\d)$/))&&h.slice(1,4).map(parseFloat).reduce(function(d,h,u){return d+h*Math.pow(60,Math.abs(u-2))},0)}},{}],49:[function(u,y,w){y.exports=function B(d,q){return Object(d)!==d?d:Object.keys(d).reduce(function(m,v){q&&d[v]instanceof Array?m[v]=d[v].filter(function(d){return void 0!==d}).map(function(d){return B(d,!0)}):q&&d[v]instanceof Object?m[v]=B(d[v],!0):void 0!==d[v]&&(m[v]=d[v]);return m},{})}},{}],50:[function(u,y,w){function h(d){return{tag:"TrackingEvents",
children:d.map(function(d){return{tag:"Tracking",attributes:{event:d.event},value:d.uri,cdata:!0}})}}function d(d){return d.map(function(d){a:{switch(d.type){case "static":var h="StaticResource";break a;case "iframe":h="IFrameResource";break a;case "html":h="HTMLResource";break a}h=void 0}return{tag:h,attributes:{creativeType:d.creativeType},value:d.data,cdata:!0}})}function q(d){return{tag:"AdParameters",value:d.parameters}}var B=u("./utils/seconds_to_timestamp"),m=u("./utils/compile_xml"),v={linear:function(d){return{tag:"Linear",
children:[{tag:"Duration",value:B(d.duration)},h(d.trackingEvents),q(d)].concat(d.videoClicks?[{tag:"VideoClicks",children:[{tag:"ClickThrough",value:d.videoClicks.clickThrough,cdata:!0}].concat(d.videoClicks.clickTrackings.map(function(d){return{tag:"ClickTracking",value:d,cdata:!0}}),d.videoClicks.customClicks.map(function(d){return{tag:"CustomClick",attributes:{id:d.id},value:d.uri,cdata:!0}}))}]:[],[{tag:"MediaFiles",children:d.mediaFiles.map(function(d){return{tag:"MediaFile",attributes:{id:d.id,
width:d.width,height:d.height,bitrate:d.bitrate,type:d.type,delivery:d.delivery,scalable:d.scalable,maintainAspectRatio:d.maintainAspectRatio,apiFramework:d.apiFramework},value:d.uri,cdata:!0}})}])}},companions:function(m){return{tag:"CompanionAds",children:m.companions.map(function(m){return{tag:"Companion",attributes:{id:m.id,width:m.width,height:m.height,expandedWidth:m.expandedWidth,expandedHeight:m.expandedHeight,apiFramework:m.apiFramework},children:d(m.resources).concat([h(m.trackingEvents),
{tag:"CompanionClickThrough",value:m.clickThrough,cdata:!0},{tag:"AltText",value:m.altText},q(m)])}})}},nonLinear:function(m){return{tag:"NonLinearAds",children:m.ads.map(function(h){return{tag:"NonLinear",attributes:{id:h.id,width:h.width,height:h.height,expandedWidth:h.expandedWidth,expandedHeight:h.expandedHeight,scalable:h.scalable,maintainAspectRatio:h.maintainAspectRatio,minSuggestedDuration:B(h.minSuggestedDuration),apiFramework:h.apiFramework},children:d(h.resources).concat([{tag:"NonLinearClickThrough",
value:h.clickThrough,cdata:!0},q(h)])}}).concat([h(m.trackingEvents)])}}};y.exports=function(d){return m({tag:"VAST",attributes:{version:d.get("version")},children:d.map("ads",function(d){var h={id:d.id};a:{switch(d.type){case "inline":var m="InLine";break a;case "wrapper":m="Wrapper";break a}m=void 0}return{tag:"Ad",attributes:h,children:[{tag:m,children:[{tag:"AdSystem",attributes:{version:d.system.version},value:d.system.name},{tag:"AdTitle",value:d.title},{tag:"Description",value:d.description},
{tag:"Survey",value:d.survey,cdata:!0},{tag:"VASTAdTagURI",value:d.vastAdTagURI,cdata:!0}].concat(d.errors.map(function(d){return{tag:"Error",value:d,cdata:!0}}),d.impressions.map(function(d){return{tag:"Impression",value:d.uri,cdata:!0,attributes:{id:d.id}}}),[{tag:"Creatives",children:d.creatives.map(function(d){return{tag:"Creative",attributes:{id:d.id,sequence:d.sequence,AdID:d.adID},children:[v[d.type](d)]}}),required:!0}])}]}})},!0)}},{"./utils/compile_xml":39,"./utils/seconds_to_timestamp":46}]},
{},[1])(1)});/*
 
 https://github.com/videojs/videojs-youtube
*/
(function(C,u){if("object"===typeof exports&&"undefined"!==typeof module){var y=require("video.js");module.exports=u(y.default||y)}else"function"===typeof define&&define.amd?define(["videojs"],function(w){return C.Youtube=u(w)}):C.Youtube=u(C.videojs)})(this,function(C){function u(d,h){var m=!1,q=document.createElement("script"),u=document.getElementsByTagName("script")[0];u.parentNode.insertBefore(q,u);q.onload=function(){m||(m=!0,"function"===typeof h&&h())};q.onreadystatechange=function(){m||"complete"!==
this.readyState&&"loaded"!==this.readyState||(m=!0,"function"===typeof h&&h())};q.src=d}function y(){var d=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css";h.styleSheet?h.styleSheet.cssText=".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }":h.appendChild(document.createTextNode(".vjs-youtube .vjs-iframe-blocker { display: none; }.vjs-youtube.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-youtube .vjs-poster { background-size: cover; }.vjs-youtube-mobile .vjs-big-play-button { display: none; }"));
d.appendChild(h)}var w=C.browser.IS_IOS||C.browser.IS_NATIVE_ANDROID,h=C.getTech("Tech"),d=C.extend(h,{constructor:function(q,u){h.call(this,q,u);this.setPoster(q.poster);this.setSrc(this.options_.source,!0);this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-youtube",w&&(this.el_.parentNode.className+=" vjs-youtube-mobile"),d.isApiReady?this.initYTPlayer():d.apiReadyQueue.push(this))}.bind(this))},dispose:function(){if(this.ytPlayer)this.ytPlayer.stopVideo&&this.ytPlayer.stopVideo(),
this.ytPlayer.destroy&&this.ytPlayer.destroy();else{var q=d.apiReadyQueue.indexOf(this);-1!==q&&d.apiReadyQueue.splice(q,1)}this.ytPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-youtube","").replace(" vjs-youtube-mobile","");this.el_.parentNode.removeChild(this.el_);h.prototype.dispose.call(this)},createEl:function(){var d=document.createElement("div");d.setAttribute("id",this.options_.techId);d.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");
d.setAttribute("class","vjs-tech");var h=document.createElement("div");h.appendChild(d);w||this.options_.ytControls||(d=document.createElement("div"),d.setAttribute("class","vjs-iframe-blocker"),d.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),d.onclick=function(){this.pause()}.bind(this),h.appendChild(d));return h},initYTPlayer:function(){var d={controls:0,modestbranding:1,rel:0,showinfo:0,autoplay:this.options_.autoplay?1:0,mute:this.options_.autoplay?1:0,loop:this.options_.loop?
1:0,cc_load_policy:0,iv_load_policy:3,playsinline:1};"undefined"!==typeof this.options_.autohide&&(d.autohide=this.options_.autohide);"undefined"!==typeof this.options_.cc_load_policy&&(d.cc_load_policy=this.options_.cc_load_policy);"undefined"!==typeof this.options_.ytControls&&(d.controls=this.options_.ytControls);"undefined"!==typeof this.options_.disablekb&&(d.disablekb=this.options_.disablekb);"undefined"!==typeof this.options_.color&&(d.color=this.options_.color);d.controls?"undefined"!==typeof this.options_.fs&&
(d.fs=this.options_.fs):d.fs=0;if(-1!==this.options_.source.src.indexOf("end=")){var h=this.options_.source.src.match(/end=([0-9]*)/);this.options_.end=parseInt(h[1])}"undefined"!==typeof this.options_.end&&(d.end=this.options_.end);"undefined"!==typeof this.options_.hl?d.hl=this.options_.hl:"undefined"!==typeof this.options_.language&&(d.hl=this.options_.language.substr(0,2));"undefined"!==typeof this.options_.iv_load_policy&&(d.iv_load_policy=this.options_.iv_load_policy);"undefined"!==typeof this.options_.list?
d.list=this.options_.list:this.url&&"undefined"!==typeof this.url.listId&&(d.list=this.url.listId);"undefined"!==typeof this.options_.listType&&(d.listType=this.options_.listType);"undefined"!==typeof this.options_.modestbranding&&(d.modestbranding=this.options_.modestbranding);"undefined"!==typeof this.options_.playlist&&(d.playlist=this.options_.playlist);"undefined"!==typeof this.options_.playsinline&&(d.playsinline=this.options_.playsinline);"undefined"!==typeof this.options_.rel&&(d.rel=this.options_.rel);
"undefined"!==typeof this.options_.showinfo&&(d.showinfo=this.options_.showinfo);-1!==this.options_.source.src.indexOf("start=")&&(h=this.options_.source.src.match(/start=([0-9]*)/),this.options_.start=parseInt(h[1]));"undefined"!==typeof this.options_.start&&(d.start=this.options_.start);"undefined"!==typeof this.options_.theme&&(d.theme=this.options_.theme);if("undefined"!==typeof this.options_.customVars){var m=this.options_.customVars;Object.keys(m).forEach(function(h){d[h]=m[h]})}this.activeVideoId=
this.url?this.url.videoId:null;this.activeList=d.list;h={videoId:this.activeVideoId,playerVars:d,events:{onReady:this.onPlayerReady.bind(this),onPlaybackQualityChange:this.onPlayerPlaybackQualityChange.bind(this),onPlaybackRateChange:this.onPlayerPlaybackRateChange.bind(this),onStateChange:this.onPlayerStateChange.bind(this),onVolumeChange:this.onPlayerVolumeChange.bind(this),onError:this.onPlayerError.bind(this)}};"undefined"!==typeof this.options_.enablePrivacyEnhancedMode&&this.options_.enablePrivacyEnhancedMode&&
(h.host="https://www.youtube-nocookie.com");this.ytPlayer=new YT.Player(this.options_.techId,h)},onPlayerReady:function(){this.options_.muted&&this.ytPlayer.mute();1<this.ytPlayer.getAvailablePlaybackRates().length&&(this.featuresPlaybackRate=!0);this.playerReady_=!0;this.triggerReady();this.playOnReady?this.play():this.cueOnReady&&(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},
onPlayerStateChange:function(d){d=d.data;if(d!==this.lastState&&!this.errorNumber)switch(this.lastState=d,d){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case YT.PlayerState.ENDED:this.trigger("ended");break;case YT.PlayerState.PLAYING:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();break;case YT.PlayerState.PAUSED:this.trigger("canplay");
if(this.isSeeking)this.onSeeked();else this.trigger("pause");break;case YT.PlayerState.BUFFERING:this.player_.trigger("timeupdate"),this.player_.trigger("waiting")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(d){this.errorNumber=d.data;this.trigger("pause");this.trigger("error")},error:function(){var d=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:d,message:"Error while trying to play the video"};case 2:case 100:return{code:d,message:"Unable to find the video"};
case 101:case 150:return{code:d,message:"Playback on other Websites has been disabled by the video owner."}}return{code:d,message:"YouTube unknown error ("+this.errorNumber+")"}},loadVideoById_:function(d){d={videoId:d};this.options_.start&&(d.startSeconds=this.options_.start);this.options_.end&&(d.endEnd=this.options_.end);this.ytPlayer.loadVideoById(d)},cueVideoById_:function(d){d={videoId:d};this.options_.start&&(d.startSeconds=this.options_.start);this.options_.end&&(d.endEnd=this.options_.end);
this.ytPlayer.cueVideoById(d)},src:function(d){d&&this.setSrc({src:d});return this.source},poster:function(){return w?null:this.poster_},setPoster:function(d){this.poster_=d},setSrc:function(h){h&&h.src&&(delete this.errorNumber,this.source=h,this.url=d.parseUrl(h.src),!this.options_.poster&&this.url.videoId&&(this.poster_="https://img.youtube.com/vi/"+this.url.videoId+"/0.jpg",this.trigger("posterchange"),this.checkHighResPoster()),this.options_.autoplay?this.isReady_?this.play():this.playOnReady=
!0:this.activeVideoId!==this.url.videoId&&(this.isReady_?(this.cueVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId):this.cueOnReady=!0))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(d){this.options_.autoplay=d},loop:function(){return this.options_.loop},setLoop:function(d){this.options_.loop=d},play:function(){this.url&&this.url.videoId&&(this.wasPausedBeforeSeek=!1,this.isReady_?(this.url.listId&&(this.activeList===this.url.listId?this.ytPlayer.playVideo():
(this.ytPlayer.loadPlaylist(this.url.listId),this.activeList=this.url.listId)),this.activeVideoId===this.url.videoId?this.ytPlayer.playVideo():(this.loadVideoById_(this.url.videoId),this.activeVideoId=this.url.videoId)):(this.trigger("waiting"),this.playOnReady=!0))},pause:function(){this.ytPlayer&&this.ytPlayer.pauseVideo()},paused:function(){return this.ytPlayer?this.lastState!==YT.PlayerState.PLAYING&&this.lastState!==YT.PlayerState.BUFFERING:!0},currentTime:function(){return this.ytPlayer?this.ytPlayer.getCurrentTime():
0},setCurrentTime:function(d){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());this.ytPlayer.seekTo(d,!0);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;this.lastState===YT.PlayerState.PAUSED&&this.timeBeforeSeek!==d&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){this.lastState===YT.PlayerState.PAUSED&&this.isSeeking?this.currentTime()!==
this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.ytPlayer?C.createTimeRange(0,this.ytPlayer.getDuration()):C.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return this.ytPlayer?this.ytPlayer.getPlaybackRate():
1},setPlaybackRate:function(d){this.ytPlayer&&this.ytPlayer.setPlaybackRate(d)},duration:function(){return this.ytPlayer?this.ytPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.ytPlayer?this.lastState===YT.PlayerState.ENDED:!1},volume:function(){return this.ytPlayer?this.ytPlayer.getVolume()/100:1},setVolume:function(d){this.ytPlayer&&this.ytPlayer.setVolume(100*d)},muted:function(){return this.ytPlayer?this.ytPlayer.isMuted():!1},setMuted:function(d){this.ytPlayer&&
(this.muted(!0),d?this.ytPlayer.mute():this.ytPlayer.unMute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.ytPlayer||!this.ytPlayer.getVideoLoadedFraction)return C.createTimeRange();var d=this.ytPlayer.getVideoLoadedFraction()*this.ytPlayer.getDuration();return C.createTimeRange(0,d)},preload:function(){},load:function(){},reset:function(){},networkState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 3:return 2;
default:return 1}},readyState:function(){if(!this.ytPlayer)return 0;switch(this.ytPlayer.getPlayerState()){case -1:return 0;case 5:return 1;case 3:return 2;default:return 4}},supportsFullScreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled},checkHighResPoster:function(){var d="https://img.youtube.com/vi/"+this.url.videoId+"/maxresdefault.jpg";try{var h=new Image;h.onload=function(){if("naturalHeight"in h){if(90>=
h.naturalHeight||120>=h.naturalWidth)return}else if(90>=h.height||120>=h.width)return;this.poster_=d;this.trigger("posterchange")}.bind(this);h.onerror=function(){};h.src=d}catch(m){}}});d.isSupported=function(){return!0};d.canPlaySource=function(h){return d.canPlayType(h.type)};d.canPlayType=function(d){return"video/youtube"===d};d.parseUrl=function(d){var h={videoId:null},m=d.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&\?]*).*/);m&&11===m[2].length&&(h.videoId=m[2]);(m=d.match(/[?&]list=([^#&\?]+)/))&&
m[1]&&(h.listId=m[1]);return h};window.onYouTubeIframeAPIReady=window.onYouTubeIframeAPIReady||function(){YT.ready(function(){d.isApiReady=!0;for(var h=0;h<d.apiReadyQueue.length;++h)d.apiReadyQueue[h].initYTPlayer()})};d.apiReadyQueue=[];"undefined"!==typeof document&&(u("https://www.youtube.com/iframe_api"),y());"undefined"!==typeof C.registerTech?C.registerTech("Youtube",d):C.registerComponent("Youtube",d)});/*
 
 https://github.com/trieu/videojs-facebook
*/
(function(C,u){if("object"===typeof exports&&"undefined"!==typeof module){var y=require("video.js");module.exports=u(y.default||y)}else"function"===typeof define&&define.amd?define(["videojs"],function(w){return C.Facebook=u(w)}):C.Facebook=u(C.videojs)})(this,function(C){function u(){var d=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css";h.styleSheet?h.styleSheet.cssText=".vjs-facebook .vjs-iframe-blocker { display: none; }.vjs-facebook.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-facebook .vjs-poster { background-size: cover; }.vjs-facebook-mobile .vjs-big-play-button { display: none; }":
h.appendChild(document.createTextNode(".vjs-facebook .vjs-iframe-blocker { display: none; }.vjs-facebook.vjs-user-inactive .vjs-iframe-blocker { display: block; }.vjs-facebook .vjs-poster { background-size: cover; }.vjs-facebook-mobile .vjs-big-play-button { display: none; }"));d.appendChild(h)}var y=C.browser.IS_IOS||C.browser.IS_NATIVE_ANDROID,w=C.getTech("Tech"),h=C.extend(w,{constructor:function(d,h){mpl1DebugLog("constructor",d);w.call(this,d,h);this.setPoster(d.poster);this.setSrc(this.options_.source,
!0);this.setTimeout(function(){this.el_&&(this.el_.parentNode.className+=" vjs-facebook",y&&(this.el_.parentNode.className+=" vjs-facebook-mobile"),this.initFBPlayer())}.bind(this))},dispose:function(){this.fbPlayer&&(this.fbPlayer.pause(),this.iframeFbVideo&&this.iframeFbVideo.remove());this.fbPlayer=null;this.el_.parentNode.className=this.el_.parentNode.className.replace(" vjs-facebook","").replace(" vjs-facebook-mobile","");this.el_.parentNode.removeChild(this.el_);w.prototype.dispose.call(this)},
createEl:function(){var d=document.createElement("div");d.setAttribute("id",this.options_.techId);d.setAttribute("style","width:100%;height:100%;top:0;left:0;position:absolute");d.setAttribute("class","vjs-tech");d.innerHTML='<iframe id="f_'+this.options_.techId+'" src="about:blank"  frameborder="0" style="visibility:visible;border:0;overflow:hidden;"></iframe>';var h=document.createElement("div");h.appendChild(d);y||this.options_.ytControls||(d=document.createElement("div"),d.setAttribute("class",
"vjs-iframe-blocker"),d.setAttribute("style","position:absolute;top:0;left:0;width:100%;height:100%"),d.onclick=function(){this.pause()}.bind(this),h.appendChild(d));mpl1DebugLog("createEl",h);return h},initFBPlayer:function(){mpl1DebugLog("initFBPlayer");mpl1DebugLog(this.options_);var d=this.options_.source.width,h=this.options_.source.height,u=document.getElementById("f_"+this.options_.techId);u.setAttribute("width",d);u.setAttribute("height",h);console.log("initFBPlayer",u,d,h);this.iframeFbVideo=
u;this.fbVideoSetup()},fbVideoSetup:function(){var d=Math.floor(9999999*Math.random()),h=this.options_.source.src,u=this.options_.autoplay,m=this.options_.source.width,v=this.options_.source.height,x="hd1fbh_"+d,t=" var done = false, callAdPlayer = false;\n          window.fbAsyncInit = function () {       \n              if(done) return;          \n              done = true;\n              FB.init({ appId: '', status:true, xfbml:true, version: 'v3.2'});          \n              FB.Event.subscribe('xfbml.ready', function (msg) {\n                console.log('===========> xfbml.ready');\n                if (msg.type === 'video') {                       \n                    var node = document.querySelector('iframe');\n                    if(node) {\n                        node.removeAttribute('allowfullscreen'); \n                        //node.style.height = '"+
v+"px';\n                    }\n                    //if(node) node.setAttribute('donotallowfullscreen','true');                     \n                    parent['"+x+"'](msg.instance);\n                    callAdPlayer = true;\n                }\n              });\n              setTimeout(function(){\n                if(!callAdPlayer) parent['"+x+"'](false);\n              },5000)\n          };           \n          (function (d, s, id) {\n              var js, fjs = d.getElementsByTagName(s)[0], r = false;               \n              js = d.createElement(s);\n              js.id = id;\n              js.src = location.protocol + \"//static.blueseed.tv/ajs/video-player/facebook.sdk.js\";\n              js.onload = s.onreadystatechange = function () {\n                if (!r && (!this.readyState || this.readyState == 'complete')) {\n                    r = true;\n                    window.fbAsyncInit();\n                }\n            };\n              fjs.parentNode.insertBefore(js, fjs);\n          }(document, 'script', 'facebook-jssdk'));\n          setTimeout(fbAsyncInit,5000);\n      ",
w=!1,y=document.createElement("div");d={id:"fb"+d,"data-href":h,"class":"fb-video","data-show-captions":"false","data-show-text":"false","data-controls":"false","data-width":m,"data-height":v,"data-autoplay":"false",style:"width:"+m+"px;height:"+v+"px"};for(var C in d)y.setAttribute(C,d[C]);C=document.createElement("div");C.appendChild(y);w=this.iframeFbVideo.contentDocument||this.iframeFbVideo.contentWindow.document;w.write("\n        <style>\n        body { overflow:hidden; margin:0 auto;background-color:#000; }    \n        </style>\n      ");
w.write(C.innerHTML);w.write('<div id="fb-controller" style="display:none;" class="fbv-controller play-button"></div>');w.write('<div id="fb-root" style="display:none;"></div>');w.write("<script>"+t+"\x3c/script>");w.close();this.on("fullscreenchange",function(){});var O=this;window[x]=function(d){O.fbPlayer=d;mpl1DebugLog(O.fbPlayer);O.iframeFbVideo.setAttribute("height",w.documentElement.clientHeight);d.subscribe("startedBuffering",function(d){mpl1DebugLog("fbVideoPlayer startedBuffering Ok");O.onPlayerStateChange({data:-1})});
d.subscribe("startedPlaying",function(d){mpl1DebugLog("fbVideoPlayer startedPlaying Ok");O.onPlayerStateChange({data:2})});d.subscribe("paused",function(d){O.onPlayerStateChange({data:1});mpl1DebugLog("fbVideoPlayer paused Ok")});d.subscribe("error",function(d){O.onPlayerStateChange({data:4});mpl1DebugLog("fbVideoPlayer error");console.error(d)});d.subscribe("finishedPlaying",function(d){O.onPlayerStateChange({data:4});mpl1DebugLog("fbVideoPlayer finishedPlaying Ok");"function"===typeof eventCallback.ended&&
eventCallback.ended()});d.subscribe("finishedBuffering",function(d){mpl1DebugLog("fbVideoPlayer finishedBuffering Ok");O.onPlayerStateChange({data:2})});u?d.mute():d.unmute();O.onPlayerReady()}},onPlayerReady:function(){mpl1DebugLog("onPlayerReady");this.options_.muted&&this.fbPlayer.mute();this.playerReady_=!0;this.triggerReady();this.playOnReady&&this.play()},onPlayerPlaybackQualityChange:function(){},onPlayerPlaybackRateChange:function(){this.trigger("ratechange")},onPlayerStateChange:function(d){mpl1DebugLog("onPlayerStateChange",
d);var h=d.data;if(h===this.lastState||this.errorNumber)mpl1DebugLog("onPlayerStateChange, skip",d);else switch(this.lastState=h,h){case -1:this.trigger("loadstart");this.trigger("loadedmetadata");this.trigger("durationchange");this.trigger("ratechange");break;case 1:this.trigger("canplay");if(this.isSeeking)this.onSeeked();else this.trigger("pause");break;case 2:this.trigger("timeupdate");this.trigger("durationchange");this.trigger("playing");this.trigger("play");if(this.isSeeking)this.onSeeked();
break;case 3:this.player_.trigger("timeupdate");this.player_.trigger("waiting");break;case 4:this.trigger("ended")}},onPlayerVolumeChange:function(){this.trigger("volumechange")},onPlayerError:function(d){this.errorNumber=d.data;this.trigger("pause");this.trigger("error")},error:function(){var d=1E3+this.errorNumber;switch(this.errorNumber){case 5:return{code:d,message:"Error while trying to play the video"};case 2:case 100:return{code:d,message:"Unable to find the video"};case 101:case 150:return{code:d,
message:"Playback on other Websites has been disabled by the video owner."}}return{code:d,message:"YouTube unknown error ("+this.errorNumber+")"}},src:function(d){mpl1DebugLog("src",d);d&&this.setSrc({src:d});return this.source},poster:function(){return y?null:this.poster_},setPoster:function(d){this.poster_=d},setSrc:function(d){mpl1DebugLog("setSrc",d);d&&d.src&&(delete this.errorNumber,this.source=d,this.url=h.parseUrl(d.src).dataHref,this.options_.autoplay?this.isReady_?this.play():this.playOnReady=
!0:this.activeVideoId!==this.url.videoId&&this.isReady_&&(this.activeVideoId=this.url.videoId))},autoplay:function(){return this.options_.autoplay},setAutoplay:function(d){this.options_.autoplay=d},loop:function(){return this.options_.loop},setLoop:function(d){this.options_.loop=d},play:function(){mpl1DebugLog("fbVideoPlayer.play ...... ",this.url,this.lastState);this.url&&(this.wasPausedBeforeSeek=!1,this.fbPlayer&&!this.lastState&&(this.lastState=1),2!==this.lastState&&this.fbPlayer.play())},pause:function(){mpl1DebugLog(this.lastState+
" fbVideoPlayer.pause ...... ",this.url);2===this.lastState?(this.fbPlayer.pause(),this.onPlayerStateChange({data:1})):(this.fbPlayer.play(),this.onPlayerStateChange({data:2}))},paused:function(){return this.fbPlayer?2!==this.lastState&&3!==this.lastState:!0},currentTime:function(){return this.fbPlayer?this.fbPlayer.getCurrentPosition():0},setCurrentTime:function(d){this.lastState===YT.PlayerState.PAUSED&&(this.timeBeforeSeek=this.currentTime());this.isSeeking||(this.wasPausedBeforeSeek=this.paused());
this.fbPlayer.seek(d);this.trigger("timeupdate");this.trigger("seeking");this.isSeeking=!0;1===this.lastState&&this.timeBeforeSeek!==d&&(clearInterval(this.checkSeekedInPauseInterval),this.checkSeekedInPauseInterval=setInterval(function(){1===this.lastState&&this.isSeeking?this.currentTime()!==this.timeBeforeSeek&&(this.trigger("timeupdate"),this.onSeeked()):clearInterval(this.checkSeekedInPauseInterval)}.bind(this),250))},seeking:function(){return this.isSeeking},seekable:function(){return this.fbPlayer?
C.createTimeRange(0,this.fbPlayer.getDuration()):C.createTimeRange()},onSeeked:function(){clearInterval(this.checkSeekedInPauseInterval);this.isSeeking=!1;this.wasPausedBeforeSeek&&this.pause();this.trigger("seeked")},playbackRate:function(){return 1},setPlaybackRate:function(d){this.fbPlayer&&this.fbPlayer.setPlaybackRate(d)},duration:function(){return this.fbPlayer?this.fbPlayer.getDuration():0},currentSrc:function(){return this.source&&this.source.src},ended:function(){return this.fbPlayer?this.lastState===
YT.PlayerState.ENDED:!1},volume:function(){return this.fbPlayer?this.fbPlayer.getVolume()/100:1},setVolume:function(d){this.fbPlayer&&this.fbPlayer.setVolume(d)},muted:function(){return this.fbPlayer?this.fbPlayer.isMuted():!1},setMuted:function(d){this.fbPlayer&&(this.muted(!0),d?this.fbPlayer.mute():this.fbPlayer.unmute(),this.setTimeout(function(){this.trigger("volumechange")},50))},buffered:function(){if(!this.fbPlayer||!this.fbPlayer.getVideoLoadedFraction)return C.createTimeRange();var d=this.fbPlayer.getVideoLoadedFraction()*
this.fbPlayer.getDuration();return C.createTimeRange(0,d)},preload:function(){},load:function(){},reset:function(){},networkState:function(){return this.fbPlayer?2:0},supportsFullScreen:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}});h.isSupported=function(){return!0};h.canPlaySource=function(d){return h.canPlayType(d.type)};h.canPlayType=function(d){return"video/facebook"===d};h.parseUrl=function(d){return{videoId:null,
dataHref:d}};"undefined"!==typeof document&&u();"undefined"!==typeof C.registerTech?C.registerTech("facebook",h):C.registerComponent("facebook",h)});/*
 2016 Benoit Tremblay <trembl.ben@gmail.com>
 @license MIT
 @vimeo/player v1.0.6 | (c) 2016 Vimeo | MIT License | https://github.com/vimeo/player.js */
(function(C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define([],C):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsVimeo=C()})(function(){return function h(u,y,w){function d(m,v){if(!y[m]){if(!u[m]){var x="function"==typeof require&&require;if(!v&&x)return x(m,!0);if(q)return q(m,!0);v=Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v;}v=y[m]=
{exports:{}};u[m][0].call(v.exports,function(h){var q=u[m][1][h];return d(q?q:h)},v,v.exports,h,u,y,w)}return y[m].exports}for(var q="function"==typeof require&&require,B=0;B<w.length;B++)d(w[B]);return d}({1:[function(u,y,w){(function(h){!function(d,h){"object"==typeof w&&"undefined"!=typeof y?y.exports=h():(d.Vimeo=d.Vimeo||{},d.Vimeo.Player=h())}(this,function(){function d(d,h){return h={exports:{}},d(h,h.exports),h.exports}function q(d,h,m){var q=A.get(d.element)||{};h in q||(q[h]=[]);q[h].push(m);
A.set(d.element,q)}function u(d,h){return(A.get(d.element)||{})[h]||[]}function m(d,h,m){var q=A.get(d.element)||{};if(!q[h])return!0;if(!m)return q[h]=[],A.set(d.element,q),!0;m=q[h].indexOf(m);return-1!==m&&q[h].splice(m,1),A.set(d.element,q),q[h]&&0===q[h].length}function v(d,h){return 0===d.indexOf(h.toLowerCase())?d:""+h.toLowerCase()+d.substr(0,1).toUpperCase()+d.substr(1)}function x(d){return/^(https?:)?\/\/(player.)?vimeo.com(?=$|\/)/.test(d)}function t(){var d=0>=arguments.length||void 0===
arguments[0]?{}:arguments[0],h=d.id;d=d.url;d=h||d;if(!d)throw Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(!isNaN(parseFloat(d))&&isFinite(d)&&Math.floor(d)==d)return"https://vimeo.com/"+d;if(x(d))return d.replace("http:","https:");if(h)throw new TypeError("\u201c"+h+"\u201d is not a valid video id.");throw new TypeError("\u201c"+d+"\u201d is not a vimeo.com url.");}function w(d){var h=1>=arguments.length||void 0===arguments[1]?
{}:arguments[1],m=ca,q=Array.isArray(m),t=0;for(m=q?m:m[Symbol.iterator]();;){if(q){if(t>=m.length)break;var v=m[t++]}else{if(t=m.next(),t.done)break;v=t.value}var u=d.getAttribute("data-vimeo-"+v);(u||""===u)&&(h[v]=""===u?1:u)}return h}function y(d){var h=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return new Promise(function(m,q){if(!x(d))throw new TypeError("\u201c"+d+"\u201d is not a vimeo.com url.");var t="https://vimeo.com/api/oembed.json?url="+encodeURIComponent(d),v;for(v in h)h.hasOwnProperty(v)&&
(t+="&"+v+"="+encodeURIComponent(h[v]));var u="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;u.open("GET",t,!0);u.onload=function(){if(404===u.status)return void q(Error("\u201c"+d+"\u201d was not found."));if(403===u.status)return void q(Error("\u201c"+d+"\u201d is not embeddable."));try{var h=JSON.parse(u.responseText);m(h)}catch(db){q(db)}};u.onerror=function(){q(Error("There was an error fetching the embed code from Vimeo"+(u.status?" ("+u.status+")":"")+"."))};u.send()})}function P(d,
h){d=d.html;if(!h)throw new TypeError("An element must be provided");if(null!==h.getAttribute("data-vimeo-initialized"))return h.querySelector("iframe");var m=document.createElement("div");return m.innerHTML=d,h.appendChild(m.firstChild),h.setAttribute("data-vimeo-initialized","true"),h.querySelector("iframe")}function O(d){return"string"==typeof d&&(d=JSON.parse(d)),d}function G(d,h,m){d.element.contentWindow.postMessage&&(h={method:h},void 0!==m&&(h.value=m),m=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,
"$1")),8<=m&&10>m&&(h=JSON.stringify(h)),d.element.contentWindow.postMessage(h,d.origin))}var E="undefined"!=typeof window.postMessage;if("undefined"==typeof Array.prototype.indexOf||!E)throw Error("Sorry, the Vimeo Player API is not available in this browser.");var ba="undefined"!=typeof window?window:"undefined"!=typeof h?h:"undefined"!=typeof self?self:{},T=(E=(d(function(d,h){!function(d){function h(d,h){function q(d){return this&&this.constructor===q?(this._keys=[],this._values=[],this._itp=
[],this.objectOnly=h,void(d&&m.call(this,d))):new q(d)}return h||O(d,"size",{get:ia}),d.constructor=q,q.prototype=d,q}function m(d){this.add?d.forEach(this.add,this):d.forEach(function(d){this.set(d[0],d[1])},this)}function q(d){return this.has(d)&&(this._keys.splice(Y,1),this._values.splice(Y,1),this._itp.forEach(function(d){Y<d[0]&&d[0]--})),-1<Y}function t(d){return this.has(d)?this._values[Y]:void 0}function v(d,h){if(this.objectOnly&&h!==Object(h))throw new TypeError("Invalid value used as weak collection key");
if(h!=h||0===h)for(Y=d.length;Y--&&!Aa(d[Y],h););else Y=d.indexOf(h);return-1<Y}function u(d){return v.call(this,this._values,d)}function x(d){return v.call(this,this._keys,d)}function w(d,h){return this.has(d)?this._values[Y]=h:this._values[this._keys.push(d)-1]=h,this}function y(d){return this.has(d)||this._values.push(d),this}function A(){(this._keys||0).length=this._values.length=0}function B(){return R(this._itp,this._keys)}function H(){return R(this._itp,this._values)}function E(){return R(this._itp,
this._keys,this._values)}function G(){return R(this._itp,this._values,this._values)}function R(d,h,m){var q=[0],t=!1;return d.push(q),{next:function(){var v,u=q[0];return!t&&u<h.length?(v=m?[h[u],m[u]]:h[u],q[0]++):(t=!0,d.splice(d.indexOf(q),1)),{done:t,value:v}}}}function ia(){return this._values.length}function P(d,h){for(var m=this.entries();;){var q=m.next();if(q.done)break;d.call(h,q.value[1],q.value[0],this)}}var Y,O=Object.defineProperty,Aa=function(d,h){return d===h||d!==d&&h!==h};"undefined"==
typeof WeakMap&&(d.WeakMap=h({delete:q,clear:A,get:t,has:x,set:w},!0));"undefined"!=typeof Map&&"function"==typeof(new Map).values&&(new Map).values().next||(d.Map=h({delete:q,has:x,get:t,set:w,keys:B,values:H,entries:E,forEach:P,clear:A}));"undefined"!=typeof Set&&"function"==typeof(new Set).values&&(new Set).values().next||(d.Set=h({has:u,add:y,delete:q,clear:A,keys:H,values:H,entries:G,forEach:P}));"undefined"==typeof WeakSet&&(d.WeakSet=h({delete:q,add:y,clear:A,has:u},!0))}("undefined"!=typeof h&&
"undefined"!=typeof ba?ba:window)}),d(function(d){!function(h,m,q){m[h]=m[h]||q();"undefined"!=typeof d&&d.exports&&(d.exports=m[h])}("Promise",ba,function(){function d(d,h){E.add(d,h);y||(y=B(E.drain))}function h(d){var h,m=typeof d;return null==d||"object"!=m&&"function"!=m||(h=d.then),"function"==typeof h&&h}function m(){for(var d=0;d<this.chain.length;d++){var m=void 0,q=void 0,t=1===this.state?this.chain[d].success:this.chain[d].failure,v=this.chain[d];try{!1===t?v.reject(this.msg):(q=!0===t?
this.msg:t.call(void 0,this.msg),q===v.promise?v.reject(TypeError("Promise-chain cycle")):(m=h(q))?m.call(q,v.resolve,v.reject):v.resolve(q))}catch(fa){v.reject(fa)}}this.chain.length=0}function q(v){var x,w=this;if(!w.triggered){w.triggered=!0;w.def&&(w=w.def);try{(x=h(v))?d(function(){var d=new u(w);try{x.call(v,function(){q.apply(d,arguments)},function(){t.apply(d,arguments)})}catch(X){t.call(d,X)}}):(w.msg=v,w.state=1,0<w.chain.length&&d(m,w))}catch(Xa){t.call(new u(w),Xa)}}}function t(h){var q=
this;q.triggered||(q.triggered=!0,q.def&&(q=q.def),q.msg=h,q.state=2,0<q.chain.length&&d(m,q))}function v(d,h,m,q){for(var t=0;t<h.length;t++)!function(t){d.resolve(h[t]).then(function(d){m(t,d)},q)}(t)}function u(d){this.def=d;this.triggered=!1}function x(d){this.promise=d;this.state=0;this.triggered=!1;this.chain=[];this.msg=void 0}function w(h){if("function"!=typeof h)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var v=new x(this);this.then=
function(h,q){var t={success:"function"!=typeof h||h,failure:"function"==typeof q&&q};return t.promise=new this.constructor(function(d,h){if("function"!=typeof d||"function"!=typeof h)throw TypeError("Not a function");t.resolve=d;t.reject=h}),v.chain.push(t),0!==v.state&&d(m,v),t.promise};this.catch=function(d){return this.then(void 0,d)};try{h.call(void 0,function(d){q.call(v,d)},function(d){t.call(v,d)})}catch(Ra){t.call(v,Ra)}}var y,A=Object.prototype.toString,B="undefined"!=typeof setImmediate?
function(d){return setImmediate(d)}:setTimeout;try{Object.defineProperty({},"x",{});var H=function(d,h,m,q){return Object.defineProperty(d,h,{value:m,writable:!0,configurable:!1!==q})}}catch(eb){H=function(d,h,m){return d[h]=m,d}}var E=function(){function d(d,h){this.fn=d;this.self=h;this.next=void 0}var h,m,q;return{add:function(t,v){q=new d(t,v);m?m.next=q:h=q;m=q;q=void 0},drain:function(){var d=h;for(h=m=y=void 0;d;)d.fn.call(d.self),d=d.next}}}();var G=H({},"constructor",w,!1);return w.prototype=
G,H(G,"__NPO__",0,!1),H(w,"resolve",function(d){return d&&"object"==typeof d&&1===d.__NPO__?d:new this(function(h,m){if("function"!=typeof h||"function"!=typeof m)throw TypeError("Not a function");h(d)})}),H(w,"reject",function(d){return new this(function(h,m){if("function"!=typeof h||"function"!=typeof m)throw TypeError("Not a function");m(d)})}),H(w,"all",function(d){var h=this;return"[object Array]"!=A.call(d)?h.reject(TypeError("Not an array")):0===d.length?h.resolve([]):new h(function(m,q){if("function"!=
typeof m||"function"!=typeof q)throw TypeError("Not a function");var t=d.length,u=Array(t),x=0;v(h,d,function(d,h){u[d]=h;++x===t&&m(u)},q)})}),H(w,"race",function(d){var h=this;return"[object Array]"!=A.call(d)?h.reject(TypeError("Not an array")):new h(function(m,q){if("function"!=typeof m||"function"!=typeof q)throw TypeError("Not a function");v(h,d,function(d,h){m(h)},q)})}),w})})))&&"object"==typeof E&&"default"in E?E.default:E,A=new WeakMap,ca="id url width maxwidth height maxheight portrait title byline color autoplay autopause loop responsive".split(" "),
sa=new WeakMap,Z=new WeakMap;E=function(){function d(h){var q=this,v=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];if(!(this instanceof d))throw new TypeError("Cannot call a class as a function");if(window.jQuery&&h instanceof jQuery&&(1<h.length&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),h=h[0]),"string"==typeof h&&(h=document.getElementById(h)),!(h instanceof window.HTMLElement))throw new TypeError("You must pass either a valid element or a valid id.");
if("IFRAME"!==h.nodeName){var B=h.querySelector("iframe");B&&(h=B)}if("IFRAME"===h.nodeName&&!x(h.getAttribute("src")||""))throw Error("The player element passed isn\u2019t a Vimeo embed.");if(sa.has(h))return sa.get(h);this.element=h;this.origin="*";B=new T(function(d,B){var H=function(h){if(x(h.origin)&&q.element.contentWindow===h.source){"*"===q.origin&&(q.origin=h.origin);h=O(h.data);var t="method"in h&&"ping"===h.method;if("event"in h&&"ready"===h.event||t)h=(q.element.setAttribute("data-ready",
"true"),void d());else{h=O(h);var v=[];t=void 0;if(h.event){if("error"===h.event){t=u(q,h.data.method);v=Array.isArray(t);var w=0;for(t=v?t:t[Symbol.iterator]();;){if(v){if(w>=t.length)break;var y=t[w++]}else{if(w=t.next(),w.done)break;y=w.value}var A=Error(h.data.message);A.name=h.data.name;y.reject(A);m(q,h.data.method,y)}}v=u(q,"event:"+h.event);t=h.data}else h.method&&(v=u(q,h.method),t=h.value,m(q,h.method));h=v;v=Array.isArray(h);w=0;for(h=v?h:h[Symbol.iterator]();;){if(v){if(w>=h.length)break;
y=h[w++]}else{if(w=h.next(),w.done)break;y=w.value}try{"function"==typeof y?y.call(q,t):y.resolve(t)}catch(ta){}}h=void 0}return h}};if(window.addEventListener?window.addEventListener("message",H,!1):window.attachEvent&&window.attachEvent("onmessage",H),"IFRAME"!==q.element.nodeName){H=w(h,v);var E=t(H);y(E,H).then(function(d){var m=P(d,h);q.element=m;var t=h,v=A.get(t);A.set(m,v);A.delete(t);return d}).catch(function(d){return B(d)})}});return Z.set(this,B),sa.set(this.element,this),"IFRAME"===this.element.nodeName&&
G(this,"ping"),this}return d.prototype.then=function(d){var h=1>=arguments.length||void 0===arguments[1]?function(){}:arguments[1];return this.ready().then(d,h)},d.prototype.callMethod=function(d){var h=this,m=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return new T(function(t,v){return h.ready().then(function(){q(h,d,{resolve:t,reject:v});G(h,d,m)})})},d.prototype.get=function(d){var h=this;return new T(function(m,t){return d=v(d,"get"),h.ready().then(function(){q(h,d,{resolve:m,reject:t});
G(h,d)})})},d.prototype.set=function(d,h){var m=this;return T.resolve(h).then(function(h){if(d=v(d,"set"),void 0===h||null===h)throw new TypeError("There must be a value to set.");return m.ready().then(function(){return new T(function(t,v){q(m,d,{resolve:t,reject:v});G(m,d,h)})})})},d.prototype.on=function(d,h){if(!d)throw new TypeError("You must pass an event name.");if(!h)throw new TypeError("You must pass a callback function.");if("function"!=typeof h)throw new TypeError("The callback must be a function.");
0===u(this,"event:"+d).length&&this.callMethod("addEventListener",d).catch(function(){});q(this,"event:"+d,h)},d.prototype.off=function(d,h){if(!d)throw new TypeError("You must pass an event name.");if(h&&"function"!=typeof h)throw new TypeError("The callback must be a function.");m(this,"event:"+d,h)&&this.callMethod("removeEventListener",d).catch(function(d){})},d.prototype.loadVideo=function(d){return this.callMethod("loadVideo",d)},d.prototype.ready=function(){var d=Z.get(this);return T.resolve(d)},
d.prototype.enableTextTrack=function(d,h){if(!d)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:d,kind:h})},d.prototype.disableTextTrack=function(){return this.callMethod("disableTextTrack")},d.prototype.pause=function(){return this.callMethod("pause")},d.prototype.play=function(){return this.callMethod("play")},d.prototype.unload=function(){return this.callMethod("unload")},d.prototype.getAutopause=function(){return this.get("autopause")},d.prototype.setAutopause=
function(d){return this.set("autopause",d)},d.prototype.getColor=function(){return this.get("color")},d.prototype.setColor=function(d){return this.set("color",d)},d.prototype.getCurrentTime=function(){return this.get("currentTime")},d.prototype.setCurrentTime=function(d){return this.set("currentTime",d)},d.prototype.getDuration=function(){return this.get("duration")},d.prototype.getEnded=function(){return this.get("ended")},d.prototype.getLoop=function(){return this.get("loop")},d.prototype.setLoop=
function(d){return this.set("loop",d)},d.prototype.getPaused=function(){return this.get("paused")},d.prototype.getTextTracks=function(){return this.get("textTracks")},d.prototype.getVideoEmbedCode=function(){return this.get("videoEmbedCode")},d.prototype.getVideoId=function(){return this.get("videoId")},d.prototype.getVideoTitle=function(){return this.get("videoTitle")},d.prototype.getVideoWidth=function(){return this.get("videoWidth")},d.prototype.getVideoHeight=function(){return this.get("videoHeight")},
d.prototype.getVideoUrl=function(){return this.get("videoUrl")},d.prototype.getVolume=function(){return this.get("volume")},d.prototype.setVolume=function(d){return this.set("volume",d)},d}();return function(){var d=function(d){"console"in window&&console.error&&console.error("There was an error creating an embed: "+d)},h=function(){if(q){if(v>=m.length)return"break";u=m[v++]}else{if(v=m.next(),v.done)return"break";u=v.value}var h=u;try{if(null!==h.getAttribute("data-vimeo-defer"))return"continue";
var x=w(h),A=t(x);y(A,x).then(function(d){return P(d,h)}).catch(d)}catch(Kb){d(Kb)}},m=[].slice.call((0>=arguments.length||void 0===arguments[0]?document:arguments[0]).querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),q=Array.isArray(m),v=0;m=q?m:m[Symbol.iterator]();a:for(;;){var u;switch(h()){case "break":break a}}}(),E})}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}],2:[function(u,y,w){(function(h){function d(d,h){if("function"!==
typeof h&&null!==h)throw new TypeError("Super expression must either be null or a function, not "+typeof h);d.prototype=Object.create(h&&h.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}});h&&(Object.setPrototypeOf?Object.setPrototypeOf(d,h):d.__proto__=h)}w.__esModule=!0;var q=(h="undefined"!==typeof window?window.videojs:"undefined"!==typeof h?h.videojs:null)&&h.__esModule?h:{default:h},y=(h=u("@vimeo/player"))&&h.__esModule?h:{default:h};q.default.getComponent("Component");
h=q.default.getComponent("Tech");var m=!1,v=function(h){function t(d,q){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");q=h.call(this,d,q);if(!this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");q=!q||"object"!==typeof q&&"function"!==typeof q?this:q;if(!m){m=!0;var v=document.head||document.getElementsByTagName("head")[0],u=document.createElement("style");u.type="text/css";u.styleSheet?u.styleSheet.cssText="\n      .vjs-vimeo iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    ":
u.appendChild(document.createTextNode("\n      .vjs-vimeo iframe {\n        position: absolute;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n      }\n    "));v.appendChild(u)}q.setPoster(d.poster);q.initVimeoPlayer();return q}d(t,h);t.prototype.initVimeoPlayer=function(){var d=this,h={url:this.options_.source.src,byline:!1,portrait:!1,title:!1};this.options_.autoplay&&(h.autoplay=!0);this.options_.height&&(h.height=this.options_.height);this.options_.width&&(h.width=
this.options_.width);this.options_.maxheight&&(h.maxheight=this.options_.maxheight);this.options_.maxwidth&&(h.maxwidth=this.options_.maxwidth);this.options_.loop&&(h.loop=this.options_.loop);this._player=new y.default(this.el(),h);this.initVimeoState();"play pause ended timeupdate progress seeked".split(" ").forEach(function(h){d._player.on(h,function(m){d._vimeoState.progress.duration!=m.duration&&d.trigger("durationchange");d._vimeoState.progress=m;d.trigger(h)})});this._player.on("pause",function(){return d._vimeoState.playing=
!1});this._player.on("play",function(){d._vimeoState.playing=!0;d._vimeoState.ended=!1});this._player.on("ended",function(){d._vimeoState.playing=!1;d._vimeoState.ended=!0});this._player.on("volumechange",function(h){return d._vimeoState.volume=h});this._player.on("error",function(h){return d.trigger("error",h)});this.triggerReady()};t.prototype.initVimeoState=function(){var d=this._vimeoState={ended:!1,playing:!1,volume:0,progress:{seconds:0,percent:0,duration:0}};this._player.getCurrentTime().then(function(h){return d.progress.seconds=
h});this._player.getDuration().then(function(h){return d.progress.duration=h});this._player.getPaused().then(function(h){return d.playing=!h});this._player.getVolume().then(function(h){return d.volume=h})};t.prototype.createEl=function(){var d=q.default.createEl("div",{id:this.options_.techId});d.style.cssText="width:100%;height:100%;top:0;left:0;position:absolute";d.className="vjs-vimeo";return d};t.prototype.controls=function(){return!0};t.prototype.supportsFullScreen=function(){return!0};t.prototype.src=
function(){return this.options_.source};t.prototype.currentSrc=function(){return this.options_.source.src};t.prototype.currentTime=function(){return this._vimeoState.progress.seconds};t.prototype.setCurrentTime=function(d){this._player.setCurrentTime(d)};t.prototype.volume=function(){return this._vimeoState.volume};t.prototype.setVolume=function(d){return this._player.setVolume(volume)};t.prototype.duration=function(){return this._vimeoState.progress.duration};t.prototype.buffered=function(){var d=
this._vimeoState.progress;return q.default.createTimeRange(0,d.percent*d.duration)};t.prototype.paused=function(){return!this._vimeoState.playing};t.prototype.pause=function(){this._player.pause()};t.prototype.play=function(){this._player.play()};t.prototype.muted=function(){return 0===this._vimeoState.volume};t.prototype.ended=function(){return this._vimeoState.ended};t.prototype.playbackRate=function(){return 1};return t}(h);v.prototype.featuresTimeupdateEvents=!0;v.isSupported=function(){return!0};
h.withSourceHandlers(v);v.nativeSourceHandler={};v.nativeSourceHandler.canPlayType=function(d){return"video/vimeo"===d?"maybe":""};v.nativeSourceHandler.canHandleSource=function(d){return d.type?v.nativeSourceHandler.canPlayType(d.type):d.src?v.nativeSourceHandler.canPlayType(d.src):""};v.nativeSourceHandler.handleSource=function(d,h){h.src(d.src)};v.nativeSourceHandler.dispose=function(){};v.registerSourceHandler(v.nativeSourceHandler);h.registerTech("Vimeo",v);v.VERSION="0.0.1";w.default=v}).call(this,
"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{"@vimeo/player":1}]},{},[2])(2)});/*
 2017 Brooks Lyrette <brooks@dotsub.com>
 @license Apache-2.0
*/
(function(C){"object"===typeof exports&&"undefined"!==typeof module?module.exports=C():"function"===typeof define&&define.amd?define([],C):("undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:this).videojsWatermark=C()})(function(){return function h(u,y,w){function d(m,v){if(!y[m]){if(!u[m]){var x="function"==typeof require&&require;if(!v&&x)return x(m,!0);if(q)return q(m,!0);v=Error("Cannot find module '"+m+"'");throw v.code="MODULE_NOT_FOUND",v;}v=
y[m]={exports:{}};u[m][0].call(v.exports,function(h){var q=u[m][1][h];return d(q?q:h)},v,v.exports,h,u,y,w)}return y[m].exports}for(var q="function"==typeof require&&require,B=0;B<w.length;B++)d(w[B]);return d}({1:[function(u,y,w){(function(h){Object.defineProperty(w,"__esModule",{value:!0});var d=(h="undefined"!==typeof window?window.videojs:"undefined"!==typeof h?h.videojs:null)&&h.__esModule?h:{"default":h},q={position:"top-right",fadeTime:3E3,url:void 0,image:void 0},u=function(d,h){var m=d.el(),
q=document.createElement("div"),t=document.createElement("img");q.classList.add("vjs-watermark-content");q.classList.add("vjs-watermark-"+h.position);t.src=h.image;if(h.url){var v=document.createElement("a");v.href=h.url;v.onclick=function(m){m.preventDefault();d.pause();window.open(h.url)};v.appendChild(t);q.appendChild(v)}else q.appendChild(t);m.appendChild(q)},m=function(d){setTimeout(function(){return document.getElementsByClassName("vjs-watermark-content")[0].classList.add("vjs-watermark-fade")},
d.fadeTime)},v=function(d,h){d.addClass("vjs-watermark");if(h.image&&(u(d,h),null!==h.fadeTime))d.on("play",function(){return m(h)})};h=function(h){var m=this;this.ready(function(){v(m,d["default"].mergeOptions(q,h))})};d["default"].registerPlugin("watermark",h);h.VERSION="2.0.0";w["default"]=h;y.exports=w["default"]}).call(this,"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},{}]},{},[1])(1)});(function(){var C=[].indexOf||function(u){for(var y=0,w=this.length;y<w;y++)if(y in this&&this[y]===u)return y;return-1};videojs.registerPlugin("ga",function(u){var y;null==u&&(u={});var w={};var h="loaded percentsPlayed start end seek play pause resize volumeChange error fullscreen".split(" ");var d=u.eventsToTrack||w.eventsToTrack||h;var q=u.percentsPlayedInterval||w.percentsPlayedInterval||10;var B=u.eventCategory||w.eventCategory||"Video";var m=u.eventLabel||w.eventLabel;u.debug=u.debug||!1;var v=
[];var x=y=0;var t=!1;var H=function(){m||(m=this.currentSrc().split("/").slice(-1)[0].replace(/\.(\w{3,4})(\?.*)?$/i,""));0<=C.call(d,"loadedmetadata")&&ca("loadedmetadata",!0)};var R=function(){var h;var m=Math.round(this.currentTime());var u=Math.round(this.duration());var w=Math.round(m/u*100);for(u=h=0;99>=h;u=h+=q)w>=u&&0>C.call(v,u)&&(0<=C.call(d,"start")&&0===u&&0<w?ca("start",!0):0<=C.call(d,"percentsPlayed")&&0!==w&&ca("percent played",!0,u),0<w&&v.push(u));0<=C.call(d,"seek")&&(x=y,y=m,
1<Math.abs(x-y)&&(t=!0,ca("seek start",!1,x),ca("seek end",!1,y)))};var P=function(){ca("end",!0)};var O=function(){var d=Math.round(this.currentTime());ca("play",!0,d);t=!1};var G=function(){var d=Math.round(this.currentTime());var h=Math.round(this.duration());d===h||t||ca("pause",!1,d)};var E=function(){var d=!0===this.muted()?0:this.volume();ca("volume change",!1,d)};var ba=function(){ca("resize - "+this.width()+"*"+this.height(),!0)};var T=function(){var d=Math.round(this.currentTime());ca("error",
!0,d)};var A=function(){var d=Math.round(this.currentTime());"function"===typeof this.isFullscreen&&this.isFullscreen()||"function"===typeof this.isFullScreen&&this.isFullScreen()?ca("enter fullscreen",!1,d):ca("exit fullscreen",!1,d)};var ca=function(d,h,q){window.ga?ga("send","event",{eventCategory:B,eventAction:d,eventLabel:m,eventValue:q,nonInteraction:h}):window._gaq?_gaq.push(["_trackEvent",B,d,m,q,h]):u.debug&&console.log("Google Analytics not detected")};this.ready(function(){this.on("loadedmetadata",
H);this.on("timeupdate",R);if(0<=C.call(d,"end"))this.on("ended",P);if(0<=C.call(d,"play"))this.on("play",O);if(0<=C.call(d,"pause"))this.on("pause",G);if(0<=C.call(d,"volumeChange"))this.on("volumechange",E);if(0<=C.call(d,"resize"))this.on("resize",ba);if(0<=C.call(d,"error"))this.on("error",T);if(0<=C.call(d,"fullscreen"))return this.on("fullscreenchange",A)});return{sendbeacon:ca}})}).call(this);!function(C,u){"object"==typeof exports&&"object"==typeof module?module.exports=u():"function"==typeof define&&define.amd?define([],u):"object"==typeof exports?exports.viewability=u():C.viewability=u()}("undefined"!=typeof self?self:this,function(){return function(C){function u(w){if(y[w])return y[w].exports;var h=y[w]={i:w,l:!1,exports:{}};return C[w].call(h.exports,h,h.exports,u),h.l=!0,h.exports}var y={};return u.m=C,u.c=y,u.d=function(w,h,d){u.o(w,h)||Object.defineProperty(w,h,{configurable:!1,
enumerable:!0,get:d})},u.n=function(w){var h=w&&w.__esModule?function(){return w.default}:function(){return w};return u.d(h,"a",h),h},u.o=function(u,h){return Object.prototype.hasOwnProperty.call(u,h)},u.p="",u(u.s=2)}([function(C,u,y){C.exports=function(u){var h=window.innerHeight,d=u.getBoundingClientRect().top;u=u.getBoundingClientRect().bottom;var q=u-d;return d>h?{value:0,state:"EL_IS_BELOW_VIEW"}:0>=u?{value:0,state:"EL_IS_ABOVE_VIEW"}:0<=d&&u<=h?{value:1,state:"EL_IS_WITHIN_VERTICAL_VIEW"}:
0>d&&u>h?{value:h/q,state:"EL_BOTTOM_AND_TOP_TRUNCATED"}:0>d&&u<=h?{value:u/q,state:"EL_TOP_TRUNCATED"}:0<=d&&u>h?{value:(h-d)/q,state:"EL_BOTTOM_TRUNCATED"}:{value:0,state:"EL_IS_NOT_WITHIN_VIEW"}}},function(C,u,y){C.exports=function(u){var h=window.innerWidth,d=u.getBoundingClientRect().left;u=u.getBoundingClientRect().right;var q=u-d;return d>h?{value:0,state:"EL_IS_TOO_RIGHT"}:0>=u?{value:0,state:"EL_IS_TOO_LEFT"}:0<=d&&u<=h?{value:1,state:"EL_IS_WITHIN_HORIZONTAL_VIEW"}:0>d&&u>h?{value:h/q,state:"EL_LEFT_AND_RIGHT_TRUNCATED"}:
0>d&&u<=h?{value:u/q,state:"EL_LEFT_TRUNCATED"}:0<=d&&u>h?{value:(h-d)/q,state:"EL_RIGHT_TRUNCATED"}:{value:0,state:"EL_IS_NOT_WITHIN_VIEW"}}},function(C,u,y){C.exports={vertical:y(0),horizontal:y(1),isElementOnScreen:y(3)}},function(C,u,y){var w=y(1),h=y(0);C.exports=function(d,q){return q?1==h(d).value*w(d).value:0<h(d).value*w(d).value}}])});var VMAP=function(){function C(d,m){return[].concat(h(d.childNodes)).filter(function(d){return d.nodeName===m||m==="vmap:"+d.nodeName||d.nodeName==="vmap:"+m})}function u(d){var m={attributes:{},children:{},value:{}};return m.value=function(d){d=d&&d.childNodes&&[].concat(h(d.childNodes));if(!d)return{};var m=d.filter(function(d){return"#cdata-section"===d.nodeName});if(m&&0<m.length)try{return JSON.parse(m[0].data)}catch(t){}return d.reduce(function(d,h){var m="";switch(h.nodeName){case "#text":m=
h.textContent.trim();break;case "#cdata-section":m=h.data}return d+m},"")}(d),d.attributes&&[].concat(h(d.attributes)).forEach(function(d){d.nodeName&&void 0!==d.nodeValue&&null!==d.nodeValue&&(m.attributes[d.nodeName]=d.nodeValue)}),d.childNodes&&[].concat(h(d.childNodes)).filter(function(d){return"#"!==d.nodeName.substring(0,1)}).forEach(function(d){m.children[d.nodeName]=u(d)}),m}var y=function(d,h){if(!(d instanceof h))throw new TypeError("Cannot call a class as a function");},w=function(){function d(d,
h){for(var m=0;m<h.length;m++){var q=h[m];q.enumerable=q.enumerable||!1;q.configurable=!0;"value"in q&&(q.writable=!0);Object.defineProperty(d,q.key,q)}}return function(h,q,u){return q&&d(h.prototype,q),u&&d(h,u),h}}(),h=function(d){if(Array.isArray(d)){for(var h=0,q=Array(d.length);h<d.length;h++)q[h]=d[h];return q}return Array.from(d)},d=function v(d){for(var h in y(this,v),this.id=d.getAttribute("id"),this.allowMultipleAds=d.getAttribute("allowMultipleAds"),this.followRedirects=d.getAttribute("followRedirects"),
this.vastAdData=null,this.adTagURI=null,this.customData=null,d.childNodes){var m=d.childNodes[h];switch(m.localName){case "AdTagURI":this.adTagURI={templateType:m.getAttribute("templateType"),uri:(m.textContent||m.text||"").trim()};break;case "VASTAdData":for(this.vastAdData=m.firstChild;this.vastAdData&&1!==this.vastAdData.nodeType;)this.vastAdData=this.vastAdData.nextSibling;break;case "CustomAdData":this.customData=m}}},q=function(){function h(m){for(var q in y(this,h),this.timeOffset=m.getAttribute("timeOffset"),
this.breakType=m.getAttribute("breakType"),this.breakId=m.getAttribute("breakId"),this.repeatAfter=m.getAttribute("repeatAfter"),this.adSource=null,this.trackingEvents=[],this.extensions=[],m.childNodes){var t=m.childNodes[q];switch(t.localName){case "AdSource":this.adSource=new d(t);break;case "TrackingEvents":for(var v in t.childNodes){var w=t.childNodes[v];"Tracking"===w.localName&&this.trackingEvents.push({event:w.getAttribute("event"),uri:(w.textContent||w.text||"").trim()})}break;case "Extensions":this.extensions=
C(t,"Extension").map(function(d){return u(d)})}}}return w(h,[{key:"track",value:function(d,h){for(var m in this.trackingEvents){var q=this.trackingEvents[m];if(q.event===d){var u=q.uri;"error"===q.event&&(u=u.replace("[ERRORCODE]",h));this.tracker(u)}}}},{key:"tracker",value:function(d){"undefined"!=typeof window&&null!==window&&((new Image).src=d)}}]),h}();return function x(d){if(y(this,x),null==(null!=d?d.documentElement:void 0)||"VMAP"!==d.documentElement.localName)throw Error("Not a VMAP document");
for(var h in this.version=d.documentElement.getAttribute("version"),this.adBreaks=[],this.extensions=[],d.documentElement.childNodes){var v=d.documentElement.childNodes[h];switch(v.localName){case "AdBreak":this.adBreaks.push(new q(v));break;case "Extensions":this.extensions=C(v,"Extension").map(function(d){return u(d)})}}}}();(function(C,u){function y(d,h,m,q){function t(d){mpl1DebugLog("----------------prepareLoadAd is called ");d.pause();d.hide();d.el_.parentNode.style["background-color"]="black";console.log(d)}function v(d,h,m){h.adUnitPlayer=!1;mpl1DebugLog(h.adUnitPlayer);h.show();m||h.play();d&&d.setAttribute("style","display:none!important")}function x(d,h,m,q){this.adPosition=d;this.timeCheck=h;this.adUrls=m;this.skipAdTime=q;this.playedAdDone=!1}mpl1DebugLog(" set VAST-PLAYER from setVideoAdPlayer ..."+m);var y=
d.getAttribute("id")||"hadarone_vpl_"+Math.floor(9999999*Math.random());if(!0!==w.videoAdIds[y]){m=m?m:[];q=q?q:[];if(!(0<m.length||0<q.length))return!1;var C=h.width(),B=h.height();h.adUnitPlayer=!1;var A=function(m,q,w,x){function y(d){O.innerHTML=G;O.onclick=function(h){var m=m||window.Event,q=document.querySelector(P);q&&q.contentWindow.document.body&&(q=q.contentWindow.document.body.querySelector("video"))&&(q.muted=!0);if(q=document.querySelector(R))q.muted=!0;d.stopAd();if(void 0!==m.prototype.stopPropagation)h.stopPropagation();
else return!1}}if(!1!==h.adUnitPlayer)return mpl1DebugLog("Skip due to duplicated vast-player session"),!1;mpl1DebugLog("loadVideoAds: vastUrl "+m);if("string"!==typeof m||""===m)return mpl1DebugLog("loadVideoAds: SKIP AD because vastUrl is not valid  "),!1;t(h);var A=h.muted(),E=q||5,G=d.getAttribute("data-skip-label")||"Skip Ad",H=document.createElement("div");q="adContainer"+Math.floor(9999999*Math.random());var P="#"+q+" .hd1vplayer_iframe",R="#"+q+" .hd1vplayer_video";H.setAttribute("id",q);
H.setAttribute("data-vastUrl",m);H.setAttribute("style","width:"+C+"px!important;height:"+B+"px!important;position:relative!important;background-color:#000;color:#FFF");d.appendChild(H);var O=document.createElement("div");O.className="preroll-skip-button";var Z=document.createElement("div");Z.className="preroll-sound-button";Z.style.padding="9px 18px";Z.style["font-size"]="22px";window.isDesktop||(O.style.padding="9px",O.style["font-size"]="10px",Z.style["font-size"]="18px");A?(Z.innerHTML="&#128263;",
Z.setAttribute("data-muted","1")):(Z.innerHTML="&#128264;",Z.setAttribute("data-muted","0"));Z.onclick=function(d){var h=h||window.Event,m="1"===Z.getAttribute("data-muted"),q=document.querySelector(P);q&&(q.contentWindow.document.body.querySelector("video").muted=!m);if(q=document.querySelector(R))q.muted=!m;Z.setAttribute("data-muted",m?"0":"1");Z.innerHTML=m?"&#128264;":"&#128263;";if(void 0!==h.prototype.stopPropagation)d.stopPropagation();else return!1};window.isDesktop||(Z.style.padding="9px",
Z.style["font-size"]="10px");var T=new u(H,{mutedVideoAd:A});h.adUnitPlayer=T;T.once("AdStopped",function(){v(H,h,w);x(!0)});T.load(m).then(function(){H.appendChild(Z);if(0<E){H.appendChild(O);O.innerHTML=" "+E+"s";var d=E,h=setInterval(function(){d--;O.innerHTML=" "+d+"s"},1E3);setTimeout(function(){clearInterval(h);y(T)},1E3*E)}setTimeout(function(){var d=document.querySelector(P);d&&d.contentWindow.document.body&&(d=d.contentWindow.document.body.querySelector("video"))&&d.play();(d=document.querySelector(R))&&
d.play()},1E3);return T.startAd()}).catch(function(d){"function"===typeof x?(h.adUnitPlayer=!1,H.setAttribute("style","display:none!important"),x(!1,h),console.log("callbackForNextAd is NOT null 0")):w?console.log("callbackForNextAd is null 2"):(console.log("callbackForNextAd is null 1"),v(H,h));mpl1DebugLog(d)});return T};x.prototype.checkToRun=function(d){mpl1DebugLog("midproll currentTime"+d);mpl1DebugLog("midproll timeCheck "+this.timeCheck);mpl1DebugLog("midproll adUrls"+this.adUrls.length);
var h="postproll"===this.adPosition||"preroll"===this.adPosition;h||(h=d&&d>=this.timeCheck&&0<d&&!1===this.playedAdDone);var m="postproll"===this.adPosition;if(h){this.playedAdDone=!0;var q=this.adPosition,t=this.adUrls;d=0<t.length?t[0]:!1;var u=this.skipAdTime;h=!1;if("string"===typeof d){var v=function(d,h){t.shift();d||(d=0<t.length&&5>t.length?t[0]:!1,mpl1DebugLog(q+" callbackForNextAd1 adUrl "+d),d?A(d,u,m,v):(h.show(),h.play()));mpl1DebugLog(q+" callbackForNextAd1 adUrls.length "+t.length)};
h=A(d,u,m,v)}if(!1!==h)return!0}return!1};x.prototype.timeCheck=function(){return this.timeCheck};w.videoAdIds[y]=!0;var H=parseInt(d.getAttribute("data-skip-after"))||5;y={};for(var R=[],Z=0;Z<q.length;Z++){var Y=q[Z];mpl1DebugLog(Y);if(Y){var ia=Y.timeAfter||0,Aa=Y.adType||"preroll";Y=Y.adUrl||"";"preroll"===Aa&&"string"===typeof Y&&m.push(Y);if("midproll"===Aa&&0<ia&&"string"===typeof Y){var Ha=""+ia;ia=y[Ha];"object"===typeof ia?ia.push(Y):(ia=[],ia.push(Y),y[Ha]=ia)}"postroll"===Aa&&"string"===
typeof Y&&R.push(Y)}}0<m.length?(new x("preroll",0,m,H)).checkToRun(1):v(!1,h);var Ba=[];for(Ha in y)ia=parseInt(Ha),m=y[Ha],mpl1DebugLog(" timeAfter"+ia),console.log(" midprollAdUrls",m),Ba.push(new x("midproll",ia,m,H));Ba.sort(function(d,h){return d.timeCheck<h.timeCheck?-1:d.timeCheck>h.timeCheck?1:0});var oa=setInterval(function(){mpl1DebugLog(Ba);if(0<Ba.length){var d=Ba[0],m=Math.floor(h.currentTime());mpl1DebugLog("currentTime "+m);mpl1DebugLog("timeCheck "+d.timeCheck);!1!==d.checkToRun(m)?
Ba.splice(0,1):mpl1DebugLog("wait for ad")}else clearInterval(oa),oa=0},1200);mpl1DebugLog("setInterval for loadAdFunctions "+oa);h.on("ended",function(){0<oa&&clearInterval(oa);(new x("postproll",0,R,H)).checkToRun(1)})}}var w={videoAdIds:[]};window.mpl1DebugLog=function(d){(!0===window.debugMediaPlayerOne||0<=location.hash.indexOf("player-debug"))&&console.log(d)};C.options.hls.overrideNative=!0;C.options.html5.nativeAudioTracks=!1;C.options.html5.nativeVideoTracks=!1;C.hook("setup",function(d){for(var h=
d.el_.parentElement,m=[],q=h.attributes,u=0;u<q.length;u++){var v=q[u];if(v){var w=(v.nodeValue||"").trim();0===w.indexOf("http")&&0===v.nodeName.indexOf("data-vast-url")&&m.push(w)}}if(0<m.length&&-1<h.className.indexOf("hadarone-video-player"))d.one("play",function(){y(h,d,m)})});var h=function(d,h){if(d){var m=d.getElementsByTagName("video")[0];if(m){var q=C(m);q.one("play",function(){y(d,q,h)})}}},d=function(d,h,m,q,u,v,y,B,ba,T,A,ca,sa){var t=Math.floor(9999999*Math.random()),x="hd1_c_"+t,E=
"hd1_vpl_"+t;t='<div class="hadarone-video-player" id="'+x+'"';"number"===typeof T&&(t+=' data-skip-after="'+T+'" ');"string"===typeof A&&(t+=' data-skip-label="'+A+'" ');t=t+">"+('<video id="'+E+'" playsinline="true" class="video-js vjs-default-skin"  width="'+y+'" height="'+B+'" >');m&&""!=m&&(t+='<source src="'+m+'" type="video/mp4" />');q&&""!=q&&(t+='<source src="'+q+'" type="video/webm" />');u&&""!=u&&(t+='<source src="'+u+'" type="application/x-mpegURL" />');t+="</video></div>";if(h=document.getElementById(h))h.innerHTML=
t;var G=C(E,{controls:!0,controlBar:{fullscreenToggle:!1},autoplay:d,muted:!0===d,preload:"auto",poster:v});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(x),G,ba,ca);var d=document.createElement("div");d.setAttribute("class","playerlogo");document.querySelector("#"+E+" .vjs-remaining-time").parentNode.appendChild(d);"function"===typeof sa&&sa(G)});return G},q=function(d,h,m,q,u,v,y,B,ba,T){var t=Math.floor(9999999*Math.random()),x="hd1_c_"+t,E="hd1_vpl_"+t;t='<div class="hadarone-video-player" id="'+
x+'"';"number"===typeof y&&(t+=' data-skip-after="'+y+'" ');"string"===typeof B&&(t+=' data-skip-label="'+B+'" ');t=t+">"+('<video id="'+E+'"  class="video-js vjs-default-skin"  width="'+q+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=t;var G=C(E,{controls:!0,controlBar:{fullscreenToggle:!0},autoplay:d,preload:"auto",youtube:{playsinline:1},techOrder:["youtube"],sources:[{type:"video/youtube",src:m}]});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(x),
G,v,ba);var d=document.createElement("div");d.setAttribute("class","playerlogo");document.querySelector("#"+E+" .vjs-remaining-time").parentNode.appendChild(d);"function"===typeof T&&T(G)});d&&G.muted()&&G.play();return G}},B=function(d,h,m,q,u,v,y,B,ba,T){var t=Math.floor(9999999*Math.random()),x="hd1_c_"+t,E="hd1_vpl_"+t;t='<div class="hadarone-video-player" id="'+x+'"';"number"===typeof y&&(t+=' data-skip-after="'+y+'" ');"string"===typeof B&&(t+=' data-skip-label="'+B+'" ');t=t+">"+('<video id="'+
E+'"  class="video-js vjs-default-skin"  width="'+q+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=t;var G=C(E,{controls:!0,controlBar:{fullscreenToggle:!0},autoplay:d,preload:"auto",youtube:{playsinline:1},techOrder:["Dailymotion"],sources:[{type:"video/Dailymotion",src:m}]});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(x),G,v,ba);var d=document.createElement("div");d.setAttribute("class","playerlogo");document.querySelector("#"+E+" .vjs-remaining-time").parentNode.appendChild(d);
"function"===typeof T&&T(G)});d&&G.muted()&&G.play();return G}},m=function(d,h,m,q,u,v,y,B,ba,T){var t=Math.floor(9999999*Math.random()),x="hd1_c_"+t,E="hd1_vpl_"+t;t='<div class="hadarone-video-player" id="'+x+'"';"number"===typeof y&&(t+=' data-skip-after="'+y+'" ');"string"===typeof B&&(t+=' data-skip-label="'+B+'" ');t=t+">"+('<video id="'+E+'"  class="video-js vjs-default-skin"  width="'+q+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=t;var G=C(E,{controls:!0,
controlBar:{fullscreenToggle:!0},autoplay:d,preload:"auto",youtube:{playsinline:1},techOrder:["vimeo"],sources:[{type:"video/vimeo",src:m,vimeo:{color:"#fbc51b"}}]});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(x),G,v,ba);var d=document.createElement("div");d.setAttribute("class","playerlogo");document.querySelector("#"+E+" .vjs-remaining-time").parentNode.appendChild(d);"function"===typeof T&&T(G)});d&&G.muted()&&G.play();return G}},v=function(d,h,m,q,u,v,y,B,ba,T){var t=Math.floor(9999999*
Math.random()),x="hd1_c_"+t,E="hd1_vpl_"+t;t='<div class="hadarone-video-player" id="'+x+'"';"number"===typeof y&&(t+=' data-skip-after="'+y+'" ');"string"===typeof B&&(t+=' data-skip-label="'+B+'" ');window.isDesktop||(u=Math.floor(2.03*u));t=t+">"+('<video id="'+E+'"  class="video-js vjs-default-skin"  width="'+q+'" height="'+u+'" >')+"</video></div>";if(h=document.getElementById(h)){h.innerHTML=t;var G=C(E,{controls:!1,controlBar:{fullscreenToggle:!1},autoplay:d,preload:"auto",techOrder:["facebook"],
sources:[{type:"video/facebook",src:m,width:q,height:u,autoplay:d}]});G.one("play",function(){w.setVideoAdPlayer(document.getElementById(x),G,v,ba);var d=document.createElement("div");d.setAttribute("class","playerlogo");document.querySelector("#"+E+" .vjs-remaining-time").parentNode.appendChild(d);"function"===typeof T&&T(G)});d&&G.muted()&&G.play();return G}};w.setVideoAd=h;w.setVideoAdsById=function(d,m){d=document.getElementById(d);h(d,m)};w.setVideoAds=function(d,m){for(var q=0;q<d.length;q++)h(d[q],
m)};w.setVideoAdPlayer=y;w.createVideo=d;w.create=function(h,t,u,w,y,C,G,E){var x=document.getElementById(t);if(x){var H=x.offsetWidth;if(0!==H){x=0===x.offsetHeight?Math.floor(9*H/16):x.offsetHeight;var A=y?y:[];C=C?C:5;w=w?w:"";y=!1;0<u.indexOf("//www.youtube.com")?y=q(h,t,u,H,x,A,C,"Skip Ad",G,E):0<u.indexOf("//www.facebook.com")?y=v(h,t,u,H,x,A,C,"Skip Ad",G,E):0<u.indexOf("//www.dailymotion.com")?y=B(h,t,u,H,x,A,C,"Skip Ad",G,E):0<u.indexOf("//vimeo.com")?y=m(h,t,u,H,x,A,C,"Skip Ad",G,E):0<u.lastIndexOf(".mp4")?
y=d(h,t,u,!1,!1,w,H,x,A,C,"Skip Ad",G,E):0<u.lastIndexOf(".webm")?y=d(h,t,!1,u,!1,w,H,x,A,C,"Skip Ad",G,E):0<u.lastIndexOf(".m3u8")&&(y=d(h,t,!1,!1,u,w,H,x,A,C,"Skip Ad",G,E));window.mediaPlayer1Configs&&(h=window.mediaPlayer1Configs,h.watermarkImage&&h.watermarkUrl&&h.watermarkPosition&&y.watermark({image:h.watermarkImage,url:h.watermarkUrl,position:h.watermarkPosition}));return y}}};window.MediaPlayerOne=w;window.HadarOnePlayer=w;setTimeout(function(){"function"===typeof window.mediaPlayerOneReady&&
window.mediaPlayerOneReady();"function"===typeof window.mediaPlayerTracking&&window.mediaPlayerTracking()},123)})(window.videojs,window.VASTPlayer);
